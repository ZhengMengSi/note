sap.ui.define(["sap/base/util/ObjectPath","sap/base/util/extend","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/ushell/ui/footerbar/AddBookmarkButton","sap/suite/ui/commons/collaboration/ServiceContainer","sap/ui/core/CustomData"],function(e,t,a,n,i,s){"use strict";var r={};var o;function u(){var e=sap.ushell&&sap.ushell.Container;return e?new Promise(function(t){e.getFLPUrlAsync(true).done(function(e){t(e)})}):Promise.resolve(document.URL)}r.getCurrentUrl=u;r.setStaticShareData=function(t,a){var n=sap.ui.getCore().getLibraryResourceBundle("sap.m");a.setProperty("/emailButtonText",n.getText("SEMANTIC_CONTROL_SEND_EMAIL"));a.setProperty("/jamButtonText",n.getText("SEMANTIC_CONTROL_SHARE_IN_JAM"));var i=e.get("sap.ushell.Container.getUser");a.setProperty("/jamVisible",!!i&&i().isJamActive())};r.openJamShareDialog=function(e){u().then(function(t){var a=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:t,share:e}}});a.open()})};r.openSharePopup=function(e,t,a){var u;a.onCancelPressed=function(){u.close()};e.getDialogFragmentAsync("sap.suite.ui.generic.template.fragments.ShareSheet",a,"share",r.setStaticShareData,true).then(function(e){u=e;var r=u.getModel("share");a.getModelData().then(function(e){r.setData(e,true);var a=2;if(!r.getData().jamVisible){a=1}i.getServiceAsync().then(function(e){var i=e.getOptions();if(i.length>0){i.forEach(function(e){if(e.subOptions&&e.subOptions.length>1){var t=[];e.subOptions.forEach(function(e){var a=new sap.m.MenuItem({text:e.text,icon:e.icon,press:this.menuItemPress});a.addCustomData(new s({key:"data",value:e}));t.push(a)}.bind(this));u.insertItem(new sap.m.MenuItem({text:e.text,icon:e.icon,items:t}),a)}else{var n=new sap.m.MenuItem({text:e.text,icon:e.icon,press:this.menuItemPress});n.addCustomData(new s({key:"data",value:e}));u.insertItem(n,a)}a++}.bind(this))}o=new n("",{customUrl:r.getData().customUrl,serviceUrl:r.getData().serviceUrl,title:r.getData().title,subtitle:r.getData().subtitle,tileIcon:r.getData().icon});r.setProperty("/tileVisible",o.getEnabled());r.setProperty("/tileIcon",o.getIcon());r.setProperty("/tileText",o.getText());u.openBy(t)}.bind(this))}.bind(this))}.bind(this))};r.menuItemPress=function(){i.getServiceAsync().then(function(e){var t=this.getModel("share");var a="",n="";if(t.getData().subtitle!==undefined){a=t.getData().appTitle;n=t.getData().title+(t.getData().subtitle.length>0?" - "+t.getData().subtitle:"")}else{a=t.getData().title}var i={url:t.getData().currentUrl,appTitle:a,subTitle:n};e.share(this.getCustomData()[0].getValue(),i)}.bind(this))};r.fireBookMarkPress=function(){o.firePress()};r.getCustomUrl=function(){if(!window.hasher){sap.ui.require("sap/ui/thirdparty/hasher")}var e=window.hasher.getHash();return e?"#"+e:window.location.href};r.openMSTeamsShareDialog=function(e,t){var a=window.open("","ms-teams-share-popup","width=700,height=600");a.opener=null;a.location="https://teams.microsoft.com/share?msgText="+encodeURIComponent(e)+"&href="+encodeURIComponent(t)};return r});
//# sourceMappingURL=ShareUtils.js.map