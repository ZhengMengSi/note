/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/util/ObjectPath","sap/fe/core/buildingBlocks/BuildingBlock","sap/fe/core/buildingBlocks/BuildingBlockRuntime","sap/ui/core/Core","sap/ushell/ui/footerbar/AddBookmarkButton"],function(t,e,n,r,i){"use strict";var a,o,u,s,l,c,p,f,d,b,m,h,v;var _={};var g=n.xml;var M=e.xmlAttribute;var O=e.defineBuildingBlock;var y=e.BuildingBlockBase;function B(t,e){if(!e){e=t.slice(0)}return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function S(t,e,n,r){if(!n)return;Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function A(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function I(t,e){t.prototype=Object.create(e.prototype);t.prototype.constructor=t;x(t,e)}function x(t,e){x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function t(e,n){e.__proto__=n;return e};return x(t,e)}function E(t,e,n,r,i){var a={};Object.keys(r).forEach(function(t){a[t]=r[t]});a.enumerable=!!a.enumerable;a.configurable=!!a.configurable;if("value"in a||a.initializer){a.writable=true}a=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},a);if(i&&a.initializer!==void 0){a.value=a.initializer?a.initializer.call(i):void 0;a.initializer=undefined}if(a.initializer===void 0){Object.defineProperty(t,e,a);a=null}return a}function P(t,e){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}var T=(a=O({name:"Share",namespace:"sap.fe.macros.internal",publicNamespace:"sap.fe.macros"}),o=M({type:"string",required:true,isPublic:true}),u=M({type:"boolean",defaultValue:true,isPublic:true}),a(s=(l=function(e){I(n,e);function n(t,n,r){var i;i=e.call(this,t,n,r)||this;S(i,"id",c,A(i));S(i,"visible",p,A(i));i._appComponent=r.appComponent;i._defaultShareOptions=i._getDefaultShareOptions();return i}_=n;var a=n.prototype;a._createMenuButton=function t(){return g(f||(f=B(['\n\t\t\t<MenuButton \n\t\t\t\txmlns="sap.m"\n\t\t\t\ticon="sap-icon://action"\n\t\t\t\tvisible="','"\n\t\t\t\ttooltip="{sap.fe.i18n>M_COMMON_SAPFE_ACTION_SHARE} (Ctrl+Shift+S)"\n\t\t\t>\n\t\t\t\t<menu>\n\t\t\t\t\t',"\n\t\t\t\t</menu>\n\t\t\t</MenuButton>\n\t\t"])),this.visible,this._createMenu())};a._createMenu=function t(){return g(d||(d=B(["\n\t\t\t<Menu>\n\t\t\t\t","\n\t\t\t</Menu>\t\t\n\t\t"])),this._createMenuItems())};a._createMenuItems=function t(){var e=this;var n="";this._defaultShareOptions.forEach(function(t){n+=e._createMenuItem(t)});return n};a._createMenuItem=function t(e){return g(b||(b=B(['\n\t\t\t<MenuItem text="','" icon="','" press="','">\n\t\t\t\t',"\n\t\t\t</MenuItem>\n\t\t"])),e.text,e.icon,e.press,this._addMenuItemDependents(e.type))};a._addMenuItemDependents=function t(e){if(e==="saveAsTile"){return g(m||(m=B(['\n\t\t\t\t<dependents>\n\t\t\t\t\t<footerbar:AddBookmarkButton \n\t\t\t\t\t\txmlns:footerbar="sap.ushell.ui.footerbar"\n\t\t\t\t\t\tvisible="false"\n\t\t\t\t\t/>\n\t\t\t\t</dependents>\n\t\t\t'])))}else{return g(h||(h=B([""])))}};a._getDefaultShareOptions=function e(){var n=this._appComponent;var a=r.getLibraryResourceBundle("sap.fe.core");var o=[{type:"email",text:a.getText("T_SEMANTIC_CONTROL_SEND_EMAIL"),icon:"sap-icon://email",press:".share._triggerEmail()"}];var u=t.get("sap.ushell.Container.getUser");if(!!u&&u().isJamActive()){o.push({type:"jam",text:a.getText("T_COMMON_SAPFE_SHARE_JAM"),icon:"sap-icon://share-2",press:".share._triggerShareToJam()"})}var s=new i;var l=n.getShellServices();if(l.hasUShell()&&s.getEnabled()){o.push({type:"saveAsTile",text:s.getText(),icon:s.getIcon(),press:".share._saveAsTile(${$source>})"})}s.destroy();return o};a.getTemplate=function t(){return g(v||(v=B(['\n\t\t\t<macro:ShareAPI\n\t\t\t\txmlns:macro="sap.fe.macros.share"\n\t\t\t\tid="','"\n\t\t\t>\n\t\t\t\t ',"\n\t\t\t</macro:ShareAPI>\n\t\t"])),this.id,this._createMenuButton())};return n}(y),c=E(l.prototype,"id",[o],{configurable:true,enumerable:true,writable:true,initializer:null}),p=E(l.prototype,"visible",[u],{configurable:true,enumerable:true,writable:true,initializer:null}),l))||s);_=T;return _},false);
//# sourceMappingURL=Share.metadata.js.map