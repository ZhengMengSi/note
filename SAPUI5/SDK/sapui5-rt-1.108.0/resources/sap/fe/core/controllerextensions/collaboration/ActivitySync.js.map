{"version":3,"file":"ActivitySync.js","names":["sap","ui","define","CommonUtils","ActivityBase","CollaborationCommon","MessageBox","_exports","CollaborationUtils","Activity","isCollaborationConnected","initializeCollaboration","endCollaboration","broadcastCollaborationMessage","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","MYACTIVITY","ACTIVEUSERS","ACTIVITIES","isConnected","control","internalModel","getModel","send","action","content","clientContent","Array","isArray","join","LiveChange","myActivity","getProperty","setProperty","getWebSocketBaseURL","bindingContext","getMetaModel","getObject","isCollaborationEnabled","view","getBindingContext","connect","me","getMe","Promise","resolve","webSocketBaseURL","serviceUrl","getServiceUrl","requestProperty","then","sDraftUUID","message","messageReceive","e","reject","disconnect","_message$clientConten","_activities","activeUsers","activities","activityKey","metaPath","getMetaPath","userAction","clientAction","sender","id","userID","name","userDescription","initials","formatInitials","color","getUserColor","mactivity","Join","JoinEcho","findIndex","user","unshift","Leave","allActivities","removeUserActivities","bag","activity","p","Change","metaPaths","split","map","path","currentMetaPath","_message$clientConten2","_currentActivities","nesteedMessage","currentActivities","getActivityKey","update","Create","Delete","Activate","information","getText","navigate","Discard","initJSONModel","parts","concat","slice","Undo","a","appComponent","getAppComponent","metaModel","currentPage","getCurrentPage","sideEffectsService","getSideEffectsService","currentContext","currentPath","getPath","changedDocument","deletedObjects","parentDeletedIndex","deletedObject","startsWith","onClose","targetContext","bindContext","getBoundContext","getController","_routing","navigateBackFromContext","activityPath","replace","sideEffects","$PropertyPath","entityType","getEntityTypeFromContext","entityTypeSideEffects","getODataEntitySideEffects","relevantSideEffects","fromEntries","entries","x","_x$1$SourceProperties","SourceProperties","TargetProperties","targetProperty","requestSideEffects","editFlow","updateDocument","routing","getCurrentPageView","substring","lastIndexOf"],"sources":["ActivitySync-dbg.js"],"mappings":"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"}