/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/converters/annotations/DataField","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/helpers/BindingHelper","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/IssueManager","sap/fe/core/converters/helpers/Key","sap/fe/core/formatters/TableFormatter","sap/fe/core/formatters/TableFormatterTypes","sap/fe/core/helpers/BindingToolkit","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/DisplayModeFormatter","sap/fe/core/templating/EntitySetHelper","sap/fe/core/templating/PropertyHelper","sap/fe/macros/internal/helpers/ActionHelper","../../helpers/Aggregation","../../helpers/DataFieldHelper","../../helpers/ID","../../ManifestSettings","./Criticality","./table/StandardActions"],function(e,t,n,a,i,o,r,l,v,u,d,s,c,f,p,g,m,y,b,h,T,I){"use strict";var P={};var D=I.isInDisplayMode;var A=I.isDraftOrStickySupported;var F=I.getStandardActionPaste;var S=I.getStandardActionMassEdit;var C=I.getStandardActionDelete;var O=I.getStandardActionCreate;var E=I.getRestrictions;var M=I.getMassEditVisibility;var U=I.getInsertUpdateActionsTemplating;var w=I.getDeleteVisibility;var N=I.getCreationRow;var x=I.getCreateVisibility;var $=I.generateStandardActionsContext;var V=T.getMessageTypeFromCriticalityType;var j=h.VisualizationType;var k=h.VariantManagementType;var L=h.TemplateType;var R=h.SelectionMode;var H=h.Importance;var B=h.HorizontalAlign;var z=h.CreationMode;var G=h.AvailabilityType;var K=h.ActionType;var W=b.getTableID;var q=y.isReferencePropertyStaticallyHidden;var Q=m.AggregationHelper;var _=p.isProperty;var Y=p.isPathExpression;var J=p.isNavigationProperty;var X=p.getTargetValueOnDataPoint;var Z=p.getAssociatedUnitProperty;var ee=p.getAssociatedTimezoneProperty;var te=p.getAssociatedCurrencyProperty;var ne=f.getNonSortablePropertiesRestrictions;var ae=c.getDisplayMode;var ie=c.EDM_TYPE_MAPPING;var oe=s.isPathUpdatable;var re=s.isPathSearchable;var le=s.isPathDeletable;var ve=s.getTargetObjectPath;var ue=s.enhanceDataModelPath;var de=d.replaceSpecialChars;var se=v.resolveBindingString;var ce=v.pathInModel;var fe=v.or;var pe=v.not;var ge=v.isConstant;var me=v.ifElse;var ye=v.getExpressionFromAnnotation;var be=v.formatResult;var he=v.equal;var Te=v.constant;var Ie=v.compileExpression;var Pe=v.and;var De=l.MessageType;var Ae=o.KeyHelper;var Fe=i.IssueType;var Se=i.IssueSeverity;var Ce=i.IssueCategoryType;var Oe=i.IssueCategory;var Ee=a.Placement;var Me=a.insertCustomElements;var Ue=n.UI;var we=n.Entity;var Ne=t.removeDuplicateActions;var xe=t.isActionNavigable;var $e=t.getActionsFromManifest;var Ve=e.isDataFieldTypes;var je=e.isDataFieldForActionAbstract;var ke=e.isDataFieldAlwaysHidden;var Le=e.getSemanticObjectPath;var Re=e.getDataFieldDataType;var He=e.collectRelatedPropertiesRecursively;var Be=e.collectRelatedProperties;function ze(e,t){return We(e)||Ke(e,t)||Ze(e,t)||Ge()}function Ge(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ke(e,t){var n=e==null?null:typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n==null)return;var a=[];var i=true;var o=false;var r,l;try{for(n=n.call(e);!(i=(r=n.next()).done);i=true){a.push(r.value);if(t&&a.length===t)break}}catch(e){o=true;l=e}finally{try{if(!i&&n["return"]!=null)n["return"]()}finally{if(o)throw l}}return a}function We(e){if(Array.isArray(e))return e}function qe(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ze(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var a=0;var i=function(){};return{s:i,n:function(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,r=false,l;return{s:function(){n=n.call(e)},n:function(){var e=n.next();o=e.done;return e},e:function(e){r=true;l=e},f:function(){try{if(!o&&n.return!=null)n.return()}finally{if(r)throw l}}}}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach(function(t){Ye(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ye(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function Je(e){return tt(e)||et(e)||Ze(e)||Xe()}function Xe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ze(e,t){if(!e)return;if(typeof e==="string")return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}function et(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tt(e){if(Array.isArray(e))return nt(e)}function nt(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,a=new Array(t);n<t;n++){a[n]=e[n]}return a}var at;(function(e){e["Default"]="Default";e["Annotation"]="Annotation";e["Slot"]="Slot"})(at||(at={}));function it(e,t,n,a){var i=Dt(e,t,n);var o=i.tableActions;var r=i.hiddenTableActions;var l=$e(n.getManifestControlConfiguration(t).actions,n,o,a,true,r);var v=Me(o,l.actions,{isNavigable:"overwrite",enableOnSelect:"overwrite",enableAutoScroll:"overwrite",enabled:"overwrite",visible:"overwrite",defaultValuesExtensionFunction:"overwrite",command:"overwrite"});return{actions:v,commandActions:l.commandActions}}P.getTableActions=it;function ot(e,t,n,a){var i=Xt(e,t,n);var o=tn(n.getManifestControlConfiguration(t).columns,i,n,n.getAnnotationEntityType(e),a);return Me(i,o,{width:"overwrite",importance:"overwrite",horizontalAlign:"overwrite",availability:"overwrite",isNavigable:"overwrite",settings:"overwrite",formatOptions:"overwrite"})}P.getTableColumns=ot;var rt=function(e,t,n){var a=new Q(e,n);function i(e){return t.find(function(t){var n=t;return n.propertyInfos===undefined&&n.relativePath===e})}if(!a.isAnalyticsSupported()){return undefined}var o=new Set;t.forEach(function(e){var t=e;if(t.unit){o.add(t.unit)}});var r=a.getCustomAggregateDefinitions();var l={};r.forEach(function(e){var t=a._entityType.entityProperties.find(function(t){return t.name===e.qualifier});if(t){var n,i;var o=(n=e.annotations)===null||n===void 0?void 0:(i=n.Aggregation)===null||i===void 0?void 0:i.ContextDefiningProperties;l[t.name]=o?o.map(function(e){return e.value}):[]}});var v={};t.forEach(function(e){var t=e;if(t.propertyInfos===undefined&&t.relativePath){var n=l[t.relativePath];if(n&&!o.has(t.name)&&!t.isDataPointFakeTargetProperty){v[t.name]={defaultAggregate:{},relativePath:t.relativePath};var a=[];n.forEach(function(e){var t=i(e);if(t){a.push(t.name)}});if(a.length){v[t.name].defaultAggregate.contextDefiningProperties=a}}}});return v};P.getAggregateDefinitionsFromEntityType=rt;function lt(e,t,n,a){if(e.control.type==="AnalyticalTable"){var i=rt(t,e.columns,n),o=new Q(t,n);if(i){e.enableAnalytics=true;e.aggregates=i;var r=o.getAllowedTransformations();e.enableAnalyticsSearch=r?r.indexOf("search")>=0:true;e.annotation.groupConditions=ln(a,e.columns,e.control.type);e.annotation.aggregateConditions=vn(a,e.columns)}e.control.type="GridTable"}else if(e.control.type==="ResponsiveTable"){e.annotation.groupConditions=ln(a,e.columns,e.control.type)}}function vt(e,t){var n=e.getManifestWrapper();if(t&&n.getNavigationConfiguration(t)){var a=n.getNavigationConfiguration(t);if(Object.keys(a).length>0){return t}}var i=e.getDataModelObjectPath();var o=e.getContextPath();var r=n.getNavigationConfiguration(o);if(r&&Object.keys(r).length>0){return o}return i.targetEntitySet?i.targetEntitySet.name:i.startingEntitySet.name}function ut(e,t){function n(e){return t.find(function(t){var n=t;return n.propertyInfos===undefined&&n.relativePath===e})}t.forEach(function(t){var a=t;if(a.propertyInfos===undefined&&a.relativePath){var i=e.entityProperties.find(function(e){return e.name===a.relativePath});if(i){var o,r,l;var v=te(i)||Z(i);var u=ee(i);var d=i===null||i===void 0?void 0:(o=i.annotations)===null||o===void 0?void 0:(r=o.Common)===null||r===void 0?void 0:r.Timezone;if(v){var s=n(v.name);a.unit=s===null||s===void 0?void 0:s.name}else{var c,f,p,g;var m=(i===null||i===void 0?void 0:(c=i.annotations)===null||c===void 0?void 0:(f=c.Measures)===null||f===void 0?void 0:f.ISOCurrency)||(i===null||i===void 0?void 0:(p=i.annotations)===null||p===void 0?void 0:(g=p.Measures)===null||g===void 0?void 0:g.Unit);if(m){a.unitText="".concat(m)}}if(u){var y=n(u.name);a.timezone=y===null||y===void 0?void 0:y.name}else if(d){a.timezoneText=d.toString()}var b=ae(i),h=(l=i.annotations.Common)===null||l===void 0?void 0:l.Text;if(Y(h)&&b!=="Value"){var T=n(h.path);if(T&&T.name!==a.name){a.textArrangement={textProperty:T.name,mode:b}}}}}})}P.updateLinkedProperties=ut;function dt(e){var t,n,a,i,o,r,l,v,u,d,s,c,f;var p=(t=e.getAnnotationEntityType())===null||t===void 0?void 0:(n=t.annotations)===null||n===void 0?void 0:(a=n.UI)===null||a===void 0?void 0:(i=a.HeaderInfo)===null||i===void 0?void 0:(o=i.Title)===null||o===void 0?void 0:(r=o.Value)===null||r===void 0?void 0:r.path;var g=(l=e.getAnnotationEntityType())===null||l===void 0?void 0:(v=l.annotations)===null||v===void 0?void 0:(u=v.Common)===null||u===void 0?void 0:u.SemanticKey;var m=e===null||e===void 0?void 0:(d=e.getAnnotationEntityType())===null||d===void 0?void 0:(s=d.annotations)===null||s===void 0?void 0:(c=s.UI)===null||c===void 0?void 0:(f=c.HeaderInfo)===null||f===void 0?void 0:f.TypeName;var y=[];if(g){g.forEach(function(e){y.push(e.value)})}return{headerInfoTitlePath:p,semanticKeyColumns:y,headerInfoTypeName:m}}function st(e,t,n,a,i,o){var r=An(e,t,n,i);var l=sn(t),v=l.navigationPropertyPath;var u=vt(n,v);var d=n.getManifestWrapper().getNavigationConfiguration(u);var s=ot(e,t,n,d);var c=ft(e,n);var f=dt(n);var p=it(e,t,n,d);var g={type:j.Table,annotation:un(e,t,n,r,s,a,o),control:r,actions:Ne(p.actions),commandActions:p.commandActions,columns:s,operationAvailableMap:JSON.stringify(c),operationAvailableProperties:gt(c,n),headerInfoTitle:f.headerInfoTitlePath,semanticKeys:f.semanticKeyColumns,headerInfoTypeName:f.headerInfoTypeName};ut(n.getAnnotationEntityType(e),s);lt(g,n.getAnnotationEntityType(e),n,a);return g}P.createTableVisualization=st;function ct(e){var t=An(undefined,"",e,false);var n=Ct({},e.getEntityType(),[],[],e,t.type);var a=ft(undefined,e);var i=dt(e);var o={type:j.Table,annotation:un(undefined,"",e,t,n),control:t,actions:[],columns:n,operationAvailableMap:JSON.stringify(a),operationAvailableProperties:gt(a,e),headerInfoTitle:i.headerInfoTitlePath,semanticKeys:i.semanticKeyColumns,headerInfoTypeName:i.headerInfoTypeName};ut(e.getEntityType(),n);lt(o,e.getEntityType(),e);return o}P.createDefaultTableVisualization=ct;function ft(e,t){return g.getOperationAvailableMap(e,"table",t)}function pt(e){var t,n,a;var i=E(e);var o=e.getEntitySet();var r=i.isUpdatable;var l=!ge(r.expression)&&r.navigationExpression._type==="Unresolvable";var v=o===null||o===void 0?void 0:(t=o.annotations.Capabilities)===null||t===void 0?void 0:(n=t.UpdateRestrictions)===null||n===void 0?void 0:(a=n.Updatable)===null||a===void 0?void 0:a.path;return l?v:""}function gt(e,t){var n=new Set;for(var a in e){var i=e[a];if(i===null){n.add(a)}else if(typeof i==="string"){n.add(i)}}if(n.size){var o,r,l,v,u;var d=t.getEntityType();var s=(o=d.annotations)===null||o===void 0?void 0:(r=o.UI)===null||r===void 0?void 0:(l=r.HeaderInfo)===null||l===void 0?void 0:(v=l.Title)===null||v===void 0?void 0:(u=v.Value)===null||u===void 0?void 0:u.path;if(s){n.add(s)}}return Array.from(n).join(",")}function mt(e,t,n,a){var i=[];e.forEach(function(e){var o,r;if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&e!==null&&e!==void 0&&(o=e.ActionTarget)!==null&&o!==void 0&&o.isBound&&t===(e===null||e===void 0?void 0:e.ActionTarget.sourceEntityType)||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&e.RequiresContext&&(e===null||e===void 0?void 0:(r=e.Inline)===null||r===void 0?void 0:r.valueOf())!==true){var l,v,u;if(typeof((l=e.annotations)===null||l===void 0?void 0:(v=l.UI)===null||v===void 0?void 0:(u=v.Hidden)===null||u===void 0?void 0:u.valueOf())==="object"){i.push(he(yt(e,n,a),false))}}});return i}function yt(e,t,n){var a;var i;if((e===null||e===void 0?void 0:e.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForAction"||(e===null||e===void 0?void 0:e.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){var o,r;i=e===null||e===void 0?void 0:(o=e.annotations)===null||o===void 0?void 0:(r=o.UI)===null||r===void 0?void 0:r.Hidden}else{i=e===null||e===void 0?void 0:e.visible}var l;if((a=i)!==null&&a!==void 0&&a.path){l=i.path}else{l=i}if(l){if(e!==null&&e!==void 0&&e.visible){l=l.substring(1,l.length-1)}if(l.indexOf("/")>0){var v;var u=l.split("/");var d=u[0];if((t===null||t===void 0?void 0:(v=t.targetObject)===null||v===void 0?void 0:v._type)==="NavigationProperty"&&t.targetObject.partner===d){return ce(u.slice(1).join("/"))}else{return Te(true)}}else if(n){return ce(l)}else{return Te(true)}}return Te(true)}function bt(e,t){return e.some(function(e){var n,a,i,o,r,l,v;if((e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&(e===null||e===void 0?void 0:(n=e.Inline)===null||n===void 0?void 0:n.valueOf())!==true&&(((a=e.annotations)===null||a===void 0?void 0:(i=a.UI)===null||i===void 0?void 0:(o=i.Hidden)===null||o===void 0?void 0:o.valueOf())===false||((r=e.annotations)===null||r===void 0?void 0:(l=r.UI)===null||l===void 0?void 0:(v=l.Hidden)===null||v===void 0?void 0:v.valueOf())===undefined)){if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){var u;return(e===null||e===void 0?void 0:(u=e.ActionTarget)===null||u===void 0?void 0:u.isBound)&&t===(e===null||e===void 0?void 0:e.ActionTarget.sourceEntityType)}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){return e.RequiresContext}}return false})}function ht(e){return Object.keys(e).some(function(t){var n;var a=e[t];if(a.requiresSelection&&((n=a.visible)===null||n===void 0?void 0:n.toString())==="true"){return true}return false})}function Tt(e){var t=[];if(e){Object.keys(e).forEach(function(n){var a=e[n];if(a.requiresSelection===true&&a.visible!==undefined){if(typeof a.visible==="string"){var i;t.push(se(a===null||a===void 0?void 0:(i=a.visible)===null||i===void 0?void 0:i.valueOf()))}}})}return t}function It(e){var t=le(e.getDataModelObjectPath());var n=oe(e.getDataModelObjectPath());return{isDeletable:!(ge(t)&&t.value===false),isUpdatable:!(ge(n)&&n.value===false)}}P.getCapabilityRestriction=It;function Pt(e,t,n,a,i,o){var r;var l=arguments.length>6&&arguments[6]!==undefined?arguments[6]:Te(false);if(!e){return R.None}var v=n.getManifestControlConfiguration(t);var u=(r=v.tableSettings)===null||r===void 0?void 0:r.selectionMode;var d=[],s=[];var c=$e(n.getManifestControlConfiguration(t).actions,n,[],undefined,false);var f,p;if(n.getTemplateType()===L.ObjectPage){f=le(n.getDataModelObjectPath());p=f?Ie(f,true):f}var g=!ge(l)||l.value!==false;if(u&&u===R.None&&o){if(n.getTemplateType()===L.ObjectPage&&g){return Ie(me(Pe(Ue.IsEditable,l),Te("Multi"),me(o,Te("Multi"),Te("None"))))}else if(g){return R.Multi}return Ie(me(o,Te("Multi"),Te("None")))}if(!u||u===R.Auto){u=R.Multi}if(g){u=u===R.Single?R.Single:R.Multi}if(bt(e,n.getEntityType())||ht(c.actions)){return u}d=mt(e,n.getEntityType(),n.getDataModelObjectPath(),a);s=Tt(c.actions);if(d.length===0&&s.length===0&&(o||g)){if(!a){if(i.isDeletable||p!=="false"||g){var m=fe(o||true,l);return Ie(me(Pe(Ue.IsEditable,m),Te(u),Te(R.None)))}else{return R.None}}else if(g){return u}else if(i.isDeletable&&o){return Ie(me(o,Te(u),Te("None")))}else{return R.None}}else if(!a){if(i.isDeletable||p!=="false"||g){var y=me(g&&!i.isDeletable,l,Te(true));return Ie(me(Pe(Ue.IsEditable,y),Te(u),me(fe.apply(void 0,Je(d.concat(s))),Te(u),Te(R.None))))}else{return Ie(me(fe.apply(void 0,Je(d.concat(s))),Te(u),Te(R.None)))}}else if(i.isDeletable||g){return u}else{return Ie(me(fe.apply(void 0,Je(d.concat(s)).concat([l])),Te(u),Te(R.None)))}}P.getSelectionMode=Pt;function Dt(e,t,n){var a=[];var i=[];if(e){e.forEach(function(e){var t,o,r,l,v,u,d,s,c,f;var p;if(je(e)&&!(((t=e.annotations)===null||t===void 0?void 0:(o=t.UI)===null||o===void 0?void 0:(r=o.Hidden)===null||r===void 0?void 0:r.valueOf())===true)&&!e.Inline&&!e.Determining){var g=Ae.generateKeyFromDataField(e);switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":p={type:K.DataFieldForAction,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:g,visible:Ie(pe(he(ye((l=e.annotations)===null||l===void 0?void 0:(v=l.UI)===null||v===void 0?void 0:v.Hidden,[],undefined,n.getRelativeModelPathFunction()),true))),isNavigable:true};break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":p={type:K.DataFieldForIntentBasedNavigation,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:g,visible:Ie(pe(he(ye((u=e.annotations)===null||u===void 0?void 0:(d=u.UI)===null||d===void 0?void 0:d.Hidden,[],undefined,n.getRelativeModelPathFunction()),true)))};break;default:break}}else if(((s=e.annotations)===null||s===void 0?void 0:(c=s.UI)===null||c===void 0?void 0:(f=c.Hidden)===null||f===void 0?void 0:f.valueOf())===true){i.push({type:K.Default,key:Ae.generateKeyFromDataField(e)})}if(p){a.push(p)}})}return{tableActions:a,hiddenTableActions:i}}function At(e,t,n){var a=De.None;if(e){if(typeof e==="object"){a=ye(e)}else{a=V(e)}}var i=[];n===null||n===void 0?void 0:n.keys.forEach(function(e){if(e.name!=="IsActiveEntity"){i.push(ce(e.name,undefined))}});return be([a,ce("filteredMessages","internal"),t&&we.HasActive,t&&we.IsActive,"".concat(t)].concat(i),r.rowHighlighting,n)}function Ft(e,t,n,a,i){var o;var r=(a===null||a===void 0?void 0:a.create)||(a===null||a===void 0?void 0:a.detail);var l=n.getManifestControlConfiguration(i);var v=l&&l.tableSettings||{};if(r!==null&&r!==void 0&&r.outbound&&r.outboundDetail&&a!==null&&a!==void 0&&a.create){return{mode:"External",outbound:r.outbound,outboundDetail:r.outboundDetail,navigationSettings:a}}var u;if(e){var d,s,c;var f=(d=n.getEntitySet())===null||d===void 0?void 0:d.annotations;var p=f===null||f===void 0?void 0:f.Common,g=f===null||f===void 0?void 0:f.Session;u=(p===null||p===void 0?void 0:(s=p.DraftRoot)===null||s===void 0?void 0:s.NewAction)||(g===null||g===void 0?void 0:(c=g.StickySessionSupported)===null||c===void 0?void 0:c.NewAction);if(t.creationMode===z.CreationRow&&u){throw Error("Creation mode '".concat(z.CreationRow,"' can not be used with a custom 'new' action (").concat(u,")"))}if(r!==null&&r!==void 0&&r.route){var m;return{mode:t.creationMode,append:t.createAtEnd,newAction:(m=u)===null||m===void 0?void 0:m.toString(),navigateToTarget:t.creationMode===z.NewPage?r.route:undefined}}}if(t.creationMode===z.NewPage){var y;t.creationMode=z.Inline;if(((y=v.creationMode)===null||y===void 0?void 0:y.createAtEnd)===undefined){t.createAtEnd=false}}return{mode:t.creationMode,append:t.createAtEnd,newAction:(o=u)===null||o===void 0?void 0:o.toString()}}var St=function(e,t,n,a,i){var o,l;var v=Te(De.None);var d=n.getEntityType();if(a&&e){var s,c;l=((s=a.display)===null||s===void 0?void 0:s.target)||((c=a.detail)===null||c===void 0?void 0:c.outbound);if(l){o=".handlers.onChevronPressNavigateOutBound( $controller ,'"+l+"', ${$parameters>bindingContext})"}else if(d){var f;var p=n.getEntitySet();l=(f=a.detail)===null||f===void 0?void 0:f.route;if(l&&!u.isSingleton(p)){var g,m;v=At((g=e.annotations)===null||g===void 0?void 0:(m=g.UI)===null||m===void 0?void 0:m.Criticality,!!u.getDraftRoot(p)||!!u.getDraftNode(p),d);o="API.onTableRowPress($event, $controller, ${$parameters>bindingContext}, { callExtension: true, targetPath: '"+i+"', editable : "+(u.getDraftRoot(p)||u.getDraftNode(p)?"!${$parameters>bindingContext}.getProperty('IsActiveEntity')":"undefined")+"})"}else{var y,b;v=At((y=e.annotations)===null||y===void 0?void 0:(b=y.UI)===null||b===void 0?void 0:b.Criticality,false,d)}}}var h=be([ce("/deepestPath","internal")],r.navigatedRow,d);return{press:o,action:o?"Navigation":undefined,rowHighlighting:Ie(v),rowNavigated:Ie(h),visible:Ie(pe(Ue.IsInactive))}};var Ct=function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var a=arguments.length>3?arguments[3]:undefined;var i=arguments.length>4?arguments[4]:undefined;var o=arguments.length>5?arguments[5]:undefined;var r=n;var l=new Q(t,i);t.entityProperties.forEach(function(t){var v=n.some(function(e){return e.name===t.name});if(!t.targetType&&!v&&t.annotations.UI&&!q(t.annotations.UI.DataFieldDefault)){var u=Be(t.name,t,i,true,o);var d=Object.keys(u.properties);var s=Object.keys(u.additionalProperties);var c=Ot(t,i.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),t.name,true,true,a,l,i);var f=i.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[i.getEntityType()])[0];var p=qt(c.name,f,false,null);if(Object.keys(p).length>0){c.formatOptions=_e({},p)}if(d.length>0){c.propertyInfos=d;c.exportSettings=_e(_e({},c.exportSettings),{},{template:u.exportSettingsTemplate,wrap:u.exportSettingsWrapping});c.exportSettings.type=dn(t.type,d.length>1);if(u.exportUnitName){c.exportSettings.unitProperty=u.exportUnitName;c.exportSettings.type="Currency"}else if(u.exportUnitString){c.exportSettings.unit=u.exportUnitString}if(u.exportTimezoneName){c.exportSettings.timezoneProperty=u.exportTimezoneName;c.exportSettings.utc=false}else if(u.exportTimezoneString){c.exportSettings.timezone=u.exportTimezoneString}d.forEach(function(t){e[t]=u.properties[t]})}if(s.length>0){c.additionalPropertyInfos=s;s.forEach(function(t){e[t]=u.additionalProperties[t]})}r.push(c)}else if(ae(t)==="Description"){r.push(Ot(t,i.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),t.name,false,false,a,l,i))}});var v=$t(e,r,a,i,t);return r.concat(v)};P.getColumnsFromEntityType=Ct;var Ot=function(e,t,n,a,i,o,r,l){var v,u,d,s,c,f,p,g,m,y,b;var h=a?n:"Property::".concat(n);var T=(a?"DataField::":"Property::")+de(n);var I=Le(l,e);var P=((v=e.annotations)===null||v===void 0?void 0:(u=v.UI)===null||u===void 0?void 0:(d=u.Hidden)===null||d===void 0?void 0:d.valueOf())===true;var D=e.name?Lt(e.name,true,false):undefined;var A=D!=e.name;var F=h.indexOf("@com.sap.vocabularies.UI.v1.DataPoint")>-1;var S=dn(e.type);var C=e.type==="Edm.Date"?"YYYY-MM-DD":undefined;var O=Re(e);var E=!F?Fn(e,O):undefined;var M=l.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[l.getEntityType()])[0];var U=!P&&o.indexOf(n)===-1&&!F;var w=!F?{className:e.type||O,oFormatOptions:E.formatOptions,oConstraints:E.constraints}:undefined;var N=F?{template:X(e)}:{type:S,inputFormat:C,scale:e.scale,delimiter:e.type==="Edm.Int64"};if(!F){var x,$,V,j,k,L;var R=te(e)||Z(e);var H=ee(e);var B=(e===null||e===void 0?void 0:(x=e.annotations)===null||x===void 0?void 0:($=x.Measures)===null||$===void 0?void 0:$.ISOCurrency)||(e===null||e===void 0?void 0:(V=e.annotations)===null||V===void 0?void 0:(j=V.Measures)===null||j===void 0?void 0:j.Unit);var z=e===null||e===void 0?void 0:(k=e.annotations)===null||k===void 0?void 0:(L=k.Common)===null||L===void 0?void 0:L.Timezone;if(R){N.unitProperty=R.name;N.type="Currency"}else if(B){N.unit="".concat(B)}if(H){N.timezoneProperty=H.name;N.utc=false}else if(z){N.timezone=z.toString()}}var K=Dn(n,l);var W={key:T,type:at.Annotation,label:wt(e,A),groupLabel:A?wt(e):null,group:A?D:null,annotationPath:t,semanticObjectPath:I,availability:!i||P||F?G.Hidden:G.Adaptation,name:h,relativePath:F?((s=e.annotations)===null||s===void 0?void 0:(c=s.UI)===null||c===void 0?void 0:(f=c.DataFieldDefault)===null||f===void 0?void 0:(p=f.Target)===null||p===void 0?void 0:(g=p.$target)===null||g===void 0?void 0:(m=g.Value)===null||m===void 0?void 0:m.path)||e.Value.path:n,sortable:U,isGroupable:r.isAnalyticsSupported()?r.isPropertyGroupable(e):U,isKey:e.isKey,isDataPointFakeTargetProperty:F,exportSettings:N,caseSensitive:Ht(l),typeConfig:w,visualSettings:F?{widthCalculation:null}:undefined,importance:Jt((y=e.annotations)===null||y===void 0?void 0:(b=y.UI)===null||b===void 0?void 0:b.DataFieldDefault,M),additionalLabels:K};var q=Nt(e);if(q){W.tooltip=q}return W};var Et=function(e){switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":return!!e.Inline;case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":return true;default:}};var Mt=function(e,t){var n,a,i,o,r,l;var v=e.targetObject;var u;if(v){switch(v.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataPointType":u=v.Value.$target;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":if((v===null||v===void 0?void 0:(n=v.Target)===null||n===void 0?void 0:(a=n.$target)===null||a===void 0?void 0:a.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){var d;u=(d=v.Target.$target)===null||d===void 0?void 0:d.Value.$target}break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForAction":default:u=undefined}}var s=t!==null&&t!==void 0&&t.isAnalytics?Ue.IsExpanded:Te(false);var c=t!==null&&t!==void 0&&t.isAnalytics?he(Ue.NodeLevel,0):Te(false);return Pe.apply(void 0,[pe(he(ye(v===null||v===void 0?void 0:(i=v.annotations)===null||i===void 0?void 0:(o=i.UI)===null||o===void 0?void 0:o.Hidden),true)),me(!!u,u&&pe(he(ye((r=u.annotations)===null||r===void 0?void 0:(l=r.UI)===null||l===void 0?void 0:l.Hidden),true)),true),fe(pe(s),c)])};P._getVisibleExpression=Mt;var Ut=function(e,t){var n,a;var i=[];if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((n=e.Target)===null||n===void 0?void 0:(a=n.$target)===null||a===void 0?void 0:a.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){var o;(o=e.Target.$target.Data)===null||o===void 0?void 0:o.forEach(function(e){i.push(Mt({targetObject:e},t))});return Ie(me(fe.apply(void 0,i),Te(true),Te(false)))}else{return undefined}};var wt=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!e){return undefined}if(_(e)||J(e)){var n,a,i,o,r;var l=(n=e.annotations)===null||n===void 0?void 0:(a=n.UI)===null||a===void 0?void 0:a.DataFieldDefault;if(l&&!l.qualifier&&(i=l.Label)!==null&&i!==void 0&&i.valueOf()){var v;return Ie(ye((v=l.Label)===null||v===void 0?void 0:v.valueOf()))}return Ie(ye(((o=e.annotations.Common)===null||o===void 0?void 0:(r=o.Label)===null||r===void 0?void 0:r.valueOf())||e.name))}else if(Ve(e)){var u,d,s,c,f,p,g,m;if(!!t&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"){var y;return Ie(ye((y=e.Label)===null||y===void 0?void 0:y.valueOf()))}return Ie(ye(((u=e.Label)===null||u===void 0?void 0:u.valueOf())||((d=e.Value)===null||d===void 0?void 0:(s=d.$target)===null||s===void 0?void 0:(c=s.annotations)===null||c===void 0?void 0:(f=c.Common)===null||f===void 0?void 0:(p=f.Label)===null||p===void 0?void 0:p.valueOf())||((g=e.Value)===null||g===void 0?void 0:(m=g.$target)===null||m===void 0?void 0:m.name)))}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var b,h,T,I,P,D,A,F;return Ie(ye(((b=e.Label)===null||b===void 0?void 0:b.valueOf())||((h=e.Target)===null||h===void 0?void 0:(T=h.$target)===null||T===void 0?void 0:(I=T.Value)===null||I===void 0?void 0:(P=I.$target)===null||P===void 0?void 0:(D=P.annotations)===null||D===void 0?void 0:(A=D.Common)===null||A===void 0?void 0:(F=A.Label)===null||F===void 0?void 0:F.valueOf())))}else{var S;return Ie(ye((S=e.Label)===null||S===void 0?void 0:S.valueOf()))}};var Nt=function(e){var t,n;if(!e){return undefined}if(_(e)||(t=e.annotations)!==null&&t!==void 0&&(n=t.Common)!==null&&n!==void 0&&n.QuickInfo){var a,i;return(a=e.annotations)!==null&&a!==void 0&&(i=a.Common)!==null&&i!==void 0&&i.QuickInfo?Ie(ye(e.annotations.Common.QuickInfo.valueOf())):undefined}else if(Ve(e)){var o,r,l,v;return(o=e.Value)!==null&&o!==void 0&&(r=o.$target)!==null&&r!==void 0&&(l=r.annotations)!==null&&l!==void 0&&(v=l.Common)!==null&&v!==void 0&&v.QuickInfo?Ie(ye(e.Value.$target.annotations.Common.QuickInfo.valueOf())):undefined}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var u,d,s,c,f;var p=(u=e.Target)===null||u===void 0?void 0:u.$target;return p!==null&&p!==void 0&&(d=p.Value)!==null&&d!==void 0&&(s=d.$target)!==null&&s!==void 0&&(c=s.annotations)!==null&&c!==void 0&&(f=c.Common)!==null&&f!==void 0&&f.QuickInfo?Ie(ye(p.Value.$target.annotations.Common.QuickInfo.valueOf())):undefined}else{return undefined}};function xt(e,t){return be([ce("semanticKeyHasDraftIndicator","internal"),ce("filteredMessages","internal"),e,t],r.getErrorStatusTextVisibilityFormatter)}P.getRowStatusVisibility=xt;var $t=function(e,t,n,a,i){var o=[];var r={};var l=new Q(i,a);Object.keys(e).forEach(function(i){var v=e[i],u=a.getAbsoluteAnnotationPath(i),d=t.find(function(e){return e.name===i});if(d===undefined){o.push(Ot(v,u,i,true,false,n,l,a))}else if(d.annotationPath!==u||d.propertyInfos){var s="Property::".concat(i);if(!t.some(function(e){return e.name===s})){var c=Ot(v,u,i,false,false,n,l,a);c.isPartOfLineItem=d.isPartOfLineItem;o.push(c);r[i]=s}else if(t.some(function(e){return e.name===s})&&t.some(function(e){var t;return(t=e.propertyInfos)===null||t===void 0?void 0:t.includes(i)})){r[i]=s}}});t.forEach(function(e){var t,n;e.propertyInfos=(t=e.propertyInfos)===null||t===void 0?void 0:t.map(function(e){var t;return(t=r[e])!==null&&t!==void 0?t:e});e.additionalPropertyInfos=(n=e.additionalPropertyInfos)===null||n===void 0?void 0:n.map(function(e){var t;return(t=r[e])!==null&&t!==void 0?t:e})});return o};var Vt=function(e){var t,n,a;if(Ve(e)){var i;return(i=e.Value)===null||i===void 0?void 0:i.path}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&(t=e.Target)!==null&&t!==void 0&&(n=t.$target)!==null&&n!==void 0&&(a=n.Value)!==null&&a!==void 0&&a.path){var o,r;return(o=e.Target)===null||o===void 0?void 0:(r=o.$target)===null||r===void 0?void 0:r.Value.path}else{return Ae.generateKeyFromDataField(e)}};var jt=function(e,t,n){var a;var i=(a=n.getManifestControlConfiguration(t))===null||a===void 0?void 0:a.columns;var o=i&&Object.keys(i);return o&&!!o.find(function(t){return t===e&&i[t].showDataFieldsLabel})};var kt=function(e){var t,n;var a="";switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":a=e===null||e===void 0?void 0:(t=e.Value)===null||t===void 0?void 0:t.path;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":a=e===null||e===void 0?void 0:(n=e.Target)===null||n===void 0?void 0:n.value;break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldWithActionGroup":a=Ae.generateKeyFromDataField(e);break}return a};var Lt=function(e,t,n){var a=t?e.lastIndexOf("/"):e.indexOf("/");if(a===-1){return e}return n?e.substring(a+1,e.length):e.substring(0,a)};var Rt=function(e,t,n){return n.indexOf(t)===-1&&(e.$Type==="com.sap.vocabularies.UI.v1.DataField"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithAction")};var Ht=function(e){var t=Bt(e);return Array.isArray(t)?t.indexOf("tolower")===-1:true};P.isFilteringCaseSensitive=Ht;function Bt(e){var t,n,a,i,o;if(u.isSingleton(e.getEntitySet())){return undefined}var r=(t=e.getEntitySet())===null||t===void 0?void 0:(n=t.annotations)===null||n===void 0?void 0:n.Capabilities;return(r===null||r===void 0?void 0:r.FilterFunctions)||((a=e.getEntityContainer())===null||a===void 0?void 0:(i=a.annotations)===null||i===void 0?void 0:(o=i.Capabilities)===null||o===void 0?void 0:o.FilterFunctions)}function zt(e){return e===undefined?undefined:_e({textLinesEdit:4},e)}function Gt(e,t){var n=[];var a=false;for(var i=0;i<e.length;i++){n.push(e[i].value);if(e[i].value===t){a=true}}return{values:n,semanticKeyFound:a}}function Kt(e,t){var n=false;var a;if(e&&e.length>=1&&t&&t.length>=1){for(var i=0;i<e.length;i++){if([e[i]].some(function(e){return t.indexOf(e)>=0})){n=true;a=e[i];break}}}return{semanticKeyHasPropertyInFieldGroup:n,fieldGroupPropertyPath:a}}function Wt(e,t){var n,a;var i=[];var o={semanticKeyHasPropertyInFieldGroup:false,fieldGroupPropertyPath:undefined};if(e&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((n=e.Target)===null||n===void 0?void 0:(a=n.$target)===null||a===void 0?void 0:a.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){var r;(r=e.Target.$target.Data)===null||r===void 0?void 0:r.forEach(function(e){if((e.$Type==="com.sap.vocabularies.UI.v1.DataField"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")&&e.Value){i.push(e.Value.path)}o=Kt(t,i)})}return{semanticKeyHasPropertyInFieldGroup:o.semanticKeyHasPropertyInFieldGroup,propertyPath:o.fieldGroupPropertyPath}}function qt(e,t,n,a){if(!t){return{}}var i=Gt(t,e);var o=Wt(a,i.values);if(i.semanticKeyFound){var r={hasDraftIndicator:true,semantickeys:i.values,objectStatusTextVisibility:Ie(xt(e,false))};if(n&&o.semanticKeyHasPropertyInFieldGroup){r["objectStatusTextVisibility"]=Ie(xt(e,true));r["fieldGroupDraftIndicatorPropertyPath"]=o.propertyPath}return r}else if(!o.semanticKeyHasPropertyInFieldGroup){return{}}else{return{fieldGroupDraftIndicatorPropertyPath:o.propertyPath,fieldGroupName:e,objectStatusTextVisibility:Ie(xt(e,true))}}}function Qt(e){var t,n;var a=e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance;if(a&&a.includes("UI.ImportanceType/High")){return 3}if(a&&a.includes("UI.ImportanceType/Medium")){return 2}if(a&&a.includes("UI.ImportanceType/Low")){return 1}return 0}function _t(e){var t,n;var a=e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance;return a?a.split("/")[1]:H.None}function Yt(e){if(e&&e.length>0){var t=-1;var n=-1;var a;var i=qe(e),o;try{for(i.s();!(o=i.n()).done;){var r=o.value;n=Qt(r);if(n>t){t=n;a=r}}}catch(e){i.e(e)}finally{i.f()}return _t(a)}return H.None}function Jt(e,t){var n;var a,i;if(t&&t.length>0){i=t.map(function(e){return e.value})}if(!e){return undefined}if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var o=e.Target["$target"]["Data"],r=o&&o.some(function(e){var t,n;return(e===null||e===void 0?void 0:(t=e.Value)===null||t===void 0?void 0:t.path)&&e.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i&&i.includes(e===null||e===void 0?void 0:(n=e.Value)===null||n===void 0?void 0:n.path)});if(r){return H.High}else{var l,v;if(e!==null&&e!==void 0&&(l=e.annotations)!==null&&l!==void 0&&(v=l.UI)!==null&&v!==void 0&&v.Importance){return _t(e)}a=o&&o.filter(function(e){var t,n;return e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance});return Yt(a)}}return e.Value&&e!==null&&e!==void 0&&(n=e.Value)!==null&&n!==void 0&&n.path&&i&&i.includes(e.Value.path)?H.High:_t(e)}P.getImportance=Jt;var Xt=function(e,t,n){var a;var i=n.getAnnotationEntityType(e),o=[],r={},l=ne(n.getEntitySet()),v=n.getManifestControlConfiguration(t),u=(v===null||v===void 0?void 0:(a=v.tableSettings)===null||a===void 0?void 0:a.type)||"ResponsiveTable";var d=n.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[n.getEntityType()])[0];if(e){e.forEach(function(e){var a,i,v,s,c,f,p,g,m;if(!Et(e)){return}var y=Ve(e)&&(a=e.Value)!==null&&a!==void 0&&(i=a.$target)!==null&&i!==void 0&&i.fullyQualifiedName?Le(n,e):undefined;var b=kt(e);var h;var T=He(e,n,u);var I=T.properties;if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((v=e.Target)===null||v===void 0?void 0:(s=v.$target)===null||s===void 0?void 0:s.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){h=Object.keys(T.properties).filter(function(e){var t;var n;if((t=I[e].annotations)!==null&&t!==void 0&&t.UI){var a,i;n=q((a=I[e].annotations)===null||a===void 0?void 0:(i=a.UI)===null||i===void 0?void 0:i.DataFieldDefault)}else{n=q(I[e])}return!n})}else{h=Object.keys(T.properties)}var P=Object.keys(T.additionalProperties);var D=Lt(b,true,false);var A=D!=b;var F=wt(e,A);var S=Vt(e);var C=D.indexOf("@com.sap.vocabularies.UI.v1.FieldGroup")>-1;var O=C?jt(S,t,n):false;var E=Re(e);var M=E==="Edm.Date"?"YYYY-MM-DD":undefined;var U=zt(qt(S,d,C,e));var w;if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((c=e.Target)===null||c===void 0?void 0:(f=c.$target)===null||f===void 0?void 0:f.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){w=Ut(e,U)}var N={template:T.exportSettingsTemplate,wrap:T.exportSettingsWrapping,type:E?dn(E,h.length>1):undefined,inputFormat:M,delimiter:E==="Edm.Int64"};if(T.exportUnitName){N.unitProperty=T.exportUnitName;N.type="Currency"}else if(T.exportUnitString){N.unit=T.exportUnitString}if(T.exportTimezoneName){N.timezoneProperty=T.exportTimezoneName}else if(T.exportTimezoneString){N.timezone=T.exportTimezoneString}var x=E&&Fn(e,E);var $=x?{className:E,oFormatOptions:_e(_e({},U),x.formatOptions),oConstraints:x.constraints}:undefined;var V={};if(!E||!$){V.widthCalculation=null}var j={key:Ae.generateKeyFromDataField(e),type:at.Annotation,label:F,groupLabel:A?wt(e):null,group:A?D:null,FieldGroupHiddenExpressions:w,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),semanticObjectPath:y,availability:ke(e)?G.Hidden:G.Default,name:S,showDataFieldsLabel:O,relativePath:b,sortable:Rt(e,b,l),propertyInfos:h.length?h:undefined,additionalPropertyInfos:P.length>0?P:undefined,exportSettings:N,width:((p=e.annotations)===null||p===void 0?void 0:(g=p.HTML5)===null||g===void 0?void 0:(m=g.CssDefaults)===null||m===void 0?void 0:m.width)||undefined,importance:Jt(e,d),isNavigable:true,formatOptions:U,caseSensitive:Ht(n),typeConfig:$,visualSettings:V,timezoneText:N.timezone,isPartOfLineItem:true};var k=Nt(e);if(k){j.tooltip=k}o.push(j);h.forEach(function(e){r[e]=T.properties[e]});P.forEach(function(e){r[e]=T.additionalProperties[e]})})}return Ct(r,i,o,l,n,u)};var Zt=function(e,t,n,a){var i;if(e){i=e.map(function(e){var i=t.find(function(t){return t.relativePath===e&&t.propertyInfos===undefined});if(i){return i.name}else{var o=$t(Ye({},e,a.resolvePath(e)),t,[],n,a);t.push(o[0]);return o[0].name}})}return i};var en=function(e){return e.map(function(t){return"{".concat(e.indexOf(t),"}")}).join("\n")};var tn=function(e,t,n,a,i){var o={};function r(e,n){return t.some(function(e){return e.key===n})}function l(e){return e.type===at.Slot}function v(e){return e.type===undefined&&!!e.template}for(var u in e){var d;var s=e[u];Ae.validateKey(u);var c={key:u,width:s.width||undefined,position:{anchor:(d=s.position)===null||d===void 0?void 0:d.anchor,placement:s.position===undefined?Ee.After:s.position.placement},caseSensitive:Ht(n)};if(r(s,u)){var f=_e(_e({},c),{},{importance:s===null||s===void 0?void 0:s.importance,horizontalAlign:s===null||s===void 0?void 0:s.horizontalAlign,availability:s===null||s===void 0?void 0:s.availability,type:at.Annotation,isNavigable:r(s,u)?undefined:xe(s,i,true),settings:s.settings,formatOptions:zt(s.formatOptions)});o[u]=f}else{var p=Zt(s.properties,t,n,a);var g=_e(_e({},c),{},{header:s.header,importance:(s===null||s===void 0?void 0:s.importance)||H.None,horizontalAlign:(s===null||s===void 0?void 0:s.horizontalAlign)||B.Begin,availability:(s===null||s===void 0?void 0:s.availability)||G.Default,template:s.template,propertyInfos:p,exportSettings:p?{template:en(p),wrap:!!(p.length>1)}:null,id:"CustomColumn::".concat(u),name:"CustomColumn::".concat(u),formatOptions:{textLinesEdit:4},isGroupable:false,isNavigable:false,sortable:false,visualSettings:{widthCalculation:null}});if(l(s)){var m=_e(_e({},g),{},{type:at.Slot});o[u]=m}else if(v(s)){var y=_e(_e({},g),{},{type:at.Default});o[u]=y}else{var b;var h="The annotation column '".concat(u,"' referenced in the manifest is not found");n.getDiagnostics().addIssue(Oe.Manifest,Se.Low,h,Ce,Ce===null||Ce===void 0?void 0:(b=Ce.AnnotationColumns)===null||b===void 0?void 0:b.InvalidKey)}}}return o};function nn(e,t,n){var a;var i=t.getManifestWrapper();var o=t.getManifestControlConfiguration(e);var r=i.getVariantManagement();var l=[];var v=n.type==="AnalyticalTable";var u=n.type==="ResponsiveTable";if((o===null||o===void 0?void 0:(a=o.tableSettings)===null||a===void 0?void 0:a.personalization)!==undefined){var d=o.tableSettings.personalization;if(d===true){switch(n.type){case"AnalyticalTable":return"Sort,Column,Filter,Group,Aggregate";case"ResponsiveTable":return"Sort,Column,Filter,Group";default:return"Sort,Column,Filter"}}else if(typeof d==="object"){if(d.sort){l.push("Sort")}if(d.column){l.push("Column")}if(d.filter){l.push("Filter")}if(d.group&&(v||u)){l.push("Group")}if(d.aggregate&&v){l.push("Aggregate")}return l.length>0?l.join(","):undefined}}else{l.push("Sort");l.push("Column");if(t.getTemplateType()===L.ListReport){if(r===k.Control||an(i,t)){l.push("Filter")}}else{l.push("Filter")}if(v){l.push("Group");l.push("Aggregate")}if(u){l.push("Group")}return l.join(",")}return undefined}P.getP13nMode=nn;function an(e,t){return e.isFilterBarHidden()&&!t.getManifestWrapper().hasMultipleVisualizations()&&t.getTemplateType()!==L.AnalyticalListPage}function on(e,t,n){var a=ne(e.getEntitySet());var i;if(t!==null&&t!==void 0&&t.SortOrder){var o=[];var r={sorters:o};t.SortOrder.forEach(function(e){var t;var i=e.Property;if(i&&a.indexOf((t=i.$target)===null||t===void 0?void 0:t.name)===-1){var o=rn([i],n)[0];if(o){r.sorters.push({name:o,descending:!!e.Descending})}}});i=r.sorters.length?JSON.stringify(r):undefined}return i}function rn(e,t){var n=[];e.forEach(function(e){var a;if(e!==null&&e!==void 0&&(a=e.$target)!==null&&a!==void 0&&a.name){var i=t.find(function(t){var n;var a=t;return!a.propertyInfos&&a.relativePath===(e===null||e===void 0?void 0:(n=e.$target)===null||n===void 0?void 0:n.name)});if(i){n.push(i.name)}}});return n}function ln(e,t,n){var a;if(e!==null&&e!==void 0&&e.GroupBy){var i=e.GroupBy;if(n==="ResponsiveTable"){i=i.slice(0,1)}var o=rn(i,t).map(function(e){return{name:e}});a=o.length?JSON.stringify({groupLevels:o}):undefined}return a}function vn(e,t){var n;if(e!==null&&e!==void 0&&e.Total){var a=e.Total;var i={};rn(a,t).forEach(function(e){i[e]={}});n=JSON.stringify(i)}return n}function un(e,t,n,a,i,o,r){var l,v,u;var d=sn(t),s=d.navigationPropertyPath;var c=(l=n.getDataModelObjectPath().targetEntityType.annotations)===null||l===void 0?void 0:(v=l.UI)===null||v===void 0?void 0:(u=v.HeaderInfo)===null||u===void 0?void 0:u.TypeNamePlural;var f=n.getDataModelObjectPath().targetEntitySet;var p=n.getManifestWrapper();var g=s.length===0,m=nn(t,n,a),y=s?W(t):W(n.getContextPath(),"LineItem");var b=It(n);var h=vt(n,s);var T=p.getNavigationConfiguration(h);var I=Ft(e,a,n,T,t);var P=$(n,I.mode,a,r);var E=w(n,P);var V=x(n,P);var j=M(n,P);var R=U(P,A(n),Ie(V)==="false");var H=Pt(e,t,n,g,b,E,j);var B=s?10:30;if(o!==null&&o!==void 0&&o.MaxItems){B=o.MaxItems.valueOf()}var z=p.getVariantManagement();var G=re(n.getDataModelObjectPath());var K={create:O(n,P),delete:C(n,P),paste:F(n,P,R),massEdit:S(n,P),creationRow:N(n,P)};return{id:y,entityName:f?f.name:"",collection:ve(n.getDataModelObjectPath()),navigationPath:s,row:St(e,t,n,T,h),p13nMode:m,standardActions:{actions:K,isInsertUpdateTemplated:R,updatablePropertyPath:pt(n)},displayMode:D(n,r),create:I,selectionMode:H,autoBindOnInit:an(p,n)||n.getTemplateType()!==L.ListReport&&n.getTemplateType()!==L.AnalyticalListPage&&!(r&&p.hasMultipleVisualizations(r)),variantManagement:z==="Control"&&!m?k.None:z,threshold:B,sortConditions:on(n,o,i),title:c,searchable:a.type!=="AnalyticalTable"&&!(ge(G)&&G.value===false)}}P.getTableAnnotationConfiguration=un;function dn(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n="String";if(t){if(e==="Edm.DateTimeOffset"){n="DateTime"}return n}else{switch(e){case"Edm.Decimal":case"Edm.Int32":case"Edm.Int64":case"Edm.Double":case"Edm.Byte":n="Number";break;case"Edm.DateOfTime":case"Edm.Date":n="Date";break;case"Edm.DateTimeOffset":n="DateTime";break;case"Edm.TimeOfDay":n="Time";break;case"Edm.Boolean":n="Boolean";break;default:n="String"}}return n}function sn(e){var t=e.split("@"),n=ze(t,2),a=n[0],i=n[1];if(a.lastIndexOf("/")===a.length-1){a=a.substr(0,a.length-1)}return{navigationPropertyPath:a,annotationPath:i}}P.splitPath=sn;function cn(e,t){var n=t.getEntityTypeAnnotation(e);var a=n.annotation;if(a){var i,o;var r=[];(i=a.SelectOptions)===null||i===void 0?void 0:i.forEach(function(e){var t=e.PropertyName;var n=t.value;if(r.indexOf(n)===-1){r.push(n)}});return{text:a===null||a===void 0?void 0:(o=a.Text)===null||o===void 0?void 0:o.toString(),propertyNames:r}}return undefined}P.getSelectionVariantConfiguration=cn;function fn(e,t,n){var a;var i=(a=e.enableFullScreen)!==null&&a!==void 0?a:n;if(!n&&i&&t.getTemplateType()===L.ListReport){i=false;t.getDiagnostics().addIssue(Oe.Manifest,Se.Low,Fe.FULLSCREENMODE_NOT_ON_LISTREPORT)}return i}function pn(e,t,n){var a;if(t!=="ResponsiveTable"){return undefined}switch(n.getTemplateType()){case L.ListReport:case L.AnalyticalListPage:a=!e.selectAll?"ClearAll":"Default";break;case L.ObjectPage:a=e.selectAll===false?"ClearAll":"Default";if(n.getManifestWrapper().useIconTabBar()){a=!e.selectAll?"ClearAll":"Default"}break;default:}return a}function gn(e,t,n){var a=(e===null||e===void 0?void 0:e.type)||"ResponsiveTable";if(a==="AnalyticalTable"&&!n.getManifestWrapper().isDesktop()){a="ResponsiveTable"}return a}function mn(e,t,n){if(e==="GridTable"){if(n){return{rowCountMode:"Auto",rowCount:"3"}}else{return{rowCountMode:t.rowCountMode?t.rowCountMode:"Fixed",rowCount:t.rowCount?t.rowCount:5}}}else{return{}}}function yn(e,t){return t.condensedTableLayout!==undefined&&e!=="ResponsiveTable"?t.condensedTableLayout:false}function bn(e){return e.selectAll===true||e.selectionLimit===0?0:e.selectionLimit||200}function hn(e){var t,n;return(t=e.creationMode)!==null&&t!==void 0&&t.inlineCreationRowCount?(n=e.creationMode)===null||n===void 0?void 0:n.inlineCreationRowCount:2}function Tn(e,t,n,a,i){var o;if(n){t.push({annotationPath:a.annotationPath})}return{quickFilters:{enabled:i.getTemplateType()===L.ListReport?"{= ${pageInternal>hasPendingFilters} !== true}":true,showCounts:e===null||e===void 0?void 0:(o=e.quickVariantSelection)===null||o===void 0?void 0:o.showCounts,paths:t}}}function In(e,t,n){return e.enableExport!==undefined?e.enableExport:t.getTemplateType()!=="ObjectPage"||n}function Pn(e,t,n){var a,i,o;if(!t){return{}}var r=[];var l=n.getAnnotationEntityType(t);var v;var u;e===null||e===void 0?void 0:(a=e.quickVariantSelection)===null||a===void 0?void 0:(i=a.paths)===null||i===void 0?void 0:i.forEach(function(t){v=l.resolvePath(t.annotationPath);u=Tn(e,r,v,t,n)});var d=false;d=!!((o=e.quickVariantSelection)!==null&&o!==void 0&&o.hideTableTitle);return{filters:u,headerVisible:!(v&&d)}}function Dn(e,t){var n=ue(t.getDataModelObjectPath(),e).navigationProperties;if((n===null||n===void 0?void 0:n.length)>0){var a=[];n.forEach(function(e){a.push(wt(e)||e.name)});return a}}function An(e,t,n){var a,i,o,r,l,v,u;var d=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var s=n.getManifestWrapper();var c=n.getManifestControlConfiguration(t);var f=c&&c.tableSettings||{};var p=((a=f.creationMode)===null||a===void 0?void 0:a.name)||z.NewPage;var g=!s.isPhone();var m=f.enablePaste!==undefined?f.enablePaste:n.getTemplateType()==="ObjectPage";var y=n.getTemplateType();var b=y===L.ListReport?"API.dataStateIndicatorFilter":undefined;var h=d&&s.isCondensedLayoutCompliant();var T=Pn(f,e,n);var I=(i=f.creationMode)===null||i===void 0?void 0:i.customValidationFunction;var P=n.getEntityType();var D=new Q(P,n);var A=gn(f,D,n);var F=mn(A,f,y===L.ListReport);var S=yn(A,f);var C={createAtEnd:((o=f.creationMode)===null||o===void 0?void 0:o.createAtEnd)!==undefined?(r=f.creationMode)===null||r===void 0?void 0:r.createAtEnd:p!==z.Inline,creationMode:p,customValidationFunction:I,dataStateIndicatorFilter:b,disableAddRowButtonForEmptyData:!I?!!((l=f.creationMode)!==null&&l!==void 0&&l.disableAddRowButtonForEmptyData):false,enableAutoColumnWidth:g,enableExport:In(f,n,m),enableFullScreen:fn(f,n,s.isPhone()),enableMassEdit:f===null||f===void 0?void 0:f.enableMassEdit,enablePaste:m,headerVisible:true,multiSelectMode:pn(f,A,n),selectionLimit:bn(f),inlineCreationRowCount:hn(f),showRowCount:!(f!==null&&f!==void 0&&(v=f.quickVariantSelection)!==null&&v!==void 0&&v.showCounts)&&!((u=s.getViewConfiguration())!==null&&u!==void 0&&u.showCounts),type:A,useCondensedTableLayout:S&&h,isCompactType:s.isCompactType()};return _e(_e(_e({},C),F),T)}P.getTableManifestConfiguration=An;function Fn(e,t){var n,a,i,o,r,l;var v=ie[e===null||e===void 0?void 0:e.type]||(t?ie[t]:undefined);if(!v&&e!==null&&e!==void 0&&e.targetType&&((n=e.targetType)===null||n===void 0?void 0:n._type)==="TypeDefinition"){v=ie[e.targetType.underlyingType]}var u={type:(a=v)===null||a===void 0?void 0:a.type,constraints:{},formatOptions:{}};if(_(e)){var d,s,c,f,p,g,m,y,b,h,T,I,P,D,A,F,S;u.constraints={scale:(d=v.constraints)!==null&&d!==void 0&&d.$Scale?e.scale:undefined,precision:(s=v.constraints)!==null&&s!==void 0&&s.$Precision?e.precision:undefined,maxLength:(c=v.constraints)!==null&&c!==void 0&&c.$MaxLength?e.maxLength:undefined,nullable:(f=v.constraints)!==null&&f!==void 0&&f.$Nullable?e.nullable:undefined,minimum:(p=v.constraints)!==null&&p!==void 0&&p["@Org.OData.Validation.V1.Minimum/$Decimal"]&&!isNaN((g=e.annotations)===null||g===void 0?void 0:(m=g.Validation)===null||m===void 0?void 0:m.Minimum)?"".concat((y=e.annotations)===null||y===void 0?void 0:(b=y.Validation)===null||b===void 0?void 0:b.Minimum):undefined,maximum:(h=v.constraints)!==null&&h!==void 0&&h["@Org.OData.Validation.V1.Maximum/$Decimal"]&&!isNaN((T=e.annotations)===null||T===void 0?void 0:(I=T.Validation)===null||I===void 0?void 0:I.Maximum)?"".concat((P=e.annotations)===null||P===void 0?void 0:(D=P.Validation)===null||D===void 0?void 0:D.Maximum):undefined,isDigitSequence:u.type==="sap.ui.model.odata.type.String"&&(A=v.constraints)!==null&&A!==void 0&&A["@com.sap.vocabularies.Common.v1.IsDigitSequence"]&&(F=e.annotations)!==null&&F!==void 0&&(S=F.Common)!==null&&S!==void 0&&S.IsDigitSequence?true:undefined}}u.formatOptions={parseAsString:(u===null||u===void 0?void 0:(i=u.type)===null||i===void 0?void 0:i.indexOf("sap.ui.model.odata.type.Int"))===0||(u===null||u===void 0?void 0:(o=u.type)===null||o===void 0?void 0:o.indexOf("sap.ui.model.odata.type.Double"))===0?false:undefined,emptyString:(u===null||u===void 0?void 0:(r=u.type)===null||r===void 0?void 0:r.indexOf("sap.ui.model.odata.type.Int"))===0||(u===null||u===void 0?void 0:(l=u.type)===null||l===void 0?void 0:l.indexOf("sap.ui.model.odata.type.Double"))===0?"":undefined,parseKeepsEmptyString:u.type==="sap.ui.model.odata.type.String"?true:undefined};return u}P.getTypeConfig=Fn;return{getTableActions:it,getTableColumns:ot,getColumnsFromEntityType:Ct,updateLinkedProperties:ut,createTableVisualization:st,createDefaultTableVisualization:ct,getCapabilityRestriction:It,getSelectionMode:Pt,getRowStatusVisibility:xt,getImportance:Jt,getP13nMode:nn,getTableAnnotationConfiguration:un,isFilteringCaseSensitive:Ht,splitPath:sn,getSelectionVariantConfiguration:cn,getTableManifestConfiguration:An,getTypeConfig:Fn}},false);
//# sourceMappingURL=Table.js.map