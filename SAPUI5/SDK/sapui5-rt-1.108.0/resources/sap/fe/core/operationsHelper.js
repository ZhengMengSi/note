/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/m/Bar","sap/m/Button","sap/m/Dialog","sap/m/MessageBox","sap/m/Title","sap/ui/core/message/Message","sap/ui/model/json/JSONModel","./CommonUtils","./controllerextensions/messageHandler/messageHandling","./formatters/TableFormatterTypes"],function(e,t,n,o,i,l,a,r,s,d){"use strict";var v=d.MessageType;function u(d,u,c,f,g,M,p){var E;var T=d.label;var m=d.model,x=r.getTranslatedText("C_COMMON_DIALOG_SKIP",u);var S=d===null||d===void 0?void 0:(E=d.internalModelContext)===null||E===void 0?void 0:E.getProperty("strictHandlingPromises");var C;if(f.length===1){var _=f[0].getMessage();var P=f[0].getAdditionalText();if(!g){C="".concat(_,"\n").concat(r.getTranslatedText("PROCEED",u))}else if(P!==undefined&&P!==""){var O=d.control.getParent().getTableDefinition().headerInfoTypeName;if(O){C="".concat(O," ").concat(P,": ").concat(_,"\n\n").concat(r.getTranslatedText("C_COMMON_DIALOG_SKIP_SINGLE_MESSAGE_TEXT",u))}else{C="".concat(P,": ").concat(_,"\n\n").concat(r.getTranslatedText("C_COMMON_DIALOG_SKIP_SINGLE_MESSAGE_TEXT",u))}}else{C="".concat(_,"\n\n").concat(r.getTranslatedText("C_COMMON_DIALOG_SKIP_SINGLE_MESSAGE_TEXT",u))}o.warning(C,{title:r.getTranslatedText("WARNING",u),actions:[T,x],emphasizedAction:T,onClose:function(e){var t;if(e===T){var n;if(!g){M(true);m.submitBatch(p);if(d.requestSideEffects){d.requestSideEffects()}}else{var o;S.forEach(function(e){e.resolve(true);m.submitBatch(e.groupId);if(e.requestSideEffects){e.requestSideEffects()}});var i=d===null||d===void 0?void 0:(o=d.internalModelContext)===null||o===void 0?void 0:o.getProperty("strictHandlingFails");if(i.length>0){c===null||c===void 0?void 0:c.removeTransitionMessages()}}d===null||d===void 0?void 0:(n=d.internalModelContext)===null||n===void 0?void 0:n.setProperty("412Executed",true)}else{var l;d===null||d===void 0?void 0:(l=d.internalModelContext)===null||l===void 0?void 0:l.setProperty("412Executed",false);if(!g){M(false)}else{S.forEach(function(e){e.resolve(false)})}}d===null||d===void 0?void 0:(t=d.internalModelContext)===null||t===void 0?void 0:t.setProperty("412Messages",[])}})}else if(f.length>1){if(g){var I=new l({message:r.getTranslatedText("C_COMMON_DIALOG_SKIP_MESSAGES_WARNING",u),type:v.Warning,target:undefined,persistent:true,description:r.getTranslatedText("C_COMMON_DIALOG_SKIP_MESSAGES_TEXT",u,T)});f=[I].concat(f)}var y=new a;y.setData(f);var h=true;var A=s.prepareMessageViewForDialog(y,h,g);var G=new n({resizable:true,content:A.oMessageView,state:"Warning",customHeader:new e({contentLeft:[A.oBackButton],contentMiddle:[new i({text:"Warning"})]}),contentHeight:"50%",contentWidth:"50%",verticalScrolling:false});G.setBeginButton(new t({press:function(){var e;if(!g){M(true);m.submitBatch(p)}else{var t,n;S.forEach(function(e){e.resolve(true);m.submitBatch(e.groupId);if(e.requestSideEffects){e.requestSideEffects()}});var o=d===null||d===void 0?void 0:(t=d.internalModelContext)===null||t===void 0?void 0:t.getProperty("strictHandlingFails");if(o.length>0){c===null||c===void 0?void 0:c.removeTransitionMessages()}d===null||d===void 0?void 0:(n=d.internalModelContext)===null||n===void 0?void 0:n.setProperty("412Messages",[])}d===null||d===void 0?void 0:(e=d.internalModelContext)===null||e===void 0?void 0:e.setProperty("412Executed",true);y.setData({});G.close()},type:"Emphasized",text:T}));G.setEndButton(new t({press:function(){var e,t;d===null||d===void 0?void 0:(e=d.internalModelContext)===null||e===void 0?void 0:e.setProperty("412Messages",[]);d===null||d===void 0?void 0:(t=d.internalModelContext)===null||t===void 0?void 0:t.setProperty("412Executed",false);if(!g){M(false)}else{S.forEach(function(e){e.resolve(false)})}y.setData({});G.close()},text:x}));G.open()}}function c(e,t,n,o,i,l,a,r){if(o===null&&l===null||o===1&&l===1){return new Promise(function(o){f.renderMessageView(t,n,a,r,false,o,e)})}else{var s,d,v,u;var c=t.label;var g=t===null||t===void 0?void 0:(s=t.internalModelContext)===null||s===void 0?void 0:s.getProperty("412Messages");var M=t.control.getParent().getIdentifierColumn();var p="";if(M&&l&&l>1){p=i&&i.getObject(M)}r.forEach(function(e){e.setType("Warning");e.setAdditionalText(p);g.push(e)});if(t.dialog&&t.dialog.isOpen()){t.dialog.close()}var E=t===null||t===void 0?void 0:(d=t.internalModelContext)===null||d===void 0?void 0:d.getProperty("strictHandlingPromises");var T=new Promise(function(n){E.push({groupId:e,resolve:n,actionName:c,model:t.model,value:p,requestSideEffects:t.requestSideEffects})});t===null||t===void 0?void 0:(v=t.internalModelContext)===null||v===void 0?void 0:v.setProperty("412Messages",g);t===null||t===void 0?void 0:(u=t.internalModelContext)===null||u===void 0?void 0:u.setProperty("strictHandlingPromises",E);if(o===l){var m;f.renderMessageView(t,n,a,t===null||t===void 0?void 0:(m=t.internalModelContext)===null||m===void 0?void 0:m.getProperty("412Messages"),true)}return T}}var f={renderMessageView:u,fnOnStrictHandlingFailed:c};return f},false);
//# sourceMappingURL=operationsHelper.js.map