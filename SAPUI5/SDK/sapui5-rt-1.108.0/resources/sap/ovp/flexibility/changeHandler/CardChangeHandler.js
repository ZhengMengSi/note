sap.ui.define(["sap/ovp/cards/CommonUtils"],function(e){"use strict";function t(){return{changeHandler:{},layers:{VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:true,USER:true}}}var r={changeHandler:{applyChange:function(t,r,n){var a=e.getApp();a.appendIncomingDeltaChange(t);return},completeChangeContent:function(e,t,r){return},revertChange:function(e,t,r){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}};var n={changeHandler:"default",layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}};var a=t();var i=t();a.changeHandler.applyChange=function(e,t,r){return d(e,t,r,false)};a.changeHandler.revertChange=function(e,t,r){return o(e,t,r,true)};a.changeHandler.completeChangeContent=function(e,t,r){e.setContent(t.removedElement)};i.changeHandler.applyChange=function(e,t,r){return d(e,t,r,true)};i.changeHandler.revertChange=function(e,t,r){return o(e,t,r,false)};i.changeHandler.completeChangeContent=function(e,t,r){e.setContent({id:t.revealedElementId})};function o(t,r,n,a){var i=n.modifier,o=n.appComponent,d=e.getApp(),l=d.getUIModel(),C=d.getLayout(),s=o.createId(t.getRevertData()),u=i.bySelector(s);i.setVisible(u,a);t.resetRevertData();if(l.getProperty("/containerLayout")==="resizable"){var g=C.getDashboardLayoutUtil();g.updateCardVisibility([{id:g.getCardIdFromComponent(s),visibility:a}])}C.rerender();return true}function d(t,r,n,a){var i=n.modifier,o=e.getApp(),d=o&&o.getView();if(!d){throw new Error("Main view is not initialized yet.")}var l=o.getUIModel(),C=o.getLayout(),s=t.getContent().id,u=n.appComponent,g=u.createId(s),f={id:g,isLocalId:false},c=i.bySelector(f,u,d);var p=o.deltaChanges.filter(function(e){return e.getSelector().id===t.getContent().id&&e.getChangeType()==="visibility"});if(o.aManifestOrderedCards){for(var h=0;h<o.aManifestOrderedCards.length;h++){var v=t.getContent().id;var y=v.indexOf("---")+3;var m=v.substring(y);if(o.aManifestOrderedCards[h].id===m.split("--")[1]){o.oView.oController.aManifestOrderedCards[h].visibility=t.getChangeType()==="hideCardContainer"?false:true}}}if(!o.aManifestOrderedCards||p.length===0){t.setRevertData(g);i.setVisible(c,a);if(l.getProperty("/containerLayout")==="resizable"){var b=C.getDashboardLayoutUtil();if(b.aCards){b.updateCardVisibility([{id:b.getCardIdFromComponent(g),visibility:a}])}o.appendIncomingDeltaChange(t)}if(a){var E=d.byId(g);if(!E.getComponentInstance()&&o.bFinishedCardsCreationProcess){var U=o._getCardFromManifest(o._getCardId(g));o.recreateRTAClonedCard(U)}}C.rerender();return true}return false}return{HideCardContainer:a,UnhideCardContainer:i,PersonalizationDefaultConfig:r,UnhideControlConfig:n}});
//# sourceMappingURL=CardChangeHandler.js.map