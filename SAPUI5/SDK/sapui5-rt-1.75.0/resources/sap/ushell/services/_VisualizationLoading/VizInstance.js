// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/m/library","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/events/PseudoEvents","sap/ushell/services/_VisualizationLoading/VizInstanceRenderer"],function(m,C,I,P){"use strict";var L=m.LoadState;var V=C.extend("sap.ushell.ui.launchpad.VizInstance",{metadata:{library:"sap.ushell",properties:{visualizationId:{type:"string"},editable:{type:"boolean",defaultValue:false,bindable:true},type:{type:"string"},vizType:{type:"string"},state:{type:"string",defaultValue:L.Loading},previewMode:{type:"boolean",defaultValue:false},catalogTile:{type:"any"},title:{type:"string"},subtitle:{type:"string"},icon:{type:"string"},footer:{type:"string"},targetURL:{type:"string"},adapter:{type:"any"},keywords:{type:"string[]",defaultValue:[]},width:{type:"int",defaultValue:1},height:{type:"int",defaultValue:1}},aggregations:{innerControl:{type:"sap.ui.core.Control",multiple:false,hidden:true},removeIcon:{type:"sap.ui.core.Icon",multiple:false,hidden:true}},events:{press:{parameters:{scope:{type:"sap.m.GenericTileScope"},action:{type:"string"}}}}},renderer:"sap.ushell.services._VisualizationLoading.VizInstanceRenderer"});V.prototype.init=function(){var r=new I({src:"sap-icon://decline",press:[this._onRemoveIconPressed,this],noTabStop:true});r.addStyleClass("sapMPointer");r.addStyleClass("sapUshellTileDeleteIconInnerClass");this.setAggregation("removeIcon",r);};V.prototype._onRemoveIconPressed=function(){this.firePress({scope:"Actions",action:"Remove"});};V.prototype.onAfterRendering=function(){this.getDomRef("innerControl").onclick=function(e){return this._preventDefault(e);}.bind(this);};V.prototype.onsapspace=function(e){return this._preventDefault(e);};V.prototype.onsapenter=function(e){return this._preventDefault(e);};V.prototype.onkeyup=function(e){if(this.getEditable()&&(P.events.sapdelete.fnCheck(e)||P.events.sapbackspace.fnCheck(e))){this.firePress({scope:"Actions",action:"Remove"});}};V.prototype._preventDefault=function(e){if(this.getEditable()){e.preventDefault();e.stopPropagation();return false;}return true;};V.prototype.getLayout=function(){var w=this.getWidth(),h=this.getHeight();var s=(Object.getPrototypeOf(this).getMetadata().getName()==="sap.ushell.ui.launchpad.VizInstanceCard")?1:2;var l={columns:w*s,rows:h*s};return l;};V.prototype.load=function(v){if(!this.oInnerControl&&this.oControlPromise){return this.oControlPromise;}return new Promise(function(r,a){if(this.oInnerControl){r(this.oInnerControl);return;}this._setVizViewControlPromise(v);this.oControlPromise.then(function(o){this.setAggregation("innerControl",o,false);r(o);}.bind(this)).catch(a);}.bind(this));};V.prototype._setVizViewControlPromise=function(){this.oControlPromise=Promise.resolve({});};V.prototype._getInnerControlPromise=function(){return this.oControlPromise;};return V;});
