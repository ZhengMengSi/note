/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Fragment","sap/ui/Device","sap/m/ToolbarSpacer","sap/m/Label","sap/m/Button","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/MenuButton","sap/m/MenuItem","sap/m/Menu","sap/m/HBox","sap/m/OverflowToolbar","sap/m/OverflowToolbarLayoutData","sap/m/FlexItemData","./Base"],function(F,D,T,L,B,S,a,M,b,c,H,O,d,e,f){"use strict";var A=f.extend("sap.ui.rta.toolbar.Adaptation",{renderer:"sap.ui.rta.toolbar.AdaptationRenderer",animation:true,metadata:{events:{undo:{},redo:{},exit:{},restore:{},transport:{},modeChange:{},manageApps:{},appVariantOverview:{},saveAs:{},activateDraft:{},discardDraft:{}},properties:{publishVisible:{type:"boolean",defaultValue:false},draftVisible:{type:"boolean",defaultValue:false},modeSwitcher:{type:"string",defaultValue:"adaptation"}}}});A.modes={MOBILE:"sapUiRtaToolbarMobile",TABLET:"sapUiRtaToolbarTablet",DESKTOP:"sapUiRtaToolbarDesktop"};var g="sapUiRtaToolbar";A.prototype.init=function(){D.media.attachHandler(this._onSizeChanged,this,g);f.prototype.init.apply(this,arguments);};A.prototype.onAfterRendering=function(){if(!D.media.hasRangeSet(g)){D.media.initRangeSet(g,[900,1200],"px",[A.modes.MOBILE,A.modes.TABLET,A.modes.DESKTOP]);}this._onSizeChanged(D.media.getCurrentRange(g));f.prototype.onAfterRendering.apply(this,arguments);};A.prototype.exit=function(){D.media.detachHandler(this._onSizeChanged,this,g);f.prototype.exit.apply(this,arguments);};function _(s,i,t,h){var o=this.getControl(s);var j=this.getTextResources().getText(t);var k=this.getTextResources().getText(h);o.setText(j||"");o.setTooltip(k||"");o.setIcon(i||"");}A.prototype._showButtonIcon=function(s,i,t){_.call(this,s,i,"",t);};A.prototype._showButtonText=function(s,t){_.call(this,s,"",t,"");};A.prototype._switchToIcons=function(){this.getControl("draftLabel").setVisible(false);this.getControl("iconBox").setVisible(false);this.getControl("iconSpacer").setVisible(false);this._showButtonIcon("adaptationSwitcherButton","sap-icon://wrench","BTN_ADAPTATION");this._showButtonIcon("navigationSwitcherButton","sap-icon://explorer","BTN_NAVIGATION");this._showButtonIcon("exit","sap-icon://decline","BTN_EXIT");};A.prototype._switchToTexts=function(){this._setDraftLabelVisibility();this.getControl("iconBox").setVisible(true);this.getControl("iconSpacer").setVisible(true);this._showButtonText("adaptationSwitcherButton","BTN_ADAPTATION");this._showButtonText("navigationSwitcherButton","BTN_NAVIGATION");this._showButtonText("exit","BTN_EXIT");};A.prototype._onSizeChanged=function(p){var m=p.name;this.sMode=m;switch(m){case A.modes.MOBILE:this._switchToIcons();break;case A.modes.TABLET:this._switchToTexts();break;case A.modes.DESKTOP:this._switchToTexts();break;default:}};A.prototype.buildControls=function(){return F.load({name:"sap.ui.rta.toolbar.Adaptation",controller:{activateDraft:this.eventHandler.bind(this,"ActivateDraft"),discardDraft:this.eventHandler.bind(this,"DiscardDraft"),modeChange:this.eventHandler.bind(this,"ModeChange"),undo:this.eventHandler.bind(this,"Undo"),redo:this.eventHandler.bind(this,"Redo"),manageApps:this.eventHandler.bind(this,"ManageApps"),appVariantOverview:this.eventHandler.bind(this,"AppVariantOverview"),restore:this.eventHandler.bind(this,"Restore"),publish:this.eventHandler.bind(this,"Transport"),saveAs:this.eventHandler.bind(this,"SaveAs"),exit:this.eventHandler.bind(this,"Exit")}}).then(function(C){this.getControl("publish").setVisible(this.getPublishVisible());this.getControl("modeSwitcher").setSelectedKey(this.getModeSwitcher());return C;}.bind(this));};A.prototype.setUndoRedoEnabled=function(C,h){this.getControl("undo").setEnabled(C);this.getControl("redo").setEnabled(h);};A.prototype.setPublishEnabled=function(E){this.getControl("publish").setEnabled(E);};A.prototype.setRestoreEnabled=function(E){this.getControl("restore").setEnabled(E);};A.prototype._setDraftLabelVisibility=function(){var l=this.getDraftVisible()&&this.sMode===A.modes.DESKTOP;this.getControl("draftLabel").setVisible(l);};A.prototype.setDraftVisible=function(v){this.setProperty("draftVisible",v,true);this._setDraftLabelVisibility();this.getControl("activateDraft").setVisible(v);this.getControl("discardDraft").setVisible(v);return v;};A.prototype.show=function(){return f.prototype.show.apply(this,arguments);};A.prototype.hide=function(){return f.prototype.hide.apply(this,arguments);};return A;},true);
