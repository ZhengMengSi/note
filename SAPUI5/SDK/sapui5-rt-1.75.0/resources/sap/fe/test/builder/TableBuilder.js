sap.ui.define(["sap/ui/test/OpaBuilder","./FEBuilder","./FieldBuilder","sap/fe/test/Utils","sap/ui/table/library","sap/ui/test/matchers/Interactable"],function(O,F,a,U,G,I){"use strict";var R=G.RowActionType;function _(m){return m._oTable.getMetadata().getName()==="sap.ui.table.Table";}function b(m){return _(m)?"rows":"items";}function c(C,r){var t=r.getParent(),m=t.getParent(),i=Number(C);return Number.isNaN(i)?m.getColumns().findIndex(function(o){return o.getHeader()===C;}):i;}function d(r){var o=r.getRowAction();return o.getItems().reduce(function(i,A,f){if(!i&&A.getType()===R.Navigation){i=o.getAggregation("_icons")[f];}return i;},null);}function e(r){var f=[new I()];if(U.isOfType(r,Object)){r=T.Row.Matchers.cellValues(r);}if(r){f=f.concat(r);}return f;}var T=function(){return F.apply(this,arguments);};T.create=function(o){return new T(o);};T.prototype=Object.create(F.prototype);T.prototype.hasRows=function(r,f){r=e(r);return f?this.has(T.Matchers.rows(r)):this.has(T.Matchers.rowsMatcher(r));};T.prototype.doOnRows=function(r,v){if(arguments.length===1){v=r;r=undefined;}if(!v){return this;}return this.hasRows(r,true).do(O.Actions.conditional(O.Matchers.TRUE,v));};T.prototype.doEditValues=function(r,C){if(arguments.length===1){C=r;r=undefined;}return this.doOnRows(r,T.Row.Actions.editCells(C));};T.prototype.doSelect=function(r){return this.doOnRows(r,function(o){if(o.getMetadata().getName()==="sap.ui.table.Row"){var t=o.getParent(),f=t.indexOfRow(o);return O.Actions.press("rowsel"+f).executeOn(t);}return O.Actions.press().executeOn(o.getMultiSelectControl());});};T.prototype.doNavigate=function(r){return this.doOnRows(r,function(o){if(o.getMetadata().getName()==="sap.ui.table.Row"){return O.Actions.press().executeOn(d(o));}return O.Actions.press("imgNav").executeOn(o);});};T.Row={Matchers:{cellValue:function(C,E){return function(r){var i=c(C,r),f=r.getCells()[i];return a.Matchers.value(E)(f);};},cellValues:function(C){return Object.keys(C).map(function(s){return T.Row.Matchers.cellValue(s,C[s]);});}},Actions:{onCell:function(C,v){return function(r){var i=c(C,r),o=r.getCells()[i];if(v.executeOn){v.executeOn(o);}else{v(o);}};},editCell:function(C,v){return T.Row.Actions.onCell(C,O.Actions.enterText(v,true));},editCells:function(C){return Object.keys(C).map(function(s){return T.Row.Actions.editCell(s,C[s]);});}}};T.Matchers={isGridTable:function(){return _;},rows:function(r){return function(m){return F.Matchers.aggregation(b(m),r)(m._oTable);};},rowsMatcher:function(r){return function(m){return T.Matchers.rows(r)(m).length>0;};}};T.Actions={};return T;});
