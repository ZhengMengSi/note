sap.ui.define(["sap/base/util/merge","./TemplatePage","sap/ui/test/OpaBuilder","sap/m/library","sap/fe/test/Utils","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/FieldBuilder"],function(m,T,O,l,U,F,a){"use strict";function g(n){return"fe::table::"+n+"::LineItem";}function _(p,f,s,h,i,e,v){var I=p,D=false;if(typeof s==="string"){I+="::com.sap.vocabularies.UI.v1.Facets"+(s?"::"+s:"");}else if(typeof h==="string"){D=true;I+="::com.sap.vocabularies.UI.v1.HeaderFacets"+(h?"::"+h:"");}if(typeof i==="string"){I+="::com.sap.vocabularies.UI.v1.Identification"+(i?"::"+i:"");I+="::com.sap.vocabularies.UI.v1.Identification"+(i?"::"+i:"");}else if(typeof e==="string"){I+="::com.sap.vocabularies.UI.v1.FieldGroup"+(e?"::"+e:"");if(D){I+="::com.sap.vocabularies.UI.v1.FieldGroup"+(e?"::"+e:"");}}I+=(v?"::FormC::FormVH::":"::FormC::FormF::")+f;return I;}function b(p,f,s){return _(p,f.field+(s||""),f.facet,f.headerFacet,f.identification,f.fieldGroup,true);}function c(p,f,s){return _(p,f.field+(s||""),f.facet,f.headerFacet,f.identification,f.fieldGroup);}function d(n){return g(n)+"-settings";}return{create:function(A,C,e){var V=A+"::"+C,f="F::fe::form::"+e,h="fe::form::"+e,i="fe::OPHeaderContent",j="fe::ops::HeaderInfo",k="fe::op::footer::"+e,n="fe::op-anchBar",P="fe::paginator",o={DISPLAY:"Display",EDITABLE:"Editable"},D=l.DraftIndicatorState,r=sap.ui.getCore().getLibraryResourceBundle("sap.fe.templates"),R=sap.ui.getCore().getLibraryResourceBundle("sap.fe.core");return m(T.create(V,e),{actions:{iClickQuickViewMoreLinksButton:function(){return O.create(this).hasType("sap.m.Button").has(O.Matchers.resourceBundle("text","sap.ui.mdc","info.POPOVER_DEFINE_LINKS")).doPress().description("Pressing 'More Links' button").execute();},iClickLinkWithText:function(t){return O.create(this).hasType("sap.m.Link").hasProperties({text:t}).doPress().description("Navigating via link '"+t+"'").execute();},iClickSemanticLink:function(p){var s=c(f,p);return O.create(this).hasId(new RegExp(s)).hasType("sap.m.Link").doPress().description("Opening semantic link '"+p.field+"'").execute();},iEnableLink:function(t){return O.create(this).hasType("sap.m.CustomListItem").hasAggregationProperties("content",{text:t}).isDialogElement().doPress("selectMulti").description("The CheckBox for link "+t+" is selected").execute();},iEnterValueForField:function(p,v){var s=c(f,p);return O.create(this).hasId(s).doEnterText(v).description("Entering Text in the field '"+p.field+"' with value '"+v+"'").execute();},iOpenVHDialog:function(p){var s=c(f,p,"-inner-vhi");return O.create(this).hasId(s).doPress().description("Opening value help for '"+p.field+"'").execute();},iPressKeyboardShortcutOnHeaderInfo:function(s){return this._iPressKeyboardShortcut(j,s);},iPressKeyboardShortcutOnPropertyTable:function(N,s){return this._iPressKeyboardShortcut(g(N),s);},iSelectFromVHDTable:function(v){return O.create(this).hasType("sap.m.ColumnListItem").hasAggregationProperties("cells",{value:v}).checkNumberOfMatches(1).isDialogElement().doPress().description("Selecting row from dialog with value '"+v+"'").execute();},iConfirmFacetVHD:function(p){var s=b(h,p,"-ok");return O.create(this).hasId(s).doPress().description("Confirming value help selection for '"+p.field+"'").execute();},iEditDetailPage:function(){return O.create(this).hasType("sap.m.Button").has(O.Matchers.i18n("text","sap.fe.i18n>OBJECT_PAGE_EDIT")).doPress().description("Start editing").execute();},iDeleteItem:function(){return O.create(this).hasType("sap.m.Button").has(O.Matchers.i18n("text","sap.fe.i18n>OBJECT_PAGE_DELETE")).doPress().description("Clicking the Delete button").execute();},iConfirmDelete:function(){return O.create(this).hasType("sap.m.Button").isDialogElement().hasProperties({text:r.getText("OBJECT_PAGE_DELETE")}).doPress().description("Delete dialog confirmed").execute();},iCancelDialog:function(){return O.create(this).hasType("sap.m.Button").isDialogElement().hasProperties({text:R.getText("OBJECT_PAGE_CANCEL")}).doPress().description("Clicking the Cancel button").execute();},iCreateNewItemViaCreationRow:function(N){return O.create(this).hasId(g(N)+"::CreationRow-inner").doPress("applyBtn").description("Create new Item").execute();},iConfirmDialog:function(){return O.create(this).hasType("sap.m.Button").isDialogElement().hasProperties({text:R.getText("SAPFE_OK")}).doPress().description("Clicking the Ok button").execute();},iConfirmDialogWithButtonText:function(t){return O.create(this).hasType("sap.m.Button").isDialogElement().hasProperties({text:t}).doPress().description("Clicking the "+t+"button").execute();},iSaveChanges:function(){return O.create(this).hasId("fe::save::"+e).doPress().description("Saving document").execute();},iCancelChanges:function(){return O.create(this).hasId("fe::cancel::"+e).doPress().description("Cancelling document").execute();},iConfirmDiscardingChanges:function(){return O.create(this).hasType("sap.m.Button").isDialogElement().hasProperties({text:R.getText("SAPFE_DRAFT_DISCARD_BUTTON")}).doPress().description("Confirming Discard changes").execute();},iOpenSectionWithTitle:function(N){return O.create(this).hasId(n).has(F.Matchers.aggregation("content",O.Matchers.properties({text:N}))).doPress().description("Selecting section "+N).execute();},iSelectRowWithCellValue:function(N,v,s){return this._iSelectRowWithCellValue(g(N),v,s);},iOpenItemWithCellText:function(N,v,t){return this._iActOnRowWithCellValue(g(N),v,t);},iDeleteSelected:function(N){return this._iDeleteSelected(g(N));},iEditCellValueForRowWithCellValue:function(N,v,E,I){return this._iEditCellValueForRowWithCellValue(g(N),v,E,I);},iExecuteBoundAction:function(N,s,p){return this._iExecuteBoundAction(g(N),s,p);},iExecuteAction:function(t){return O.create(this).hasType("sap.uxap.ObjectPageDynamicHeaderTitle").doOnAggregation("actions",O.Matchers.properties({text:t}),O.Actions.press()).execute();},iApplyChanges:function(){return O.create(this).hasId(k).doOnChildren(O.create(this).hasType("sap.m.Button").hasProperties({text:r.getText("OBJECT_PAGE_APPLY_DRAFT")}).doPress().description("Applying changes")).execute();},iSwitchToNextItem:function(){return this._iSwitchItem(true);},iSwitchToPrevItem:function(){return this._iSwitchItem(false);},iOpenTableSettings:function(N){return O.create(this).hasId(d(N)).doPress().description("Accessing table settings").execute();},iAddColumnInTableSettings:function(s,G){return this._iAddColumnInTableSettings(s,G);},iRemoveColumnInTableSettings:function(s,G){return this._iModifyFilterInTableSettings(s,G,true,"Removing column");},iSortTableByColumn:function(N,s){return this._iSortTableByColumn(g(N),s);}},assertions:{iSeeDraftStateSaved:function(){return this._iSeeDraftState(D.Saved);},iSeeSelectedRowsInList:function(N,p){return this._iSeeSelectedTableRows(g(N),p);},iSeeDraftStateClear:function(){return this._iSeeDraftState(D.Clear);},_iSeeDraftState:function(s){return O.create(this).hasType("sap.m.DraftIndicator").hasProperties({state:s}).description("Draft Indicator is in "+s+" state").execute();},iSeeLinkWithText:function(t){return O.create(this).hasType("sap.m.Link").hasProperties({text:t}).description("Seeing link with text '"+t+"'").execute();},iSeeEditButton:function(B){return this._iSeeButtonWithText(r.getText("OBJECT_PAGE_EDIT"),B);},iSeePageActionButton:function(s,p,B){return this._iSeeElement("fe::"+s+"."+p+"::"+e,B);},iSeeContactDetailsPopover:function(){return O.create(this).hasType("sap.ui.mdc.link.ContactDetails").description("Seeing Contact Details in ObjectPage header").execute();},iSeeQuickViewPopover:function(){return O.create(this).hasType("sap.m.ResponsivePopover").description("Seeing Quick View Details in ObjectPage").execute();},iSeeQuickViewMoreLinksButton:function(){return O.create(this).isDialogElement(true).hasType("sap.m.Button").has(O.Matchers.resourceBundle("text","sap.ui.mdc","info.POPOVER_DEFINE_LINKS")).description("The 'More Links' button found").execute();},iSeeObjectPageInDisplayMode:function(){return this._iSeeObjectPageInMode(o.DISPLAY);},iSeeObjectPageInEditMode:function(){return this._iSeeObjectPageInMode(o.EDITABLE);},_iSeeObjectPageInMode:function(M){return O.create(this).hasId(V).viewId(null).check(function(p){return p.getModel("ui").getProperty("/editable")===M;}).description("Object Page is in mode '"+M+"'").execute();},iSeeTable:function(N){return O.create(this).hasId(g(N)).description("Seeing table '"+N+"'").execute();},iSeeTableRows:function(N,p){return this._iSeeTableRows(g(N),p);},iSeeValueSetInTable:function(N,v,p){return this._iSeeTableRowWithCellValues(g(N),v,p);},iSeeObjectPageTitle:function(t){return O.create(this).hasType("sap.uxap.ObjectPageDynamicHeaderTitle").doOnChildren(O.create(this).hasType("sap.m.Title").hasProperties({text:t})).description("Seeing Object Page title '"+t+"'").execute();},iSeeHeaderContentWithItems:function(N){return O.create(this).hasId("fe::op-OPHeaderContent").has(function(p){return p.getContent()[0].getItems().length===N;}).description("Header Content has "+N+" item(s)").execute();},iSeeMicroChartAndUomLabel:function(s,p,L,u){var q=O.create(this).hasId(i+s).hasType("sap.suite.ui.microchart."+p+"MicroChart");if(u!==null){q.hasAggregationProperties("_uomLabel",{text:u}).description("Seeing MicroChart of type '"+p+"' with label '"+u+"'");}else{q.description("Seeing MicroChart of type '"+p+"'");}return q.execute();},iSeeValueSetInStatus:function(v){return O.create(this).hasType("sap.m.ObjectStatus").hasProperties({text:v}).description("Seeing object status '"+v+"'").execute();},iSeeValueForField:function(p,v,q,E){var s=U.parseArguments([Object,[Array,String],String,Object],arguments),t=c(f,s[0]);return a.create(this).hasId(t).hasState(s[3]).hasValue(s[1],s[2]).description(U.formatMessage("Seeing field '{0}' with value '{1}'",p.field,[].concat(s[1],s[2]||[]))).execute(this);},iSeeSectionWithTitle:function(t){return O.create(this).hasType("sap.uxap.ObjectPageSection").hasProperties({title:t}).description("Seeing section with title '"+t+"'").execute();},iSeeSubSectionWithTitle:function(t){return O.create(this).hasType("sap.uxap.ObjectPageSubSection").hasProperties({title:t}).description("Seeing sub-section with title '"+t+"'").execute();},iSeeSemanticLink:function(p){var s=c(f,p);return O.create(this).hasId(new RegExp(s)).hasType("sap.m.Link").description("Seeing semantic link for field '"+p.field+"'").execute();},iSeeFlpLink:function(s){return O.create(this).hasType("sap.ui.mdc.link.PanelListItem").isDialogElement(true).hasProperties({text:s}).description("FLP link with text '"+s+"' is present").execute();},iSeeSelectLinksDialog:function(){return O.create(this).hasType("sap.m.Title").isDialogElement(true).has(O.Matchers.resourceBundle("text","sap.ui.mdc","info.SELECTION_DIALOG_TITLE")).description("Seeing dialog open").execute();},iDoNotSeeFlpLink:function(s){return O.create(this).hasType("sap.ui.mdc.link.PanelListItem").isDialogElement(true).check(function(p){return!p.some(function(q){return q.getText()===s;});},true).description("FLP link with text '"+s+"' is not found").execute();},iSeeVHD:function(p){var s=b(h,p,"-dialog");return O.create(this).hasId(s).description("Seeing value help dialog for field '"+p.field+"'").execute();},iSeeVHDTable:function(p){var v=b(h,p,"::Table");return O.create(this).hasId(v).hasAggregation("items").description("Seeing filled value help dialog for field '"+p.field+"'").execute();},iSeeVHDFilterBar:function(p){var v=b(h,p,"::FilterBar");return O.create(this).hasId(v).description("Seeing value help filterbar for field '"+p.field+"'").execute();},iSeeSaveConfirmation:function(){return this._iSeeTheMessageToast(r.getText("OBJECT_SAVED"));},iSeeDeleteConfirmation:function(){return this._iSeeTheMessageToast(r.getText("OBJECT_PAGE_DELETE_TOAST_SINGULAR"));},iSeeHeaderDeleteButtonIsVisible:function(v){v=v===undefined?true:v;return O.create(this).hasType("sap.m.Button").hasProperties({text:r.getText("OBJECT_PAGE_DELETE"),visible:v}).mustBeVisible(false).has(function(B){return(B.getParent().getMetadata().getName()==="sap.uxap.ObjectPageDynamicHeaderTitle");}).description("Header Delete button is "+(v?"visible":"invisible")).execute();},iSeeTableDeleteButtonIsVisible:function(N,v){v=v===undefined?true:v;return O.create(this).hasId(g(N)+"::Delete").hasProperties({visible:v}).mustBeVisible(false).description("Table action button Delete is "+(v?"visible":"invisible")).execute();},iSeeTableActionButtonIsEnabled:function(N,s,p,E,B){return this._checkTableActionButtonEnablement(g(N),s,p,E===undefined?true:E,B);},iSeeTableDeleteButtonIsEnabled:function(N,E){return this._checkTableActionButtonEnablement(g(N),"","Delete",E===undefined?true:E);},iSeePaginator:function(){return O.create(this).hasId(P).description("Seeing paginator").execute();},iSeePaginatorButtonDownIsEnabled:function(E){return this._checkPaginatorButtonEnablement(true,E===undefined?true:E);},iSeePaginatorButtonUpIsEnabled:function(E){return this._checkPaginatorButtonEnablement(false,E===undefined?true:E);},iCanAccessTableSettings:function(N){return O.create(this).hasId(d(N)).description("Table settings available").execute();},iCanAccessColumnInTableSettings:function(N,s,G,S){return this._iCanAccessColumnInTableSettings(g(N),s,G,S);},iCannotAccessColumnInTableSettings:function(N,s,G){return this._iCannotAccessColumnInTableSettings(g(N),s,G);},iSeeColumnsInList:function(N,p){return O.create(this).hasId(g(N)).hasAggregationLength("columns",p).description("Seeing table with "+p+" columns").execute();},iSeeApplyButton:function(){return O.create(this).hasId(k).doOnChildren(O.create(this).hasType("sap.m.Button").hasProperties({text:r.getText("OBJECT_PAGE_APPLY_DRAFT")}).description("Apply button is visible in footer")).execute();},iSeeSortedColumn:function(N,s){return this._iSeeSortedColumn(g(N),s,"sortOrder");},iSeeTableP13nMode:function(N,M){return this._iSeeTableP13nMode(g(N),M);},iSeeConfirmMessageBoxWithTitle:function(t){return O.create(this).hasType("sap.m.Dialog").isDialogElement(true).hasProperties({title:t}).description("Seeing Message dialog open").execute();}}});}};});
