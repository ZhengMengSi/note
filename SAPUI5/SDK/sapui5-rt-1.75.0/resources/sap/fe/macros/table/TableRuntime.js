/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/model/json/JSONModel","sap/fe/macros/CommonHelper"],function(J,C){"use strict";var T={displayTableSettings:function(e){var p=e.getSource().getParent(),s=sap.ui.getCore().byId(p.getId()+"-settings");C.fireButtonPress(s);},executeConditionalActionShortcut:function(b,s){var p=s.getParent();if(b!=="CreationRow"){var B=p.getActions().find(function(e){return e.getId().endsWith(b);});C.fireButtonPress(B);}else{var c=p.getAggregation("creationRow");if(c&&c.getApplyEnabled()&&c.getVisible()){c.fireApply();}}},setContexts:function(t,m,p,d,D,c){var a=JSON.parse(c);var s=t.getSelectedContexts();var b=false;var e=[];var u=[];var l=[];var L={};var M;var f="/$contexts/"+p;var o=t.getModel(m);if(!o){o=new J();t.setModel(o,"$contexts");}L.aUnsavedContexts=[];L.aLockedContexts=[];o.setProperty("/$contexts",{});o.setProperty(f,{selectedContexts:s,numberOfSelectedContexts:s.length,deleteEnabled:true,deletableContexts:[],unSavedContexts:[],lockedContexts:[]});for(var i=0;i<s.length;i++){var S=s[i];var g=S.getObject();for(var k in g){if(k.indexOf("#")===0){var A=k;A=A.substring(1,A.length);M=o.getProperty(f);M[A]=true;o.setProperty(f,M);}}M=o.getProperty(f);if(d!="undefined"){if(S.getProperty(d)){if(D!=="undefined"&&g.IsActiveEntity===true&&g.HasDraftEntity===true){L=h(g,S);}else{e.push(S);L.isDeletable=true;}}M["deleteEnabled"]=L.isDeletable;}else if(D!=="undefined"&&g.IsActiveEntity===true&&g.HasDraftEntity===true){L=h(g,S);}else{e.push(S);}}function h(g,S){if(g.DraftAdministrativeData.InProcessByUser){l.push(S);}else{u.push(S);b=true;}return{aLockedContexts:l,aUnsavedContexts:u,isDeletable:b};}this.setActionEnablement(o,a,f,s);M["deletableContexts"]=e;M["unSavedContexts"]=L.aUnsavedContexts;M["lockedContexts"]=L.aLockedContexts;M["controlId"]=t.getId();o.setProperty(f,M);},setActionEnablement:function(c,a,s,S){for(var A in a){c.setProperty(s+"/"+A,false);var p=a[A];for(var i=0;i<S.length;i++){var o=S[i];var b=o.getObject();if(p===null&&!!b["#"+A]){c.setProperty(s+"/"+A,true);break;}else if(!!o.getObject(p)){c.setProperty(s+"/"+A,true);break;}}}}};return T;},true);
