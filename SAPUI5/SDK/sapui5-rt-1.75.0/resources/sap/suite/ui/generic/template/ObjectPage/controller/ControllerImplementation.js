sap.ui.define(["sap/ui/core/mvc/ControllerExtension","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/generic/app/navigation/service/SelectionVariant","sap/suite/ui/generic/template/lib/testableHelper","sap/suite/ui/generic/template/detailTemplates/detailUtils","sap/suite/ui/generic/template/ObjectPage/controller/SideContentHandler","sap/suite/ui/generic/template/ObjectPage/extensionAPI/ExtensionAPI","sap/suite/ui/generic/template/js/AnnotationHelper","sap/m/Table","sap/ui/layout/DynamicSideContent","sap/suite/ui/generic/template/lib/ShareUtils","sap/ui/dom/jquery/Selectors","sap/base/Log","sap/suite/ui/generic/template/ObjectPage/controller/MultipleViewsHandler","sap/suite/ui/generic/template/lib/MessageUtils","sap/ui/events/KeyCodes","sap/base/util/merge","sap/ui/model/FilterProcessor","sap/suite/ui/generic/template/js/StableIdHelper","sap/ui/core/Element","sap/uxap/ObjectPageSubSection","sap/ui/core/MessageType","sap/base/util/extend","sap/base/util/UriParameters","sap/base/util/isEmptyObject","sap/ui/dom/getFirstEditableInput","sap/ui/dom/jquery/Focusable"],function(C,M,F,S,a,t,d,b,E,A,R,D,c,f,L,g,h,K,m,l,n,o,O,p,q,U,r,s,u){"use strict";var v=25;var w=10;function y(e){e.setSelectedSection(null);}function I(e){return e.data("inlineCreate")==="true";}function z(e,j){if(e.getBindings){var k=e.getBindings();for(var i=0;i<k.length;i++){z(k[i],j);}}else{var T=e.getType();e.setType(T,j);}}var B=/[A-Za-z].*[A-Za-z]/;var G={getMethods:function(V,T,H){var J=d.getControllerBase(V,T,H);V.oController=H;var N;var P=new b(H,T,J.stateChanged);var Q;var W;var X;var Y;var Z=null;var $=[];var _=[];var a1=null;var b1=null;var c1=null;function d1(e){var i=e.getParameter("bindingParams");i.parameters=i.parameters||{};i.parameters.usePreliminaryContext=true;i.parameters.batchGroupId="facets";return i;}function e1(){L.info("Activate object","sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");var e=J.state.saveScenarioHandler;var i=T.oServices.oCRUDManager.activateDraftEntity(e);i.then(function(k){s1();h.showSuccessMessageIfRequired(T.oCommonUtils.getText("OBJECT_SAVED"),T.oServices);var x=H.getOwnerComponent();T.oServices.oViewDependencyHelper.setAllPagesDirty([x.getId()]);T.oServices.oViewDependencyHelper.unbindChildren(x);T.oServices.oApplication.invalidatePaginatorInfo();var z2=x.getNavToListOnSave();T.oServices.oApplication.navigateAfterActivation(!z2&&k.context);},Function.prototype);var j={activationPromise:i};T.oComponentUtils.fire(H,"AfterActivate",j);}function f1(e){var i=H.getView();var j=i.getModel();var k=j.hasPendingChanges();var x=j.getPendingChanges();var z2=Object.create(null);if(x){for(var A2 in x){if(x.hasOwnProperty(A2)){var B2=j.getContext("/"+A2);z2[A2]={context:B2,change:x[A2]};}}}T.oCommonEventHandlers.submitChangesForSmartMultiInput();var C2=T.oServices.oCRUDManager.saveEntity();C2.then(function(E2){if(!e){var F2=T.oComponentUtils.getTemplatePrivateModel();F2.setProperty("/objectPage/displayMode",1);V.setEditable(false);}g1(E2,i,k,z2,e);});var D2={saveEntityPromise:C2};T.oComponentUtils.fire(H,"AfterSave",D2);}function g1(e,i,j,k,x){var z2=!!T.oComponentUtils.getNonDraftCreateBindingPath();T.oServices.oViewDependencyHelper.setRootPageToDirty();T.oServices.oViewDependencyHelper.unbindChildren(H.getOwnerComponent());var A2=H.getOwnerComponent();var B2=A2.getNavToListOnSave();var C2=T.oComponentUtils.getViewLevel()===1;var D2;if(z2){e=e||i.getBindingContext();if(C2&&(!B2||x)&&e&&e.getPath()!=="/undefined"){T.oServices.oNavigationController.navigateToContext(e,undefined,true);h2(N);}else{T.oServices.oNavigationController.navigateBack();}D2="OBJECT_CREATED";}else{D2=j?"OBJECT_SAVED":"OBJECT_NOT_MODIFIED";if(C2&&B2&&!x){T.oServices.oNavigationController.navigateToRoot();}else{h2(N);}}h.showSuccessMessageIfRequired(T.oCommonUtils.getText(D2),T.oServices);for(var E2 in k){var F2=k[E2];var G2=F2.context;var H2=F2.change;var I2=Object.keys(H2)||[];var J2=I2.indexOf("__metadata");if(J2>-1){I2.splice(J2,1);}T.oServices.oApplicationController.executeSideEffects(G2,I2);}}function h1(e){var i=e.getSource().getId();i1("SaveAndContEdit",i);}function i1(e,i){var j;var k;var x;if(T.oComponentUtils.isDraftEnabled()){j=1;k=e1;x="activate";}else{j=3;if(e==="SaveAndContEdit"){k=f1.bind(null,true);x=i;}else{k=f1.bind(null,false);x="save";}}T.oCommonUtils.executeIfControlReady(J.state.saveScenarioHandler.handleSaveScenario.bind(null,j,k),x);}function j1(e){if(I(e.getSource())){var i=e.getParameter("bindingParams");if(i.filters&&i.filters.length){var j=l.groupFilters(i.filters);i.filters=new F({filters:[new F({filters:[new F({path:"IsActiveEntity",operator:"EQ",value1:true}),j],and:true}),new F({filters:[new F({path:"IsActiveEntity",operator:"EQ",value1:false}),new F({filters:[j,new F({path:"HasActiveEntity",operator:"EQ",value1:false})],and:false})],and:true})],and:false});}var k=i.sorter[0]&&i.sorter[0].getGroupFunction();var x=k&&function(z2){var A2=z2.getObject();if(A2.IsActiveEntity||A2.HasActiveEntity){var B2=q({},k(z2));B2.key=B2.key.charAt(0)==="ยง"?"ยง"+B2.key:B2.key;return B2;}return{key:"ยง",text:T.oCommonUtils.getText("NEW_ENTRY_GROUP")};};if(e.getSource().data("disableInlineCreateSort")==="false"){i.sorter.unshift(new S("HasActiveEntity",false,x));}}}function k1(){return N.getHeaderTitle();}function l1(e){var i=T.oComponentUtils.getTemplatePrivateModel();var j={shareEmailPressed:function(){var k=i.getProperty("/objectPage/headerInfo/objectTitle");var x=i.getProperty("/objectPage/headerInfo/objectSubtitle");if(x){k=k+" - "+x;}var z2=document.URL.replace(/\(/g,'%28').replace(/\)/g,'%29');sap.m.URLHelper.triggerEmail(null,k,z2);},shareJamPressed:function(){c.openJamShareDialog(i.getProperty("/objectPage/headerInfo/objectTitle")+" "+i.getProperty("/objectPage/headerInfo/objectSubtitle"));},getModelData:function(){return{title:i.getProperty("/objectPage/headerInfo/objectTitle"),subtitle:i.getProperty("/objectPage/headerInfo/objectSubtitle"),customUrl:c.getCustomUrl()};}};c.openSharePopup(T.oCommonUtils,e,j);}function m1(){var e=T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.RelatedAppsSheet",{buttonPressed:function(i){var j=i.getSource();var k=j.getBindingContext("buttons");var x=k.getProperty("link");var z2=k.getProperty("param");var A2=x.intent;var B2=A2.split("#")[1].split("-")[0];var C2=A2.split("-")[1].split("?")[0].split("~")[0];var D2={target:{semanticObject:B2,action:C2},params:z2};sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(D2);}},"buttons");return e;}var n1;function o1(){n1=function(e){var i=e.getSource().getParent();var j=T.oServices.oApplication.getBusyHelper();if(j.isBusy()){return;}var k=H.getOwnerComponent();var x=k.getModel("_templPrivGlobal");var z2={objectPage:{currentEntitySet:k.getProperty("entitySet")}};x.setProperty("/generic/multipleViews",z2);var A2=T.oServices.oCRUDManager.deleteEntity();var B2=k.getBindingContext().getPath();var C2=Object.create(null);C2[B2]=A2;T.oServices.oApplication.prepareDeletion(C2);var D2={deleteEntityPromise:A2};j.setBusy(A2);T.oComponentUtils.fire(H,"AfterDelete",D2);i.close();};return T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.TableDeleteConfirmation",{onCancel:function(e){var i=e.getSource().getParent();i.close();},onDelete:function(e){n1(e);}},"delete");}function p1(){var e=T.oServices.oApplication.getBusyHelper();if(e.isBusy()){return;}var i=T.oCommonUtils;var j=T.oComponentUtils.getTemplatePrivateModel();var k=(j.getProperty("/objectPage/headerInfo/objectTitle")||"").trim();var x=j.getProperty("/objectPage/headerInfo/objectSubtitle");var z2;var A2={};A2.title=T.oCommonUtils.getText("ST_GENERIC_DELETE_TITLE");if(k){if(x){z2=[" ",k,x];A2.text=i.getText("DELETE_WITH_OBJECTINFO",z2);}else{z2=[k];A2.text=i.getText("DELETE_WITH_OBJECTTITLE",z2);}}else{A2.text=i.getText("ST_GENERIC_DELETE_SELECTED");}var B2=Promise.resolve(H.beforeDeleteExtension());B2.then(function(C2){q(A2,C2);var D2=o1();var E2=D2.getModel("delete");E2.setData(A2);D2.open();},Function.prototype);}function q1(e){var i=e.getParameter("columnInfos");var j=i&&i.length-1;while(j>=0){if(i[j].ignore){i.splice(j,1);}j-=1;}var k=i.reduce(function(z2,A2){if(!A2.type&&!A2.customParseFunction){z2.push(A2);}return z2;},[]);if(k.length>0){var x=T.oCommonUtils.getText("DATA_PASTE_UNSUPPORTED_FORMAT_MESSAGE");M.show(x,{icon:M.Icon.ERROR,title:T.oCommonUtils.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE]});}}function r1(e){var j;var A1=e.getSource();var k=A1.getId();var x=k.split("::Table")[0]+"::addEntry";var z2=H.byId(x);if(!z2){return;}var A2=e.getParameter("result");if(A2){if(A2.errors){var B2=A2.errors.map(function(K2){return K2.message;});var C2=T.oCommonUtils.getText("DATA_PASTE_ERROR_MESSAGE",[B2.length]);var D2=T.oCommonUtils.getText("DATA_PASTE_ERROR_CORRECTION_MESSAGE");var E2=T.oCommonUtils.getText("DATA_PASTE_ERROR_CORRECTION_NOTE");B2.unshift("");B2.unshift(E2);B2.unshift(D2);M.show(C2,{icon:M.Icon.ERROR,title:T.oCommonUtils.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE],details:B2.join("<br />")});}else if(A2.parsedData){j=A2.parsedData;if(j&&j.length){var F2=j.length;var G2;var H2,I2=[];var J2=sap.m.DraftIndicatorState.Saved;for(var i=0;i<F2;i++){G2=i<F2-1;H2=T.oCommonEventHandlers.addEntry(z2,true,undefined,j[i],G2);I2.push(H2);}Promise.all(I2).then(function(){var K2=H.getOwnerComponent();var L2=K2.getAppComponent();var M2=L2.getModel("_templPrivGlobal");M2.setProperty("/generic/draftIndicatorState",J2);});}}}}function s1(){var e=T.oComponentUtils.getTemplatePrivateModel();var i=e.getProperty("/objectPage/aPasteAttachedTables");var j=i.length;var k;var x;while(j>=0){k=i[j];x=H.byId(k+"::Table");if(x&&x.isA("sap.ui.comp.smarttable.SmartTable")&&x.hasListeners("paste")){x.detachBeforePaste(q1);x.detachPaste(r1);i.splice(j,1);}j-=1;}}function t1(e){T.oCommonUtils.executeIfControlReady(p1,"delete");}function u1(e,i){var j,k;if(e){k=e.context||e;if(T.oServices.oDraftController.getDraftContext().hasDraft(k)){T.oServices.oViewDependencyHelper.setRootPageToDirty();j=k.context||k;}}if(j){T.oServices.oApplication.invalidatePaginatorInfo();T.oServices.oApplication.switchToDraft(j);}else{var x=T.oComponentUtils.getTemplatePrivateModel();x.setProperty("/objectPage/displayMode",2);h2(N);}V.setEditable(true);}var v1;function w1(e){e=!!e&&typeof e==="boolean";T.oServices.oCRUDManager.editEntity(e).then(function(i){if(i.draftAdministrativeData){v1(i.draftAdministrativeData.CreatedByUserDescription||i.draftAdministrativeData.CreatedByUser);}else{u1(i.context,false);}});}v1=function(e){var i=T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.UnsavedChangesDialog",{onEdit:function(){i.close();w1(true);},onCancel:function(){i.close();}},"Dialog");var j=i.getModel("Dialog");var k=T.oCommonUtils.getText("DRAFT_LOCK_EXPIRED",[e]);j.setProperty("/unsavedChangesQuestion",k);i.open();};function x1(){var j="{\"SelectionVariantID\":\"\"}";var k=H.getOwnerComponent();var z2=k.getEntitySet();var A2=k.getModel();var B2=A2.getMetaModel();var C2=B2.getODataEntitySet(z2);var D2=B2.getODataEntityType(C2.entityType);var E2=D2.property;var F2=[];for(var x in E2){var G2=E2[x]["com.sap.vocabularies.Common.v1.FieldControl"]&&E2[x]["com.sap.vocabularies.Common.v1.FieldControl"].Path;if(G2&&F2.indexOf(G2)<0){F2.push(G2);}}var H2=H.getView().getBindingContext();var I2=H2.getObject();var J2=new a();for(var i in E2){var K2=E2[i].type;var L2=E2[i].name;var M2=I2[E2[i].name];if(F2.indexOf(L2)>-1){continue;}if(L2&&(M2||K2==="Edm.Boolean")){if(K2==="Edm.Time"&&M2.ms!==undefined){M2=M2.ms;}if(typeof M2!=="string"){try{M2=M2.toString();}catch(e){M2=M2+"";}}J2.addParameter(L2,M2);}}j=J2.toJSONString();return j;}function y1(e,A1){var i=true;var j=A1.getModel();A1=A1 instanceof R?A1.getParent():A1;var k=T.oCommonUtils.getDeleteRestrictions(A1);var x=k&&k.Deletable&&k.Deletable.Path;if(x){i=j.getProperty(x,e);}return i;}var z1;var A1;function B1(e,j){z1=e;A1=j instanceof R?j.getParent():j;var k=[];n1=function(x){var z2=T.oServices.oApplication.getBusyHelper();var A2=x.getSource().getParent();var B2=T.oCommonUtils.getSelectedContexts(A1);k=[];var C2;var D2;var E2=H.getView().getModel().getObject(B2[0].getPath());for(var i=0;i<B2.length;i++){if(y1(B2[i],A1)){k.push(B2[i].getPath());}}var F2=T.oServices.oCRUDManager.deleteEntities(k);z2.setBusy(F2);T.oServices.oApplicationController.executeSideEffects(A1.getBindingContext(),[],[A1.getTableBindingPath()]);var G2=z1.getParent().getParent().getId();F2.then(function(I2){T.oCommonUtils.refreshSmartTable(A1);if(E2.IsActiveEntity===false){D2=0;}else{D2=I2.length;}C2=k.length-D2;var J2="";if(C2>0){if(T.oCommonUtils.isUiTable(A1.getTable())){var K2=A1.getTable().getPlugin("sap.ui.table.plugins.SelectionPlugin");if(K2){K2.clearSelection();}}if(C2>1){J2=T.oCommonUtils.getContextText("DELETE_SUCCESS_PLURAL_WITH_COUNT",A1.getId(),null,[C2]);}else{if(D2>0){J2=T.oCommonUtils.getContextText("DELETE_SUCCESS_WITH_COUNT",A1.getId(),null,[C2]);}else{J2=T.oCommonUtils.getContextText("ITEM_DELETED",A1.getId());}}}if(D2>0){if(D2>1){J2+=J2&&J2+"\n";J2+=T.oCommonUtils.getContextText("DELETE_ERROR_PLURAL_WITH_COUNT",A1.getId(),null,[D2]);}else{if(C2>0){J2+="\n";J2+=T.oCommonUtils.getContextText("DELETE_ERROR_WITH_COUNT",A1.getId(),null,[D2]);}else{J2+=T.oCommonUtils.getContextText("DELETE_ERROR",A1.getId());}}}if(J2){if(D2>0){M.error(J2);}else{h.showSuccessMessageIfRequired(J2,T.oServices);}}});var H2={deleteEntitiesPromise:F2,sUiElementId:G2,aContexts:B2};T.oComponentUtils.fire(H,"AfterLineItemDelete",H2);A2.close();};return T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.TableDeleteConfirmation",{onCancel:function(i){var x=i.getSource().getParent();x.close();},onDelete:function(i){n1(i);}},"delete");}function C1(e){var A1=T.oCommonUtils.getOwnerControl(e);if(!T.oCommonUtils.isSmartTable(A1)){A1=A1.getParent();}var j=T.oCommonUtils.getSelectedContexts(A1);if(j.length===0){M.error(T.oCommonUtils.getText("ST_GENERIC_NO_ITEM_SELECTED"),{styleClass:T.oCommonUtils.getContentDensityClass()});return;}var k=[];var x=[];for(var i=0;i<j.length;i++){if(y1(j[i],A1)){k.push(j[i].getPath());}else{x.push(j[i]);}}var z2={};if(j.length>1){z2.title=T.oCommonUtils.getText("ST_GENERIC_DELETE_TITLE_WITH_COUNT",[j.length]);z2.text=T.oCommonUtils.getContextText("DELETE_SELECTED_ITEMS",A1.getId());}else{z2.title=T.oCommonUtils.getText("ST_GENERIC_DELETE_TITLE");z2.text=T.oCommonEventHandlers.getSelectedItemContextForDeleteMessage(A1,j[0],true);}if(x.length>0){z2.undeletableText=T.oCommonUtils.getContextText("DELETE_UNDELETABLE_ITEMS",A1.getId(),null,[x.length,j.length]);}var A2={sUiElementId:e.getParent().getParent().getId(),aContexts:j};var B2=Promise.resolve(H.beforeLineItemDeleteExtension(A2));B2.then(function(C2){q(z2,C2);var D2=B1(e,A1);if(!x.length){z2.undeletableText=undefined;}var E2=D2.getModel("delete");E2.setData(z2);D2.open();},Function.prototype);}function D1(e){var i=n.getStableId({type:"ObjectPageAction",subType:"Delete",sFacet:e});T.oCommonUtils.executeIfControlReady(C1,i);}function E1(){var i=H.byId("imageDialog")||T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.ImageDialog",{onImageDialogClose:function(){i.close();}},"headerImage");return i;}function F1(){var e=T.oComponentUtils.getTemplatePrivateModel();e.setProperty("/objectPage/isHeaderExpanded",true);var i=H.getView().byId("template::ObjectPage::ObjectPageHeader");i.attachStateChange(function(j){var k=j.getParameter("isExpanded");e.setProperty("/objectPage/isHeaderExpanded",k);});}function G1(){var e;var j=T.oComponentUtils.getTemplatePrivateModel();var k=function(i){return function(x){var z2=x.getSource();var A2=z2.getExternalValue();j.setProperty("/objectPage/headerInfo/"+i,A2);if(i==="objectTitle"){T.oComponentUtils.setText(A2);if(!A2){var B2=T.oComponentUtils.getHeaderDataAvailablePromise();B2.then(function(C2){A2=z2.getExternalValue();if(A2){return;}var D2=H.getView();var E2=C2.getObject();var F2=D2.getModel("ui");var G2=F2.getProperty("/createMode");if(G2&&E2&&(E2.IsActiveEntity===undefined||E2.IsActiveEntity===false||E2.HasActiveEntity===false)){e=e||T.oCommonUtils.getText("NEW_OBJECT");j.setProperty("/objectPage/headerInfo/objectTitle",e);T.oComponentUtils.setText(e);}});}}};};N.getCustomData().forEach(function(x){var z2=x.getKey();if(z2==="objectTitle"||z2==="objectSubtitle"){var A2=x.getBinding("value");var B2=!A2&&x.getBindingInfo("value");if(!A2&&!B2){j.setProperty("/objectPage/headerInfo/"+z2,x.getValue());return;}var C2=k(z2);if(A2){A2.attachChange(C2);z(A2,"string");}else{B2.events={change:C2};for(var i=0;i<B2.parts.length;i++){B2.parts[i].targetType="string";}}}});}function H1(e){e.preventDefault();var i=T.oCommonUtils.getControlInformation(e,null,true);if(i){T.oCommonUtils.processDataLossConfirmationIfNonDraft(i.navigate,Function.prototype,J.state);}}function I1(e){return!!(e&&T.oCommonUtils.getPositionableControlId(e));}function J1(e){var j="";for(var i=0;i<e.length;i++){if(I1([e[i]])){var k=o.registry.get(e[i]);return K1(k);}}if(H&&H.getOwnerComponent()&&H.getOwnerComponent().getModel("i18n")){j=H.getOwnerComponent().getModel("i18n").getResourceBundle().getText("GENERIC_MESSAGE_GROUP_NAME");}return j;}function K1(e){if(!e){return"";}if(e instanceof sap.uxap.ObjectPageSection){return e.getTitle();}else{return K1(e.getParent());}}function L1(e){var j=N.getSections();for(var i=0;i<j.length;i++){if(j[i].getTitle()===e){return i+1;}}return 9999999;}var M1=new sap.ui.model.Sorter("msg>");function N1(e){switch(e){case p.Error:return 1;case p.Warning:return 2;case p.Success:return 3;case p.Information:return 4;case p.None:return 5;default:return 6;}}M1.fnCompare=function(e,i){var j=L1(J1(e.controlIds))*w+N1(e.type);var k=L1(J1(i.controlIds))*w+N1(i.type);if(j<k){return-1;}if(j>k){return 1;}return 0;};function O1(e,i){L.info("Set binding context to "+e,"Subsection: "+i.getId(),"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");i.setBindingContext(e);}function P1(e,i,j,k){if(i){if(k.fnLazyLoadResolve){k.fnLazyLoadResolve();delete k.fnLazyLoadResolve;}return;}var x=[];if(!k.bInitiallyVisible){x.push(new Promise(function(z2){k.fnLazyLoadResolve=z2;}));}if(e){x.push(T.oComponentUtils.getHeaderDataAvailablePromise());}if(k.bWaitForStateApplied){x.push(b1);}O1(null,j);Promise.all(x).then(function(){O1(undefined,j);var z2=j.getId();L.info("Start refreshing of Subsection: "+z2,"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");k.refresh(null,true);L.info("End refreshing of Subsection: "+z2,"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");});}var Q1={lazyLoading:P1.bind(null,false),lazyLoadingAfterHeader:P1.bind(null,true),reuseComponent:function(i,e){var j=e.getBlocks()[0];var k=i?T.oComponentUtils.getHeaderDataAvailablePromise():Promise.resolve();k.then(T.oComponentUtils.onVisibilityChangeOfReuseComponent.bind(null,i,j));}};function R1(e,i,j){if(j instanceof D){j=j.getMainContent()[0];}else if(!j.getContent){return;}j.getContent().forEach(function(k){if(T.oCommonUtils.isSmartTable(k)){if(i||e[k.getEntitySet()]){if(k.isInitialised()){T.oCommonUtils.refreshSmartTable(k);}else{k.attachInitialise(function(){T.oCommonUtils.refreshSmartTable(k);});}if(!i){T.oServices.oApplicationController.executeSideEffects(H.getOwnerComponent().getBindingContext(),[],[k.getTableBindingPath()]);}}}});}function S1(e){return T.oCommonUtils.getControlInformation(e);}function T1(e){$.push(e);T.oCommonUtils.getControlInformation(e,function(i,j){var k=e.getBlocks();P.initSideContentInfoObject(k[0]);var x=k.concat(e.getMoreBlocks());i.refresh=function(B2,C2){var D2=R1.bind(null,B2,C2);x.forEach(D2);};var z2=T.oCommonUtils.getElementCustomData(e).strategyForVisibilityChange;var A2=Q1[z2];i.strategyForVisibilityChange=A2||Function.prototype;if(A2){j.push("subSectionListeningToVisibilityChange");}});}function U1(e){var i,j;i=e?e.getParameter("section"):undefined;j=i?i.getId():N.getSelectedSection();if(j!==Z){L.info("Selected Section: "+j,"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");}if(!i&&j){N.getSections().some(function(k){if(k.getId()===Z){i=k;return true;}return false;});}return{sectionId:j,section:i};}function V1(e){var j=0,k;var x=U1(e);Z=x.sectionId;k=x.section;if(k){var z2=k.getSelectedSubSection();if(z2!==a1){L.info("Selected Subsection: "+a1,"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");a1=z2;$.some(function(E2,F2){if(E2.getId()===a1){j=F2;return true;}return false;});_=[];}}if(_.length===0){var A2=0;var B2=2;var C2=N.getUseIconTabBar();if(C2&&k){var D2=k.getSubSections();B2=D2.length>B2?B2:D2.length;}for(var i=j;A2<B2&&i<$.length;i++){var E2=$[i];if(E2.getVisible()){A2++;_.push(E2.getId());}}}$.forEach(function(F2){S1(F2).bInitiallyVisible=_.some(function(G2){return G2===F2.getId();});});}function W1(i,e,j){e=e||S1(j);e.strategyForVisibilityChange(i,j,e);}function X1(i){T.oCommonUtils.executeForAllInformationObjects("subSectionListeningToVisibilityChange",W1.bind(null,i));}function Y1(e){var j=[];for(var i=0;i<e.length;i++){if(e[i].getVisible()){j.push(e[i]);}}return j;}function Z1(){var e=[];var i=N.getSections();e=Y1(i);if(e.length===1){return $1(e[0]);}return false;}function $1(e){if(e){var $=e.getSubSections();var i=Y1($);return i.length===1;}return false;}function _1(A1){var e=A1.getParent();var i=e.getParent();if(e&&e.isA("sap.ui.layout.Grid")&&i&&i.isA("sap.uxap.ObjectPageSubSection")){e.addStyleClass("sapSmartTemplatesObjectPageSubSectionGridExpand");i.addStyleClass("sapUxAPObjectPageSubSectionFitContainer");A1.setFitContainer(true);}}function a2(e,i){var j="sapUiSizeCompact",k="sapUiSizeCondensed",x;if(!e){return;}x=document.body;if(x.classList.contains(j)){i.addStyleClass(k);}}function b2(A1,e,i){if(e.isA("sap.m.Table")){e.setGrowingThreshold(v);e.setGrowingScrollToLoad(true);}else if(e.isA("sap.ui.table.Table")){_1(A1);a2(i,e);}}function c2(A1,e,i){var j;var k=H.getOwnerComponent().mProperties;if(k&&k.sections){var x=k.sections[i];if(x&&x.hasOwnProperty("condensedTableLayout")){j=x.condensedTableLayout;}else{j=k.condensedTableLayout;}}else{j=k.condensedTableLayout;}if(N.getUseIconTabBar()){var z2=e.getParent();while(z2&&z2.sParentAggregationName!=="sections"){z2=z2.getParent();}if($1(z2)){b2(A1,e,j);}}else if(Z1()){b2(A1,e,j);}}function d2(e){V1(e);J.stateChanged();}function e2(e,i,j,k,x){var z2=A.createP13NColumnKey(x);var A2=A.getBindingForHiddenPath(x);if(A2==="{= !${} }"){e.push(z2);return false;}if(typeof(A2)==="string"){var B2=A2.match(B)&&A2.match(B)[0];if(B2&&B2.indexOf("/")>0&&k.navigationProperty){var C2=H.getOwnerComponent().getEntitySet();var D2=B2.split("/",1)[0];if(j.getODataAssociationSetEnd(k,D2).entitySet===C2){i[z2]=B2.split("/").slice(1).join("/");return true;}}}else if(!A2){e.push(z2);}return false;}function f2(N){var e=N.getModel("ui");var i=T.oComponentUtils.getTemplatePrivateModel();var j=i.getProperty("/objectPage/displayMode");var k=e.getProperty("/createMode")||j===4;var x=e.getProperty("/editable")||j===2;var z2;if(k){z2="Create";}else if(x){z2="Edit";}else{z2="Display";}return z2;}function g2(N,e){if(e==="Display"){var j=N.getHeaderTitle();var k=j.getActions();if(k&&k.length){for(var i=0;i<k.length;i++){if(k[i].getVisible&&k[i].getVisible()&&k[i].getEnabled&&k[i].getEnabled()){return k[i];}}}}else{var x=N.getSelectedSection();if(W===true){N.setSelectedSection(null);return s(N.getDomRef());}var z2;var A2=function(D2){var E2=D2.getDomRef();N.setSelectedSection(D2);z2=s(E2);if(z2&&z2.type!=="checkbox"){return z2;}return u(E2).firstFocusableDomRef();};var B2=N.getSections();var C2;for(var i=0;i<B2.length;i++){if(B2[i].getVisible()&&((B2[i].getId()===x)||C2)){C2=B2[i+1]?B2[i+1].getId():undefined;z2=A2(B2[i]);if(z2){break;}}}return z2;}}function h2(N){var e=H.getOwnerComponent().getModel("_templPrivGlobal");var Y=e.getProperty("/generic/FCL/FCLActionButton");if(!Y){var i=f2(N);if(document.readyState=='complete'){setTimeout(function(){var j=g2(N,i);if(j){j.focus();}},0);}}}function i2(A1,e,j,k,x,z2){var A2=[];var B2=Object.create(null);var C2=false;for(var i=0;i<z2.length;i++){var D2=z2[i];C2=e2(A2,B2,k,x,D2)||C2;}if(C2){e.dynamicHideInfos={staticHiddenColumns:A2,columnKeyToHiddenPath:B2};j.push("smartTableWithDynamicColumnHide");}if(A2.length){A1.deactivateColumns(A2);}}function j2(e){return e instanceof O?e:e.getParent&&j2(e.getParent());}function k2(e,j,A1){j.push("smartTable");e.subSection=j2(A1);if(A1.getUseVariantManagement()){j.push("smartControlWithVariantManagement");S1(e.subSection).bWaitForStateApplied=true;}A1=T.oCommonUtils.isMTable(A1)?A1.getParent():A1;var k=A1.getModel().getMetaModel();var x=k.getODataEntitySet(A1.getEntitySet());var z2=k.getODataEntityType(x.entityType);var A2=z2["com.sap.vocabularies.UI.v1.LineItem"];var B2=A1.getCustomData();for(var i=0;i<B2.length;i++){if(B2[i].getKey()==="lineItemQualifier"){A2=z2["com.sap.vocabularies.UI.v1.LineItem#"+B2[i].getValue()];break;}}i2(A1,e,j,k,z2,A2||[]);}function l2(A1){return T.oCommonUtils.getControlInformation(A1,k2);}function m2(e){if(!c1){J.stateChanged();}}function n2(e,i,j){i.push("smartChart");if(j&&j.getUseVariantManagement()){i.push("smartControlWithVariantManagement");}}function o2(e){return T.oCommonUtils.getControlInformation(e,n2);}function p2(e,i,j){i.push("searchField");var k=T.oCommonUtils.isMTable(j.getParent().getParent())?j.getParent().getParent().getParent():j.getParent().getParent();e.table=k;var x=l2(k);x.searchField=j;}function q2(e){return T.oCommonUtils.getControlInformation(e,p2);}function r2(e){q2(e);}function s2(e){var i=q2(e);i.searchString=e.getSource().getValue();i.table.rebindTable();}function t2(e,i){i.setValue("");if(e.searchString){e.searchString="";e.table.rebindTable();}}function u2(){T.oCommonUtils.executeForAllInformationObjects("searchField",t2);}function v2(e,i){var A1=T.oCommonUtils.getOwnerControl(i);A1=T.oCommonUtils.isMTable(A1)?A1.getParent():A1;var j=I(A1);if(!j){W=false;X=true;}if(!i.data("CrossNavigation")&&j){T.oCommonEventHandlers.addEntry(i,true);return;}T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){T.oCommonEventHandlers.addEntry(i,false);},Function.prototype,J.state);}function w2(e){var i=n.getStableId({type:"ObjectPageAction",subType:"Create",sFacet:e});T.oCommonUtils.executeIfControlReady(v2.bind(null,undefined),i);}function x2(){return true;}V.refreshFacets=function(e){var i=function(j){var k=S1(j);k.refresh(e,false);};N.getSections().forEach(function(j){j.getSubSections().forEach(i);});};V.onComponentActivate=J.onComponentActivate;V.getCurrentState=function(){var e=Object.create(null);if(Z){e.section={data:Z,lifecycle:{permanent:true,pagination:true}};}if(a1){e.subSection={data:a1,lifecycle:{permanent:true,pagination:true}};}T.oCommonUtils.executeForAllInformationObjects("smartControlWithVariantManagement",function(z2,A2){var B2={};B2[A2.getId()]=A2.getCurrentVariantId();if(!r(B2)){e.smartControlVariants={data:B2,lifecycle:{session:true,permanent:true,page:false,pagination:false}};}});e.sideContent=P.getCurrentState();e.multipleViews=Q.getCurrentState();var i=Object.create(null);H.provideCustomStateExtension(i);for(var j in i){e["$custom$"+j]=i[j];}var k=true;var x=function(z2,A2){if(!(z2 instanceof C)){throw new Error("State must always be set with respect to a ControllerExtension");}if(!k){throw new Error("State must always be provided synchronously");}var B2=z2.getMetadata().getNamespace();if(A2){for(var C2 in A2){e["$extension$"+B2+"$"+C2]=A2[C2];}}};H.templateBaseExtension.provideExtensionStateData(x);k=false;return e;};V.applyState=function(e,k){var x=T.oComponentUtils.getHeaderDataAvailablePromise()||Promise.resolve();x.then(function(){var A2=null;var B2=Object.create(null);var C2=Object.create(null);for(var D2 in e){if(D2.indexOf("$custom$")===0){B2[D2.substring(8)]=e[D2];}else if(D2.indexOf("$extension$")===0){var E2=D2.substring(11,D2.indexOf("$",11));var F2=C2[E2];if(!F2){F2=Object.create(null);C2[E2]=F2;}var G2=D2.substring(D2.indexOf("$",11)+1,D2.length);F2[G2]=e[D2];}}H.applyCustomStateExtension(B2,k);var H2=true;var I2=function(P2){if(!(P2 instanceof C)){throw new Error("State must always be retrieved with respect to a ControllerExtension");}if(!H2){throw new Error("State must always be restored synchronously");}var E2=P2.getMetadata().getNamespace();return C2[E2];};H.templateBaseExtension.restoreExtensionStateData(I2,k);H2=false;var J2=H.getOwnerComponent();var K2=J2.getAppComponent().getObjectPageHeaderType();var L2=J2.getModel("_templPrivGlobal");Y=L2.getProperty("/generic/FCL/FCLActionButton");if(Y===1){var M2=N.getHeaderTitle();var N2=(K2==="Dynamic"?M2.getNavigationActions():M2.getActions());if(N2&&N2.length){for(var i=0;i<N2.length;i++){if(N2[i].getId&&N2[i].getId().indexOf("template::FCLActionButtons")>0){var O2=N2[i].getItems();for(var j=0;j<O2.length;j++){if((O2[j].getId().toUpperCase().indexOf("FULLSCREEN")>0)&&O2[j].getVisible&&O2[j].getVisible()){A2=O2[j];}}}}}setTimeout(function(){L2.setProperty("/generic/FCL/FCLActionButton",0);Y=L2.getProperty("/generic/FCL/FCLActionButton");if(A2){A2.focus();}},0);}});P.applyState(e.sideContent,k);Q.applyState(e.multipleViews,k);T.oCommonUtils.executeForAllInformationObjects("smartControlWithVariantManagement",function(i,j){var A2;if(e.smartControlVariants&&e.smartControlVariants[j.getId()]!==undefined){A2=e.smartControlVariants[j.getId()];}else{if(T.oCommonUtils.isSmartTable(j)){A2=T.oCommonUtils.getSmartTableDefaultVariant(j);}else if(T.oCommonUtils.isSmartChart(j)){A2=T.oCommonUtils.getSmartChartDefaultVariant(j);}}if(j.getCurrentVariantId()!==A2){j.setCurrentVariantId(A2);}});if(k){if(Z!==(e.section||"")){J.stateChanged();}if(c1){c1();c1=null;}return;}u2();if(e.section){Z=e.section;L.info("Restoring Selected Section: "+Z,"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");N.setSelectedSection(Z);if(e.subSection){var z2;$.some(function(i){if(i.getId()===e.subSection){z2=i;return true;}return false;});if(z2){z2.getParent().setSelectedSubSection(z2);}a1=e.subSection;L.info("Restoring Selected Subsection: "+a1,"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");}}else{Promise.all([T.oComponentUtils.getHeaderDataAvailablePromise(),T.oComponentUtils.getNavigationFinishedPromise()]).then(y.bind(null,N));Z="";}if(c1){c1();c1=null;}};V.beforeRebind=function(){if(!c1){b1=new Promise(function(e){c1=e;});}X1(false);};V.afterRebind=function(){L.info("Call of _triggerVisibleSubSectionsEvents","","sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");N._triggerVisibleSubSectionsEvents();};V.applyHeaderContextToSmartTablesDynamicColumnHide=function(e){var i=function(j,A1){var k=j.dynamicHideInfos.staticHiddenColumns.slice();for(var x in j.dynamicHideInfos.columnKeyToHiddenPath){var z2=j.dynamicHideInfos.columnKeyToHiddenPath[x];if(e.getProperty(z2)){k.push(x);}}A1.deactivateColumns(k);};T.oCommonUtils.executeForAllInformationObjects("smartTableWithDynamicColumnHide",i);};var w1=t.testable(w1,"editEntity");var y1=t.testable(y1,"isEntryDeletable");var e1=t.testable(e1,"onActivateImpl");var f1=t.testable(f1,"onSaveImpl");t.testable(function(){return b1;},"getStateAppliedPromise");var y2={onInit:function(){N=H.byId("objectPage");var e=H.getOwnerComponent();b1=new Promise(function(C2){c1=C2;});var i=N.getSections();for(var k=0;k<i.length;k++){var j=i[k];var $=j.getSubSections();$.forEach(T1);}V1();var x=k1();var z2=e.getAppComponent();var A2=z2.getObjectPageHeaderType()==="Dynamic";V.aBreadCrumbs=x&&(A2?x.getBreadcrumbs().getLinks():x.getBreadCrumbsLinks());if(A2){F1();}J.onInit(null,X1.bind(null,true),M1,J1);G1();T.oCommonUtils.executeGlobalSideEffect();N.attachEvent("subSectionEnteredViewPort",function(C2){var D2=C2.getParameter("subSection");L.info("Viewport entered ","Subsection: "+D2.getId(),"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");W1(true,null,D2);});Q=new g(H,T,J.stateChanged);var B2=T.oComponentUtils.getTemplatePrivateModel();B2.setProperty("/objectPage/aPasteAttachedTables",[]);T.oComponentUtils.attach(H,"PageDataLoaded",function(C2){if(N&&!Y){var D2=f2(N);if(D2==="Create"&&X!==true){W=true;}else if((T.oComponentUtils.isDraftEnabled()&&D2==="Create"&&X===true)||(!T.oComponentUtils.isDraftEnabled()&&D2==="Display"&&X===true)){X=false;}h2(N);}});},handlers:{onEditAndActiveToggle:function(e,i){T.oServices.oApplication.performAfterSideEffectExecution(function(){var j=T.oServices.oApplication.getBusyHelper();if(j.isBusy()){return;}var k=e.getBindingContext();var x=T.oServices.oApplication.getDraftSiblingPromise(k);j.setBusy(x.then(function(z2){if(i){L.info("Navigating to draft entity","sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");u1(z2,true);}else{L.info("Navigating to active entity","sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");T.oServices.oNavigationController.navigateToContext(z2,null,true,1,true);}f(':focus').blur();}));});},onAfterVariantSave:function(e){m2(e);},onAfterVariantApply:function(e){m2(e);},addEntry:w2,submitChangesForSmartMultiInput:function(){if(T.oComponentUtils.isDraftEnabled()){T.oCommonEventHandlers.submitChangesForSmartMultiInput();}},deleteEntries:D1,onSelectionChange:function(e){T.oCommonUtils.setEnabledToolbarButtons(e.getSource());},onMultiSelectionChange:function(e){T.oCommonEventHandlers.onMultiSelectionChange(e);},onCancel:function(e){var i=e.getSource();var j=J.state.onCancel(i);j.then(function(){s1();if(!T.oComponentUtils.isDraftEnabled()){h2(N);}});},onContactDetails:function(e){T.oCommonEventHandlers.onContactDetails(e);},onPressDraftInfo:function(e){var i=H.getView().getBindingContext();var j=sap.ui.getCore().byId(e.getSource().getId()+(e.getId()==="markChangesPress"?"-changes":"-lock"));T.oCommonUtils.showDraftPopover(i,j);},onPressDraftInfoObjectPageDynamicHeaderTitle:function(e){var i=H.getView().getBindingContext();var j=H.byId("template::ObjectPage::ObjectMarkerObjectPageDynamicHeaderTitle");T.oCommonUtils.showDraftPopover(i,j);},onShareObjectPageActionButtonPress:function(e){T.oCommonUtils.executeIfControlReady(l1,"template::Share");},onRelatedApps:function(e){var x,z2,A2,B2,C2,D2,E2;var F2,G2,H2,I2,J2;x=e.getSource();H2=sap.ushell&&sap.ushell.Container;z2=H2&&H2.getService("URLParsing");A2=z2.parseShellHash(document.location.hash);I2=A2.semanticObject;J2=A2.action;B2=H.getView&&H.getView().getBindingContext();var K2=H.getOwnerComponent().getModel().getMetaModel();var L2=B2.getObject();var M2=L2.__metadata.type;var N2=K2.getODataEntityType(M2);var O2=N2["com.sap.vocabularies.Common.v1.SemanticKey"];var P2={};if(O2&&O2.length>0){for(var j=0;j<O2.length;j++){var Q2=O2[j].PropertyPath;if(!P2[Q2]){P2[Q2]=[];P2[Q2].push(L2[Q2]);}}}else{for(var k in N2.key.propertyRef){var R2=N2.key.propertyRef[k].name;if(!P2[R2]){P2[R2]=[];P2[R2].push(L2[R2]);}}}C2=H.getOwnerComponent().getAppComponent();D2=H2&&H2.getService("CrossApplicationNavigation");E2=D2.getLinks({semanticObject:I2,params:P2,ui5Component:C2});F2=m1();G2=F2.getModel("buttons");G2.setProperty("/buttons",[]);F2.openBy(x);E2.done(function(S2){var T2=[];var U2=N2["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"];var V2=[];if(U2){for(var i=0;i<U2.length;i++){V2.push(U2[i].String);}}for(var i=0;i<N2.property.length;i++){if(N2.property[i]["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"]){var W2=N2.property[i]["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"].length;for(var j=0;j<W2;j++){V2.push(N2.property[i]["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"][j].String);}}}S2.sort(function($2,_2){if($2.text<_2.text){return-1;}if($2.text>_2.text){return 1;}return 0;});for(var i=0;i<S2.length;i++){var X2=S2[i];var Y2=X2.intent;var Z2=Y2.split("-")[1].split("?")[0];if(Z2!==J2&&V2.indexOf(Z2)==-1){T2.push({enabled:true,text:X2.text,link:X2,param:P2});}}if(T2.length===0){T2.push({enabled:false,text:T.oCommonUtils.getText("NO_RELATED_APPS")});}G2.setProperty("/buttons",T2);});},onSemanticObjectLinkPopoverLinkPressed:function(e){T.oCommonEventHandlers.onSemanticObjectLinkPopoverLinkPressed(e,J.state);},onEdit:function(e){var z1=e.getSource();var N=H.byId("objectPage");var j=N.getSelectedSection();var k=N.getSections()||[];for(var i=0;i<k.length;i++){if(k[i].getVisible()){if(k[i].getId()===j){W=true;}else{W=false;}break;}}if(z1.data("CrossNavigation")){T.oCommonEventHandlers.onEditNavigateIntent(z1);return;}T.oCommonUtils.executeIfControlReady(w1,"edit");},onSave:i1,onSaveAndContinueEdit:h1,onSmartFieldUrlPressed:function(e){T.oCommonEventHandlers.onSmartFieldUrlPressed(e,J.state);},onBreadCrumbUrlPressed:H1,onDelete:t1,onCallActionFromToolBar:function(e){T.oCommonEventHandlers.onCallActionFromToolBar(e,J.state);},onCallAction:function(e,i,j){T.oServices.oApplication.performAfterSideEffectExecution(function(){var k=H.getView().getBindingContext();if(k){T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var x=H.getOwnerComponent();var z2=x.getEntitySet();var A2={functionImportPath:e,contexts:[k],sourceControl:"",label:i,operationGrouping:j};T.oServices.oCRUDManager.callAction(A2).then(function(B2){var C2=B2&&B2[0];if(C2&&C2.response&&C2.response.context&&(!C2.actionContext||C2.actionContext&&C2.response.context.getPath()!==C2.actionContext.getPath())){T.oServices.oViewDependencyHelper.setParentToDirty(x,z2,1);}});},Function.prototype,J.state,"Proceed");}},true);},onDataFieldForIntentBasedNavigation:function(e){e=m({},e);T.oServices.oApplication.performAfterSideEffectExecution(function(){T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){T.oCommonEventHandlers.onDataFieldForIntentBasedNavigation(e,J.state);});},true);},onDataFieldWithIntentBasedNavigation:function(e){T.oCommonEventHandlers.onDataFieldWithIntentBasedNavigation(e,J.state);},onDataFieldWithNavigationPath:function(e){T.oCommonEventHandlers.onDataFieldWithNavigationPath(e);},onChartInit:function(e){e.getSource().getChartAsync().then(function(i){var j=H._templateEventHandlers.onSelectionChange;i.attachSelectData(j).attachDeselectData(j);var k=i.getParent();o2(k);T.oCommonUtils.checkToolbarIntentsSupported(k);});},onDataRequested:function(i){L.info("Data requested","SmartTable: "+i,"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");Q.onDataRequested(i);},onDataReceived:function(e){T.oCommonEventHandlers.onDataReceived(e);},onBeforeRebindDetailTable:function(e){var A1=e.getSource();var i=d1(e);var j=l2(A1);var k=j.searchField;if(k){var x=T.oCommonUtils.getControlInformation(k);if(x.searchString){i.parameters.custom={search:x.searchString};}}T.oCommonEventHandlers.onBeforeRebindTable(e,{ensureExtensionFields:H.templateBaseExtension.ensureFieldsForSelect,addExtensionFilters:H.templateBaseExtension.addFilters,isFieldControlRequired:true});H.onBeforeRebindTableExtension(e);Q.onRebindContentControl(A1.getId(),i);j1(e);if(T.oCommonUtils.isAnalyticalTable(A1.getTable())){i.parameters.entitySet=A1.getEntitySet();}},onListNavigate:function(e){T.oCommonEventHandlers.onListNavigate(e,J.state,H.onListNavigationExtension.bind(H));},onBeforeSemanticObjectLinkPopoverOpens:function(e){var i=e.getParameters();T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var j=x1();T.oCommonUtils.semanticObjectLinkNavigation(i,j,H);},Function.prototype,J.state,Function.prototype);},onSemanticObjectLinkNavigationPressed:function(e){var i=e.getParameters();var z1=e.getSource();T.oCommonEventHandlers.onSemanticObjectLinkNavigationPressed(z1,i);},onSemanticObjectLinkNavigationTargetObtained:function(e){var i=e.getParameters();var z1=e.getSource();T.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(z1,i,J.state);},onSemanticObjectLinkNavigationTargetObtainedSmartLink:function(e){var i,z1;i=e.getParameters();z1=e.getSource();z1=z1.getParent().getParent().getParent().getParent();T.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(z1,i,J.state);},onHeaderImagePress:function(e){if(e.getSource().getSrc()===""){return;}var i=E1();var j=e.getSource().getId();i.addAriaLabelledBy(j);var k=i.getModel("headerImage");k.setProperty("/src",e.getSource().getSrc());if(sap.ui.Device.system.phone){i.setProperty("stretch",true);}i.open();},sectionNavigate:d2,onInlineDataFieldForAction:function(e){T.oCommonEventHandlers.onInlineDataFieldForAction(e,J.state);},onInlineDataFieldForIntentBasedNavigation:function(e){T.oCommonEventHandlers.onInlineDataFieldForIntentBasedNavigation(e.getSource(),J.state);},onDeterminingDataFieldForAction:function(e){T.oCommonEventHandlers.onDeterminingDataFieldForAction(e);},onBeforeRebindChart:function(e){d1(e);var i=e.getSource();i.getChartAsync().then(function(k){i.oModels=k.oPropagatedProperties.oModels;});var j={ensureExtensionFields:Function.prototype,addExtensionFilters:H.templateBaseExtension.addFilters,isFieldControlRequired:true};T.oCommonUtils.onBeforeRebindTableOrChart(e,j);},onToggleDynamicSideContent:P.onToggleDynamicSideContent,sideContentBreakpointChanged:P.sideContentBreakpointChanged,onTableInit:function(e,i){var A1=e.getSource();var j=A1.getTable();l2(A1);T.oCommonUtils.checkToolbarIntentsSupported(A1);if(j.isA("sap.m.Table")){var k=function(){c2(A1,j,i);};j.attachUpdateStarted(k,this);}else if(j.isA("sap.ui.table.Table")){c2(A1,j,i);}if(I(A1)&&!A1.data("CrossNavigation")){j.addEventDelegate({onkeyup:function(e){if(e.ctrlKey&&e.keyCode===K.ENTER&&A1.getEditable()){T.oCommonEventHandlers.addEntry(A1,true);e.preventDefault();e.setMarked();}}});}var x=T.oComponentUtils.getTemplatePrivateModel();if(I(A1)){j.addEventDelegate({onAfterRendering:function(e){var z2;if(A1.getEditable()&&!A1.hasListeners("paste")){A1.attachBeforePaste(q1);A1.attachPaste(r1);z2=x.getProperty("/objectPage/aPasteAttachedTables");if(z2){z2.push(i);}}}});}},onPasteButtonPress:function(e){var i=T.oCommonUtils.getText("DATA_PASTE_ACTION_MESSAGE");M.information(i);},onSearchObjectPage:s2,onSearchLiveChange:r2,onSmartTablePaste:r1,onUITableExpand:_1,onSingleVisibleSection:Z1,onSingleVisibleSubSection:$1,dataStateFilter:x2},formatters:{sideContentActionButtonText:P.formatSideContentActionButtonText,setNoDataTextForSmartTable:function(e){if(T.oCommonUtils&&e){var i=T.oCommonUtils.getContextText("NOITEMS_SMARTTABLE",e);if(i!=="NOITEMS_SMARTTABLE"){return i;}return"";}},setVMVisibilityForVendor:function(){var e=new U(window.location.href);if(e.mParams["sap-ui-layer"]){var j=e.mParams["sap-ui-layer"];for(var i=0;i<j.length;i++){if(j[i].toUpperCase()==="VENDOR"){return true;}}}return false;},formatItemTextForMultipleView:function(i){return i&&Q?Q.formatItemTextForMultipleView(i):"";}},extensionAPI:new E(T,H,J)};y2.handlers=q(J.handlers,y2.handlers);return y2;}};return G;});
