sap.ui.define(["sap/ui/base/Object","sap/ui/base/Event","sap/ui/core/mvc/ControllerExtension","sap/ui/model/Context","sap/ui/model/Filter","sap/m/Table","sap/m/ListBase","sap/m/MessageBox","sap/ui/generic/app/navigation/service/NavigationHandler","sap/ui/generic/app/navigation/service/NavError","sap/suite/ui/generic/template/lib/testableHelper","sap/base/Log","sap/ui/model/analytics/odata4analytics","sap/suite/ui/generic/template/lib/MetadataAnalyser","sap/base/util/extend","sap/base/util/deepExtend"],function(B,E,C,a,F,R,L,M,N,b,t,c,o,d,f,g){"use strict";var h=sap.ui.getCore();function l(e,P){var i=sap.ui.require(P);return typeof i==="function"&&(e instanceof i);}function m(e){return l(e,"sap/ui/comp/smarttable/SmartTable");}function n(e){return l(e,"sap/ui/comp/smartchart/SmartChart");}function p(e){return l(e,"sap/ui/table/Table");}function q(e){return l(e,"sap/ui/table/AnalyticalTable");}function r(e){return l(e,"sap/ui/table/TreeTable");}function s(e){return l(e,"sap/m/Table");}function u(e){var T=e&&sap.ui.getCore().byId(e);if(T){T.focus();}}var m=t.testableStatic(m,"CommonUtils_isSmartTable");function v(w,S,x){var y;var z=Object.create(null);var O=Object.create(null);function P(e){var i;if(m(e)){i=e.getCustomToolbar();}else if(n(e)){i=e.getToolbar();}if(i){var j=Z(i);if(j&&j.annotatedActionIds){O[e.getId()]=JSON.parse(atob(j.annotatedActionIds));}if(j&&j.deleteButtonId){O[e.getId()].push({ID:j.deleteButtonId,RecordType:"CRUDActionDelete"});}}}function G(e){if(!O[e.getId()]){P(e);}return O[e.getId()];}function A(e){var i,j,k,R1;i=e.getEntitySet();j=w.getOwnerComponent().getModel().getMetaModel();k=j.getODataEntitySet(i);R1=j.getODataEntityType(k.entityType);return R1;}function D(e,i,j){var k=e instanceof E?e.getSource():e;var R1=k.getId();var S1=z[R1];if(!S1){if(j){return null;}S1={control:k,infoObject:Object.create(null),categories:[]};(i||Function.prototype)(S1.infoObject,S1.categories,k);z[R1]=S1;}return S1.infoObject;}function H(e,i){for(var j in z){var k=z[j];if(k.categories.indexOf(e)>=0){i(k.infoObject,k.control);}}}function I(e){S.oApplication.attachControlToParent(e,w.getView());}function J(e){if(e.getVisible&&!e.getVisible()){return null;}return e.getParent()||e.oContainer;}function K(e){var i=w.getView();var j=false;for(var k=i.getVisible()&&h.byId(e);k&&!j;k=J(k)){j=k===i;}return j;}function Q(e,j){var k="";for(var i=0;i<e.length;i++){var R1=e[i];if(K(R1)){if(j){var S1=h.byId(R1);if(m(S1)||s(S1)||p(S1)){k=k||R1;continue;}}return R1;}}return k;}function T(e,i,j,k){return S.oApplication.getDialogFragmentForView(w.getView(),e,i,j,k);}var U;function V(){var e=w.getOwnerComponent();U=U||e.getModel("i18n").getResourceBundle();return U.getText.apply(U,arguments);}function W(k,e,i,j){var R1,S1,T1,U1;var V1=w.getOwnerComponent();var W1=e.indexOf("::"+V1.getEntitySet()+"--")+2;R1=e.substring(W1,e.lastIndexOf("::"));R1=R1.replace(/--/g,"|").replace(/::/g,"|");S1=k+"|"+R1;T1=i||k;U1=V(S1,j);if(U1===S1){U1=V(T1,j);}return U1;}function X(e,i){var i=i||e.getSelectionBehavior();if(i==="DATAPOINT"){return{"dataPoints":e.getSelectedDataPoints().dataPoints,"count":e.getSelectedDataPoints().count};}else if(i==="CATEGORY"){return{"dataPoints":e.getSelectedCategories().categories,"count":e.getSelectedCategories().count};}else if(i==="SERIES"){return{"dataPoints":e.getSelectedSeries().series,"count":e.getSelectedSeries().count};}}function Y(e,j,k){var R1=[];if(m(e)){e=e.getTable();}else if(n(e)){e.getChartAsync().then(function(U1){e=U1;if(e&&e.getMetadata().getName()==="sap.chart.Chart"){var V1=false;j=j||e.getSelectionBehavior();k=k||X(e,j);if(k&&k.count>0){if(j==="DATAPOINT"){V1=true;}var W1=k.dataPoints;var X1=[];for(var i=0;i<W1.length;i++){if(V1){if(W1[i].context){R1.push(W1[i].context);}}else{X1.push(W1[i].dimensions);}}if(!V1){R1[0]=X1;}}}});}if(e instanceof L){R1=e.getSelectedContexts();}else if(p(e)){var S1=e.getPlugins().filter(function(U1){return U1.isA("sap.ui.table.plugins.SelectionPlugin");})[0];var T1=S1?S1.getSelectedIndices():e.getSelectedIndices();if(T1){for(var i=0;i<T1.length;i++){R1.push(e.getContextByIndex(T1[i]));}}}return R1;}function Z(e){var i={};if(e instanceof sap.ui.core.Element){e.getCustomData().forEach(function(j){i[j.getKey()]=j.getValue();});}return i;}function $(e){var j,k,R1;var S1=k1(e);if(!m(S1)&&!n(S1)){S1=S1.getParent();}var T1=Y(S1);var U1=S1.getModel();k=h1(S1);f1(k,T1,U1,S1);j=G(S1);for(var i=0;i<j.length;i++){R1=j[i];_(R1,U1,T1,S1);}}function _(e,i,j,k){var R1;if(e.RecordType==="CRUDActionDelete"){R1=d1(i,j,k);k.getModel("_templPriv").setProperty("/listReport/deleteEnabled",R1);}else if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){var S1=i.getMetaModel();R1=c1(i,S1,j,e.RecordType,e.Action,k);}var T1=w.getView().byId(e.ID);if(T1&&/generic\/controlProperties/.test(T1.getBindingPath("enabled"))&&R1!==undefined){b1(e.ID,"enabled",R1);}}function a1(e){var i;var j=k1(e);var k=Y(j);var R1=e.getModel();i=i1();f1(i,k,R1,j);}function b1(i,e,j){var k=w.getView().getModel("_templPriv");var R1=k.getProperty("/generic/controlProperties/"+i);if(!R1){R1={};R1[e]=j;k.setProperty("/generic/controlProperties/"+i,R1);}else{k.setProperty("/generic/controlProperties/"+i+"/"+e,j);}}function c1(e,i,k,R1,S1,T1){var U1,V1,W1,X1;var Y1=false;if(R1==="com.sap.vocabularies.UI.v1.DataFieldForAction"){U1=i.getODataFunctionImport(S1);W1=U1&&U1["sap:action-for"];if(W1&&W1!==""&&W1!==" "){if(k.length>0){X1=U1["sap:applicable-path"];if(X1&&X1!==""&&X1!==" "){for(var j=0;j<k.length;j++){if(!k[j]){continue;}V1=e.getObject(k[j].getPath());if(V1&&V1[X1]){Y1=true;break;}}}else{Y1=true;}}}else{Y1=true;}}else if(R1==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(k.length>0||(n(T1)&&T1.getDrillStackFilters().length>0)){Y1=true;}}return Y1;}function d1(e,i,j){if(i.length===0){return false;}var k=e1(j);var R1=k&&k.Deletable&&k.Deletable.Path;return i.some(function(S1){var T1=e.getObject(S1.getPath()+"/DraftAdministrativeData");var U1=!(T1&&T1.InProcessByUser&&!T1.DraftIsProcessedByMe);return U1&&!(R1&&!e.getProperty(R1,S1));});}function e1(e){var i=e.getModel()&&e.getModel().getMetaModel();var j=i&&i.getODataEntitySet(e.getEntitySet());var k=j&&j["Org.OData.Capabilities.V1.DeleteRestrictions"];return k;}function f1(e,i,j,k){var R1=j1(k);var S1=w.getView().getModel("_templPriv");var T1=S1.getProperty("/generic/listCommons/breakoutActionsEnabled");if(R1){var U1=w.byId("template::IconTabBar");var V1="";if(U1){V1=U1.getSelectedKey();}g1(T1,R1,e,i,j,V1,k);}S1.setProperty("/generic/listCommons/breakoutActionsEnabled",T1);}function g1(e,i,j,k,R1,S1,T1){var U1;for(var V1 in i){U1=true;var W1=i[V1].id+((S1&&!i[V1].determining)?"-"+S1:"");if(T1&&T1.getId().indexOf("AnalyticalListPage")>-1){U1=!!e[W1].enabled;}if(i[V1].requiresSelection){if(k.length>0){if(T1&&n(T1)){if(i[V1].filter==="chart"){U1=true;}}else if(T1&&m(T1)){if(i[V1].filter!=="chart"){U1=true;}}if(i[V1].applicablePath!==undefined&&i[V1].applicablePath!==""){U1=false;for(var X1=0;X1<k.length;X1++){var Y1="";var Z1=i[V1].applicablePath.split("/");if(Z1.length>1){for(var $1=0;$1<Z1.length-1;$1++){Y1+="/"+Z1[$1];}}var _1=R1.getObject(k[X1].getPath()+Y1);var a2=Z1[Z1.length-1];if(_1[a2]===true){U1=true;break;}}}}else if(n(T1)){if((T1.getId().indexOf("AnalyticalListPage")>-1?i[V1].filter==="chart":true)){if(T1.getDrillStackFilters().length>0){U1=true;}else{U1=false;}}}else{if(i[V1].filter!=="chart"){U1=false;}}}e[W1]={enabled:U1};}}function h1(e){var i=[];var j=j1(e);for(var k in j){i.push(j[k].id);}return i;}function i1(){var e=[];var i=j1();for(var j in i){if(i[j].determining){e.push(j);}}return e;}function j1(e){var i=w.getOwnerComponent();var j=i.getAppComponent().getManifestEntry("sap.ui5");var k=j.extends&&j.extends.extensions&&j.extends.extensions["sap.ui.controllerExtensions"];k=k&&k[i.getTemplateName()];k=k&&k["sap.ui.generic.app"];var R1=i.getEntitySet();var S1=Z(e).sectionId;if(!S1){return k&&k[R1]&&k[R1]["Actions"];}else{var T1=k&&k[R1]&&k[R1]["Sections"];return T1&&T1[S1]&&T1[S1].Actions;}}function k1(e){var i=e;while(i){if(i instanceof R||p(i)||m(i)||n(i)){return i;}i=i.getParent&&i.getParent();}return null;}function l1(e){if(m(e)){e=e.getTable();}if(p(e)){return e.getBindingInfo("rows");}else if(e instanceof R){return e.getBindingInfo("items");}return null;}function m1(e){var i=l1(e);if(i&&i.binding){i.binding.refresh();}else if(e&&e.rebindTable){e.rebindTable();}}function n1(e){var i=w.getOwnerComponent();var j=i.getModel();var k,R1;var S1=!S.oApplication.checkEtags();if(S1){R1=l1(e);if(R1){k=R1.path;var T1=e.getEntitySet();var U1=j.getMetaModel();var V1=U1.getODataEntitySet(T1);if(w.getMetadata().getName()==='sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage'&&o1(j,V1)){j.invalidateEntityType(V1.entityType);}else{j.invalidate(p1.bind(null,k));}var W1=i.getId();var X1=Object.create(null);X1[W1]=true;S.oApplication.refreshAllComponents(X1);}}}function o1(e,i){var j=new o.Model(o.Model.ReferenceByModel(e));var k=j.findQueryResultByName(i.name);var R1=k&&k.getParameterization();return!!R1;}function p1(e,k,i){var j=e[0]==="/"?e.substr(1):e;if(k.split("(")[0]===j){return true;}else{return false;}}function q1(e){var i;if(x.isDraftEnabled()){i=S.oDraftController.isActiveEntity(e)?1:6;}else{var j=w.getOwnerComponent();i=j.getModel("ui").getProperty("/editable")?6:1;}x.navigateAccordingToContext(e,i,0);}function r1(e,i){if(e instanceof a){S.oNavigationController.navigateToContext(e,i&&i.navigationProperty,i&&i.replaceInHistory);return;}var j=i&&i.routeName;if(j){x.navigateRoute(j,e,null,i&&i.replaceInHistory);return;}c.warning("navigateToContext called without context or route");}function s1(e){if(e instanceof b){if(e.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){M.show(V("ST_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:V("ST_GENERIC_ERROR_TITLE")});}else{M.show(e.getErrorCode(),{title:V("ST_GENERIC_ERROR_TITLE")});}}}function t1(e,i){G1(function(){y=M1();var j={semanticObject:e.semanticObject,action:e.action};var k=y.mixAttributesAndSelectionVariant(e.parameters);if(typeof w.adaptNavigationParameterExtension==="function"){w.adaptNavigationParameterExtension(k,j);}y.navigate(e.semanticObject,e.action,k.toJSONString(),null,s1);},Function.prototype,i,"LeavePage");}function u1(e){var R1=[],S1,T1,U1;var V1=w.getOwnerComponent();var W1=V1.getModel().getMetaModel();if(!e){return{};}var X1=V1.getAppComponent().getConfig().pages[0];if(!X1){return{};}var Y1=function(i){U1=W1.getODataEntitySet(i.entitySet).entityType;T1=W1.getODataEntityType(U1);S1={};S1={entitySet:i.entitySet,aKeys:W1.getODataEntityType(U1).key.propertyRef,navigationProperty:i.navigationProperty};for(var j=0,$1=S1.aKeys.length;j<$1;j++){var k=0,_1=T1.property.length;for(k;k<_1;k++){if(S1.aKeys[j].name===T1.property[k].name){S1.aKeys[j].type=T1.property[k].type;break;}}}};var Z1=function(e,X1){if(!X1.pages){return R1;}for(var i=0,j=X1.pages.length;i<j;i++){if(!X1.pages[i]){break;}if(e===X1.pages[i].entitySet){Y1(X1.pages[i]);R1.splice(0,0,S1);break;}R1=Z1(e,X1.pages[i]);if(R1.length>0){Y1(X1.pages[i]);R1.splice(0,0,S1);}}return R1;};return Z1(e,X1);}function v1(k,e){var R1,S1,i,T1;for(i=0,T1=k.length;i<T1;i++){if(k[i].navigationProperty){S1+="/"+k[i].navigationProperty;}else{S1="/"+k[i].entitySet;}for(var j=0,U1=k[i].aKeys.length;j<U1;j++){if(j===0){S1+="(";R1="";}else{R1=",";}switch(k[i].aKeys[j].type){case"Edm.Guid":if(e.DraftAdministrativeData&&e.DraftAdministrativeData.DraftIsCreatedByMe){S1+=R1+k[i].aKeys[j].name+"="+"guid'"+e.DraftAdministrativeData[k[i].aKeys[j].name]+"'";}else{S1+=R1+k[i].aKeys[j].name+"="+"guid'"+e[k[i].aKeys[j].name]+"'";}break;case"Edm.Boolean":if(e.DraftAdministrativeData&&e.DraftAdministrativeData.DraftIsCreatedByMe){S1+=R1+k[i].aKeys[j].name+"="+false;}else{S1+=R1+k[i].aKeys[j].name+"="+e[k[i].aKeys[j].name];}break;default:if(typeof e[k[i].aKeys[j].name]==="string"){S1+=R1+k[i].aKeys[j].name+"="+"'"+e[k[i].aKeys[j].name]+"'";}else{S1+=R1+k[i].aKeys[j].name+"="+e[k[i].aKeys[j].name];}break;}if(j===(U1-1)){S1+=")";}}}return S1;}function w1(e,k,w){var R1,S1,T1,U1,V1,W1,X1;var Y1={semanticObject:"",action:""};y=M1();R1=y.mixAttributesAndSelectionVariant({},k);for(U1 in e.semanticAttributesOfSemanticObjects){for(T1 in e.semanticAttributesOfSemanticObjects[U1]){if(!R1.getSelectOption(T1)){R1.addParameter(T1,"");}}V1=R1.getPropertyNames();Y1.semanticObject=U1;w.adaptNavigationParameterExtension(R1,Y1);W1=R1.getSelectOptionsPropertyNames();X1=R1.getParameterNames();for(var i=0,Z1=V1.length;i<Z1;i++){if(W1.indexOf(V1[i])<0&&X1.indexOf(V1[i])<0){delete e.semanticAttributesOfSemanticObjects[U1][V1[i]];R1.removeSelectOption(V1[i]);}}if(U1===e.semanticObject){var $1=e.semanticAttributesOfSemanticObjects[""];for(var j=0,Z1=X1.length;j<Z1;j++){R1.removeParameter(X1[j]);if(!(X1[j]in $1)){var _1=e.semanticAttributesOfSemanticObjects[e.semanticObject][X1[j]];_1=(typeof _1==="undefined"||_1===null)?"":String(_1);R1.addParameter(X1[j],_1);}}R1=y.mixAttributesAndSelectionVariant(e.semanticAttributesOfSemanticObjects[U1],R1.toJSONString());S1=R1.toJSONString();}}delete e.semanticAttributes;y.processBeforeSmartLinkPopoverOpens(e,S1);}function x1(e,j){var k=function(V1){for(var i=0;i<V1.length;i++){j(V1[i].name);}};var R1=w.getView().getModel().getMetaModel();var S1=R1.getODataEntitySet(e,false);var T1=R1.getODataEntityType(S1.entityType,false);k(T1.key.propertyRef);var U1=S.oDraftController.getDraftContext();if(U1.isDraftEnabled(e)){k(U1.getSemanticKey(e));j("IsActiveEntity");j("HasDraftEntity");j("HasActiveEntity");}}function y1(i,j,k,R1,S1){if(R1&&k&&k.getAnalyticBindingPath&&k.getConsiderAnalyticalParameters()){try{var T1=k.getAnalyticBindingPath();var U1=i.getEntitySet();var V1=i.getModel();var W1=V1.getMetaModel();var X1=W1.getODataEntitySet(U1);var Y1=new d(w);var Z1=Y1.getParametersByEntitySet(U1);if(j){T1=j(X1,Z1);}if(T1){R1(T1);}}catch(e){c.warning("Mandatory parameters have no values","",S1);}}}function z1(e,j,k){for(var i=0;i<j.length;i++){var R1=j[i];var S1=R1.lastIndexOf("/");var T1;if(S1<0){if(S.oApplication.getNavigationProperty(e,R1)){T1=R1;}else{continue;}}else{T1=R1.substring(0,S1);}if(k.indexOf(T1)===-1){k.push(T1);}}}function A1(e,i,j){var k=e.getParameter("bindingParams"),R1=e.getSource().getId();k.parameters=k.parameters||{};var S1=function(Z1,$1,R1){if(i&&i[Z1]){var _1=true;var a2=function(){var b2=arguments[0];if(!(b2 instanceof C)){throw new Error("Please provide a valid ControllerExtension in order to execute extension "+Z1);}if(!_1){throw new Error("Extension "+Z1+" must be executed synchronously");}var c2=Array.prototype.slice.call(arguments,1);$1.apply(null,c2);};i[Z1](a2,R1);_1=false;}};var T1=function(Z1){if(!R1||w.byId(R1)===e.getSource()){k.filters.push(Z1);}};if(i.addTemplateSpecificFilters){i.addTemplateSpecificFilters(k.filters);}S1("addExtensionFilters",T1,R1);var U1=e.getSource();if(w.getMetadata().getName()!=='sap.suite.ui.generic.template.ObjectPage.view.Details'){y1(U1,i.resolveParamaterizedEntitySet,j,i.setBindingPath,i.isAnalyticalListPage?"AnalyticalListPage":"ListReport");}var V1=U1.getEntitySet();var W1=k.parameters.select&&k.parameters.select.split(",")||[];var X1=k.parameters.expand&&k.parameters.expand.split(",")||[];var Y1=function(Z1,R1){if(Z1&&(!R1||w.byId(R1)===e.getSource())){var $1=Z1.split(',');$1.forEach(function(_1){if(_1&&W1.indexOf(_1)===-1){W1.push(_1);}});}};if(!i.isAnalyticalListPage){x1(V1,Y1);}S1("ensureExtensionFields",Y1,R1);(i.addNecessaryFields||Function.prototype)(W1,Y1,V1);z1(V1,W1,X1);if(X1.length>0){k.parameters.expand=X1.join(",");}if(W1.length>0){k.parameters.select=W1.join(",");}}function B1(e,i,j){if(!e){return V("DRAFT_OBJECT");}else if(i){return V(j?"LOCKED_OBJECT":"UNSAVED_CHANGES");}else{return"";}}function C1(){var e=T("sap.suite.ui.generic.template.fragments.DraftAdminDataPopover",{formatText:function(){var i=Array.prototype.slice.call(arguments,1);var k=arguments[0];if(!k){return"";}if(i.length>0&&(i[0]===null||i[0]===undefined||i[0]==="")){if(i.length>3&&(i[3]===null||i[3]===undefined||i[3]==="")){return(i.length>2&&(i[1]===null||i[1]===undefined||i[1]===""))?"":i[2];}else{return V(k,i[3]);}}else{return V(k,i[0]);}},closeDraftAdminPopover:function(){e.close();},formatDraftLockText:B1},"admin");return e;}function D1(e){var i={};if(e){i.discardPromise=e;}var j=w.getView();var k=j.getModel();if(k.hasPendingChanges()){j.setBindingContext(null);k.resetChanges();j.setBindingContext();}x.fire(w,"AfterCancel",{});}function E1(e,i,j,k,R1){var S1=S.oApplication.getBusyHelper();if(!R1&&S1.isBusy()){return;}if(!x.isDraftEnabled()){var T1=false;if(j&&j.aUnsavedDataCheckFunctions){T1=j.aUnsavedDataCheckFunctions.some(function(X1){return X1();});}var U1=w.getView();var V1=U1.getModel();if(T1||V1.hasPendingChanges()){var W1;J1(function(){D1();W1=e();},function(){W1=i();},k,false);return W1;}}return e();}function F1(e,i,j,k){var R1=false;if(j&&j.aUnsavedDataCheckFunctions){R1=j.aUnsavedDataCheckFunctions.some(function(T1){return T1();});}if(R1||w.getView().getModel().hasPendingChanges()){var S1;J1(function(){w.getView().getModel().resetChanges();x.fire(w,"AfterCancel",{});S1=e();},function(){S1=i();},k,true);return S1;}return e();}function G1(e,i,j,k,R1){if(R1){return E1(e,i,j,k,true);}S.oApplication.performAfterSideEffectExecution(E1.bind(null,e,i,j,k,false));}var H1;var I1;function J1(e,i,j,k){var R1;H1=e;I1=i;var S1=k?"sap.suite.ui.generic.template.fragments.DataLossTechnicalError":"sap.suite.ui.generic.template.fragments.DataLoss";var T1=T(S1,{onDataLossOK:function(){T1.close();H1();},onDataLossCancel:function(){T1.close();I1();}},"dataLoss");j=j||"LeavePage";R1=T1.getModel("dataLoss");R1.setProperty("/mode",j);T1.open();}function K1(e,i,j,k,R1,S1){if(i.busy.check&&k.isBusy()){S1();return;}var T1=i.busy.set?function(){k.setBusy(Promise.resolve(),false,{actionLabel:i.sActionLabel});return e();}:e;var U1=i.mConsiderObjectsAsDeleted?function(W1){S.oApplication.prepareDeletion(i.mConsiderObjectsAsDeleted);return T1();}:T1;var V1=(i.dataloss.popup?G1(U1,S1,j,(i.dataloss.navigation?"LeavePage":"Proceed"),true):U1());if(V1 instanceof Promise){V1.then(R1,S1);}else{R1();}}function L1(e,i,j){i=g({busy:{set:true,check:true},dataloss:{popup:true,navigation:false}},i);var k=S.oApplication.getBusyHelper();var R1=new Promise(function(S1,T1){S.oApplication.performAfterSideEffectExecution(K1.bind(null,e,i,j,k,S1,T1));});if(i.busy.set){k.setBusy(R1,false,{actionLabel:i.sActionLabel});}return R1;}function M1(){y=y||new N(w);return y;}function N1(e){var i=e.getId()+"-variant";return sap.ui.getCore().byId(i).getDefaultVariantKey();}function O1(e){var i=e.getId()+"-variant";return sap.ui.getCore().byId(i).getDefaultVariantKey();}function P1(e){var j;var k=x.getTemplatePrivateModel();var R1=w.getOwnerComponent();var S1,T1,U1,V1,W1,X1=[],Y1=[],i,Z1,$1,_1,a2,b2,c2;var d2,e2;S1=R1.getAppComponent();T1=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService&&sap.ushell.Container.getService("CrossApplicationNavigation");U1=k.getProperty("/generic/supportedIntents/");if(n(e)){j=e.getToolbar();}else if(m(e)){j=e.getCustomToolbar();}V1=j.getContent();W1=V1.length;for(i=0;i<W1;i++){Z1=Z(V1[i]);if(Z1.hasOwnProperty("SemanticObject")&&Z1.hasOwnProperty("Action")){$1=Z1.SemanticObject;_1=Z1.Action;a2={semanticObject:$1,action:_1,ui5Component:S1};X1.push([a2]);b2=f({},a2);b2.bLinkIsSupported=false;Y1.push(b2);}}if(X1.length>0&&T1){c2=T1.getLinks(X1);c2.done(function(f2){U1=k.getProperty("/generic/supportedIntents/");d2=f2.length;for(i=0;i<d2;i++){if(f2[i][0].length>0){Y1[i].bLinkIsSupported=true;}$1=Y1[i].semanticObject;_1=Y1[i].action;e2=k.getProperty("/generic/supportedIntents/"+$1);if(!e2){U1[$1]={};U1[$1][_1]={"visible":Y1[i].bLinkIsSupported};}else if(!e2[_1]){e2[_1]={"visible":Y1[i].bLinkIsSupported};}else{e2[_1]["visible"]=Y1[i].bLinkIsSupported;}}k.updateBindings();});}}function Q1(e,i){var j=i&&w.byId(i);var k=(i&&!j)?Promise.reject():new Promise(function(R1,S1){S.oApplication.performAfterSideEffectExecution(function(){var T1=S.oApplication.getBusyHelper();if(T1.isBusy()){S1();return;}if(j&&(!j.getVisible()||(j.getEnabled&&!j.getEnabled()))){S1();return;}var k=j?e(j):e();if(k instanceof Promise){k.then(R1,S1);T1.setBusy(k);}else{R1(k);}});});k.catch(Function.prototype);return k;}var M1=t.testable(M1,"getNavigationHandler");var f1=t.testable(f1,"fillEnabledMapForBreakoutActions");var h1=t.testable(h1,"getBreakoutActionIds");var k1=t.testable(k1,"getOwnerControl");var Y=t.testable(Y,"getSelectedContexts");var G=t.testable(G,"fnGetToolbarCutomData");return{isSmartTable:m,isSmartChart:n,isUiTable:p,isAnalyticalTable:q,isTreeTable:r,isMTable:s,getPositionableControlId:Q,getMetaModelEntityType:A,getText:V,getContextText:W,getNavigationHandler:M1,getNavigationKeyProperties:u1,mergeNavigationKeyPropertiesWithValues:v1,executeGlobalSideEffect:function(){if(x.isDraftEnabled()){var e=w.getView();var i=w.getOwnerComponent();var j=i.getAppComponent();var k=j.getForceGlobalRefresh();var R1=i.getModel("ui");e.attachBrowserEvent("keydown",function(S1){var T1=S1.target.type==="search";var U1=S1.target.type==="textarea";var V1=S1.target.id.indexOf("rowAction")>-1;var W1=S1.target.id.indexOf("ColumnListItem")>-1;if(S1.keyCode===13&&S1.ctrlKey!==true&&R1.getProperty("/editable")&&!T1&&!U1&&!V1&&!W1){S.oApplication.addSideEffectPromise(new Promise(function(X1){setTimeout(function(){var Y1=S.oApplicationController.executeSideEffects(e.getBindingContext(),null,null,k);Y1.then(function(){X1();setTimeout(function(){var Z1=document.getElementById(S1.target.id);if(Z1){Z1.focus();}});});});}));}});}},setEnabledToolbarButtons:$,setEnabledFooterButtons:a1,fillEnabledMapForBreakoutActions:f1,getBreakoutActions:j1,getSelectedContexts:Y,getSelectionPoints:X,getDeleteRestrictions:e1,getSmartTableDefaultVariant:N1,getSmartChartDefaultVariant:O1,setPrivateModelControlProperty:b1,navigateFromListItem:q1,navigateToContext:r1,navigateExternal:t1,semanticObjectLinkNavigation:w1,getCustomData:function(e){var j=e.getSource().getCustomData();var k={};for(var i=0;i<j.length;i++){k[j[i].getKey()]=j[i].getValue();}return k;},getCustomDataText:function(e){return new Promise(function(j,k){e.getCustomData().forEach(function(R1){var S1=R1.getKey();if(S1==="text"){var T1=R1.getBinding("value");var U1=!T1&&R1.getBindingInfo("value");if(!T1&&!U1){j(R1.getValue());return;}var V1=function(W1){j(W1.getSource().getExternalValue());return;};if(T1){T1.attachChangeOnce(V1);}else{U1.events={change:V1};for(var i=0;i<U1.parts.length;i++){U1.parts[i].targetType="string";}}}});});},onBeforeRebindTableOrChart:A1,formatDraftLockText:B1,resetChangesAndFireCancelEvent:D1,showDraftPopover:function(e,i){var j=C1();var k=j.getModel("admin");k.setProperty("/IsActiveEntity",e.getProperty("IsActiveEntity"));k.setProperty("/HasDraftEntity",e.getProperty("HasDraftEntity"));j.bindElement({path:e.getPath()+"/DraftAdministrativeData"});if(j.getBindingContext()){j.openBy(i);}else{j.getObjectBinding().attachDataReceived(function(){j.openBy(i);});}},getContentDensityClass:function(){return S.oApplication.getContentDensityClass();},attachControlToView:I,getDialogFragment:T,processDataLossConfirmationIfNonDraft:G1,processDataLossTechnicalErrorConfirmation:F1,securedExecution:L1,getOwnerControl:k1,getTableBindingInfo:l1,refreshSmartTable:m1,refreshModel:n1,getElementCustomData:Z,triggerAction:function(e,i,j,k,R1){G1(function(){S.oCRUDManager.callAction({functionImportPath:j.Action,contexts:e,sourceControl:k,label:j.Label,operationGrouping:""}).then(function(S1){if(S1&&S1.length>0){var T1=S1[0];if(T1.response&&T1.response.context&&(!T1.actionContext||T1.actionContext&&T1.response.context.getPath()!==T1.actionContext.getPath())){S.oApplication.getBusyHelper().getUnbusy().then(S.oViewDependencyHelper.setMeToDirty.bind(null,w.getOwnerComponent(),i));}}});},Function.prototype,R1,"Proceed");},checkToolbarIntentsSupported:P1,executeIfControlReady:Q1,getControlInformation:D,executeForAllInformationObjects:H,focusControl:u};}return B.extend("sap.suite.ui.generic.template.lib.CommonUtils",{constructor:function(e,S,i){f(this,v(e,S,i));}});});
