sap.ui.define(["sap/base/util/merge","./TemplatePage","sap/ui/test/OpaBuilder","sap/ui/test/Opa5","sap/fe/test/Utils","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/FieldBuilder","sap/fe/test/builder/OverflowToolbarBuilder","sap/fe/test/api/FooterAssertions","sap/fe/test/api/FooterActions"],function(m,T,O,a,U,F,b,c,d,e){"use strict";function g(n){return"fe::table::"+n+"::LineItem";}function _(p,s,j,H,I,k,v){var l=p,D=false;if(typeof j==="string"){l+="::com.sap.vocabularies.UI.v1.Facets"+(j?"::"+j:"");}else if(typeof H==="string"){D=true;l+="::com.sap.vocabularies.UI.v1.HeaderFacets"+(H?"::"+H:"");}if(typeof I==="string"){l+="::com.sap.vocabularies.UI.v1.Identification"+(I?"::"+I:"");l+="::com.sap.vocabularies.UI.v1.Identification"+(I?"::"+I:"");}else if(typeof k==="string"){l+="::com.sap.vocabularies.UI.v1.FieldGroup"+(k?"::"+k:"");if(D){l+="::com.sap.vocabularies.UI.v1.FieldGroup"+(k?"::"+k:"");}}l+=(v?"::FormC::FormVH::":"::FormC::FormF::")+s;return l;}function f(p,o,s){return _(p,o.field+(s||""),o.facet,o.headerFacet,o.identification,o.fieldGroup,true);}function h(p,o,s){return _(p,o.field+(s||""),o.facet,o.headerFacet,o.identification,o.fieldGroup);}function i(o,v){return c.create(o).hasId(v.id);}return{create:function(A,C,E){var V=A+"::"+C,j="F::fe::form::"+E,k="fe::form::"+E,l="fe::OPHeaderContent",n="fe::op-OPHeaderContent",o="fe::op::footer::"+E,B=V+"--breadcrumbs",p="fe::op-anchBar",P="fe::paginator",q={DISPLAY:"Display",EDITABLE:"Editable"},r=sap.ui.getCore().getLibraryResourceBundle("sap.fe.templates"),R=sap.ui.getCore().getLibraryResourceBundle("sap.fe.core");return m(T.create(V,E),{actions:{onTable:function(t){if(!U.isOfType(t,String)){t={id:g(t.property)};}return this._onTable(t);},onFooter:function(){return new e(i(this,{id:o}),{id:o},E);},iClickQuickViewMoreLinksButton:function(){return O.create(this).hasType("sap.m.Button").has(O.Matchers.resourceBundle("text","sap.ui.mdc","info.POPOVER_DEFINE_LINKS")).doPress().description("Pressing 'More Links' button").execute();},iClickLinkWithText:function(t){return O.create(this).hasType("sap.m.Link").hasProperties({text:t}).doPress().description("Navigating via link '"+t+"'").execute();},iNavigateToBreadCrumbLink:function(L){return(O.create(this).hasId(B).doOnChildren(O.create(this).hasType("sap.m.Link").hasProperties({text:L}).checkNumberOfMatches(1).doPress().error("Cannot find Bread Crumb Link "+L)).do(function(){a.assert.ok(true,"Navigating back through Bread Crumb Link "+L);}).execute());},iClickSemanticLink:function(s){var t=h(j,s);return O.create(this).hasId(new RegExp(t)).hasType("sap.m.Link").doPress().description("Opening semantic link '"+s.field+"'").execute();},iEnableLink:function(t){return O.create(this).hasType("sap.m.ColumnListItem").hasAggregationProperties("cells",{text:t}).isDialogElement().doPress("selectMulti").description("The CheckBox for link "+t+" is selected").execute();},iEnterValueForField:function(s,v){var t=h(j,s);return O.create(this).hasId(t).doEnterText(v).description("Entering Text in the field '"+s.field+"' with value '"+v+"'").execute();},iOpenVHDialog:function(s){var t=h(j,s,"-inner-vhi");return O.create(this).hasId(t).doPress().description("Opening value help for '"+s.field+"'").execute();},iPressKeyboardShortcutOnSection:function(s,t){return this._iPressKeyboardShortcut(undefined,s,t,"sap.uxap.ObjectPageSection");},iSelectFromVHDTable:function(v){return O.create(this).hasType("sap.m.ColumnListItem").hasAggregationProperties("cells",{value:v}).checkNumberOfMatches(1).isDialogElement().doPress().description("Selecting row from dialog with value '"+v+"'").execute();},iConfirmFacetVHD:function(s){var t=f(k,s,"-ok");return O.create(this).hasId(t).doPress().description("Confirming value help selection for '"+s.field+"'").execute();},iEditDetailPage:function(){return O.create(this).hasType("sap.m.Button").has(O.Matchers.i18n("text","sap.fe.i18n>OBJECT_PAGE_EDIT")).doPress().description("Start editing").execute();},iDeleteItem:function(){return O.create(this).hasType("sap.m.Button").has(O.Matchers.i18n("text","sap.fe.i18n>OBJECT_PAGE_DELETE")).doPress().description("Clicking the Delete button").execute();},iCancelDialog:function(){return O.create(this).hasType("sap.m.Button").isDialogElement().hasProperties({text:R.getText("OBJECT_PAGE_CANCEL")}).doPress().description("Clicking the Cancel button").execute();},iConfirmDialogWithButtonText:function(t){return O.create(this).hasType("sap.m.Button").isDialogElement().hasProperties({text:t}).doPress().description("Clicking the "+t+"button").execute();},iOpenSectionWithTitle:function(N){return O.create(this).hasId(p).has(O.Matchers.aggregation("content",O.Matchers.properties({text:N}))).doPress().description("Selecting section "+N).execute();},iExecuteAction:function(t){return O.create(this).hasType("sap.uxap.ObjectPageDynamicHeaderTitle").doOnAggregation("actions",O.Matchers.properties({text:t}),O.Actions.press()).execute();},iApplyChanges:function(){return O.create(this).hasId(o).doOnChildren(O.create(this).hasType("sap.m.Button").hasProperties({text:r.getText("OBJECT_PAGE_APPLY_DRAFT")}).doPress().description("Applying changes")).execute();},iSwitchToNextItem:function(){return this._iSwitchItem(true);},iSwitchToPrevItem:function(){return this._iSwitchItem(false);},iSortTableByColumn:function(N,s){return this._iSortTableByColumn(g(N),s);},iClickOnRelatedAppButton:function(){return O.create(this).hasType("sap.m.Button").hasProperties({text:r.getText("OBJECT_PAGE_REALATED_APPS")}).doPress().description("Clicking on Related Apps Button").execute();},iClickCreateButton:function(){return O.create(this).isDialogElement().hasType("sap.m.Button").has(O.Matchers.resourceBundle("text","sap.fe.core","SAPFE_ACTION_CREATE")).doPress().description("Pressing Create button on sticky creation dialog.").execute();}},assertions:{onTable:function(t){if(!U.isOfType(t,String)){t={id:g(t.property)};}return this._onTable(t);},onFooter:function(){return new d(i(this,{id:o}),{id:o});},iSeeLinkWithText:function(t){return O.create(this).hasType("sap.m.Link").hasProperties({text:t}).description("Seeing link with text '"+t+"'").execute();},iSeeBreadCrumb:function(L,s){return this._iSeeBreadCrumb(B,L,s);},iSeeEditButton:function(s){return this._iSeeButtonWithText(R.getText("OBJECT_PAGE_EDIT"),s);},iSeePageActionButton:function(s,t,u){return this._iSeeElement("fe::"+s+"."+t+"::"+E,u);},iSeeFacetActionButton:function(s,t,u){return this._iSeeElement("fe::fab::com.sap.vocabularies.UI.v1.FieldGroup::"+s+"::"+t,u);},iSeeContactDetailsPopover:function(t){return(O.create(this).hasType("sap.ui.mdc.link.Panel").description("Contact card with title '"+t+"' is present").execute());},iSeeQuickViewPopover:function(){return O.create(this).hasType("sap.ui.mdc.link.Panel").description("Seeing Quick View Details in ObjectPage").execute();},iSeeQuickViewMoreLinksButton:function(){return O.create(this).isDialogElement(true).hasType("sap.m.Button").has(O.Matchers.resourceBundle("text","sap.ui.mdc","info.POPOVER_DEFINE_LINKS")).description("The 'More Links' button found").execute();},iSeeObjectPageInDisplayMode:function(){return this._iSeeObjectPageInMode(q.DISPLAY);},iSeeObjectPageInEditMode:function(){return this._iSeeObjectPageInMode(q.EDITABLE);},_iSeeObjectPageInMode:function(M){return O.create(this).hasId(V).viewId(null).has(function(s){return s.getModel("ui").getProperty("/editable")===M;}).description("Object Page is in mode '"+M+"'").execute();},iSeeObjectPageTitle:function(t){return O.create(this).hasType("sap.uxap.ObjectPageDynamicHeaderTitle").doOnChildren(O.create(this).hasType("sap.m.Title").hasProperties({text:t})).description("Seeing Object Page title '"+t+"'").execute();},iSeeHeaderContentWithItems:function(N){return O.create(this).hasId(n).has(function(s){return s.getContent()[0].getItems().length===N;}).description("Header Content has "+N+" item(s)").execute();},iSeeHeaderDataPoint:function(t,v){return O.create(this).hasId(n).doOnChildren(O.create(this).hasType("sap.m.ObjectNumber").hasProperties({number:v.replace(/ /g,String.fromCharCode(160))}).has(function(s){return s.getParent();}).hasAggregationProperties("items",{text:t})).description(U.formatMessage("Seeing header data point '{0}' with value '{1}'",t,v)).execute();},iSeeMicroChartAndUomLabel:function(s,t,L,u){var v=O.create(this).hasId(l+s).hasType("sap.suite.ui.microchart."+t+"MicroChart");if(u!==null){v.hasAggregationProperties("_uomLabel",{text:u}).description("Seeing MicroChart of type '"+t+"' with label '"+u+"'");}else{v.description("Seeing MicroChart of type '"+t+"'");}return v.execute();},iSeeValueSetInStatus:function(v){return O.create(this).hasType("sap.m.ObjectStatus").hasProperties({text:v}).description("Seeing object status '"+v+"'").execute();},iSeeValueForField:function(s,v,t,u){var w=U.parseArguments([Object,[Array,String],String,Object],arguments),x=h(j,w[0]);return b.create(this).hasId(x).hasState(w[3]).hasValue(w[1],w[2]).description(U.formatMessage("Seeing field '{0}' with value '{1}'",s.field,[].concat(w[1],w[2]||[]))).execute(this);},iSeeSectionWithTitle:function(t){return O.create(this).hasType("sap.uxap.ObjectPageSection").hasProperties({title:t}).description("Seeing section with title '"+t+"'").execute();},iSeeSubSectionWithTitle:function(t){return O.create(this).hasType("sap.uxap.ObjectPageSubSection").hasProperties({title:t}).description("Seeing sub-section with title '"+t+"'").execute();},iSeeSemanticLink:function(s){var t=h(j,s);return O.create(this).hasId(new RegExp(t)).hasType("sap.m.Link").description("Seeing semantic link for field '"+s.field+"'").execute();},iSeeFlpLink:function(D){return O.create(this).hasType("sap.ui.mdc.link.PanelListItem").isDialogElement(true).hasProperties({text:D}).description("FLP link with text '"+D+"' is present").execute();},iSeeSelectLinksDialog:function(){return O.create(this).hasType("sap.m.Title").isDialogElement(true).has(O.Matchers.resourceBundle("text","sap.ui.mdc","info.SELECTION_DIALOG_ALIGNEDTITLE")).description("Seeing dialog open").execute();},iDoNotSeeFlpLink:function(D){return O.create(this).hasType("sap.m.Link").isDialogElement(true).check(function(s){var t=s.some(function(u){return u.getText()===D;});return t===false;},true).description("FLP link with text '"+D+"' is not found").execute();},iSeeVHD:function(s){var D=f(k,s,"-dialog");return O.create(this).hasId(D).description("Seeing value help dialog for field '"+s.field+"'").execute();},iSeeVHDTable:function(s){var v=f(k,s,"::Table");return O.create(this).hasId(v).hasAggregation("items").description("Seeing filled value help dialog for field '"+s.field+"'").execute();},iSeeVHDFilterBar:function(s){var v=f(k,s,"::FilterBar");return O.create(this).hasId(v).description("Seeing value help filterbar for field '"+s.field+"'").execute();},iSeeSaveConfirmation:function(){return this._iSeeTheMessageToast(R.getText("OBJECT_SAVED"));},iSeeDeleteConfirmation:function(){return this._iSeeTheMessageToast(R.getText("OBJECT_PAGE_DELETE_TOAST_SINGULAR"));},iSeeHeaderDeleteButtonIsVisible:function(v){v=v===undefined?true:v;return O.create(this).hasType("sap.m.Button").hasProperties({text:r.getText("OBJECT_PAGE_DELETE"),visible:v}).mustBeVisible(false).has(function(s){return(s.getParent().getMetadata().getName()==="sap.uxap.ObjectPageDynamicHeaderTitle");}).description("Header Delete button is "+(v?"visible":"invisible")).execute();},iSeePaginator:function(){return O.create(this).hasId(P).description("Seeing paginator").execute();},iSeePaginatorButtonDownIsEnabled:function(s){return this._checkPaginatorButtonEnablement(true,s===undefined?true:s);},iSeePaginatorButtonUpIsEnabled:function(s){return this._checkPaginatorButtonEnablement(false,s===undefined?true:s);},iSeeApplyButton:function(){return O.create(this).hasId(o).doOnChildren(O.create(this).hasType("sap.m.Button").hasProperties({text:r.getText("OBJECT_PAGE_APPLY_DRAFT")}).description("Apply button is visible in footer")).execute();},iSeeSortedColumn:function(N,s,t){return this._iSeeSortedColumn(g(N),s,t||"sortOrder");},iSeeTableP13nMode:function(N,M){return this._iSeeControlsP13nMode(g(N),M);},iSeeConfirmMessageBoxWithTitle:function(t){return O.create(this).hasType("sap.m.Dialog").isDialogElement(true).hasProperties({title:t}).description("Seeing Message dialog open").execute();},iSeeExportExcelOptions:function(N){return this._iSeeExportExcelOptions(g(N));},iDoNotSeeExportExcelOptions:function(N){return this._iDoNotSeeExportExcelOptions(g(N));},iSeeFieldPropertyInTable:function(N,v,s){return this._iSeeTableRowWithCellProperty(g(N),v,s);},iSeeRelatedAppsDropdown:function(s){return O.create(this).hasType("sap.ui.unified.Menu").isDialogElement().hasProperties({visible:true}).hasAggregationLength("items",s).description("Seeing Related Apps dropdown with '{0}' entries ",s).execute();}}});}};});
