/*!
 * SAPUI5

		(c) Copyright 2009-2020 SAP SE. All rights reserved
	
 */
sap.ui.define(['sap/ui/thirdparty/jquery','sap/ui/Device','sap/ui/mdc/library','sap/ui/mdc/field/FieldBaseRenderer','sap/ui/mdc/condition/FilterOperatorUtil','sap/ui/mdc/condition/Condition','sap/ui/mdc/field/ConditionType','sap/ui/mdc/field/ConditionsType','sap/ui/mdc/util/BaseType','sap/ui/mdc/util/DateUtil','sap/ui/mdc/mixin/DelegateMixin','sap/ui/core/library','sap/ui/core/Control','sap/ui/core/message/MessageMixin','sap/base/util/ObjectPath','sap/base/util/deepEqual','sap/base/util/merge','sap/base/Log','sap/base/util/isEmptyObject','sap/ui/dom/containsOrEquals','sap/ui/model/Filter','sap/ui/model/base/ManagedObjectModel','sap/ui/base/ManagedObjectObserver','sap/ui/base/SyncPromise','sap/base/util/restricted/_throttle','sap/ui/events/KeyCodes'],function(q,D,l,F,a,C,b,c,B,d,e,f,g,M,O,h,m,L,k,n,o,p,r,S,t,K){"use strict";var E=l.EditMode;var s=l.FieldDisplay;var V=f.ValueState;var u=f.CalendarType;var v=g.extend("sap.ui.mdc.field.FieldBase",{metadata:{interfaces:["sap.ui.core.IFormContent"],library:"sap.ui.mdc",properties:{dataType:{type:"string",group:"Data",defaultValue:'sap.ui.model.type.String'},dataTypeConstraints:{type:"object",group:"Data",defaultValue:null},dataTypeFormatOptions:{type:"object",group:"Data",defaultValue:null},editMode:{type:"sap.ui.mdc.EditMode",group:"Data",defaultValue:E.Editable},required:{type:"boolean",group:"Data",defaultValue:false},display:{type:"sap.ui.mdc.FieldDisplay",defaultValue:s.Value},textAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:sap.ui.core.TextAlign.Initial},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:sap.ui.core.TextDirection.Inherit},placeholder:{type:"string",group:"Misc",defaultValue:""},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:sap.ui.core.ValueState.None},valueStateText:{type:"string",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},multipleLines:{type:"boolean",group:"Appearance",defaultValue:false},maxConditions:{type:"int",group:"Behavior",defaultValue:-1},conditions:{type:"object[]",group:"Data",defaultValue:[],byValue:true},label:{type:"string",group:"Misc",defaultValue:""},delegate:{type:"object",defaultValue:{name:"sap/ui/mdc/field/FieldBaseDelegate",payload:{}}},_fieldHelpEnabled:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false},contentEdit:{type:"sap.ui.core.Control",multiple:false},contentDisplay:{type:"sap.ui.core.Control",multiple:false},_content:{type:"sap.ui.core.Control",multiple:true,visibility:"hidden"},fieldInfo:{type:"sap.ui.mdc.field.FieldInfoBase",multiple:false}},associations:{fieldHelp:{type:"sap.ui.mdc.field.FieldHelpBase",multiple:false},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{liveChange:{parameters:{value:{type:"string"},escPressed:{type:"boolean"},previousValue:{type:"string"}}},press:{}},publicMethods:[],defaultAggregation:"content"},_oManagedObjectModel:null});M.call(v.prototype);var w={Default:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Token"],editMultiLine:"sap/m/TextArea",display:"sap/m/Text",createEdit:k1,createEditMulti:m1,createEditMultiLine:n1,createDisplay:o1,useDefaultFieldHelp:{name:"defineConditions",oneOperator:false}},Search:{edit:"sap/m/SearchField",display:"sap/m/Text",createEdit:l1,createDisplay:o1,useDefaultFieldHelp:false},Date:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Token"],display:"sap/m/Text",editOperator:{"EQ":{name:"sap/m/DatePicker",create:p1},"EEQ":{name:"sap/m/DatePicker",create:p1},"BT":{name:"sap/m/DateRangeSelection",create:q1}},createEdit:k1,createEditMulti:m1,createDisplay:o1,useDefaultFieldHelp:{name:"defineConditions",oneOperator:false}},Time:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Token"],display:"sap/m/Text",editOperator:{"EQ":{name:"sap/m/TimePicker",create:p1},"EEQ":{name:"sap/m/TimePicker",create:p1}},createEdit:k1,createEditMulti:m1,createDisplay:o1,useDefaultFieldHelp:{name:"defineConditions",oneOperator:false}},DateTime:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Token"],display:"sap/m/Text",editOperator:{"EQ":{name:"sap/m/DateTimePicker",create:p1},"EEQ":{name:"sap/m/DateTimePicker",create:p1}},createEdit:k1,createEditMulti:m1,createDisplay:o1,useDefaultFieldHelp:{name:"defineConditions",oneOperator:false}},Link:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Token"],editMultiLine:"sap/m/TextArea",display:"sap/m/Link",createEdit:k1,createEditMulti:m1,createEditMultiLine:n1,createDisplay:r1,useDefaultFieldHelp:false},Boolean:{edit:"sap/m/Input",display:"sap/m/Text",createEdit:s1,createDisplay:o1,useDefaultFieldHelp:{name:"bool",oneOperator:true}},Unit:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Input","sap/m/Token"],display:"sap/m/Text",createEdit:t1,createEditMulti:u1,createDisplay:o1,useDefaultFieldHelp:false}};var x;var y;v._init=function(){x={};if(y&&y.bool&&y.bool.control){y.bool.control.destroy();}if(y&&y.defineConditions&&y.defineConditions.control){y.defineConditions.control.destroy();}y={bool:{name:"sap/ui/mdc/field/BoolFieldHelp",id:"BoolDefaultHelp",properties:{},control:undefined},defineConditions:{name:"sap/ui/mdc/field/FieldValueHelp",id:"Field-DefineConditions-Help",properties:{showConditionPanel:true},control:undefined}};};v._init();v.prototype.init=function(){this._oManagedObjectModel=new p(this);this._oObserver=new r(this._observeChanges.bind(this));this._oObserver.observe(this,{properties:["display","editMode","dataType","dataTypeFormatOptions","dataTypeConstraints","multipleLines","maxConditions","conditions","delegate"],aggregations:["fieldInfo","content","contentEdit","contentDisplay"],associations:["fieldHelp","ariaLabelledBy"]});this._oDatePickerRequested={};this.attachEvent("modelContextChange",this._handleModelContextChange,this);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._aAsyncChanges=[];};v.prototype.exit=function(){var i=this.getFieldInfo();if(i){i.detachEvent("dataUpdate",X1,this);}var j=this.getContent();if(j){d1.call(this,j);}var f2=this.getContentEdit();if(f2){d1.call(this,f2);}var g2=this.getContentDisplay();if(g2){d1.call(this,g2);}this._oManagedObjectModel.destroy();delete this._oManagedObjectModel;this._oObserver.disconnect();this._oObserver=undefined;if(this._oConditionType&&this._oConditionType._bCreatedByField){this._oConditionType.destroy();this._oConditionType=undefined;}if(this._oConditionsType&&this._oConditionsType._bCreatedByField){this._oConditionsType.destroy();this._oConditionsType=undefined;}var h2=L1.call(this);if(h2){h2.detachEvent("dataUpdate",R1,this);if(this._bConnected){S1.call(this);h2.connect();}}H1.call(this);delete this._fnLiveChangeTimer;};v.prototype.applySettings=function(){g.prototype.applySettings.apply(this,arguments);if(!this.DELEGATE&&!this._bDelegateSet){this._oPayload=this.getDelegate().payload||{};this.loadDelegateModule();}};e.call(v.prototype);v.prototype.onBeforeRendering=function(){if(!this.DELEGATE){this.oDelegatePromise.then(function(){f1.call(this);}.bind(this));return;}f1.call(this);};v.prototype.onAfterRendering=function(){if(L1.call(this)&&this.getEditMode()!=E.Display){var j=this.getAggregation("_content",[]);for(var i=0;i<j.length;i++){var f2=j[i];var g2=f2.getFocusDomRef();q(g2).attr("autocomplete","off");}}};v.prototype.onfocusin=function(i){T1.call(this);};v.prototype.onsapfocusleave=function(i){H1.call(this);};v.prototype.onsapup=function(i){var j=L1.call(this);var f2=i.srcControl;if(j&&(!this._bIsMeasure||f2.getShowValueHelp())){i.preventDefault();i.stopPropagation();j.navigate(-1);}};v.prototype.onsapdown=function(i){var j=L1.call(this);var f2=i.srcControl;if(j&&(!this._bIsMeasure||f2.getShowValueHelp())){i.preventDefault();i.stopPropagation();j.navigate(1);}};v.prototype.onsapenter=function(i){var j=L1.call(this);if(j&&j.isOpen(true)){j.close();}};v.prototype.clone=function(i,j){this.detachEvent("modelContextChange",this._handleModelContextChange,this);var f2=this.getContent();if(f2){d1.call(this,f2);}var g2=this.getContentEdit();if(g2){d1.call(this,g2);}var h2=this.getContentDisplay();if(h2){d1.call(this,h2);}var i2=this.getFieldInfo();if(i2){i2.detachEvent("dataUpdate",X1,this);}var j2=g.prototype.clone.apply(this,arguments);this.attachEvent("modelContextChange",this._handleModelContextChange,this);if(f2){c1.call(this,f2);}if(g2){c1.call(this,g2);}if(h2){c1.call(this,h2);}if(i2){i2.attachEvent("dataUpdate",X1,this);}return j2;};v.prototype.getFieldPath=function(){var i=this.getBindingPath("conditions");if(i&&i.startsWith("/conditions/")){return i.slice(12);}else{return"";}};function _(i,j,f2,g2){if(!g2){if(j){g2=Promise.resolve(this._getResultForPromise(i));}else{g2=Promise.reject(f2);}}this._fireChange(i,j,f2,g2);}v.prototype._fireChange=function(i,j,f2,g2){};function z(i){i=this.DELEGATE.getDataTypeClass(this._oPayload,i);var j=A.call(this,i);if(j){var f2=new j(this.getDataTypeFormatOptions(),this.getDataTypeConstraints());f2._bCreatedByField=true;return f2;}}function A(i){var j=O.get(i||"");if(!j){throw new Error("DataType cannot be determined");}return j;}function G(){if(!this._oDataType){var i=this.getDataType();if(typeof i==="string"){this._oDataType=z.call(this,i);}}return this._oDataType;}v.prototype._initDataType=function(){if(this._oDataType){this._oDataType.destroy();this._oDataType=undefined;}if(this._oDateOriginalType){if(this._oDateOriginalType._bCreatedByField){this._oDateOriginalType.destroy();}this._oDateOriginalType=undefined;}if(this._oUnitOriginalType){if(this._oUnitOriginalType._bCreatedByField){this._oUnitOriginalType.destroy();}this._oUnitOriginalType=undefined;}delete this._sDisplayFormat;delete this._sValueFormat;delete this._sCalendarType;};function H(){if(this._oDataType&&typeof this._oDataType==="object"){return this._oDataType.getMetadata().getName();}else if(this.DELEGATE){return this.DELEGATE.getDataTypeClass(this._oPayload,this.getDataType());}else{return this.getDataType();}}function I(){if(this._oDataType&&typeof this._oDataType==="object"&&this._oDataType.oConstraints){return this._oDataType.oConstraints;}else{return this.getDataTypeConstraints();}}function J(){if(this._oDataType&&typeof this._oDataType==="object"&&this._oDataType.oFormatOptions){return this._oDataType.oFormatOptions;}else{return this.getDataTypeFormatOptions();}}function N(i,j,f2){var g2=this.DELEGATE.getBaseType(this._oPayload,i,j,f2);switch(g2){case B.Date:this._sValueFormat="yyyy-MM-dd";break;case B.DateTime:this._sValueFormat="yyyy-MM-dd'T'HH:mm:ss";break;case B.Time:this._sValueFormat="HH:mm:ss";break;default:return;}this._sDisplayFormat="medium";if(j){if(j.style){this._sDisplayFormat=j.style;}else if(j.pattern){this._sDisplayFormat=j.pattern;}if(j.calendarType){this._sCalendarType=j.calendarType;}}}function P(){var i=G.call(this);var j=i.getMetadata().getName();var f2=i.oFormatOptions;var g2=i.oConstraints;N.call(this,j,f2,g2);if(!f2||f2.style||!f2.pattern||f2.pattern!==this._sValueFormat||!f2.calendarType||f2.calendarType!==u.Gregorian){this._oDateOriginalType=this._oDataType;this._oDataType=d.createInternalType(i,this._sValueFormat);Y1.call(this);}}function Q(){var i=G.call(this);var j=i.getMetadata().getName();var f2=i.oFormatOptions;var g2=k(i.oConstraints)?undefined:i.oConstraints;if(!f2||!f2.hasOwnProperty("showMeasure")||f2.showMeasure){f2=m({},f2);f2.showMeasure=false;f2.strictParsing=true;if(f2.customCurrencies){delete f2.customCurrencies;}if(f2.customUnits){delete f2.customUnits;}var h2=O.get(j);this._oUnitOriginalType=this._oDataType;this._oDataType=new h2(f2,g2);this.DELEGATE.initializeInternalUnitType(this._oPayload,this._oDataType,this._oTypeInitialization);Y1.call(this);}}function R(i,j){var f2=L1.call(this);if(f2&&this._bConnected){M1.call(this,i,f2);}}v.prototype._getContent=function(){var i=this.getContent();if(!i){if(this.getEditMode()===E.Display){i=this.getContentDisplay();}else{i=this.getContentEdit();}}if(i){return[i];}else{return this.getAggregation("_content",[]);}};function T(i){if(i===E.Editable||i===E.EditableReadOnly||i===E.EditableDisplay){return true;}else{return false;}}function U(i){if(i===E.Editable){return true;}else{return false;}}function W(i){if(i&&i!==E.Disabled){return true;}else{return false;}}function X(i){if(i&&i!==E.Editable){return true;}else{return false;}}v.prototype._handleModelContextChange=function(i){};function Y(i){this.setValueState(V.Error);this.setValueStateText(i);}function Z(){this.setValueState(V.None);this.setValueStateText();}v.prototype._observeChanges=function(j){var f2=function(){if(this.getAggregation("_content",[]).length>0){if(!this.DELEGATE){this.oDelegatePromise.then(function(){f1.call(this);}.bind(this));}else{f1.call(this);}}};if(j.name==="editMode"){f2.call(this);}if(j.name==="multipleLines"){f2.call(this);}if(j.name==="dataType"){if(this._oDataType){var g2=function(j2){var k2=A.call(this,this.DELEGATE.getDataTypeClass(this._oPayload,j.current));if(!(this._oDataType instanceof k2)){this._initDataType();this.destroyAggregation("_content");Y1.call(this);}};if(!this.DELEGATE){this.oDelegatePromise.then(function(){g2.call(this,j.current);}.bind(this));return;}g2.call(this,j.current);}}if(j.name==="dataTypeFormatOptions"||j.name==="dataTypeConstraints"){if(this._oDataType){this._initDataType();this.destroyAggregation("_content");Y1.call(this);}}if(j.name==="maxConditions"){f2.call(this);Y1.call(this);}if(j.name==="conditions"){this._bParseError=false;R.call(this,j.current,j.old);var h2=false;var i=0;for(i=0;i<this._aAsyncChanges.length;i++){var i2=this._aAsyncChanges[i];if(i2.waitForUpdate&&h(i2.result,j.current)){E1.call(this,i2);h2=true;break;}}if(h2){this._aAsyncChanges.splice(i,1);}}if(j.name==="display"){h1.call(this);Y1.call(this);}if(j.name==="fieldHelp"&&j.ids){K1.call(this,j.ids,j.mutation);Y1.call(this);}if(j.name==="fieldInfo"&&j.child){W1.call(this,j.child,j.mutation);}if(j.name==="content"&&j.child){b1.call(this,j.child,j.mutation,j.name);}if(j.name==="contentEdit"&&j.child){b1.call(this,j.child,j.mutation,j.name);}if(j.name==="contentDisplay"&&j.child){b1.call(this,j.child,j.mutation,j.name);}if(j.name==="delegate"&&!this._bDelegateSet){this._bDelegateSet=true;this._oPayload=j.current.payload||{};this.loadDelegateModule.call(this);}if(j.name==="ariaLabelledBy"&&j.ids){$.call(this,j.ids,j.mutation);}};v.prototype.getFocusDomRef=function(){var i=this._getContent();if(i.length>0){return i[0].getFocusDomRef();}else{return this.getDomRef();}};v.prototype.getIdForLabel=function(){var i;var j=this._getContent();if(j.length>0){i=j[0].getIdForLabel();}else{i=g1.call(this);}return i;};v.prototype.getControlForSuggestion=function(){var i=this._getContent();if(i.length>0){if(this._bIsMeasure){return i[1];}else{return i[0];}}else{return this;}};v.prototype.getMaxConditionsForHelp=function(){if(this._bIsMeasure){return 1;}else{return this.getMaxConditions();}};v.prototype.enhanceAccessibilityState=function(i,j){var f2=this.getParent();if(f2&&f2.enhanceAccessibilityState){f2.enhanceAccessibilityState(this,j);}return j;};v.prototype.getAccessibilityInfo=function(){var i=this._getContent();if(i.length>0&&i[0].getAccessibilityInfo){return i[0].getAccessibilityInfo();}else{return{};}};function $(j,f2){var g2=this.getAggregation("_content",[]);var h2=this.getContent();if(h2){g2.push(h2);}h2=this.getContentDisplay();if(h2){g2.push(h2);}h2=this.getContentEdit();if(h2){g2.push(h2);}for(var i=0;i<g2.length;i++){h2=g2[i];if(h2.getMetadata().getAllAssociations().ariaLabelledBy){if(f2==="remove"){h2.removeAriaLabelledBy(j);}else if(f2==="insert"){h2.addAriaLabelledBy(j);}}}}function a1(j){var f2=this.getAriaLabelledBy();for(var i=0;i<f2.length;i++){var g2=f2[i];j.addAriaLabelledBy(g2);}}v.prototype.connectLabel=function(i){j1.call(this,i);i.bindProperty("text",{path:"$field>/label"});i.setLabelFor(this);return this;};function b1(i,j,f2){if(j==="remove"){d1.call(this,i);x1.call(this,i);if(this._oContentConditionTypes){delete this._oContentConditionTypes[f2];}i.setModel(null,"$field");}else if(j==="insert"){w1.call(this,i);c1.call(this,i);if(this.getAggregation("_content",[]).length>0){h1.call(this);}if(!this._oContentConditionTypes){this._oContentConditionTypes={};}if(!this._oContentConditionTypes[f2]){this._oContentConditionTypes[f2]={};}var g2;var h2;for(h2 in i.getMetadata().getAllProperties()){if(i.getBindingPath(h2)==="/conditions"){g2=i.getBindingInfo(h2);if(g2&&g2.type&&g2.type instanceof c){this._oContentConditionTypes[f2].oConditionsType=g2.type;}this._sBoundProperty=h2;}if(h2==="editable"&&!i.getBindingPath(h2)&&i.isPropertyInitial(h2)){i.bindProperty(h2,{path:"$field>/editMode",formatter:T});}if(h2==="enabled"&&!i.getBindingPath(h2)&&i.isPropertyInitial(h2)){i.bindProperty(h2,{path:"$field>/editMode",formatter:W});}if(h2==="displayOnly"&&!i.getBindingPath(h2)&&i.isPropertyInitial(h2)){i.bindProperty(h2,{path:"$field>/editMode",formatter:X});}if(h2==="required"&&!i.getBindingPath(h2)&&i.isPropertyInitial(h2)){i.bindProperty(h2,{path:"$field>/required"});}if(h2==="textAlign"&&!i.getBindingPath(h2)&&i.isPropertyInitial(h2)){i.bindProperty(h2,{path:"$field>/textAlign"});}if(h2==="textDirection"&&!i.getBindingPath(h2)&&i.isPropertyInitial(h2)){i.bindProperty(h2,{path:"$field>/textDirection"});}if(h2==="valueState"&&!i.getBindingPath(h2)&&i.isPropertyInitial(h2)){i.bindProperty(h2,{path:"$field>/valueState"});}if(h2==="valueStateText"&&!i.getBindingPath(h2)&&i.isPropertyInitial(h2)){i.bindProperty(h2,{path:"$field>/valueStateText"});}if(h2==="placeholder"&&!i.getBindingPath(h2)&&i.isPropertyInitial(h2)){i.bindProperty(h2,{path:"$field>/placeholder"});}if(h2==="tooltip"&&!i.getBindingPath(h2)&&i.isPropertyInitial(h2)){i.bindProperty(h2,{path:"$field>/tooltip"});}}for(var i2 in i.getMetadata().getAllAggregations()){if(i.getBindingPath(i2)==="/conditions"){g2=i.getBindingInfo(i2);if(g2&&g2.template){for(h2 in g2.template.getMetadata().getAllProperties()){var j2=g2.template.getBindingInfo(h2);if(j2&&j2.type&&j2.type instanceof b){this._oContentConditionTypes[f2].oConditionType=j2.type;break;}}}break;}}}a1.call(this,i);}function c1(i){if(i.getMetadata().getEvents().change){i.attachEvent("change",D1,this);}if(i.getMetadata().getEvents().liveChange){i.attachEvent("liveChange",G1,this);}if(i.getMetadata().getEvents().press){i.attachEvent("press",I1,this);}}function d1(i){if(i.getMetadata().getEvents().change){i.detachEvent("change",D1,this);}if(i.getMetadata().getEvents().liveChange){i.detachEvent("liveChange",G1,this);}if(i.getMetadata().getEvents().press){i.detachEvent("press",I1,this);}}function e1(){if(this._oConditionType&&!this._oConditionType._bCreatedByField){this._oConditionType=undefined;}if(this._oConditionsType&&!this._oConditionsType._bCreatedByField){this._oConditionsType=undefined;}var i=this.getEditMode();var j;var f2;if(this.getContent()){if(this._oContentConditionTypes.content){j=this._oContentConditionTypes.content.oConditionType;f2=this._oContentConditionTypes.content.oConditionsType;}}else if(i===E.Display&&this.getContentDisplay()){if(this._oContentConditionTypes.contentDisplay){j=this._oContentConditionTypes.contentDisplay.oConditionType;f2=this._oContentConditionTypes.contentDisplay.oConditionsType;}}else if(i!==E.Display&&this.getContentEdit()){if(this._oContentConditionTypes.contentEdit){j=this._oContentConditionTypes.contentEdit.oConditionType;f2=this._oContentConditionTypes.contentEdit.oConditionsType;}}if(j){if(this._oConditionType&&this._oConditionType._bCreatedByField){this._oConditionType.destroy();}this._oConditionType=j;}if(f2){if(this._oConditionsType&&this._oConditionsType._bCreatedByField){this._oConditionsType.destroy();}this._oConditionsType=f2;}Y1.call(this);}function f1(){e1.call(this);var j=this.getEditMode();if(this.getContent()||this._bIsBeingDestroyed||(j===E.Display&&this.getContentDisplay())||(j!==E.Display&&this.getContentEdit())){h1.call(this);var f2=this._getContent();if(f2.length===1){j1.call(this,f2[0]);}return;}var g2=H.call(this);var h2=I.call(this);var i2=J.call(this);var j2=this.DELEGATE.getBaseType(this._oPayload,g2,i2,h2);var k2=this.getMaxConditions();var l2=this._getOperators();var m2;var n2;var o2;var p2=this.getAggregation("_content",[]);var q2;var r2;if(p2.length>0){q2=p2[0];r2=q2.getMetadata().getName().replace(/\./g,"/");}m2=w[j2];if(!m2){if(this.getFieldInfo()&&this._bTriggerable){m2=w.Link;}else{var s2=new RegExp("^\\*(.*)\\*|\\$search$");if(s2.test(this.getFieldPath())&&this.getMaxConditions()===1){m2=w.Search;}else{m2=w.Default;}}}if(j===E.Display){n2=m2.display;o2=m2.createDisplay;}else if(k2!==1){n2=m2.editMulti;o2=m2.createEditMulti;}else if(this.getMultipleLines()){n2=m2.editMultiLine;o2=m2.createEditMultiLine;}else if(l2.length===1&&m2.editOperator&&m2.editOperator[l2[0]]){n2=m2.editOperator[l2[0]].name;o2=m2.editOperator[l2[0]].create;}else{n2=m2.edit;o2=m2.createEdit;}if(!n2){throw new Error("No control defined for type "+g2+" in "+this);}var t2;if(Array.isArray(n2)){t2=n2;n2=t2[0];}else{t2=[n2];}if(n2!==r2){this._bHideOperator=false;if(q2){h1.call(this);if(q2.isA("sap.m.DateTimeField")){this._initDataType();}Y1.call(this);}var u2;var i=0;for(i=0;i<t2.length;i++){var v2=t2[i];if(!x[v2]){x[v2]={};}if(!x[v2].control){x[v2].control=sap.ui.require(v2);if(!x[v2].control){u2=undefined;}}if(i===0){u2=x[v2].control;}}if(!u2){if(x[n2].promise){x[n2].promise.then(f1.bind(this));return;}else{x[n2].promise=new Promise(function(z2){x[n2].resolve=z2;sap.ui.require(t2,i1.bind(this));}.bind(this)).then(f1.bind(this));return;}}if(A1.call(this,m2,l2,j)){y1.call(this,m2.useDefaultFieldHelp.name);}var w2=g1.call(this);var x2=o2.call(this,u2,w2);for(i=0;i<x2.length;i++){var y2=x2[i];y2.attachEvent("parseError",B1,this);y2.attachEvent("validationError",C1,this);w1.call(this,y2);j1.call(this,y2);if(this._bConnected&&((i===0&&!this._bIsMeasure)||(i===1&&this._bIsMeasure))){U1.call(this,y2);}this.addAggregation("_content",y2);}}}function g1(){return this.getId()+"-inner";}function h1(){this.destroyAggregation("_content");if(this._oDateOriginalType){this._oDataType=this._oDateOriginalType;this._oDateOriginalType=undefined;}else if(this._oUnitOriginalType){this._oDataType=this._oUnitOriginalType;this._oUnitOriginalType=undefined;}}function i1(){for(var i=0;i<arguments.length;i++){var j=arguments[i];var f2=j.getMetadata().getName();f2=f2.replace(/\./g,"/");x[f2].control=j;if(x[f2].resolve){x[f2].resolve();delete x[f2].resolve;}}}function j1(i){i.setModel(this._oManagedObjectModel,"$field");}function k1(i,j){var f2=$1.call(this);var g2=new i(j,{value:{path:"$field>/conditions",type:f2},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:T},enabled:{path:"$field>/editMode",formatter:W},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",width:"100%",tooltip:"{$field>/tooltip}",change:D1.bind(this),liveChange:G1.bind(this),valueHelpRequest:N1.bind(this),showSuggestion:true});g2._setPreferUserInteraction(true);V1.call(this,g2);a1.call(this,g2);this._sBoundProperty="value";return[g2];}function l1(i,j){this._bHideOperator=true;var f2=Z1.call(this);Y1.call(this);var g2=new i(j,{value:{path:"$field>/conditions/0",type:f2,mode:"OneWay"},placeholder:"{$field>/placeholder}",width:"100%",tooltip:"{$field>/tooltip}",search:D1.bind(this)});a1.call(this,g2);return[g2];}function m1(i,j){var f2=sap.ui.require("sap/m/Token");var g2=Z1.call(this);var h2=new f2(j+"-token",{text:{path:'$field>',type:g2}});var i2=new i(j,{placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:T},enabled:{path:"$field>/editMode",formatter:W},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",width:"100%",tooltip:"{$field>/tooltip}",tokens:{path:"$field>/conditions",template:h2},dependents:[h2],change:D1.bind(this),liveChange:G1.bind(this),tokenUpdate:J1.bind(this),valueHelpRequest:N1.bind(this)});i2._setPreferUserInteraction(true);V1.call(this,i2);a1.call(this,i2);return[i2];}function n1(i,j){var f2=$1.call(this);var g2=new i(j,{value:{path:"$field>/conditions",type:f2},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:T},enabled:{path:"$field>/editMode",formatter:W},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",rows:4,tooltip:"{$field>/tooltip}",change:D1.bind(this),liveChange:G1.bind(this)});g2._setPreferUserInteraction(true);a1.call(this,g2);this._sBoundProperty="value";return[g2];}function o1(i,j){var f2=$1.call(this);var g2=new i(j,{text:{path:"$field>/conditions",type:f2},textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",wrapping:"{$field>/multipleLines}",width:"100%",tooltip:"{$field>/tooltip}"});this._sBoundProperty="text";return[g2];}function p1(i,j){this._bHideOperator=true;var f2=$1.call(this);P.call(this);var g2=new i(j,{value:{path:"$field>/conditions",type:f2},displayFormat:this._sDisplayFormat,valueFormat:this._sValueFormat,placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:T},enabled:{path:"$field>/editMode",formatter:W},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",change:D1.bind(this)});if(g2.setDisplayFormatType){g2.setDisplayFormatType(this._sCalendarType);}g2._setPreferUserInteraction(true);a1.call(this,g2);this._sBoundProperty="value";return[g2];}function q1(i,j){var f2=$1.call(this);P.call(this);var g2=new i(j,{value:{path:"$field>/conditions",type:f2},displayFormat:this._sDisplayFormat,valueFormat:this._sValueFormat,delimiter:"...",displayFormatType:this._sCalendarType,placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:T},enabled:{path:"$field>/editMode",formatter:W},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",change:D1.bind(this)});g2._setPreferUserInteraction(true);a1.call(this,g2);this._sBoundProperty="value";return[g2];}function r1(i,j){var f2=this.getFieldInfo();var g2=$1.call(this);var h2=new i(j,{text:{path:"$field>/conditions",type:g2},textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",tooltip:"{$field>/tooltip}",press:I1.bind(this),wrapping:true});if(f2&&f2.getMetadata().getName()==="sap.ui.mdc.field.FieldInfo"){f2.getDirectLinkHrefAndTarget().then(function(i2){if(i2){h2.setHref(i2.href);h2.setTarget(i2.target);}});}a1.call(this,h2);this._sBoundProperty="text";return[h2];}function s1(i,j){return k1.call(this,i,j);}function t1(i,j){Q.call(this);this._bIsMeasure=true;var f2=$1.call(this);var g2=[];var h2=new i(j,{value:{path:"$field>/conditions",type:f2},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:T},enabled:{path:"$field>/editMode",formatter:W},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",change:D1.bind(this),liveChange:G1.bind(this)});h2._setPreferUserInteraction(true);a1.call(this,h2);g2.push(h2);g2=v1.call(this,g2,j,i);this._sBoundProperty="value";return g2;}function u1(i,j){Q.call(this);this._bIsMeasure=true;var f2=sap.ui.require("sap/m/Token");var g2=sap.ui.require("sap/m/Input");var h2=Z1.call(this);var i2=[];var j2=new f2(j+"-token",{text:{path:'$field>',type:h2}});var k2=new o({path:"values",test:function(m2){if(!Array.isArray(m2[0])||m2[0][0]){return true;}else{return false;}}});var l2=new i(j,{placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:T},enabled:{path:"$field>/editMode",formatter:W},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",tokens:{path:"$field>/conditions",template:j2,filters:[k2]},dependents:[j2],change:D1.bind(this),liveChange:G1.bind(this),tokenUpdate:J1.bind(this)});l2._setPreferUserInteraction(true);a1.call(this,l2);i2.push(l2);i2=v1.call(this,i2,j,g2);this._sBoundProperty="value";return i2;}function v1(i,j,f2){var g2=_1.call(this);if(this.getEditMode()===E.EditableDisplay){i[0].bindProperty("description",{path:"$field>/conditions",type:g2});i[0].setWidth("100%");i[0].setFieldWidth("70%");}else{var h2=new f2(j+"-unit",{value:{path:"$field>/conditions",type:g2},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:U},enabled:{path:"$field>/editMode",formatter:W},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",width:"30%",tooltip:"{$field>/tooltip}",change:D1.bind(this),liveChange:G1.bind(this),valueHelpRequest:N1.bind(this)});h2._setPreferUserInteraction(true);V1.call(this,h2);a1.call(this,h2);i.push(h2);}return i;}function w1(i){if(i.onsapprevious){i._origOnsapprevious=i.onsapprevious;i.onsapprevious=function(j){var f2=L1.call(this);if(j.keyCode!==K.ARROW_UP&&(!f2||!f2.isOpen())){var i=this._getContent()[0];i._origOnsapprevious(j);}}.bind(this);}if(i.onsapnext){i._origOnsapnext=i.onsapnext;i.onsapnext=function(j){var f2=L1.call(this);if(j.keyCode!==K.ARROW_DOWN&&(!f2||!f2.isOpen())){var i=this._getContent()[0];i._origOnsapnext(j);}}.bind(this);}if(i.onsapup){i._origOnsapup=i.onsapup;i.onsapup=function(j){var f2=L1.call(this);if(!f2||!f2.isOpen()){var i=this._getContent()[0];i._origOnsapup(j);}}.bind(this);}if(i.onsapdown){i._origOnsapdown=i.onsapdown;i.onsapdown=function(j){var f2=L1.call(this);if(!f2||!f2.isOpen()){var i=this._getContent()[0];i._origOnsapdown(j);}}.bind(this);}if(i.onsapbackspace){i._origOnsapbackspace=i.onsapbackspace;i.onsapbackspace=function(j){var f2=L1.call(this);if(!f2||!f2.isOpen()){var i=this._getContent()[0];i._origOnsapbackspace(j);}}.bind(this);}}function x1(i){if(i._origOnsapprevious){i.onsapprevious=i._origOnsapprevious;delete i._origOnsapprevious;}if(i._origOnsapnext){i.onsapnext=i._origOnsapnext;delete i._origOnsapnext;}if(i._origOnsapup){i.onsapup=i._origOnsapup;delete i._origOnsapup;}if(i._origOnsapdown){i.onsapdown=i._origOnsapdown;delete i._origOnsapdown;}if(i._origOnsapbackspace){i.onsapbackspace=i._origOnsapbackspace;delete i._origOnsapbackspace;}}function y1(i){this.setProperty("_fieldHelpEnabled",true,true);this._sDefaultFieldHelp=y[i].id;var j=y[i].control;if(j&&j.bIsDestroyed){y[i].control=undefined;j=undefined;}if(!j){if(y[i].promise){y[i].promise.then(z1.bind(this));}var f2=sap.ui.require(y[i].name);if(!f2&&!y[i].promise){y[i].promise=new Promise(function(g2){y[i].resolve=g2;sap.ui.require([y[i].name],function(h2){y1.call(this,i);}.bind(this));}.bind(this)).then(z1.bind(this));}if(f2){j=new f2(y[i].id,y[i].properties);y[i].control=j;j.connect(this);if(y[i].resolve){y[i].resolve();delete y[i].resolve;}if(!y[i].promise){z1.call(this);}}}else{z1.call(this);}}function z1(){K1.call(this,"BoolDefaultHelp","insert");V1.call(this,this.getAggregation("_content",[])[0]);}function A1(i,j,f2){if(i.useDefaultFieldHelp&&!this.getFieldHelp()&&f2!==E.Display){if(j.length===1){var g2=a.getOperator(j[0]);var h2=!g2||g2.isSingleValue();if(!(i.editOperator&&i.editOperator[j[0]])&&(i.useDefaultFieldHelp.oneOperator||!h2)){return true;}}else{return true;}}return false;}function B1(i){this._bParseError=true;}function C1(f2){this._bParseError=true;var g2=f2.getParameter("newValue");var h2=false;var i=0;for(i=0;i<this._aAsyncChanges.length;i++){var i2=this._aAsyncChanges[i];if(i2.waitForUpdate&&Array.isArray(i2.result)){for(var j=0;j<i2.result.length;j++){var j2=i2.result[j];if(h(j2.values[0],g2)||(j2.operator==="BT"&&h(j2.values[1],g2))){i2.reject(f2.getParameter("exception"));h2=true;break;}}if(h2){break;}}}if(h2){this._aAsyncChanges.splice(i,1);}}function D1(i){var j={parameters:m({},i.getParameters()),source:i.getSource()};var f2=this._aAsyncChanges.length;if(f2>0&&!this._aAsyncChanges[f2-1].changeFired){this._aAsyncChanges[f2-1].changeFired=true;this._aAsyncChanges[f2-1].changeEvent=j;_.call(this,undefined,undefined,undefined,this._aAsyncChanges[f2-1].promise);return;}var g2={changeEvent:j};E1.call(this,g2);}function E1(i){var j=this.getConditions();var f2;var g2=true;var h2;var i2;var j2=i.changeEvent.source;var k2=false;if(i.changeEvent.parameters.hasOwnProperty("valid")){g2=i.changeEvent.parameters["valid"];if(!g2&&i.changeEvent.parameters.hasOwnProperty("value")){h2=i.changeEvent.parameters["value"];}}var l2=false;var m2=this._sBoundProperty&&j2.getBindingInfo(this._sBoundProperty);if(m2&&m2.binding&&m2.binding.sPath==="/conditions"&&g2){i2=j[0];f2=j[0]&&j[0].values[0];}else if(i.changeEvent.parameters.hasOwnProperty("value")){f2=i.changeEvent.parameters["value"];if(g2){l2=true;}}else if(i.changeEvent.parameters.hasOwnProperty("query")){f2=i.changeEvent.parameters["query"];l2=true;}else{i2=j[0];f2=j[0]&&j[0].values[0];}if(l2){Z.call(this);var n2;var o2;if(this._bIgnoreInputValue){this._bIgnoreInputValue=false;j2.setDOMValue("");return;}i2=S.resolve().then(function(){if(this._oNavigateCondition){g2=true;return this._oNavigateCondition;}else{n2=Z1.call(this);var q2=n2.parseValue(f2);var r2=this._aAsyncChanges.length;if(r2>0&&!this._aAsyncChanges[r2-1].changeFired){o2=this._aAsyncChanges[r2-1];o2.changeFired=true;o2.changeEvent=i.changeEvent;_.call(this,undefined,undefined,undefined,o2.promise);}return q2;}}.bind(this)).then(function(i2){F1.call(this,i2,j,n2,g2,f2,j2,o2||i);return i2;}.bind(this)).catch(function(q2){g2=false;h2=f2;Y.call(this,q2.message);if(o2&&o2.reject){if(d2.call(this,o2)){o2.reject(q2);}}else if(k2){_.call(this,j,g2,h2);}}.bind(this)).unwrap();if(i2 instanceof Promise){k2=true;}}else if(!i.changeEvent.parameters.hasOwnProperty("valid")&&this._bParseError){h2=i.changeEvent.parameters["value"];g2=false;}var p2=L1.call(this);if(p2&&this._bConnected){if(sap.ui.getCore().getCurrentFocusedControlId()===j2.getId()){p2.close();}p2.setFilterValue("");if(!k2&&g2){M1.call(this,j,p2);p2.onFieldChange();}H1.call(this);}if(this._oNavigateCondition){this._oNavigateCondition=undefined;Y1.call(this);}if(i.resolve){c2.call(this,i);}else if(!k2){_.call(this,j,g2,h2);}}function F1(i,j,f2,g2,h2,i2,j2){if(f2){f2.validateValue(i);}var k2=this.getMaxConditions();if(g2){if(i){if(this._bIsMeasure&&j.length===1&&j[0].values[0][0]===undefined){j=[];}if(k2!==1&&a.indexOfCondition(i,j)>=0){throw new Error(this._oResourceBundle.getText("field.CONDITION_ALREADY_EXIST",[h2]));}else{if(k2>0&&k2<=j.length){j.splice(0,j.length-k2+1);}j.push(i);}}else if(k2===1){j=[];}if(!h(j,this.getConditions())){this.setProperty("conditions",j,true);}if(k2!==1){i2.setValue("");}}if(j2.resolve){var l2=L1.call(this);if(l2&&this._bConnected){M1.call(this,j,l2);l2.onFieldChange();}j2.result=j;c2.call(this,j2);d2.call(this,j2);}}function G1(i){var j;var f2;var g2=false;var h2=i.getSource();this._oNavigateCondition=undefined;Y1.call(this);if("value"in i.getParameters()){j=i.getParameter("value");}if("escPressed"in i.getParameters()){g2=i.getParameter("escPressed");}if("previousValue"in i.getParameters()){f2=i.getParameter("previousValue");}else{var i2=this.getConditions();f2=i2[0]&&i2[0].values[0];}var j2=L1.call(this);var k2=this._getOperators();if(j2&&(!this._bIsMeasure||h2.getShowValueHelp())&&(k2.indexOf("EEQ")>=0||k2.indexOf("EQ")>=0)){this._bIgnoreInputValue=false;this._vLiveChangeValue=j;if(!this._fnLiveChangeTimer){this._fnLiveChangeTimer=t(function(){var m2=this.getDisplay();var n2="";if(this._vLiveChangeValue){var o2=a.getEEQOperator();if(!o2.test(this._vLiveChangeValue)){o2=a.getOperator("EQ");if(!o2.test(this._vLiveChangeValue)){o2=a.getEEQOperator();}}var p2=o2.getValues(this._vLiveChangeValue,m2,true);if(p2[0]){n2=p2[0];if(p2[1]){n2=n2+" ";}}if(p2[1]){n2=n2+p2[1];}}var l2=j2.openByTyping();if(this._bConnected&&this._getContent()[0]&&l2&&!(l2 instanceof Promise)&&(sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[0].getId()||(this._getContent()[1]&&sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[1].getId()))){j2.setFilterValue(n2);if(this.getMaxConditionsForHelp()===1&&j2.getConditions().length>0){j2.setConditions([]);}j2.open(true);delete this._vLiveChangeValue;}}.bind(this),300,{leading:false,trailing:true});}var l2=j2.openByTyping();if(l2 instanceof Promise){l2.then(function(){var m2=document.activeElement;if(m2&&(n(this.getDomRef(),m2))){this._fnLiveChangeTimer();}}.bind(this));}this._fnLiveChangeTimer();}this.fireLiveChange({value:j,escPressed:g2,previousValue:f2});}function H1(){if(this._fnLiveChangeTimer){this._fnLiveChangeTimer.cancel();delete this._vLiveChangeValue;}}function I1(i){var j=this.getFieldInfo();if(j){j.getTriggerHref().then(function(f2){if(!f2){j.open(this._getContent()[0]);}}.bind(this));}this.firePress();}function J1(j){if(j.getParameter("type")==="removed"){var f2=j.getParameter("removedTokens");var g2=this.getConditions();var h2;var i;for(i=0;i<f2.length;i++){var i2=f2[i];var j2=i2.getBindingContext("$field").sPath;var k2=parseInt(j2.slice(j2.lastIndexOf("/")+1));g2[k2].delete=true;}for(i=g2.length-1;i>=0;i--){if(g2[i].delete){if(this._bIsMeasure){h2=g2[i].values[0][1];}g2.splice(i,1);}}if(this._bIsMeasure&&h2&&g2.length===0){g2=[C.createItemCondition([undefined,h2],undefined)];}this.setProperty("conditions",g2,true);_.call(this,g2,true);j.preventDefault(true);}}function K1(i,j){var f2=sap.ui.getCore().byId(i);if(j==="remove"){if(f2){f2.detachEvent("select",O1,this);f2.detachEvent("navigate",P1,this);f2.detachEvent("dataUpdate",R1,this);f2.detachEvent("disconnect",S1,this);f2.detachEvent("afterClose",Q1,this);}this.setProperty("_fieldHelpEnabled",false,true);}else if(j==="insert"){if(f2){f2.attachEvent("dataUpdate",R1,this);this.setProperty("_fieldHelpEnabled",true,true);}}R.call(this,this.getConditions());}function L1(){var i=this.getFieldHelp();var j;if(!i&&this._sDefaultFieldHelp){i=this._sDefaultFieldHelp;}if(i){j=sap.ui.getCore().byId(i);}return j;}function M1(j,f2){if(!f2){f2=L1.call(this);}if(this._bIsMeasure){var g2=[];for(var i=0;i<j.length;i++){var h2=j[i];if(h2.values[0]&&h2.values[0][1]){var i2=C.createItemCondition(h2.values[0][1],undefined,h2.inParameters,h2.outParameters);g2.push(i2);}}f2.setConditions(g2);}else{f2.setConditions(j);}}function N1(i){var j=L1.call(this);if(j){j.setFilterValue("");var f2=this.getConditions();M1.call(this,f2,j);j.toggleOpen(false);if(!j.isFocusInHelp()){var g2=i.getSource();if(g2.bValueHelpRequested){g2.bValueHelpRequested=false;}}}}function O1(j){var f2=this.getConditions();var g2=j.getParameter("conditions");var h2=j.getParameter("add");var i2=j.getParameter("close");var j2=j.oSource;var k2=this.getMaxConditions();var l2;var m2=this.getControlForSuggestion();var n2;var i=0;if(this._bIsMeasure){if(g2.length>1){throw new Error("Only one item must be selected! "+this);}if(g2[0].operator!=="EEQ"){throw new Error("Only EEQ allowed! "+this);}if(f2.length>0){for(i=0;i<f2.length;i++){f2[i].values[0][1]=g2[0].values[0];if(f2[i].operator==="BT"){f2[i].values[1][1]=g2[0].values[0];}if(g2[0].inParameters){f2[i].inParameters=g2[0].inParameters;}if(g2[0].outParameters){f2[i].outParameters=g2[0].outParameters;}}}else{l2=m({},g2[0]);l2.values[0]=[undefined,l2.values[0]];l2.values[1]=undefined;f2.push(l2);if(this._oConditionType){n2=this._oConditionType.formatValue(l2);}else if(this._oConditionsType){n2=this._oConditionsType.formatValue(f2);}}}else{if(!h2){f2=[];}for(i=0;i<g2.length;i++){l2=g2[i];if(!e2.call(this,l2.operator)){continue;}var o2=h2?-1:a.indexOfCondition(l2,f2);if(o2===-1){f2.push(l2);}else if(l2.values[1]!==f2[o2].values[1]&&f2[o2].values[1]){f2[o2].values[1]=l2.values[1];}}}if(k2>0&&k2<f2.length){f2.splice(0,f2.length-k2);}if(m2&&m2.setDOMValue){if(this.getMaxConditionsForHelp()===1&&f2.length>0){if(this._bIsMeasure&&this._oUnitConditionsType){n2=this._oUnitConditionsType.formatValue(f2);}else if(this._oConditionType){n2=this._oConditionType.formatValue(f2[0]);}else if(this._oConditionsType){n2=this._oConditionsType.formatValue(f2);}if(n2 instanceof Promise){n2.then(function(q2){m2.setDOMValue("");m2.setDOMValue(q2);});}else{m2.setDOMValue("");m2.setDOMValue(n2);}}else if(i2){m2.setDOMValue("");j2.setFilterValue("");this._bIgnoreInputValue=false;}else{this._bIgnoreInputValue=true;}}var p2=this.getConditions();if(!h(f2,p2)){this._oNavigateCondition=undefined;Y1.call(this);this.setProperty("conditions",f2,true);if(!a.compareConditionsArray(f2,p2)){j2.onFieldChange();_.call(this,f2,true);}}}function P1(i){var j=i.getParameter("value");var f2=i.getParameter("key");var g2=i.getParameter("condition");var h2;var i2;var j2=this.getControlForSuggestion();if(g2){this._oNavigateCondition=m({},g2);f2=g2.values[0];j=g2.values[1];}else{this._oNavigateCondition=C.createItemCondition(f2,j);}if(this._bIsMeasure){var k2=this.getConditions();if(k2.length>0){this._oNavigateCondition.operator=k2[0].operator;this._oNavigateCondition.values[0]=[k2[0].values[0][0],this._oNavigateCondition.values[0]];if(k2[0].operator==="BT"){this._oNavigateCondition.values[1]=[k2[0].values[1][0],this._oNavigateCondition.values[0][1]];}else{this._oNavigateCondition.values[1]=undefined;}}else{this._oNavigateCondition.values=[[undefined,this._oNavigateCondition.values[0]],undefined];}}Y1.call(this);if(this.getDisplay()!==s.Value){h2=f2;}else if(j){h2=j;}else{h2=f2;}if(j2&&j2.setDOMValue){if(!i2){if(this._bIsMeasure&&this._oUnitConditionsType&&this._oNavigateCondition){i2=this._oUnitConditionsType.formatValue([this._oNavigateCondition]);}else if(this._oConditionType&&this._oNavigateCondition){i2=this._oConditionType.formatValue(this._oNavigateCondition);}else if(this._oConditionsType&&this._oNavigateCondition){i2=this._oConditionsType.formatValue([this._oNavigateCondition]);}else{i2=j||f2;}}j2.setDOMValue(i2);j2._doSelect();}this._bIgnoreInputValue=false;this.fireLiveChange({value:h2});}function Q1(i){if(this._bIgnoreInputValue){var j=this.getControlForSuggestion();this._bIgnoreInputValue=false;j.setDOMValue("");}}function R1(i){var j=this.getEditMode()===E.Editable&&this._getContent().length>0&&sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[0].getId();if(!j&&this.getConditions().length>0&&(this.getMaxConditions()!==1||(this.getDisplay()!==s.Value&&!this._bParseError))){this._oManagedObjectModel.checkUpdate(true);}}function S1(i){var j=L1.call(this);j.detachEvent("select",O1,this);j.detachEvent("navigate",P1,this);j.detachEvent("disconnect",S1,this);j.detachEvent("afterClose",Q1,this);this._bConnected=false;}function T1(){var i=L1.call(this);if(i&&!this._bConnected){i.connect(this);this._bConnected=true;i.attachEvent("select",O1,this);i.attachEvent("navigate",P1,this);i.attachEvent("disconnect",S1,this);i.attachEvent("afterClose",Q1,this);var j=this.getConditions();M1.call(this,j,i);var f2=this.getControlForSuggestion();U1.call(this,f2);}}function U1(i){if(i&&!i.orgOnsapfocusleave&&i.onsapfocusleave){i.orgOnsapfocusleave=i.onsapfocusleave;i.onsapfocusleave=function(j){var f2=L1.call(this.getParent());if(f2){var g2=sap.ui.getCore().byId(j.relatedControlId);if(g2){if(n(f2.getDomRef(),g2.getFocusDomRef())){j.stopPropagation();return;}else{f2.skipOpening();}}}this.orgOnsapfocusleave(j);};}}function V1(i){var j=L1.call(this);if(j&&i&&i.addEndIcon){var f2=j.getIcon();var g2=i.getAggregation("_endIcon",[])[0];if(g2){g2.setSrc(f2);}else{i.addEndIcon({id:i.getId()+"-vhi",src:f2,useIconTooltip:false,noTabStop:true,press:function(h2){if(!this.getValueHelpOnly()){var i2;if(D.support.touch){i2=this.$('inner');i2.attr('readonly','readonly');this.focus();i2.removeAttr('readonly');}else{this.focus();}this.bValueHelpRequested=true;this.fireValueHelpRequest({fromSuggestions:false});}}.bind(i)});}}}function W1(i,j){if(j==="remove"){i.detachEvent("dataUpdate",X1,this);}else if(j==="insert"){i.attachEvent("dataUpdate",X1,this);X1.call(this);}}function X1(){var i=this.getFieldInfo();var j=this;i.isTriggerable().then(function(f2){j._bTriggerable=f2;if(j.getAggregation("_content",[]).length>0&&j.getEditMode()===E.Display){f1.call(j);i.getDirectLinkHrefAndTarget().then(function(g2){if(g2){j.getAggregation("_content")[0].setHref(g2.href);j.getAggregation("_content")[0].setTarget(g2.target);}});}});}v.prototype._getFormatOptions=function(){if(!this._asyncParsingCall){this._asyncParsingCall=b2.bind(this);}return{valueType:G.call(this),originalDateType:this._oDateOriginalType||this._oUnitOriginalType,display:this._bIsMeasure?s.Value:this.getDisplay(),fieldHelpID:this._bIsMeasure?undefined:this.getFieldHelp()||this._sDefaultFieldHelp,operators:this._getOperators(),hideOperator:this._bHideOperator,maxConditions:this.getMaxConditions(),bindingContext:this.getBindingContext(),asyncParsing:this._asyncParsingCall,navigateCondition:this._oNavigateCondition,delegate:this.DELEGATE,delegateName:this.getDelegate()&&this.getDelegate().name,payload:this._oPayload};};function Y1(){if(this._oConditionType||this._oConditionsType){var i=this._getFormatOptions();if(this._oConditionType){this._oConditionType.setFormatOptions(i);}if(this._oConditionsType){this._oConditionsType.setFormatOptions(i);}if(this._oUnitConditionsType){i=a2.call(this);this._oUnitConditionsType.setFormatOptions(i);}}}function Z1(){if(!this._oConditionType){var i=this._getFormatOptions();this._oConditionType=new b(i);this._oConditionType._bCreatedByField=true;}return this._oConditionType;}function $1(){if(!this._oConditionsType){var i=this._getFormatOptions();this._oConditionsType=new c(i);this._oConditionsType._bCreatedByField=true;}return this._oConditionsType;}v.prototype._checkValueInitial=function(i){if(i===null||i===undefined){return true;}if(i===""){var j=G.call(this);var f2=j.parseValue(i,"string");if(f2===i){return true;}else{try{j.validateValue(f2);}catch(g2){return true;}}}else{var h2=H.call(this);if(this.DELEGATE.getBaseType(this._oPayload,h2)===B.Unit&&Array.isArray(i)&&i.length>1&&(i[0]===undefined||i[0]===null)&&!i[1]){return true;}}return false;};function _1(){if(!this._oUnitConditionsType){var i=a2.call(this);this._oUnitConditionsType=new c(i);this._oUnitConditionsType._bCreatedByField=true;}return this._oUnitConditionsType;}function a2(){if(!this._asyncParsingCall){this._asyncParsingCall=b2.bind(this);}return{valueType:undefined,originalDateType:G.call(this),display:this.getDisplay(),fieldHelpID:this.getFieldHelp()||this._sDefaultFieldHelp,operators:["EEQ"],hideOperator:true,maxConditions:1,bindingContext:this.getBindingContext(),asyncParsing:this._asyncParsingCall,navigateCondition:this._oNavigateCondition,delegate:this.DELEGATE,payload:this._oPayload,isUnit:true,getConditions:this.getConditions.bind(this)};}function b2(i){var j=L1.call(this);if(j&&j.isOpen()){var f2=document.activeElement;if(f2&&(n(this.getDomRef(),f2)||n(j.getDomRef(),f2))){j.close();}}var g2={};var h2=new Promise(function(i2,j2){g2.resolve=i2;g2.reject=j2;i.then(function(k2){g2.result=k2;var l2=this.getConditions();if(h(k2,l2)){c2.call(this,g2);d2.call(this,g2);}else{g2.waitForUpdate=true;}}.bind(this)).catch(function(k2){this._bParseError=true;j2(k2);d2.call(this,g2);}.bind(this));}.bind(this));g2.promise=h2;this._aAsyncChanges.push(g2);}v.prototype._getResultForPromise=function(i){return i;};function c2(i){i.resolve(this._getResultForPromise(i.result));}function d2(j){var f2=false;var i=0;for(i=0;i<this._aAsyncChanges.length;i++){if(j===this._aAsyncChanges[i]){f2=true;break;}}if(f2){this._aAsyncChanges.splice(i,1);}return f2;}v.prototype._getOperators=function(){var i=new RegExp("^\\*(.*)\\*|\\$search$");if(i.test(this.getFieldPath())&&this.getMaxConditions()===1){return["Contains"];}var j=H.call(this);var f2=I.call(this);var g2=J.call(this);var h2=this.DELEGATE.getBaseType(this._oPayload,j,g2,f2);if(h2===B.Unit){h2=B.Numeric;}return a.getOperatorsForType(h2);};function e2(j){var f2=this._getOperators();for(var i=0;i<f2.length;i++){if(j===f2[i]){return true;}if(j==="EQ"&&f2[i]==="EEQ"){return true;}if(j==="EEQ"&&f2[i]==="EQ"){return true;}}return false;}return v;});
