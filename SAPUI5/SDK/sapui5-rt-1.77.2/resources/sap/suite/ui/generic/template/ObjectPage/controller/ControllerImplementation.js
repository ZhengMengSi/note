sap.ui.define(["sap/ui/core/mvc/ControllerExtension","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/generic/app/navigation/service/SelectionVariant","sap/suite/ui/generic/template/lib/testableHelper","sap/suite/ui/generic/template/detailTemplates/detailUtils","sap/suite/ui/generic/template/ObjectPage/controller/SideContentHandler","sap/suite/ui/generic/template/ObjectPage/extensionAPI/ExtensionAPI","sap/suite/ui/generic/template/js/AnnotationHelper","sap/m/Table","sap/ui/layout/DynamicSideContent","sap/suite/ui/generic/template/lib/ShareUtils","sap/ui/dom/jquery/Selectors","sap/base/Log","sap/suite/ui/generic/template/ObjectPage/controller/MultipleViewsHandler","sap/suite/ui/generic/template/lib/MessageUtils","sap/ui/events/KeyCodes","sap/base/util/merge","sap/ui/model/FilterProcessor","sap/suite/ui/generic/template/js/StableIdHelper","sap/ui/core/Element","sap/uxap/ObjectPageSubSection","sap/ui/core/MessageType","sap/base/util/extend","sap/base/util/UriParameters","sap/base/util/isEmptyObject","sap/ui/dom/getFirstEditableInput","sap/ui/dom/jquery/Focusable"],function(C,M,F,S,a,t,d,b,E,A,R,D,c,f,L,g,h,K,m,l,n,o,O,p,q,U,r,s,u){"use strict";var v=25;var w=10;function y(e){e.setSelectedSection(null);}function I(e){return e.data("inlineCreate")==="true";}function z(e,j){if(e.getBindings){var k=e.getBindings();for(var i=0;i<k.length;i++){z(k[i],j);}}else{var T=e.getType();e.setType(T,j);}}var B=/[A-Za-z].*[A-Za-z]/;var G={getMethods:function(V,T,H){var J=d.getControllerBase(V,T,H);V.oController=H;var N;var P=new b(H,T,J.stateChanged);var Q;var W;var X;var Y;var Z=null;var $=[];var _=[];var a1=null;var b1=null;var c1=null;var d1=null;function e1(e){var i=e.getParameter("bindingParams");i.parameters=i.parameters||{};i.parameters.usePreliminaryContext=true;i.parameters.batchGroupId="facets";i.parameters.transitionMessagesOnly=true;return i;}function f1(){L.info("Activate object","sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");var e=J.state.saveScenarioHandler;var i=T.oServices.oCRUDManager.activateDraftEntity(e);i.then(function(k){t1();h.showSuccessMessageIfRequired(T.oCommonUtils.getText("OBJECT_SAVED"),T.oServices);var x=H.getOwnerComponent();T.oServices.oViewDependencyHelper.setAllPagesDirty([x.getId()]);T.oServices.oViewDependencyHelper.unbindChildren(x);T.oServices.oApplication.invalidatePaginatorInfo();var D2=x.getNavToListOnSave();T.oServices.oApplication.navigateAfterActivation(!D2&&k.context);},Function.prototype);var j={activationPromise:i};T.oComponentUtils.fire(H,"AfterActivate",j);}function g1(e){var i=H.getView();var j=i.getModel();var k=j.hasPendingChanges();var x=j.getPendingChanges();var D2=Object.create(null);if(x){for(var E2 in x){if(x.hasOwnProperty(E2)){var F2=j.getContext("/"+E2);D2[E2]={context:F2,change:x[E2]};}}}T.oCommonEventHandlers.submitChangesForSmartMultiInput();var G2=T.oServices.oCRUDManager.saveEntity();G2.then(function(I2){if(!e){var J2=T.oComponentUtils.getTemplatePrivateModel();J2.setProperty("/objectPage/displayMode",1);V.setEditable(false);}h1(I2,i,k,D2,e);});var H2={saveEntityPromise:G2};T.oComponentUtils.fire(H,"AfterSave",H2);}function h1(e,i,j,k,x){var D2=N.getModel("ui");var E2=D2.getProperty("/createMode");var F2=H.getOwnerComponent();T.oServices.oViewDependencyHelper.setRootPageToDirty();T.oServices.oViewDependencyHelper.unbindChildren(F2);var G2=F2.getNavToListOnSave();var H2=!G2||x;var I2;if(E2){if(H2){T.oComponentUtils.adaptUrlAfterNonDraftCreateSaved(i.getBindingContext(),x);j2(N);}else{V.navigateUp();}I2="OBJECT_CREATED";}else{I2=j?"OBJECT_SAVED":"OBJECT_NOT_MODIFIED";if(H2){j2(N);}else{V.navigateUp();}}h.showSuccessMessageIfRequired(T.oCommonUtils.getText(I2),T.oServices);for(var J2 in k){var K2=k[J2];var L2=K2.context;var M2=K2.change;var N2=Object.keys(M2)||[];var O2=N2.indexOf("__metadata");if(O2>-1){N2.splice(O2,1);}T.oServices.oApplicationController.executeSideEffects(L2,N2);}}function i1(e){var i=e.getSource().getId();j1("SaveAndContEdit",i);}function j1(e,i){var j;var k;var x;if(T.oComponentUtils.isDraftEnabled()){j=1;k=f1;x="activate";}else{j=3;if(e==="SaveAndContEdit"){k=g1.bind(null,true);x=i;}else{k=g1.bind(null,false);x="save";}}T.oCommonUtils.executeIfControlReady(J.state.saveScenarioHandler.handleSaveScenario.bind(null,j,k),x);}function k1(e){if(I(e.getSource())){var i=e.getParameter("bindingParams");if(i.filters&&i.filters.length){var j=l.groupFilters(i.filters);i.filters=new F({filters:[new F({filters:[new F({path:"IsActiveEntity",operator:"EQ",value1:true}),j],and:true}),new F({filters:[new F({path:"IsActiveEntity",operator:"EQ",value1:false}),new F({filters:[j,new F({path:"HasActiveEntity",operator:"EQ",value1:false})],and:false})],and:true})],and:false});}var k=i.sorter[0]&&i.sorter[0].getGroupFunction();var x=k&&function(D2){var E2=D2.getObject();if(E2.IsActiveEntity||E2.HasActiveEntity){var F2=q({},k(D2));F2.key=F2.key.charAt(0)==="ยง"?"ยง"+F2.key:F2.key;return F2;}return{key:"ยง",text:T.oCommonUtils.getText("NEW_ENTRY_GROUP")};};if(e.getSource().data("disableInlineCreateSort")==="false"){i.sorter.unshift(new S("HasActiveEntity",false,x));}}}function l1(){return N.getHeaderTitle();}function m1(e){var i=T.oComponentUtils.getTemplatePrivateModel();var j={shareEmailPressed:function(){var k=i.getProperty("/objectPage/headerInfo/objectTitle");var x=i.getProperty("/objectPage/headerInfo/objectSubtitle");if(x){k=k+" - "+x;}var D2=document.URL.replace(/\(/g,'%28').replace(/\)/g,'%29');sap.m.URLHelper.triggerEmail(null,k,D2);},shareJamPressed:function(){c.openJamShareDialog(i.getProperty("/objectPage/headerInfo/objectTitle")+" "+i.getProperty("/objectPage/headerInfo/objectSubtitle"));},getModelData:function(){return{title:i.getProperty("/objectPage/headerInfo/objectTitle"),subtitle:i.getProperty("/objectPage/headerInfo/objectSubtitle"),customUrl:c.getCustomUrl()};}};c.openSharePopup(T.oCommonUtils,e,j);}function n1(){return T.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.RelatedAppsSheet",{buttonPressed:function(e){var i=e.getSource();var j=i.getBindingContext("buttons");var k=j.getProperty("link");var x=j.getProperty("param");var D2=k.intent;var E2=D2.split("#")[1].split("-")[0];var F2=D2.split("-")[1].split("?")[0].split("~")[0];var G2={semanticObject:E2,action:F2,parameters:x};T.oServices.oDataLossHandler.performIfNoDataLoss(function(){var H2=H.getView().getBindingContext();T.oCommonEventHandlers.onRelatedAppNavigation(G2,H2);},Function.prototype);}},"buttons");}var o1;function p1(){o1=function(e){var i=e.getSource().getParent();var j=T.oServices.oApplication.getBusyHelper();if(j.isBusy()){return;}var k=H.getOwnerComponent();var x=k.getModel("_templPrivGlobal");var D2={objectPage:{currentEntitySet:k.getProperty("entitySet")}};x.setProperty("/generic/multipleViews",D2);var E2=T.oServices.oCRUDManager.deleteEntity();var F2=k.getBindingContext().getPath();var G2=Object.create(null);G2[F2]=E2;T.oServices.oApplication.prepareDeletion(G2);var H2={deleteEntityPromise:E2};j.setBusy(E2);T.oComponentUtils.fire(H,"AfterDelete",H2);i.close();};return T.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.TableDeleteConfirmation",{onCancel:function(e){var i=e.getSource().getParent();i.close();},onDelete:function(e){o1(e);}},"delete");}function q1(){var e=T.oServices.oApplication.getBusyHelper();if(e.isBusy()){return;}var i=T.oCommonUtils;var j=T.oComponentUtils.getTemplatePrivateModel();var k=(j.getProperty("/objectPage/headerInfo/objectTitle")||"").trim();var x=j.getProperty("/objectPage/headerInfo/objectSubtitle");var D2;var E2={};E2.title=T.oCommonUtils.getText("ST_GENERIC_DELETE_TITLE");if(k){if(x){D2=[" ",k,x];E2.text=i.getText("DELETE_WITH_OBJECTINFO",D2);}else{D2=[k];E2.text=i.getText("DELETE_WITH_OBJECTTITLE",D2);}}else{E2.text=i.getText("ST_GENERIC_DELETE_SELECTED");}var F2=Promise.resolve(H.beforeDeleteExtension());F2.then(function(G2){q(E2,G2);p1().then(function(H2){var I2=H2.getModel("delete");I2.setData(E2);H2.open();});},Function.prototype);}function r1(e){var i=e.getParameter("columnInfos");var j=i&&i.length-1;while(j>=0){if(i[j].ignore){i.splice(j,1);}j-=1;}var k=i.reduce(function(D2,E2){if(!E2.type&&!E2.customParseFunction){D2.push(E2);}return D2;},[]);if(k.length>0){var x=T.oCommonUtils.getText("DATA_PASTE_UNSUPPORTED_FORMAT_MESSAGE");M.show(x,{icon:M.Icon.ERROR,title:T.oCommonUtils.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE]});}}function s1(e){var j;var B1=e.getSource();var k=B1.getId();var x=k.split("::Table")[0]+"::addEntry";var D2=H.byId(x);if(!D2){return;}var E2=e.getParameter("result");if(E2){if(E2.errors){var F2=E2.errors.map(function(O2){return O2.message;});var G2=T.oCommonUtils.getText("DATA_PASTE_ERROR_MESSAGE",[F2.length]);var H2=T.oCommonUtils.getText("DATA_PASTE_ERROR_CORRECTION_MESSAGE");var I2=T.oCommonUtils.getText("DATA_PASTE_ERROR_CORRECTION_NOTE");F2.unshift("");F2.unshift(I2);F2.unshift(H2);M.show(G2,{icon:M.Icon.ERROR,title:T.oCommonUtils.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE],details:F2.join("<br />")});}else if(E2.parsedData){j=E2.parsedData;if(j&&j.length){var J2=j.length;var K2;var L2,M2=[];var N2=sap.m.DraftIndicatorState.Saved;for(var i=0;i<J2;i++){K2=i<J2-1;L2=T.oCommonEventHandlers.addEntry(D2,true,undefined,j[i],K2);M2.push(L2);}Promise.all(M2).then(function(){var O2=H.getOwnerComponent();var P2=O2.getAppComponent();var Q2=P2.getModel("_templPrivGlobal");Q2.setProperty("/generic/draftIndicatorState",N2);});}}}}function t1(){var e=T.oComponentUtils.getTemplatePrivateModel();var i=e.getProperty("/objectPage/aPasteAttachedTables");var j=i.length;var k;var x;while(j>=0){k=i[j];x=H.byId(k+"::Table");if(x&&x.isA("sap.ui.comp.smarttable.SmartTable")&&x.hasListeners("paste")){x.detachBeforePaste(r1);x.detachPaste(s1);i.splice(j,1);}j-=1;}}function u1(e){T.oCommonUtils.executeIfControlReady(q1,"delete");}function v1(e,i){var j,k;if(e){k=e.context||e;if(T.oServices.oDraftController.getDraftContext().hasDraft(k)){T.oServices.oViewDependencyHelper.setRootPageToDirty();j=k.context||k;}}if(j){T.oServices.oApplication.invalidatePaginatorInfo();T.oServices.oApplication.switchToDraft(j);}else{var x=T.oComponentUtils.getTemplatePrivateModel();x.setProperty("/objectPage/displayMode",2);j2(N);}V.setEditable(true);}var w1;function x1(e){e=!!e&&typeof e==="boolean";T.oServices.oCRUDManager.editEntity(e).then(function(i){if(i.draftAdministrativeData){w1(i.draftAdministrativeData.CreatedByUserDescription||i.draftAdministrativeData.CreatedByUser);}else{v1(i.context,false);}});}w1=function(e){var i;T.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.UnsavedChangesDialog",{onEdit:function(){i.close();x1(true);},onCancel:function(){i.close();}},"Dialog").then(function(j){i=j;var k=i.getModel("Dialog");var x=T.oCommonUtils.getText("DRAFT_LOCK_EXPIRED",[e]);k.setProperty("/unsavedChangesQuestion",x);i.open();});};function y1(){var j="{\"SelectionVariantID\":\"\"}";var k=H.getOwnerComponent();var D2=k.getEntitySet();var E2=k.getModel();var F2=E2.getMetaModel();var G2=F2.getODataEntitySet(D2);var H2=F2.getODataEntityType(G2.entityType);var I2=H2.property;var J2=[];for(var x in I2){var K2=I2[x]["com.sap.vocabularies.Common.v1.FieldControl"]&&I2[x]["com.sap.vocabularies.Common.v1.FieldControl"].Path;if(K2&&J2.indexOf(K2)<0){J2.push(K2);}}var L2=H.getView().getBindingContext();var M2=L2.getObject();var N2=new a();for(var i in I2){var O2=I2[i].type;var P2=I2[i].name;var Q2=M2[I2[i].name];if(J2.indexOf(P2)>-1){continue;}if(P2&&(Q2||O2==="Edm.Boolean")){if(O2==="Edm.Time"&&Q2.ms!==undefined){Q2=Q2.ms;}if(typeof Q2!=="string"){try{Q2=Q2.toString();}catch(e){Q2=Q2+"";}}N2.addParameter(P2,Q2);}}j=N2.toJSONString();return j;}function z1(e,B1){var i=true;var j=B1.getModel();B1=B1 instanceof R?B1.getParent():B1;var k=T.oCommonUtils.getDeleteRestrictions(B1);var x=k&&k.Deletable&&k.Deletable.Path;if(x){i=j.getProperty(x,e);}return i;}var A1;var B1;function C1(e,j){A1=e;B1=j instanceof R?j.getParent():j;var k=[];o1=function(x){var D2=T.oServices.oApplication.getBusyHelper();var E2=x.getSource().getParent();var F2=T.oCommonUtils.getSelectedContexts(B1);k=[];var G2;var H2;var I2=H.getView().getModel().getObject(F2[0].getPath());for(var i=0;i<F2.length;i++){if(z1(F2[i],B1)){k.push(F2[i].getPath());}}var J2=T.oServices.oCRUDManager.deleteEntities(k);D2.setBusy(J2);T.oServices.oApplicationController.executeSideEffects(B1.getBindingContext(),[],[B1.getTableBindingPath()]);var K2=A1.getParent().getParent().getId();J2.then(function(M2){T.oCommonUtils.refreshSmartTable(B1);if(I2.IsActiveEntity===false){H2=0;}else{H2=M2.length;}G2=k.length-H2;var N2="";if(G2>0){if(T.oCommonUtils.isUiTable(B1.getTable())){var O2=B1.getTable().getPlugin("sap.ui.table.plugins.SelectionPlugin");if(O2){O2.clearSelection();}}if(G2>1){N2=T.oCommonUtils.getContextText("DELETE_SUCCESS_PLURAL_WITH_COUNT",B1.getId(),null,[G2]);}else{if(H2>0){N2=T.oCommonUtils.getContextText("DELETE_SUCCESS_WITH_COUNT",B1.getId(),null,[G2]);}else{N2=T.oCommonUtils.getContextText("ITEM_DELETED",B1.getId());}}}if(H2>0){if(H2>1){N2+=N2&&N2+"\n";N2+=T.oCommonUtils.getContextText("DELETE_ERROR_PLURAL_WITH_COUNT",B1.getId(),null,[H2]);}else{if(G2>0){N2+="\n";N2+=T.oCommonUtils.getContextText("DELETE_ERROR_WITH_COUNT",B1.getId(),null,[H2]);}else{N2+=T.oCommonUtils.getContextText("DELETE_ERROR",B1.getId());}}}if(N2){if(H2>0){M.error(N2);}else{h.showSuccessMessageIfRequired(N2,T.oServices);}}});var L2={deleteEntitiesPromise:J2,sUiElementId:K2,aContexts:F2};T.oComponentUtils.fire(H,"AfterLineItemDelete",L2);E2.close();};return T.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.TableDeleteConfirmation",{onCancel:function(i){var x=i.getSource().getParent();x.close();},onDelete:function(i){o1(i);}},"delete");}function D1(e){var B1=T.oCommonUtils.getOwnerControl(e);if(!T.oCommonUtils.isSmartTable(B1)){B1=B1.getParent();}var j=T.oCommonUtils.getSelectedContexts(B1);if(j.length===0){M.error(T.oCommonUtils.getText("ST_GENERIC_NO_ITEM_SELECTED"),{styleClass:T.oCommonUtils.getContentDensityClass()});return;}var k=[];var x=[];for(var i=0;i<j.length;i++){if(z1(j[i],B1)){k.push(j[i].getPath());}else{x.push(j[i]);}}var D2={};if(j.length>1){D2.title=T.oCommonUtils.getText("ST_GENERIC_DELETE_TITLE_WITH_COUNT",[j.length]);D2.text=T.oCommonUtils.getContextText("DELETE_SELECTED_ITEMS",B1.getId());}else{D2.title=T.oCommonUtils.getText("ST_GENERIC_DELETE_TITLE");D2.text=T.oCommonEventHandlers.getSelectedItemContextForDeleteMessage(B1,j[0],true);}if(x.length>0){D2.undeletableText=T.oCommonUtils.getContextText("DELETE_UNDELETABLE_ITEMS",B1.getId(),null,[x.length,j.length]);}var E2={sUiElementId:e.getParent().getParent().getId(),aContexts:j};var F2=Promise.resolve(H.beforeLineItemDeleteExtension(E2));F2.then(function(G2){q(D2,G2);C1(e,B1).then(function(H2){if(!x.length){D2.undeletableText=undefined;}var I2=H2.getModel("delete");I2.setData(D2);H2.open();});},Function.prototype);}function E1(e){var i=n.getStableId({type:"ObjectPageAction",subType:"Delete",sFacet:e});T.oCommonUtils.executeIfControlReady(D1,i);}function F1(){var i=H.byId("imageDialog");var e=i?Promise.resolve(i):T.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.ImageDialog",{onImageDialogClose:function(){i.close();}},"headerImage");e.then(function(j){i=j;});return e;}function G1(){var e=T.oComponentUtils.getTemplatePrivateModel();e.setProperty("/objectPage/isHeaderExpanded",true);var i=H.getView().byId("template::ObjectPage::ObjectPageHeader");i.attachStateChange(function(j){var k=j.getParameter("isExpanded");e.setProperty("/objectPage/isHeaderExpanded",k);});}function H1(){var e;var j=T.oComponentUtils.getTemplatePrivateModel();var k=function(i){return function(x){var D2=x.getSource();var E2=D2.getExternalValue();j.setProperty("/objectPage/headerInfo/"+i,E2);if(i==="objectTitle"){T.oComponentUtils.setText(E2);if(!E2){var F2=T.oComponentUtils.getHeaderDataAvailablePromise();F2.then(function(G2){E2=D2.getExternalValue();if(E2){return;}var H2=H.getView();var I2=G2.getObject();var J2=H2.getModel("ui");var K2=J2.getProperty("/createMode");if(K2&&I2&&(I2.IsActiveEntity===undefined||I2.IsActiveEntity===false||I2.HasActiveEntity===false)){e=e||T.oCommonUtils.getText("NEW_OBJECT");j.setProperty("/objectPage/headerInfo/objectTitle",e);T.oComponentUtils.setText(e);}});}}};};N.getCustomData().forEach(function(x){var D2=x.getKey();if(D2==="objectTitle"||D2==="objectSubtitle"){var E2=x.getBinding("value");var F2=!E2&&x.getBindingInfo("value");if(!E2&&!F2){j.setProperty("/objectPage/headerInfo/"+D2,x.getValue());return;}var G2=k(D2);if(E2){E2.attachChange(G2);z(E2,"string");}else{F2.events={change:G2};for(var i=0;i<F2.parts.length;i++){F2.parts[i].targetType="string";}}}});}function I1(e){e.preventDefault();var i=T.oCommonUtils.getControlInformation(e,null,true);if(i){T.oServices.oDataLossHandler.performIfNoDataLoss(i.navigate,Function.prototype);}}function J1(e){return!!(e&&T.oCommonUtils.getPositionableControlId(e));}function K1(e){var j="";for(var i=0;i<e.length;i++){if(J1([e[i]])){var k=o.registry.get(e[i]);return L1(k);}}if(H&&H.getOwnerComponent()&&H.getOwnerComponent().getModel("i18n")){j=H.getOwnerComponent().getModel("i18n").getResourceBundle().getText("GENERIC_MESSAGE_GROUP_NAME");}return j;}function L1(e){if(!e){return"";}if(e instanceof sap.uxap.ObjectPageSection){return e.getTitle();}else{return L1(e.getParent());}}function M1(e){var j=N.getSections();for(var i=0;i<j.length;i++){if(j[i].getTitle()===e){return i+1;}}return 9999999;}var N1=new sap.ui.model.Sorter("msg>");function O1(e){switch(e){case p.Error:return 1;case p.Warning:return 2;case p.Success:return 3;case p.Information:return 4;case p.None:return 5;default:return 6;}}N1.fnCompare=function(e,i){var j=M1(K1(e.controlIds))*w+O1(e.type);var k=M1(K1(i.controlIds))*w+O1(i.type);if(j<k){return-1;}if(j>k){return 1;}return 0;};function P1(e,i){L.info("Set binding context to "+e,"Subsection: "+i.getId(),"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");i.setBindingContext(e);}function Q1(e,i,j,k){if(i){if(k.fnLazyLoadResolve){k.fnLazyLoadResolve();delete k.fnLazyLoadResolve;}return;}var x=[d1];if(!k.bInitiallyVisible){x.push(new Promise(function(D2){k.fnLazyLoadResolve=D2;}));}if(e){x.push(T.oComponentUtils.getHeaderDataAvailablePromise());}if(k.bWaitForStateApplied){x.push(b1);}P1(null,j);Promise.all(x).then(function(){P1(undefined,j);var D2=j.getId();L.info("Start refreshing of Subsection: "+D2,"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");k.refresh(null,true);L.info("End refreshing of Subsection: "+D2,"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");});}var R1={lazyLoading:Q1.bind(null,false),lazyLoadingAfterHeader:Q1.bind(null,true),reuseComponent:function(i,e){var j=e.getBlocks()[0];var k=i?T.oComponentUtils.getHeaderDataAvailablePromise():Promise.resolve();k.then(T.oComponentUtils.onVisibilityChangeOfReuseComponent.bind(null,i,j));}};function S1(e,i,j){if(j instanceof D){j=j.getMainContent()[0];}else if(!j.getContent){return;}j.getContent().forEach(function(k){if(T.oCommonUtils.isSmartTable(k)){if(i||e[k.getEntitySet()]){if(k.isInitialised()){T.oCommonUtils.refreshSmartTable(k);}else{k.attachInitialise(function(){T.oCommonUtils.refreshSmartTable(k);});}if(!i){T.oServices.oApplicationController.executeSideEffects(H.getOwnerComponent().getBindingContext(),[],[k.getTableBindingPath()]);}}}});}function T1(e){return T.oCommonUtils.getControlInformation(e);}function U1(e){$.push(e);T.oCommonUtils.getControlInformation(e,function(i,j){var k=e.getBlocks();P.initSideContentInfoObject(k[0]);var x=k.concat(e.getMoreBlocks());i.refresh=function(F2,G2){var H2=S1.bind(null,F2,G2);x.forEach(H2);};var D2=T.oCommonUtils.getElementCustomData(e).strategyForVisibilityChange;var E2=R1[D2];i.strategyForVisibilityChange=E2||Function.prototype;if(E2){j.push("subSectionListeningToVisibilityChange");}});}function V1(e){var i,j;i=e?e.getParameter("section"):undefined;j=i?i.getId():N.getSelectedSection();if(j!==Z){L.info("Selected Section: "+j,"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");}if(!i&&j){N.getSections().some(function(k){if(k.getId()===Z){i=k;return true;}return false;});}return{sectionId:j,section:i};}function W1(e){var j=0,k;Z=e.sectionId;k=e.section;if(k){var x=k.getSelectedSubSection();if(x!==a1){L.info("Selected Subsection: "+a1,"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");a1=x;$.some(function(H2,I2){if(H2.getId()===a1){j=I2;return true;}return false;});_=[];}}if(_.length===0){var D2=0;var E2=2;var F2=N.getUseIconTabBar();if(F2&&k){var G2=k.getSubSections();E2=G2.length>E2?E2:G2.length;}for(var i=j;D2<E2&&i<$.length;i++){var H2=$[i];if(H2.getVisible()){D2++;_.push(H2.getId());}}}$.forEach(function(I2){T1(I2).bInitiallyVisible=_.some(function(J2){return J2===I2.getId();});});}function X1(i,e,j){e=e||T1(j);e.strategyForVisibilityChange(i,j,e);}function Y1(i){T.oCommonUtils.executeForAllInformationObjects("subSectionListeningToVisibilityChange",X1.bind(null,i));}function Z1(e){var j=[];for(var i=0;i<e.length;i++){if(e[i].getVisible()){j.push(e[i]);}}return j;}function $1(e){var i=e?e.getSubSections():N.getSections();var j=Z1(i);return j.length===1&&!!(e||$1(j[0]));}function _1(B1,e){var i=B1.getParent();var j="sapSmartTemplatesObjectPageSubSectionGridExpand",k="sapUxAPObjectPageSubSectionFitContainer";while(i){if(i.isA("sap.ui.layout.Grid")){e?i.addStyleClass(j):i.removeStyleClass(j);}else if(i.isA("sap.uxap.ObjectPageSubSection")){e?i.addStyleClass(k):i.removeStyleClass(k);B1.setFitContainer(e);return null;}else{L.warning("Unexpected parent "+i.toString()+" in fnHandleUiTableExpand method","ControllerImplementation");}i=i.getParent();}}function a2(e,i){var j="sapUiSizeCompact",k="sapUiSizeCondensed",x;x=document.body;if(!e.bCondensedTableLayout||!(e.bSetFitContainer||i.hasStyleClass("sapUiSizeCondensed"))){return null;}else if(e.bSetFitContainer&&x.classList.contains(j)){i.addStyleClass(k);}else{i.removeStyleClass(k);}}function b2(B1,e,i){if(e.isA("sap.m.Table")){e.setGrowingThreshold(i.growingThreshold);e.setGrowingScrollToLoad(i.bGrowingScrollOnLoad);}else if(e.isA("sap.ui.table.Table")){_1(B1,i.bSetFitContainer);a2(i,e);}}function c2(B1,e,i){var j={growingThreshold:10,bSetFitContainer:false,bGrowingScrollOnLoad:false};var k=H.getOwnerComponent().mProperties;j.bCondensedTableLayout=k.condensedTableLayout;if(k&&k.sections){var x=k.sections[i];if(x&&x.hasOwnProperty("condensedTableLayout")){j.bCondensedTableLayout=x.condensedTableLayout;}}var D2;if(N.getUseIconTabBar()){D2=e.getParent();while(D2&&D2.sParentAggregationName!=="sections"){D2=D2.getParent();}}if($1(D2)){j.growingThreshold=v;j.bGrowingScrollOnLoad=true;j.bSetFitContainer=true;}b2(B1,e,j);}function d2(e){var j=N.getSections().filter(function(G2){return(G2.getTitle()==="Header"||!G2._bInternalVisible)?false:true;});var k;for(var i=0;i<j.length;i++){var x=j[i];var D2=x.getId();var E2=N.getSelectedSection();if(D2===E2){k=(e)?j[(i+1===j.length)?0:i+1]:j[(i===0)?j.length-1:i-1];var Z=k.getId();N.setSelectedSection(Z);var F2={section:H.byId(Z),sectionId:Z};e2(F2);break;}}}function e2(e){W1(e);J.stateChanged();}function f2(e){var i=V1(e);e2(i);}function g2(e,i,j,k,x){var D2=A.createP13NColumnKey(x);var E2=A.getBindingForHiddenPath(x);if(E2==="{= !${} }"){e.push(D2);return false;}if(typeof(E2)==="string"){var F2=E2.match(B)&&E2.match(B)[0];if(F2&&F2.indexOf("/")>0&&k.navigationProperty){var G2=H.getOwnerComponent().getEntitySet();var H2=F2.split("/",1)[0];if(j.getODataAssociationSetEnd(k,H2).entitySet===G2){i[D2]=F2.split("/").slice(1).join("/");return true;}}}else if(!E2){e.push(D2);}return false;}function h2(N){var e=N.getModel("ui");var i=T.oComponentUtils.getTemplatePrivateModel();var j=i.getProperty("/objectPage/displayMode");var k=e.getProperty("/createMode")||j===4;var x=e.getProperty("/editable")||j===2;var D2;if(k){D2="Create";}else if(x){D2="Edit";}else{D2="Display";}return D2;}function i2(N,e){if(e==="Display"){var j=N.getHeaderTitle();var k=j.getActions();if(k&&k.length){for(var i=0;i<k.length;i++){if(k[i].getVisible&&k[i].getVisible()&&k[i].getEnabled&&k[i].getEnabled()){return k[i];}}}}else{var x=N.getSelectedSection();if(W===true){N.setSelectedSection(null);return s(N.getDomRef());}var D2;var E2=function(H2){var I2=H2.getDomRef();N.setSelectedSection(H2);D2=s(I2);if(D2&&D2.type!=="checkbox"){return D2;}return u(I2).firstFocusableDomRef();};var F2=N.getSections();var G2;for(var i=0;i<F2.length;i++){if(F2[i].getVisible()&&((F2[i].getId()===x)||G2)){G2=F2[i+1]?F2[i+1].getId():undefined;D2=E2(F2[i]);if(D2){break;}}}return D2;}}function j2(N){var e=H.getOwnerComponent().getModel("_templPrivGlobal");var Y=e.getProperty("/generic/FCL/FCLActionButton");if(!Y){var i=h2(N);if(document.readyState=='complete'){setTimeout(function(){var j=i2(N,i);if(j){j.focus();}},0);}}}function k2(B1,e,j,k,x,D2){var E2=[];var F2=Object.create(null);var G2=false;for(var i=0;i<D2.length;i++){var H2=D2[i];G2=g2(E2,F2,k,x,H2)||G2;}if(G2){e.dynamicHideInfos={staticHiddenColumns:E2,columnKeyToHiddenPath:F2};j.push("smartTableWithDynamicColumnHide");}if(E2.length){B1.deactivateColumns(E2);}}function l2(e){return e instanceof O?e:e.getParent&&l2(e.getParent());}function m2(e,j,B1){j.push("smartTable");e.subSection=l2(B1);if(B1.getUseVariantManagement()){j.push("smartControlWithVariantManagement");T1(e.subSection).bWaitForStateApplied=true;}B1=T.oCommonUtils.isMTable(B1)?B1.getParent():B1;var k=B1.getModel().getMetaModel();var x=k.getODataEntitySet(B1.getEntitySet());var D2=k.getODataEntityType(x.entityType);var E2=D2["com.sap.vocabularies.UI.v1.LineItem"];var F2=B1.getCustomData();for(var i=0;i<F2.length;i++){if(F2[i].getKey()==="lineItemQualifier"){E2=D2["com.sap.vocabularies.UI.v1.LineItem#"+F2[i].getValue()];break;}}k2(B1,e,j,k,D2,E2||[]);}function n2(B1){return T.oCommonUtils.getControlInformation(B1,m2);}function o2(e){if(!c1){J.stateChanged();}}function p2(e,i,j){i.push("smartChart");if(j&&j.getUseVariantManagement()){i.push("smartControlWithVariantManagement");}}function q2(e){return T.oCommonUtils.getControlInformation(e,p2);}function r2(e,i,j){i.push("searchField");var k=T.oCommonUtils.isMTable(j.getParent().getParent())?j.getParent().getParent().getParent():j.getParent().getParent();e.table=k;var x=n2(k);x.searchField=j;}function s2(e){return T.oCommonUtils.getControlInformation(e,r2);}function t2(e){s2(e);}function u2(e){var i=s2(e);i.searchString=e.getSource().getValue();i.table.rebindTable();}function v2(e,i){i.setValue("");if(e.searchString){e.searchString="";e.table.rebindTable();}}function w2(){T.oCommonUtils.executeForAllInformationObjects("searchField",v2);}function x2(e,i){var B1=T.oCommonUtils.getOwnerControl(i);B1=T.oCommonUtils.isMTable(B1)?B1.getParent():B1;var j=I(B1);if(!j){W=false;X=true;}if(!i.data("CrossNavigation")&&j){T.oCommonEventHandlers.addEntry(i,true);return;}T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){T.oCommonEventHandlers.addEntry(i,false);},Function.prototype,J.state);}function y2(e){var i=n.getStableId({type:"ObjectPageAction",subType:"Create",sFacet:e});T.oCommonUtils.executeIfControlReady(x2.bind(null,undefined),i);}function z2(){return true;}function A2(B1){var e=B1.getId();var i="";var j={search:false,filter:false};var k=B1.fetchVariant();if(k&&k.filter&&k.filter.filterItems.length>0){j.filter=true;}var x=B1.getToolbar().getContent().filter(function(D2){return D2.sId===B1.getToolbar().getId()+'::SearchField';});if(x.length>0&&x[0].getValue().trim()!==""){j.search=true;}if(j.search||j.filter){i=T.oCommonUtils.getContextText("NOITEMS_SMARTTABLE_WITH_FILTER",e);}else{i=T.oCommonUtils.getContextText("NOITEMS_SMARTTABLE",e);}B1.setNoData(i);}function B2(e){var i=[];if(e.fetchVariant()&&e.fetchVariant().filter&&e.fetchVariant().filter.filterItems){i=e.fetchVariant().filter.filterItems;}var j=e.getId();var k="";var x={search:false,filter:false};if(i&&i.length){x.filter=true;}var D2=e.getToolbar().getContent().filter(function(E2){return E2.sId===e.getToolbar().getId()+'::SearchField';});if(D2.length>0&&D2[0].getValue().trim()!==""){x.search=true;}if(x.search||x.filter){k=T.oCommonUtils.getContextText("NOITEMS_SMARTCHART_WITH_FILTER",j);}else{k=T.oCommonUtils.getContextText("NOITEMS_SMARTCHART",j);}e.getChartAsync().then(function(E2){E2.setCustomMessages({NO_DATA:k});});}V.refreshFacets=function(e){var i=function(j){var k=T1(j);k.refresh(e,false);};N.getSections().forEach(function(j){j.getSubSections().forEach(i);});};V.onComponentActivate=J.onComponentActivate;V.getCurrentState=function(){var e=Object.create(null);if(Z){e.section={data:Z,lifecycle:{permanent:true,pagination:true}};}if(a1){e.subSection={data:a1,lifecycle:{permanent:true,pagination:true}};}var i={};T.oCommonUtils.executeForAllInformationObjects("smartControlWithVariantManagement",function(E2,F2){i[F2.getId()]=F2.getCurrentVariantId();});if(!r(i)){e.smartControlVariants={data:i,lifecycle:{session:true,permanent:true,page:false,pagination:false}};}e.sideContent=P.getCurrentState();e.multipleViews=Q.getCurrentState();var j=Object.create(null);H.provideCustomStateExtension(j);for(var k in j){e["$custom$"+k]=j[k];}var x=true;var D2=function(E2,F2){if(!(E2 instanceof C)){throw new Error("State must always be set with respect to a ControllerExtension");}if(!x){throw new Error("State must always be provided synchronously");}var G2=E2.getMetadata().getNamespace();if(F2){for(var H2 in F2){e["$extension$"+G2+"$"+H2]=F2[H2];}}};H.templateBaseExtension.provideExtensionStateData(D2);x=false;return e;};V.applyState=function(e,k){var x=T.oComponentUtils.getHeaderDataAvailablePromise()||Promise.resolve();x.then(function(){var E2=null;var F2=Object.create(null);var G2=Object.create(null);for(var H2 in e){if(H2.indexOf("$custom$")===0){F2[H2.substring(8)]=e[H2];}else if(H2.indexOf("$extension$")===0){var I2=H2.substring(11,H2.indexOf("$",11));var J2=G2[I2];if(!J2){J2=Object.create(null);G2[I2]=J2;}var K2=H2.substring(H2.indexOf("$",11)+1,H2.length);J2[K2]=e[H2];}}H.applyCustomStateExtension(F2,k);var L2=true;var M2=function(T2){if(!(T2 instanceof C)){throw new Error("State must always be retrieved with respect to a ControllerExtension");}if(!L2){throw new Error("State must always be restored synchronously");}var I2=T2.getMetadata().getNamespace();return G2[I2];};H.templateBaseExtension.restoreExtensionStateData(M2,k);L2=false;var N2=H.getOwnerComponent();var O2=N2.getAppComponent().getObjectPageHeaderType();var P2=N2.getModel("_templPrivGlobal");Y=P2.getProperty("/generic/FCL/FCLActionButton");if(Y===1){var Q2=N.getHeaderTitle();var R2=(O2==="Dynamic"?Q2.getNavigationActions():Q2.getActions());if(R2&&R2.length){for(var i=0;i<R2.length;i++){if(R2[i].getId&&R2[i].getId().indexOf("template::FCLActionButtons")>0){var S2=R2[i].getItems();for(var j=0;j<S2.length;j++){if((S2[j].getId().toUpperCase().indexOf("FULLSCREEN")>0)&&S2[j].getVisible&&S2[j].getVisible()){E2=S2[j];}}}}}setTimeout(function(){P2.setProperty("/generic/FCL/FCLActionButton",0);Y=P2.getProperty("/generic/FCL/FCLActionButton");if(E2){E2.focus();}},0);}});P.applyState(e.sideContent,k);Q.applyState(e.multipleViews,k);T.oCommonUtils.executeForAllInformationObjects("smartControlWithVariantManagement",function(i,j){var E2;if(e.smartControlVariants&&e.smartControlVariants[j.getId()]!==undefined){E2=e.smartControlVariants[j.getId()];}else{if(T.oCommonUtils.isSmartTable(j)){E2=T.oCommonUtils.getSmartTableDefaultVariant(j);}else if(T.oCommonUtils.isSmartChart(j)){E2=T.oCommonUtils.getSmartChartDefaultVariant(j);}}if(j.getCurrentVariantId()!==E2||!k){j.setCurrentVariantId(E2);}});if(k){if(Z!==(e.section||"")){J.stateChanged();}if(c1){c1();c1=null;}return;}w2();if(e.section){Z=e.section;L.info("Restoring Selected Section: "+Z,"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");N.setSelectedSection(Z);if(e.subSection){var D2;$.some(function(i){if(i.getId()===e.subSection){D2=i;return true;}return false;});if(D2){D2.getParent().setSelectedSubSection(D2);}a1=e.subSection;L.info("Restoring Selected Subsection: "+a1,"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");}}else{Promise.all([T.oComponentUtils.getHeaderDataAvailablePromise(),T.oComponentUtils.getNavigationFinishedPromise()]).then(y.bind(null,N));Z="";}if(c1){c1();c1=null;}};V.beforeRebind=function(e){d1=e;if(!c1){b1=new Promise(function(i){c1=i;});}Y1(false);};V.afterRebind=function(){L.info("Call of _triggerVisibleSubSectionsEvents","","sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");N._triggerVisibleSubSectionsEvents();};V.applyHeaderContextToSmartTablesDynamicColumnHide=function(e){var i=e.getModel();var j=function(k,x,B1){var D2=x.dynamicHideInfos.staticHiddenColumns.slice();var E2=k&&j.bind(null,false,x,B1);for(var F2 in x.dynamicHideInfos.columnKeyToHiddenPath){var G2=x.dynamicHideInfos.columnKeyToHiddenPath[F2];if(e.getProperty(G2)){D2.push(F2);}if(E2){var H2=i.bindProperty(G2,e);H2.attachChange(E2);}}B1.deactivateColumns(D2);};T.oCommonUtils.executeForAllInformationObjects("smartTableWithDynamicColumnHide",j.bind(null,true));};var x1=t.testable(x1,"editEntity");var z1=t.testable(z1,"isEntryDeletable");var f1=t.testable(f1,"onActivateImpl");var g1=t.testable(g1,"onSaveImpl");t.testable(function(){return b1;},"getStateAppliedPromise");var C2={onInit:function(){N=H.byId("objectPage");var e=H.getOwnerComponent();b1=new Promise(function(H2){c1=H2;});var i=N.getSections();for(var k=0;k<i.length;k++){var j=i[k];var $=j.getSubSections();$.forEach(U1);}var x=V1();W1(x);var D2=l1();var E2=e.getAppComponent();var F2=E2.getObjectPageHeaderType()==="Dynamic";V.aBreadCrumbs=D2&&(F2?D2.getBreadcrumbs().getLinks():D2.getBreadCrumbsLinks());if(F2){G1();}J.onInit(null,Y1.bind(null,true),N1,K1);H1();T.oCommonUtils.executeGlobalSideEffect();N.attachEvent("subSectionEnteredViewPort",function(H2){var I2=H2.getParameter("subSection");L.info("Viewport entered ","Subsection: "+I2.getId(),"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");X1(true,null,I2);});Q=new g(H,T,J.stateChanged);var G2=T.oComponentUtils.getTemplatePrivateModel();G2.setProperty("/objectPage/aPasteAttachedTables",[]);T.oComponentUtils.attach(H,"PageDataLoaded",function(H2){if(N&&!Y){var I2=h2(N);if(I2==="Create"&&X!==true){W=true;}else if((T.oComponentUtils.isDraftEnabled()&&I2==="Create"&&X===true)||(!T.oComponentUtils.isDraftEnabled()&&I2==="Display"&&X===true)){X=false;}j2(N);}});},handlers:{onEditAndActiveToggle:function(e,i){T.oServices.oApplication.performAfterSideEffectExecution(function(){var j=T.oServices.oApplication.getBusyHelper();if(j.isBusy()){return;}var k=e.getBindingContext();var x=T.oServices.oApplication.getDraftSiblingPromise(k);j.setBusy(x.then(function(D2){if(i){L.info("Navigating to draft entity","sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");v1(D2,true);}else{L.info("Navigating to active entity","sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");T.oServices.oApplication.navigateToSubContext(D2,true,1);}f(':focus').blur();}));});},onAfterVariantSave:function(e){o2(e);},onAfterVariantApply:function(e){o2(e);},addEntry:y2,submitChangesForSmartMultiInput:function(){if(T.oComponentUtils.isDraftEnabled()){T.oCommonEventHandlers.submitChangesForSmartMultiInput();}},contextEditableChanged:function(e){var i=e.getSource();var j=i.getBindingInfo('editable');if(j&&j.binding&&j.binding.getValue&&!j.binding.getValue()){i.setEditable(false);}},deleteEntry:function(e){T.oCommonEventHandlers.deleteEntry(e);},deleteEntries:E1,onSelectionChange:function(e){T.oCommonUtils.setEnabledToolbarButtons(e.getSource());},onMultiSelectionChange:function(e){T.oCommonEventHandlers.onMultiSelectionChange(e);},onCancel:function(e){var i=e.getSource();var j=J.state.onCancel(i);j.then(function(){t1();if(!T.oComponentUtils.isDraftEnabled()){j2(N);}});},onContactDetails:function(e){T.oCommonEventHandlers.onContactDetails(e);},onSmartFieldInitialise:function(e){var i=this.getView().getId();T.oCommonEventHandlers.onSmartFieldInitialise(e,i);},onPressDraftInfo:function(e){var i=H.getView().getBindingContext();var j=sap.ui.getCore().byId(e.getSource().getId()+(e.getId()==="markChangesPress"?"-changes":"-lock"));T.oCommonUtils.showDraftPopover(i,j);},onPressDraftInfoObjectPageDynamicHeaderTitle:function(e){var i=H.getView().getBindingContext();var j=H.byId("template::ObjectPage::ObjectMarkerObjectPageDynamicHeaderTitle");T.oCommonUtils.showDraftPopover(i,j);},onShareObjectPageActionButtonPress:function(e){T.oCommonUtils.executeIfControlReady(m1,"template::Share");},onRelatedApps:function(e){var x,D2,E2,F2,G2,H2,I2;var J2,K2,L2,M2,N2;x=e.getSource();L2=sap.ushell&&sap.ushell.Container;D2=L2&&L2.getService("URLParsing");E2=D2.parseShellHash(document.location.hash);M2=E2.semanticObject;N2=E2.action;F2=H.getView&&H.getView().getBindingContext();var O2=H.getOwnerComponent().getModel().getMetaModel();var P2=F2.getObject();var Q2=P2.__metadata.type;var R2=O2.getODataEntityType(Q2);var S2=R2["com.sap.vocabularies.Common.v1.SemanticKey"];var T2={};if(S2&&S2.length>0){for(var j=0;j<S2.length;j++){var U2=S2[j].PropertyPath;if(!T2[U2]){T2[U2]=P2[U2];}}}else{for(var k in R2.key.propertyRef){var V2=R2.key.propertyRef[k].name;if(!T2[V2]){T2[V2]=P2[V2];}}}G2=H.getOwnerComponent().getAppComponent();H2=L2&&L2.getService("CrossApplicationNavigation");I2=H2.getLinks({semanticObject:M2,params:T2,ui5Component:G2});n1().then(function(W2){J2=W2;K2=J2.getModel("buttons");K2.setProperty("/buttons",[]);J2.openBy(x);I2.done(function(X2){var Y2=[];var Z2=R2["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"];var $2=[];if(Z2){for(var i=0;i<Z2.length;i++){$2.push(Z2[i].String);}}for(var i=0;i<R2.property.length;i++){if(R2.property[i]["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"]){var _2=R2.property[i]["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"].length;for(var j=0;j<_2;j++){$2.push(R2.property[i]["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"][j].String);}}}X2.sort(function(d3,e3){if(d3.text<e3.text){return-1;}if(d3.text>e3.text){return 1;}return 0;});for(var i=0;i<X2.length;i++){var a3=X2[i];var b3=a3.intent;var c3=b3.split("-")[1].split("?")[0];if(c3!==N2&&$2.indexOf(c3)==-1){Y2.push({enabled:true,text:a3.text,link:a3,param:T2});}}if(Y2.length===0){Y2.push({enabled:false,text:T.oCommonUtils.getText("NO_RELATED_APPS")});}K2.setProperty("/buttons",Y2);});});},onSemanticObjectLinkPopoverLinkPressed:function(e){T.oCommonEventHandlers.onSemanticObjectLinkPopoverLinkPressed(e,J.state);},onEdit:function(e){var A1=e.getSource();var N=H.byId("objectPage");var j=N.getSelectedSection();var k=N.getSections()||[];for(var i=0;i<k.length;i++){if(k[i].getVisible()){if(k[i].getId()===j){W=true;}else{W=false;}break;}}if(A1.data("CrossNavigation")){T.oCommonEventHandlers.onEditNavigateIntent(A1);return;}T.oCommonUtils.executeIfControlReady(x1,"edit");},onSave:j1,onSaveAndContinueEdit:i1,onSmartFieldUrlPressed:function(e){T.oCommonEventHandlers.onSmartFieldUrlPressed(e,J.state);},onBreadCrumbUrlPressed:I1,onDelete:u1,onCallActionFromToolBar:function(e){T.oCommonEventHandlers.onCallActionFromToolBar(e,J.state);},onCallAction:function(e,i,j){T.oServices.oApplication.performAfterSideEffectExecution(function(){var k=H.getView().getBindingContext();if(k){T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var x=H.getOwnerComponent();var D2=x.getEntitySet();var E2={functionImportPath:e,contexts:[k],sourceControl:"",label:i,operationGrouping:j};T.oServices.oCRUDManager.callAction(E2).then(function(F2){var G2=F2&&F2[0];if(G2&&G2.response&&G2.response.context&&(!G2.actionContext||G2.actionContext&&G2.response.context.getPath()!==G2.actionContext.getPath())){T.oServices.oViewDependencyHelper.setParentToDirty(x,D2,1);}});},Function.prototype,J.state,"Proceed");}},true);},onDataFieldForIntentBasedNavigation:function(e){e=m({},e);T.oServices.oApplication.performAfterSideEffectExecution(function(){T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){T.oCommonEventHandlers.onDataFieldForIntentBasedNavigation(e,J.state);});},true);},onDataFieldWithIntentBasedNavigation:function(e){T.oCommonEventHandlers.onDataFieldWithIntentBasedNavigation(e,J.state);},onDataFieldWithNavigationPath:function(e){T.oCommonEventHandlers.onDataFieldWithNavigationPath(e);},onChartInit:function(e){var i=e.getSource();q2(i);i.getChartAsync().then(function(j){var k=H._templateEventHandlers.onSelectionChange;j.attachSelectData(k).attachDeselectData(k);T.oCommonUtils.checkToolbarIntentsSupported(i);});},onDataRequested:function(i){L.info("Data requested","SmartTable: "+i,"sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation");Q.onDataRequested(i);},onDataReceived:function(e){T.oCommonEventHandlers.onDataReceived(e);},onBeforeRebindDetailTable:function(e){var B1=e.getSource();e.mParameters.bindingParams.events["dataReceived"]=A2.bind(null,B1);B1.setNoData(T.oCommonUtils.getText("WAITING_SMARTTABLE"));var i=e1(e);var j=n2(B1);var k=j.searchField;if(k){var x=T.oCommonUtils.getControlInformation(k);if(x.searchString){i.parameters.custom={search:x.searchString};}}T.oCommonEventHandlers.onBeforeRebindTable(e,{ensureExtensionFields:H.templateBaseExtension.ensureFieldsForSelect,addExtensionFilters:H.templateBaseExtension.addFilters,isFieldControlRequired:true});H.onBeforeRebindTableExtension(e);Q.onRebindContentControl(B1.getId(),i);k1(e);if(T.oCommonUtils.isAnalyticalTable(B1.getTable())){i.parameters.entitySet=B1.getEntitySet();}},onListNavigate:function(e){T.oCommonEventHandlers.onListNavigate(e,J.state);},onBeforeSemanticObjectLinkPopoverOpens:function(e){var i=e.getParameters();T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var j=y1();T.oCommonUtils.semanticObjectLinkNavigation(i,j,H);},Function.prototype,J.state,Function.prototype);},onSemanticObjectLinkNavigationPressed:function(e){var i=e.getParameters();var A1=e.getSource();T.oCommonEventHandlers.onSemanticObjectLinkNavigationPressed(A1,i);},onSemanticObjectLinkNavigationTargetObtained:function(e){var i=e.getParameters();var A1=e.getSource();T.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(A1,i,J.state);},onSemanticObjectLinkNavigationTargetObtainedSmartLink:function(e){var i,A1;i=e.getParameters();A1=e.getSource();A1=A1.getParent().getParent().getParent().getParent();T.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(A1,i,J.state);},onHeaderImagePress:function(e){if(e.getSource().getSrc()===""){return;}var i=e.getSource().getId();var j=e.getSource().getSrc();F1().then(function(k){k.addAriaLabelledBy(i);var x=k.getModel("headerImage");x.setProperty("/src",j);if(sap.ui.Device.system.phone){k.setProperty("stretch",true);}k.open();});},sectionChange:f2,onSwitchTabs:d2,onInlineDataFieldForAction:function(e){T.oCommonEventHandlers.onInlineDataFieldForAction(e,J.state);},onInlineDataFieldForIntentBasedNavigation:function(e){T.oCommonEventHandlers.onInlineDataFieldForIntentBasedNavigation(e.getSource(),J.state);},onDeterminingDataFieldForAction:function(e){T.oCommonEventHandlers.onDeterminingDataFieldForAction(e);},onBeforeRebindChart:function(e){e1(e);var i=e.getSource();B2(i);i.getChartAsync().then(function(k){i.oModels=k.oPropagatedProperties.oModels;});var j={ensureExtensionFields:Function.prototype,addExtensionFilters:H.templateBaseExtension.addFilters,isFieldControlRequired:true};T.oCommonUtils.onBeforeRebindTableOrChart(e,j);},onToggleDynamicSideContent:P.onToggleDynamicSideContent,sideContentBreakpointChanged:P.sideContentBreakpointChanged,onTableInit:function(e,i){var B1=e.getSource();var j=B1.getTable();n2(B1);T.oCommonUtils.checkToolbarIntentsSupported(B1);N.attachEvent("subSectionVisibilityChange",function(e){if(j.isA("sap.m.Table")||j.isA("sap.ui.table.Table")){c2(B1,j,i);}});if(I(B1)&&!B1.data("CrossNavigation")){j.addEventDelegate({onkeyup:function(e){if(e.ctrlKey&&e.keyCode===K.ENTER&&B1.getEditable()){T.oCommonEventHandlers.addEntry(B1,true);e.preventDefault();e.setMarked();}}});}var k=T.oComponentUtils.getTemplatePrivateModel();if(I(B1)){j.addEventDelegate({onAfterRendering:function(e){var x;if(B1.getEditable()&&!B1.hasListeners("paste")){B1.attachBeforePaste(r1);B1.attachPaste(s1);x=k.getProperty("/objectPage/aPasteAttachedTables");if(x){x.push(i);}}}});}},onPasteButtonPress:function(e){var i=T.oCommonUtils.getText("DATA_PASTE_ACTION_MESSAGE");M.information(i);},onSearchObjectPage:u2,onSearchLiveChange:t2,onSmartTablePaste:s1,onUITableExpand:_1,onSingleSectionOrSubsectionVisible:$1,dataStateFilter:z2},formatters:{sideContentActionButtonText:P.formatSideContentActionButtonText,setNoDataTextForSmartTable:function(e){if(T.oCommonUtils&&e){var i=T.oCommonUtils.getContextText("WAITING_SMARTTABLE",e);if(i!=="WAITING_SMARTTABLE"){return i;}return"";}},setVMVisibilityForVendor:function(){var e=new U(window.location.href);if(e.mParams["sap-ui-layer"]){var j=e.mParams["sap-ui-layer"];for(var i=0;i<j.length;i++){if(j[i].toUpperCase()==="VENDOR"){return true;}}}return false;},formatItemTextForMultipleView:function(i){return i&&Q?Q.formatItemTextForMultipleView(i):"";}},extensionAPI:new E(T,H,J,Q)};C2.handlers=q(J.handlers,C2.handlers);return C2;}};return G;});
