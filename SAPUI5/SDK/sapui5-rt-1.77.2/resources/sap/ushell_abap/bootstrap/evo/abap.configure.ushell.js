// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["./abap.constants","sap/ushell/bootstrap/common/common.configure.ushell","sap/base/util/ObjectPath","sap/base/Log"],function(a,c,O,L){"use strict";function l(g){var C="sap/ushell_abap/bootstrap/evo/abap.configure.ushell";var m=g.messages;if(m&&m.length>0){for(var i=0;i<m.length;i+=1){if(m[i].severity==="error"){L.error(m[i].text,null,C);}else if(m[i].severity==="warning"){L.warning(m[i].text,null,C);}}}}function b(g){if(g.startupConfig){var C=O.create("services.Container.adapter",g);C.config=g.startupConfig;}}function s(g){var S=O.get("ushell.spaces.configurable",g);if(S){var u=O.get("startupConfig.userProfile",g)||[];var o=u.filter(function(p){return p.id==="SPACES_ENABLEMENT";})[0];var h=o&&o.value;if(h==="true"){O.set("ushell.spaces.enabled",true,g);}else if(h==="false"){O.set("ushell.spaces.enabled",false,g);}}}function d(g){var C=O.create("services.CommonDataModel.adapter",g);C.module="sap.ushell.adapters.cdm.PagesCommonDataModelAdapter";}function e(C){var p=O.get("bootstrapPlugins",C)||{};Object.keys(p).forEach(function(P){var o=p[P];if(o.hasOwnProperty("formFactors")){var F=o.formFactors,D={};D.desktop=F.desktop||false;D.tablet=F.tablet||false;D.phone=F.phone||false;o.deviceTypes=D;delete o.formFactors;}});}function f(){var C=c(a);l(C);b(C);s(C);if(O.get("ushell.spaces.enabled",C)){d(C);}e(C);return C;}return f;});
