sap.ui.predefine('sap/ushell/appRuntime/ui5/services/AppConfiguration',["sap/ushell/services/AppConfiguration","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A,a){"use strict";function b(){sap.ushell.services.AppConfiguration=this;A.constructor.call(this);this.setApplicationFullWidth=function(v){a.sendMessageToOuterShell("sap.ushell.services.AppConfiguration.setApplicationFullWidth",{"bValue":v});};}return new b();},true);sap.ui.predefine('sap/ushell/appRuntime/ui5/services/ShellUIService',["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","../../../ui5service/_ShellUIService/shelluiservice.class.factory","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(S,a,b,d,A){"use strict";var s=d({serviceRegistry:S,serviceFactory:a,service:b});var l;var c=s.extend("sap.ushell.appRuntime.services.ShellUIService",{setTitle:function(t){l=t;return A.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setTitle",{"sTitle":t});},getTitle:function(){return l;},setHierarchy:function(h){return A.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setHierarchy",{"aHierarchyLevels":h});},setRelatedApps:function(r){return A.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setRelatedApps",{"aRelatedApps":r});}});return c;},true);
/*
 * ! OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine('sap/ui/base/ManagedObjectObserver',['sap/ui/base/Object','sap/ui/base/ManagedObject','sap/ui/base/EventProvider',"sap/base/util/array/uniqueSort","sap/ui/thirdparty/jquery"],function(B,M,E,u,q){"use strict";var a=B.extend("sap.ui.base.ManagedObjectObserver",{constructor:function(C){if(!C&&typeof C!=="function"){throw new Error("Missing callback function in ManagedObjectObserver constructor");}this._fnCallback=C;}});a.prototype.observe=function(i,C){if(!(i instanceof M)){if(i==null){return;}throw new TypeError("ManagedObjectObserver can only handle ManagedObjects, but observe was called for "+i);}o(i,C);c(i,this,C);};a.prototype.unobserve=function(i,C){if(!(i instanceof M)){if(i==null){return;}throw new TypeError("ManagedObjectObserver can only handle ManagedObjects, but unobserve was called for "+i);}if(C){o(i,C);}r(i,this,C);};a.prototype.isObserved=function(i,C){if(!(i instanceof M)){if(i==null){return false;}throw new TypeError("ManagedObjectObserver can only handle ManagedObjects, but isObserved was called for "+i);}return d(i,this,C);};a.prototype.disconnect=function(){e(this);};a.prototype.getConfiguration=function(i){return g(i,this);};var O={},t=Object.create(null);O.propertyChange=function(i,n,v,N){h("properties",i,n,function(){return{type:"property",old:v,current:N};});};O.aggregationChange=function(i,n,s,v){h("aggregations",i,n,function(){return{type:"aggregation",mutation:s,children:Array.isArray(v)?v:null,child:!Array.isArray(v)?v:null};});};O.parentChange=function(i,n,s,p){h("parent",i,n,function(){return{type:"parent",mutation:s,parent:p};});var P=s==="unset"?"remove":"insert";O.aggregationChange(p,n,P,i);};O.associationChange=function(i,n,s,I){h("associations",i,n,function(){return{type:"association",mutation:s,ids:I};});};O.eventChange=function(i,n,s,L,F,D){h("events",i,n,function(){return{type:"event",mutation:s,listener:L,func:F,data:D};});};O.bindingChange=function(i,n,s,p,v){h("bindings",i,n,function(){return{type:"binding",mutation:s,bindingInfo:p,memberType:v};});};O.objectDestroyed=function(i){h("destroy",i,null,function(){return{type:"destroy"};});var I=i.getId();if(t[I]){i.detachEvent("EventHandlerChange",H);delete t[I];}delete i._observer;};function h(T,n,N,C){var I=n.getId(),p=t[I];if(p){var s;for(var i=0;i<p.listeners.length;i++){if(b(p.configurations[i],T,N)){if(!s){s=C();s.name=N;s.object=n;}var L=p.listeners[i];L._fnCallback(s);}}}}function b(C,T,n){if(C==null||!T){return false;}if(T!="destroy"&&T!="parent"&&!n){return false;}return C[T]===true||(Array.isArray(C[T])&&C[T].indexOf(n)>-1);}function c(T,L,C){f(T,L,C,false);}function g(T,L){var i=T.getId();var n=t[i];if(n&&n.listeners){var I=n.listeners.indexOf(L);if(I>=0){var C=q.extend(true,{},n.configurations[I]);return C;}}return null;}function r(T,L,C){C=C||g(T,L);f(T,L,C,true);}function d(T,L,C){var i=T.getId(),n=t[i];C=C||g(T,L);if(!n){return false;}var I=n.listeners.indexOf(L);if(I===-1){return false;}else{return l(n.configurations[I].properties,C.properties)&&l(n.configurations[I].aggregations,C.aggregations)&&l(n.configurations[I].associations,C.associations)&&l(n.configurations[I].bindings,C.bindings)&&l(n.configurations[I].events,C.events)&&m(n.configurations[I].destroy,C.destroy)&&m(n.configurations[I].parent,C.parent);}}function e(L){for(var n in t){var T=t[n];for(var i=0;i<T.listeners.length;i++){if(T.listeners[i]===L){T.listeners.splice(i,1);T.configurations.splice(i,1);}}if(T.listeners&&T.listeners.length===0){delete t[n];T.object._observer=undefined;}}}function f(T,L,C,R){var i=T.getId(),n=t[i],p,I;if(R){if(!n){return;}I=n.listeners.indexOf(L);if(I>=0){p=n.configurations[I];}}else{if(!n){n=t[i]={listeners:[],configurations:[],object:T};}I=n.listeners.indexOf(L);if(I===-1){n.listeners.push(L);n.configurations.push(C);}else{p=n.configurations[I];}}if(p){p.properties=p.properties||[];k(p.properties,C.properties,R);p.aggregations=p.aggregations||[];k(p.aggregations,C.aggregations,R);p.associations=p.associations||[];k(p.associations,C.associations,R);p.bindings=p.bindings||[];k(p.bindings,C.bindings,R);p.events=p.events||[];k(p.events,C.events,R);if(C.destroy!=null){if(R){delete p.destroy;}else{p.destroy=C.destroy;}}if(C.parent!=null){if(R){delete p.parent;}else{p.parent=C.parent;}}}var s=j(T,"events");if(T._observer&&R){if(!s&&E.hasListener(T,"EventHandlerChange",H)){T.detachEvent("EventHandlerChange",H);}if(!s&&!j(T,"properties")&&!j(T,"aggregations")&&!j(T,"associations")&&!j(T,"destroy")&&!j(T,"parent")&&!j(T,"bindings")){delete T._observer;delete t[i];}}else if(!T._observer&&!R){if(s&&!E.hasListener(T,"EventHandlerChange",H)){T.attachEvent("EventHandlerChange",H);}T._observer=O;}}function j(T,s){var i=T.getId(),n=t[i];if(n){var C=n.configurations.filter(function(p){return p.hasOwnProperty(s)&&p[s]&&(p[s]===true||p[s].length>0);});return C.length>0;}return false;}function H(i){var T=i.getSource(),s=i.mParameters.EventId;if(T.getMetadata().hasEvent(s)){if(i.mParameters.type==="listenerAttached"){O.eventChange(T,s,"insert",i.mParameters.listener,i.mParameters.func,i.mParameters.data);}else if(i.mParameters.type==="listenerDetached"){O.eventChange(T,s,"remove",i.mParameters.listener,i.mParameters.func,i.mParameters.data);}}}function k(n,A,R){if(!A){return;}for(var i=0;i<A.length;i++){var I=n.indexOf(A[i]);if(I>-1&&R){n.splice(I,1);}else if(I===-1&&!R){n.push(A[i]);}}}function l(F,s){if(!Array.isArray(s)||s.length==0){return true;}if(!Array.isArray(F)||F.length==0){return false;}var U=u(F.concat(s));return F.length===U.length;}function m(i,C){if(C==null){return true;}return i===C;}function o(i,C){var n=i.getMetadata(),p=Object.keys(n.getAllProperties()),A=Object.keys(n.getAllAggregations()),s=Object.keys(n.getAllAssociations()),v=u(p.concat(A)),w=Object.keys(n.getAllEvents());C.properties=C.properties===true?p:C.properties;C.aggregations=C.aggregations===true?A:C.aggregations;C.associations=C.associations===true?s:C.associations;C.bindings=C.bindings===true?v:C.bindings;C.events=C.events===true?w:C.events;C.destroy=(C.destroy==null)?false:C.destroy;C.parent=(C.parent==null)?false:C.parent;}return a;});sap.ui.predefine('sap/ui/fl/Layer',[],function(){"use strict";return{USER:"USER",CUSTOMER:"CUSTOMER",CUSTOMER_BASE:"CUSTOMER_BASE",PARTNER:"PARTNER",VENDOR:"VENDOR",BASE:"BASE"};});sap.ui.predefine('sap/ui/fl/apply/_internal/Storage',["sap/ui/fl/apply/_internal/StorageUtils","sap/ui/fl/Utils","sap/ui/fl/LayerUtils","sap/ui/fl/apply/_internal/StorageResultMerger","sap/ui/fl/apply/_internal/storageResultDisassemble"],function(S,F,L,a,s){"use strict";function _(C,o,D){if(o.layers&&(o.layers[0]==="ALL"||o.layers.indexOf(D)!==-1)){C.draftLayer=D;}else{delete C.draftLayer;}return C;}function b(p,C){var h=C.map(function(o){var i=Object.assign({},p,{url:o.url,path:o.path});var D=p.draftLayer||F.getUrlParameter(L.FL_DRAFT_PARAM)||"";i=_(i,o,D);return o.applyConnectorModule.loadFlexData(i).then(function(r){return r||S.getEmptyFlexDataResponse();}).catch(S.logAndResolveDefault.bind(undefined,S.getEmptyFlexDataResponse(),o,"loadFlexData"));});return Promise.all(h);}function c(r){var h=[];r.forEach(function(R){if(Array.isArray(R)){h=h.concat(R);}else{h.push(R);}});return h;}function d(r){return r.map(function(R){return R.variantSection?s(R):R;});}function e(r){return Promise.resolve(r).then(c).then(d).then(c).then(a.merge);}function f(p){return S.getStaticFileConnector().then(b.bind(this,p));}var g={};g.completeFlexData=function(p){if(!p||!p.reference){return Promise.reject("No reference was provided");}return Promise.all([f(p),p.partialFlexData]).then(e);};g.loadFlexData=function(p){if(!p||!p.reference){return Promise.reject("No reference was provided");}return S.getApplyConnectors().then(b.bind(this,p)).then(e);};return g;},true);sap.ui.predefine('sap/ui/fl/apply/_internal/StorageResultMerger',["sap/base/util/merge"],function(m){"use strict";var s={};function _(r,t){var f=r.reduce(function(f,R){if(R[t]){return f.concat(R[t]);}return f;},[]);var c=[];return f.filter(function(C){var F=C.fileName;var d=c.indexOf(F)!==-1;if(d){return false;}c.push(F);return true;});}function a(r){return r.reduce(function(u,R){return m({},u,R.ui2personalization);},{});}function b(r){return r.reduce(function(c,R){return R.cacheKey?c+=R.cacheKey:c;},"")||null;}s.merge=function(r){return{appDescriptorChanges:_(r,"appDescriptorChanges"),changes:_(r,"changes"),ui2personalization:a(r),variants:_(r,"variants"),variantChanges:_(r,"variantChanges"),variantDependentControlChanges:_(r,"variantDependentControlChanges"),variantManagementChanges:_(r,"variantManagementChanges"),cacheKey:b(r)};};return s;});sap.ui.predefine('sap/ui/fl/apply/_internal/StorageUtils',["sap/base/security/encodeURLParameters","sap/base/Log","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/base/util/isEmptyObject"],function(e,L,c,d,i){"use strict";var A="sap/ui/fl/apply/_internal/connectors/";var S={connector:"StaticFileConnector"};function _(l,v){return l.filter(function(a){return v.indexOf(a)!==-1||v[0]==="ALL";});}function s(r){function b(C,o){return new Date(C.creation)-new Date(o.creation);}["changes","variantChanges","variants","variantDependentControlChanges","variantManagementChanges"].forEach(function(a){r[a]=r[a].sort(b);});return r;}function f(n,l,C){return C.map(function(m){var a=m.connector;var b;if(!m.custom){b=n+a;}else{b=l?m.applyConnector:m.writeConnector;}return b;});}function g(n,l,C){var a=f(n,l,C);return new Promise(function(r){sap.ui.require(a,function(){Array.from(arguments).forEach(function(o,I){if(!C[I].layers){C[I].layers=o.layers;}else{C[I].layers=_(C[I].layers,o.layers);}if(l){C[I].applyConnectorModule=o;}else{C[I].writeConnectorModule=o;}});r(C);});});}return{getConnectors:function(n,l){var C=sap.ui.getCore().getConfiguration().getFlexibilityServices();var m=[];if(l){m=[S];}m=m.concat(C);return g(n,l,m);},getApplyConnectors:function(){return this.getConnectors(A,true);},getStaticFileConnector:function(){return g(A,true,[S]);},logAndResolveDefault:function(r,C,F,E){L.error("Connector ("+C.connector+") failed call '"+F+"': "+E);return r;},filterAndSortResponses:function(G){var r=[];Object.keys(G).forEach(function(l){r.push(G[l]);});r=r.filter(function(R){return R.changes.length>0||R.variants.length>0||R.variantChanges.length>0||R.variantManagementChanges.length>0||R.variantDependentControlChanges.length>0;});r.sort(function(a,b){return a.index-b.index;});return r;},getGroupedFlexObjects:function(F){var G={};Object.keys(c).forEach(function(l){G[l]=this.getEmptyFlexDataResponse();G[l].index=d.getLayerIndex(l);}.bind(this));F.forEach(function(o){var l=o.layer;if(o.fileType==="ctrl_variant"&&o.variantManagementReference){G[l].variants.push(o);}else if(o.fileType==="ctrl_variant_change"){G[l].variantChanges.push(o);}else if(o.fileType==="ctrl_variant_management_change"){G[l].variantManagementChanges.push(o);}else if(o.fileType==="change"||o.fileType==="variant"){if(o.variantReference){G[l].variantDependentControlChanges.push(o);}else{G[l].changes.push(o);}}});Object.keys(G).forEach(function(l){s(G[l]);});return G;},getEmptyFlexDataResponse:function(){return Object.assign({},{appDescriptorChanges:[],changes:[],variants:[],variantChanges:[],variantDependentControlChanges:[],variantManagementChanges:[],ui2personalization:{}});},isStorageResponseFilled:function(r){return Object.keys(r||{}).some(function(k){if(Array.isArray(r[k])){return r[k].length!==0;}return!i(r[k]);});}};});sap.ui.predefine('sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes',[],function(){"use strict";return{getChangeTypes:function(){return["appdescr_ovp_addNewCard","appdescr_ovp_removeCard","appdescr_ovp_changeCard","appdescr_app_addNewInbound","appdescr_app_changeInbound","appdescr_app_removeInbound","appdescr_app_removeAllInboundsExceptOne","appdescr_app_addNewOutbound","appdescr_app_changeOutbound","appdescr_app_removeOutbound","appdescr_app_addNewDataSource","appdescr_app_changeDataSource","appdescr_app_removeDataSource","appdescr_app_addAnnotationsToOData","appdescr_app_addTechnicalAttributes","appdescr_app_removeTechnicalAttributes","appdescr_app_setTitle","appdescr_app_setSubTitle","appdescr_app_setShortTitle","appdescr_app_setDescription","appdescr_app_setInfo","appdescr_app_setDestination","appdescr_app_setKeywords","appdescr_app_setAch","appdescr_app_addCdsViews","appdescr_app_removeCdsViews","appdescr_flp_setConfig","appdescr_ui5_addNewModel","appdescr_ui5_addNewModelEnhanceWith","appdescr_ui5_removeModel","appdescr_ui5_replaceComponentUsage","appdescr_ui5_setMinUI5Version","appdescr_smb_addNamespace","appdescr_smb_changeNamespace","appdescr_ui_generic_app_setMainPage","appdescr_ui_setIcon","appdescr_ui_setDeviceTypes","appdescr_ui5_addLibraries","appdescr_url_setUri","appdescr_fiori_setRegistrationIds","appdescr_card","appdescr_widget"];},getCondensableChangeTypes:function(){return["appdescr_app_setTitle","appdescr_app_setInfo","appdescr_app_setShortTitle","appdescr_app_setSubTitle","appdescr_app_setDescription","appdescr_app_setDestination","appdescr_app_setKeywords","appdescr_app_setAch","appdescr_ui_setIcon","appdescr_ui_setDeviceTypes","appdescr_ui_setIcon","appdescr_ui_setDeviceTypes","appdescr_fiori_setRegistrationIds","appdescr_smb_changeNamespace"];}};});sap.ui.predefine('sap/ui/fl/apply/_internal/changes/Applier',["sap/base/Log","sap/ui/core/Element","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/Utils"],function(L,E,J,F,U,D,a){"use strict";var l=new a.FakePromise();function _(C,p){var s=C.getSelector&&C.getSelector();if(!s||(!s.id&&!s.name)){throw Error("No selector in change found or no selector ID.");}var o=p.modifier.bySelector(s,p.appComponent,p.view);if(!o){throw Error("A flexibility change tries to change a nonexistent control.");}var h=C.getDependentControlSelectorList();h.forEach(function(i){var j=p.modifier.bySelector(i,p.appComponent,p.view);if(!j){throw Error("A dependent selector control of the flexibility change is not available.");}});return o;}function b(C,o,m,h,p){var x=f(p);var i=U.getControlIfTemplateAffected(o,C,p);var I=F.hasChangeApplyFinishedCustomData(i.control,o,p.modifier);var j=o.isApplyProcessFinished();if(j&&!I){if(!x){var k=U.checkIfDependencyIsStillValid.bind(null,p.appComponent,p.modifier,m);m=h._oChangePersistence.copyDependenciesFromInitialChangesMap(o,k,p.appComponent);}o.setInitialApplyState();}else if(!j&&I){o.markFinished();}return m;}function c(C,p){var s;if(f(p)&&C.getDefinition().jsOnly){s="Change cannot be applied in XML. Retrying in JS.";}if(s){C.setInitialApplyState();throw Error(s);}}function d(C,m,i,p){if(i instanceof E){m.control=i;}if(m.control){p.modifier.updateAggregation(m.originalControl,C.getContent().boundAggregation);}F.addAppliedCustomData(m.control,C,p,f(p));var r={success:true};C.markFinished(r);return r;}function e(o,C,m,p){var x=f(p);var r={success:false,error:o};var s=C.getId();var h="Change ''{0}'' could not be applied.";var i=o instanceof Error;var j=F.getCustomDataIdentifier(false,i,x);switch(j){case F.notApplicableChangesCustomDataKey:a.formatAndLogMessage("info",[h,o.message],[s]);break;case F.failedChangesCustomDataKeyXml:a.formatAndLogMessage("warning",[h,"Merge error detected while processing the XML tree."],[s],o.stack);break;case F.failedChangesCustomDataKeyJs:a.formatAndLogMessage("error",[h,"Merge error detected while processing the JS control tree."],[s],o.stack);break;}F.addFailedCustomData(m.control,C,p,j);if(x){C.setInitialApplyState();}else{C.markFinished(r);}return r;}function f(p){return p.modifier.targets==="xmlTree";}function g(o,C){var h=C.getDefinition();var s=h.changeType;var t=h.selector.id;var i=h.namespace+h.fileName+"."+h.fileType;var w="A flexibility change could not be applied.";w+="\nThe displayed UI might not be displayed as intedend.";if(o.message){w+="\n   occurred error message: '"+o.message+"'";}w+="\n   type of change: '"+s+"'";w+="\n   LRep location of the change: "+i;w+="\n   id of targeted control: '"+t+"'.";L.warning(w,undefined,"sap.ui.fl.apply._internal.changes.Applier");}var A={applyChangeOnControl:function(C,o,p){var m=U.getControlIfTemplateAffected(C,o,p);return U.getChangeHandler(C,m,p).then(function(h){c(C,p);return h;}).then(function(h){if(C.hasApplyProcessStarted()){return C.addPromiseForApplyProcessing().then(function(r){C.markFinished();return r;});}else if(!C.isApplyProcessFinished()){return new a.FakePromise().then(function(){C.startApplying();return h.applyChange(C,m.control,p);}).then(function(i){return d(C,m,i,p);}).catch(function(i){return e(i,C,m,p);});}var r={success:true};C.markFinished(r);return r;}).catch(function(h){return{success:false,error:h};});},applyAllChangesForControl:function(G,o,h,C){var m=G();var i=m.mChanges[C.getId()]||[];i.forEach(function(j){if(!j.isApplyProcessFinished()&&!j._ignoreOnce){j.setQueuedForApply();}});l=l.then(function(C){var p=[];var s=C.getId();var i=m.mChanges[s]||[];var P={modifier:J,appComponent:o,view:a.getViewForControl(C)};var j;if(m.mControlsWithDependencies[s]){D.removeControlsDependencies(m,s);j=true;}i.forEach(function(k){m=b(C,k,m,h,P);if(k._ignoreOnce){delete k._ignoreOnce;}else if(k.isApplyProcessFinished()){D.resolveDependenciesForChange(m,k.getId());}else if(!m.mDependencies[k.getId()]){p.push(function(){return A.applyChangeOnControl(k,C,P).then(function(){D.resolveDependenciesForChange(m,k.getId());});});}else{var n=A.applyChangeOnControl.bind(A,k,C,P);D.addChangeApplyCallbackToDependency(m,k.getId(),n);}});if(i.length||j){return a.execPromiseQueueSequentially(p).then(function(){return D.processDependentQueue(m,o);});}}.bind(null,C));return l;},applyAllChangesForXMLView:function(p,C){if(!Array.isArray(C)){var s="No list of changes was passed for processing the flexibility on view: "+p.view+".";L.error(s,undefined,"sap.ui.fl.apply._internal.changes.Applier");C=[];}return C.reduce(function(P,o){return P.then(function(){var h=_(o,p);o.setQueuedForApply();b(h,o,undefined,undefined,p);if(!o.isApplyProcessFinished()){return A.applyChangeOnControl(o,h,p);}return{success:true};}).then(function(r){if(!r.success){throw Error(r.error);}}).catch(function(h){g(h,o);});},new a.FakePromise()).then(function(){return p.view;});}};return A;},true);sap.ui.predefine('sap/ui/fl/apply/_internal/changes/Reverter',["sap/base/Log","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/Utils"],function(L,F,U,a){"use strict";function _(c,C,o,p){var s=false;var d=p.modifier.getControlType(C);if(c.getChangeType()==="stashControl"&&d==="sap.ui.core._StashedControl"){s=true;if(!c.hasRevertData()){o.setChangeRevertData(c,false);}}return s;}function b(c){if(!c.isApplyProcessFinished()&&c.hasApplyProcessStarted()){return c.addPromiseForApplyProcessing().then(function(r){if(r&&r.error){c.markRevertFinished(r.error);throw Error(r.error);}});}}var R={revertChangeOnControl:function(c,C,p){var m=U.getControlIfTemplateAffected(c,C,p);var o;return U.getChangeHandler(c,m,p).then(function(r){o=r;}).then(b.bind(null,c)).then(function(){var s=_(c,C,o,p);if(c.isApplyProcessFinished()||s){if(!c.hasRevertData()){c.setRevertData(F.getParsedRevertDataFromCustomData(C,c,p.modifier));}c.startReverting();return o.revertChange(c,m.control,p);}throw Error("Change was never applied");}).then(function(){m.control=p.modifier.bySelector(c.getSelector(),p.appComponent,p.view);if(m.bTemplateAffected){p.modifier.updateAggregation(m.control,c.getContent().boundAggregation);}c.markRevertFinished();return m.control;}).catch(function(e){var E="Change could not be reverted: "+e.message;L.error(E);c.markRevertFinished(E);return false;});},revertMultipleChanges:function(c,p){var P=[];c.forEach(function(C){C.setQueuedForRevert();P.push(function(){var s=C.getSelector&&C.getSelector();var o=p.modifier.bySelector(s,p.appComponent);if(!o){L.warning("A flexibility change tries to revert changes on a nonexistent control with id "+s.id);return new a.FakePromise();}var r={modifier:p.modifier,appComponent:p.appComponent,view:a.getViewForControl(o)};return R.revertChangeOnControl(C,o,r).then(function(v){F.destroyAppliedCustomData(v||o,C,p.modifier);return!!v;}).then(function(S){if(S){p.flexController._oChangePersistence._deleteChangeInMap(C);}});});});return a.execPromiseQueueSequentially(P);}};return R;},true);sap.ui.predefine('sap/ui/fl/apply/_internal/changes/Utils',["sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/Utils","sap/ui/fl/registry/ChangeHandlerRegistration","sap/ui/fl/registry/ChangeRegistry"],function(F,a,C,b){"use strict";var U={getControlIfTemplateAffected:function(c,o,p){var m=p.modifier;var d=c.getDefinition();var e={originalControl:o};var O=d.dependentSelector&&d.dependentSelector.originalSelector;if(c.getContent().boundAggregation&&O){e.control=m.bySelector(O,p.appComponent,p.view);e.controlType=m.getControlType(e.control);e.bTemplateAffected=true;}else{e.control=o;e.controlType=m.getControlType(o);e.bTemplateAffected=false;}return e;},getChangeHandler:function(c,m,p){var l=p.modifier.getLibraryName(m.control);var w=new a.FakePromise();if(C.isChangeHandlerRegistrationInProgress(l)){w=C.waitForChangeHandlerRegistration(l);}return w.then(function(){var s=c.getChangeType();var L=c.getLayer();var o=b.getInstance();o.initSettings();return o.getChangeHandler(s,m.controlType,m.control,p.modifier,L);});},checkIfDependencyIsStillValid:function(A,m,c,s){var o=a.getChangeFromChangesMap(c.mChanges,s);var d=m.bySelector(o.getSelector(),A);if(F.hasChangeApplyFinishedCustomData(d,o,m)||o.hasApplyProcessStarted()){return false;}return true;}};return U;});sap.ui.predefine('sap/ui/fl/apply/_internal/controlVariants/URLHandler',["sap/ui/core/Component","sap/ui/fl/Utils","sap/base/Log","sap/base/util/merge","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/ui/base/ManagedObjectObserver","sap/ui/thirdparty/hasher","sap/base/util/includes"],function(C,U,L,m,O,i,M,h,a){"use strict";var _={};function b(n,o){var A=[];return n.reduce(function(r,v){var V=o.getVariantManagementReference(v).variantManagementReference;if(V){if(a(A,V)){r.updateRequired=true;return r;}A.push(V);}if(V&&o.oData[V].currentVariant!==v){r.updateRequired=true;if(o.oData[V].currentVariant!==o.oData[V].defaultVariant){r.parameters.push(o.oData[V].currentVariant);}}else{r.parameters.push(v);}return r;},{updateRequired:false,parameters:[]});}function c(p,o){var r=O.get(["params",j.variantTechnicalParameterName],p);if(r){var u=b(r,o);if(u.updateRequired){j.update({updateURL:!o._bDesignTimeMode,parameters:u.parameters,updateHashEntry:true,model:o});}}}function d(o,n){var u=U.getUshellContainer();var S=u.getService("ShellNavigation");try{var k=u.getService("URLParsing");var N=k.parseShellHash(n);c(N,o);}catch(E){L.error(E.message);}return S.NavigationFilterStatus.Continue;}function e(o){var r=U.getComponentClassName(o.oAppComponent);var u=U.getUshellContainer();if(!_[r]&&u){_[r]=d.bind(null,o);u.getService("ShellNavigation").registerNavigationFilter(_[r]);}}function f(o){var r=U.getComponentClassName(o.oAppComponent);var u=U.getUshellContainer();if(_[r]&&u){u.getService("ShellNavigation").unregisterNavigationFilter(_[r]);delete _[r];}}function s(p){var P=U.getParsedURLHash(j.variantTechnicalParameterName);if(P.params){var t=U.getTechnicalParametersForComponent(p.model.oAppComponent);if(!t){L.warning("Component instance not provided, so technical parameters in component data and browser history remain unchanged");}if(p.parameters.length===0){delete P.params[j.variantTechnicalParameterName];t&&delete t[j.variantTechnicalParameterName];}else{P.params[j.variantTechnicalParameterName]=p.parameters;t&&(t[j.variantTechnicalParameterName]=p.parameters);}if(p.silent){h.changed.active=false;h.replaceHash(U.getUshellContainer().getService("URLParsing").constructShellHash(P));h.changed.active=true;}else{var o=U.getUshellContainer().getService("CrossApplicationNavigation");o.toExternal({target:{semanticObject:P.semanticObject,action:P.action,context:P.contextRaw},params:P.params,appSpecificRoute:P.appSpecificRoute,writeHistory:false});}}}function g(p){var r={index:-1};var u=U.getParsedURLHash().params;if(u){r.parameters=[];if(p.model._bDesignTimeMode){u[j.variantTechnicalParameterName]=j.getStoredHashParams(p);}if(Array.isArray(u[j.variantTechnicalParameterName])){u[j.variantTechnicalParameterName]=u[j.variantTechnicalParameterName].map(decodeURIComponent);u[j.variantTechnicalParameterName].some(function(P,I){if(p.model.oVariantController.getVariant(p.vmReference,P)){r.index=I;return true;}});}}return m(r,u&&u[j.variantTechnicalParameterName]&&{parameters:u[j.variantTechnicalParameterName]});}var j={variantTechnicalParameterName:"sap-ui-fl-control-variant-id",initialize:function(p){var P=U.getParsedURLHash();var k=P.params&&P.params[j.variantTechnicalParameterName];j.attachHandlers(p);j.update({model:p.model,parameters:k,updateHashEntry:Array.isArray(k)&&k.length>0});c(P,p.model);},updateVariantInURL:function(p){var u=j.removeURLParameterForVariantManagement(p);if(!u.parameters){return;}var P=u.parameters||[];var I=u.index;var k=p.newVReference===p.model.oData[p.vmReference].defaultVariant;if(!k){if(I===-1){P=P.concat([p.newVReference]);}else{P=P.slice(0,I).concat([p.newVReference],P.slice(I));}}if(!k||I>-1){j.update({parameters:P,updateURL:!p.model._bDesignTimeMode,updateHashEntry:true,model:p.model});}},removeURLParameterForVariantManagement:function(p){var v=g(p);if(v.index>-1){v.parameters.splice(v.index,1);}return v;},attachHandlers:function(p){function o(){return p.model._oVariantSwitchPromise.then(function(){p.model._oHashData.controlPropertyObservers.forEach(function(k){k.destroy();});f(p.model);p.model.oChangePersistence.resetVariantMap();p.model.destroy();p.model.oComponentDestroyObserver.unobserve(p.model.oAppComponent,{destroy:true});p.model.oComponentDestroyObserver.destroy();});}e(p.model);if(!p.model.oComponentDestroyObserver&&p.model.oAppComponent instanceof C){p.model.oComponentDestroyObserver=new M(o.bind(null));p.model.oComponentDestroyObserver.observe(p.model.oAppComponent,{destroy:true});}},registerControl:function(p){if(p.updateURL){p.model._oHashData.variantControlIds.push(p.vmReference);}},update:function(p){if(!p.model._oHashData){p.model._oHashData={hashParams:[],controlPropertyObservers:[],variantControlIds:[]};}if(!p||!Array.isArray(p.parameters)){L.info("Variant URL parameters could not be updated since invalid parameters were received");return;}if(p.updateURL){s(p);}if(p.updateHashEntry&&!i(p.model)){p.model._oHashData.hashParams=p.parameters;}},getStoredHashParams:function(p){return Array.prototype.slice.call(p.model._oHashData.hashParams);},handleModelContextChange:function(p){var k="modelContextChange";function l(E,P){var v=P.model.getVariantManagementReferenceForControl(E.getSource());var V=P.model._oHashData.variantControlIds;var I=V.indexOf(v);if(I>-1){V.slice(I).forEach(function(n){if(g({vmReference:n,model:p.model}).index===-1){P.model.switchToDefaultForVariantManagement(n);}});}}var o=new M(function(E){if(E.current===true&&E.old===false){E.object.attachEvent(k,{model:p.model},l);}else if(E.current===false&&E.old===true){E.object.detachEvent(k,l);}});o.observe(p.vmControl,{properties:["resetOnContextChange"]});p.model._oHashData.controlPropertyObservers.push(o);if(p.vmControl.getResetOnContextChange()!==false){p.vmControl.attachEvent(k,{model:p.model},l);}},clearAllVariantURLParameters:function(p){j.update({updateURL:true,parameters:[],updateHashEntry:false,model:p.model});}};return j;},true);sap.ui.predefine('sap/ui/fl/apply/_internal/controlVariants/Utils',[],function(){"use strict";var V={DEFAULT_AUTHOR:"SAP",VARIANT_TECHNICAL_PARAMETER:"sap-ui-fl-control-variant-id",compareVariants:function(v,o){if(v.content.content.title.toLowerCase()<o.content.content.title.toLowerCase()){return-1;}else if(v.content.content.title.toLowerCase()>o.content.content.title.toLowerCase()){return 1;}return 0;},getIndexToSortVariant:function(v,o){var s=v.length;v.some(function(e,i){if(V.compareVariants(o,e)<0){s=i;return true;}});return s;}};return V;});sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/FlexState',["sap/base/util/merge","sap/base/util/ObjectPath","sap/ui/core/Component","sap/ui/fl/apply/_internal/StorageUtils","sap/ui/fl/apply/_internal/flexState/Loader","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/apply/_internal/flexState/prepareAppDescriptorMap","sap/ui/fl/apply/_internal/flexState/prepareChangesMap","sap/ui/fl/apply/_internal/flexState/prepareVariantsMap","sap/ui/fl/LayerUtils","sap/ui/fl/Utils","sap/base/Log"],function(m,O,C,S,L,M,p,a,b,c,U,d){"use strict";var F={};var _={};var e={};var f={};var g={appDescriptorMap:p,changesMap:a,variantsMap:b};function h(P){var w=C.get(P.componentId);_[P.reference].componentData=w?w.getComponentData():P.componentData;}function i(P){var w=C.get(P.componentId);P.componentData=P.componentData||w.getComponentData()||{};P.manifest=P.manifest||P.rawManifest||w.getManifestObject();P.reference=P.reference||M.getFlexReference(P);}function j(R,w){if(!_[R]){throw Error("State is not yet initialized");}if(!_[R].preparedMaps[w]){var P={unfilteredStorageResponse:_[R].unfilteredStorageResponse,storageResponse:_[R].storageResponse,componentId:_[R].componentId,componentData:_[R].componentData};_[R].preparedMaps[w]=F._callPrepareFunction(w,P);}return _[R].preparedMaps[w];}function k(R){return j(R,"appDescriptorMap");}function l(R){return j(R,"changesMap");}function n(R){return j(R,"variantsMap");}function o(P){if(P.reference.endsWith(".Component")){var w=P.reference.split(".");w.pop();var R=w.join(".");_[R]=m({},{storageResponse:{changes:S.getEmptyFlexDataResponse()},unfilteredStorageResponse:{changes:S.getEmptyFlexDataResponse()},preparedMaps:{},componentId:P.componentId,partialFlexState:P.partialFlexState});f[R]=f[P.reference];}}function q(R){var w=m({},R);var x=w.changes;var y=["changes","variants","variantChanges","variantDependentControlChanges","variantManagementChanges"];if(c.isLayerFilteringRequired()){y.forEach(function(T){x[T]=c.filterChangeDefinitionsByMaxLayer(x[T]);});}return w;}function r(P){f[P.reference]=L.loadFlexData(P).then(function(R){_[P.reference]=m({},{unfilteredStorageResponse:R,preparedMaps:{},componentId:P.componentId,componentData:P.componentData,partialFlexState:P.partialFlexState});o(P);s(P.reference);return R;});return f[P.reference];}function s(R){var w=c.getUshellContainer();if(w){e[R]=u.bind(null,R);w.getService("ShellNavigation").registerNavigationFilter(e[R]);}}function t(R){var w=c.getUshellContainer();if(w&&e[R]){w.getService("ShellNavigation").unregisterNavigationFilter(e[R]);delete e[R];}}function u(R,N,w){var x=c.getUshellContainer();if(x){var y=x.getService("ShellNavigation");try{var z=c.getMaxLayerTechnicalParameter(N);var P=c.getMaxLayerTechnicalParameter(w);if(z!==P){F.clearMaxLayerFiltering(R);}}catch(E){d.error(E.message);}return y.NavigationFilterStatus.Continue;}}function v(R){if(_[R]){_[R].preparedMaps={};if(_[R].unfilteredStorageResponse.changes){delete _[R].unfilteredStorageResponse.changes.variantSection;}}}F.initialize=function(P){return Promise.resolve().then(function(P){i(P);if(f[P.reference]){return f[P.reference].then(function(P){if(_[P.reference].partialFlexState===true&&P.partialFlexState!==true){P.partialFlexData=_[P.reference].unfilteredStorageResponse.changes;return r(P);}if(_[P.reference].componentId!==P.componentId){return r(P);}return _[P.reference].unfilteredStorageResponse;}.bind(null,P));}return r(P);}.bind(null,P)).then(function(P,R){if(!_[P.reference].storageResponse){_[P.reference].storageResponse=q(R);h(P);F.getVariantsState(P.reference);}}.bind(null,P));};F.clearAndInitialize=function(P){i(P);var V=!!O.get(["preparedMaps","variantsMap"],_[P.reference]);F.clearState(P.reference);F.clearState(U.normalizeReference(P.reference));return F.initialize(P).then(function(V,R){if(V){return F.getVariantsState(R);}}.bind(null,V,P.reference));};F.clearState=function(R){if(R){t(R);delete _[R];delete f[R];}else{Object.keys(_).forEach(function(R){t(R);});_={};f={};}};F.clearMaxLayerFiltering=function(R){delete _[R].storageResponse;v(R);};F.getUIChanges=function(R){return l(R).changes;};F.getAppDescriptorChanges=function(R){return k(R).appDescriptorChanges;};F.getVariantsState=function(R){var V=n(R);return V;};F.getUI2Personalization=function(R){return _[R].unfilteredStorageResponse.changes.ui2personalization;};F._callPrepareFunction=function(w,P){return g[w](P);};F.getStorageResponse=function(R){if(f[R]){return f[R].then(function(){return _[R].unfilteredStorageResponse;});}};F.getFlexObjectsFromStorageResponse=function(R){return _[R]&&_[R].unfilteredStorageResponse.changes;};return F;},true);sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/Loader',["sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/apply/_internal/Storage","sap/ui/fl/Utils"],function(M,A,U){"use strict";function _(f){return{changes:f,cacheKey:f.cacheKey};}return{loadFlexData:function(p){var c=M.getBaseComponentNameFromManifest(p.manifest);if(p.partialFlexData){return A.completeFlexData({reference:p.reference,componentName:c,partialFlexData:p.partialFlexData}).then(_);}return A.loadFlexData({reference:p.reference,appVersion:U.getAppVersionFromManifest(p.manifest)||U.DEFAULT_APP_VERSION,componentName:c,cacheKey:M.getCacheKeyFromAsyncHints(p.asyncHints,p.reference),siteId:U.getSiteIdByComponentData(p.componentData),appDescriptor:p.manifest.getRawJson?p.manifest.getRawJson():p.manifest,draftLayer:p.draftLayer}).then(_);}};});sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler',["sap/base/util/includes","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/Utils"],function(i,J,U){"use strict";var P="sap.ui.fl:PendingChange";var D={};function g(s,A){return J.getControlIdBySelector(s,A);}function c(C){return{changeObject:C,dependencies:[],controlsDependencies:[],dependentIds:[]};}function a(s,C,o){d(o,C,s);b(o,C);}function b(C,o){if(!i(C.aChanges,o)){C.aChanges.push(o);}}function d(C,o,s){if(!C.mChanges[s]){C.mChanges[s]=[];}if(!i(C.mChanges[s],o)){C.mChanges[s].push(o);}}function e(C,A,o){var s=C.getSelector();if(s){if(s.id){var S=g(s,A);a(S,C,o);if(s.idIsLocal===undefined&&S.indexOf("---")!==-1){var p=S.split("---")[0];if(p!==A.getId()){S=S.split("---")[1];S=A.createId(S);a(S,C,o);}}}else{b(o,C);}}return o.aChanges;}function f(E,o){return E.some(function(p){return(p.id===o.id&&p.idIsLocal===o.idIsLocal);});}function h(t,o,E,C,A,p,q){var r=E.getDependentSelectorList();o.some(function(s){if(f(r,s)){var u=g(s,A);var I=C&&p.indexOf(t)<p.indexOf(E);if(I){l(E,t,u,q,true);}else{l(t,E,u,q);}return true;}});}function j(t,A,C,o){if(t.isValidForDependencyMap()){var p=t.getDependentSelectorList();k(t,p,A,o);var I=C.indexOf(t);var q=I<(C.length-1);var O=C.slice();O.splice(I,1);O.reverse().forEach(function(E){if(E.isValidForDependencyMap()){h(t,p,E,q,A,C,o);}});}}function k(o,p,A,C){if(p.length){var q=p.map(function(s){return g(s,A);});if(!C.mDependencies[o.getId()]){C.mDependencies[o.getId()]=c(o);}C.mDependencies[o.getId()].controlsDependencies=q;q.forEach(function(I){C.mControlsWithDependencies[I]=C.mControlsWithDependencies[I]||[];C.mControlsWithDependencies[I].push(o.getId());});}}function l(o,C,s,p,I){if(m(o,C,s,p,I)){p.mDependencies[o.getId()].dependencies.push(C.getId());if(!i(p.mDependencies[o.getId()].dependentIds,s)){p.mDependencies[o.getId()].dependentIds.push(s);}if(!p.mDependentChangesOnMe[C.getId()]){p.mDependentChangesOnMe[C.getId()]=[];}p.mDependentChangesOnMe[C.getId()].push(o.getId());}}function m(o,C,s,p,I){var S=!I&&i(p.mDependencies[o.getId()].dependentIds,s);var q=false;if(p.mDependentChangesOnMe[C.getId()]){p.mDependentChangesOnMe[C.getId()].some(function(r){q=i(p.mDependencies[o.getId()].dependencies,r);return q;});}return!S&&!q;}function n(C){var o=[];var p=[];var q=[];C.dependencyRemovedInLastBatch.forEach(function(s){var r=C.mDependencies[s];if(r.dependencies.length===0&&!(r.controlsDependencies&&r.controlsDependencies.length)){p.push(s);o.push(r.changeObject.getId());if(r[P]){q.push(function(){return r[P]();});}}});return U.execPromiseQueueSequentially(q).then(function(){C.dependencyRemovedInLastBatch=[];p.forEach(function(s){delete C.mDependencies[s];});o.forEach(function(s){D.resolveDependenciesForChange(C,s);});return!!o.length;});}D.createEmptyDependencyMap=function(){return{aChanges:[],mChanges:{},mDependencies:{},mDependentChangesOnMe:{},mControlsWithDependencies:{},dependencyRemovedInLastBatch:[]};};D.addChangeAndUpdateDependencies=function(C,A,o){var p=e(C,A,o);j(C,A,p,o);};D.addRuntimeChangeAndUpdateDependencies=function(C,A,o,I){var p=e(C,A,o);j(C,A,p,I);};D.processDependentQueue=function(C,A){return n(C).then(function(o){if(o){return D.processDependentQueue(C,A);}});};D.addChangeApplyCallbackToDependency=function(C,s,o){C.mDependencies[s][P]=o;};D.removeControlsDependencies=function(C,s){var o=C.mControlsWithDependencies[s];if(o){o.forEach(function(p){var q=C.mDependencies[p];if(q&&q.controlsDependencies&&q.controlsDependencies.length){var I=q.controlsDependencies.indexOf(s);if(I>-1){q.controlsDependencies.splice(I,1);delete C.mControlsWithDependencies[s];if(!i(C.dependencyRemovedInLastBatch,p)){C.dependencyRemovedInLastBatch.push(p);}}}});delete C.mControlsWithDependencies[s];}};D.resolveDependenciesForChange=function(C,s){var o=C.mDependentChangesOnMe[s];if(o){o.forEach(function(K){var p=C.mDependencies[K];var I=p?p.dependencies.indexOf(s):-1;if(I>-1){p.dependencies.splice(I,1);if(!i(C.dependencyRemovedInLastBatch,K)){C.dependencyRemovedInLastBatch.push(K);}}});delete C.mDependentChangesOnMe[s];}};D.removeChangeFromMap=function(C,s){Object.keys(C.mChanges).some(function(o){var p=C.mChanges[o];var q=p.map(function(E){return E.getId();}).indexOf(s);if(q!==-1){p.splice(q,1);return true;}});var I=C.aChanges.map(function(E){return E.getId();}).indexOf(s);if(I!==-1){C.aChanges.splice(I,1);}};D.removeChangeFromDependencies=function(C,s){D.resolveDependenciesForChange(C,s);delete C.mDependencies[s];};D.checkForOpenDependenciesForControl=function(C,I,A){return Object.keys(C.mDependencies).some(function(K){return C.mDependencies[K].changeObject.getDependentSelectorList().some(function(o){return J.getControlIdBySelector(o,A)===I;});});};return D;});sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState',["sap/ui/fl/Variant","sap/ui/fl/Change","sap/base/util/ObjectPath","sap/base/util/includes","sap/base/util/restricted/_omit","sap/base/Log","sap/ui/fl/apply/_internal/controlVariants/URLHandler","sap/ui/fl/LayerUtils","sap/ui/fl/apply/_internal/flexState/FlexState","sap/base/util/restricted/_pick","sap/ui/fl/apply/_internal/controlVariants/Utils"],function(V,C,O,i,_,L,U,a,F,b,c){"use strict";function d(p){var r=[];if(p.variantData.content.variantReference){r=k.getVariantChanges(Object.assign(p,{vReference:p.variantData.content.variantReference,changeInstance:true}));return r.filter(function(R){return a.compareAgainstCurrentLayer(R.getDefinition().layer,p.variantData.content.layer)===-1;});}return r;}function e(p){var v=k.getContent(p.reference);var l=O.get([p.vmReference,"variants"],v);return l||[];}function f(v,o,A){var s=o.changeType;if(!v){v={};}if(!v[s]){v[s]=[];}if(A){v[s].push(o);return true;}return v[s].some(function(E,I){if(E.fileName===o.fileName){v[s].splice(I,1);return true;}});}function g(o,l){var s=j(o);l[s].push(o);}function h(o,l){var s=j(o);var m=-1;l[s].some(function(E,I){if(E.fileName===o.fileName){m=I;return true;}});if(m>-1){l[s].splice(m,1);}}function j(o){switch(o.fileType){case"change":return"variantDependentControlChanges";case"ctrl_variant":return"variants";case"ctrl_variant_change":return"variantChanges";case"ctrl_variant_management_change":return"variantManagementChanges";}}var k={getContent:function(r){return F.getVariantsState(r);},getVariantChanges:function(p){var v=k.getContent(p.reference);var s=p.vReference||v[p.vmReference].defaultVariant;var r=[];if(s&&typeof s==="string"){var o=k.getVariant(Object.assign(p,{vReference:s}));r=o.controlChanges;if(p.changeInstance){r=r.map(function(l,m){var n;if(!l.getDefinition){n=new C(l);o.controlChanges.splice(m,1,n);}else{n=l;}return n;});}}return r;},getVariant:function(p){var v;var l=e(p);l.some(function(o){if(o.content.fileName===p.vReference){v=o;return true;}});return v;},addVariantToVariantManagement:function(p){var v=k.getContent(p.reference);var l=v[p.vmReference].variants.slice().splice(1);var I=c.getIndexToSortVariant(l,p.variantData);if(p.variantData.content.variantReference){var r=d(p);p.variantData.controlChanges=r.concat(p.variantData.controlChanges);}v[p.vmReference].variants.splice(I+1,0,p.variantData);return I+1;},removeVariantFromVariantManagement:function(p){var I;var v=k.getContent(p.reference);var l=v[p.vmReference].variants.some(function(o,m){var n=new V(o);if(n.getId()===p.variant.getId()){I=m;return true;}});if(l){v[p.vmReference].variants.splice(I,1);}return I;},setVariantData:function(p){var v=k.getContent(p.reference);var l=v[p.vmReference].variants;var o=l[p.previousIndex];Object.keys(p.variantData).forEach(function(P){if(o.content.content[P]){o.content.content[P]=p.variantData[P];}});if(o.content.fileName!==p.vmReference){l.splice(p.previousIndex,1);var s=c.getIndexToSortVariant(l.slice(1),o);l.splice(s+1,0,o);return s+1;}l.splice(p.previousIndex,1,o);return p.previousIndex;},addChangeToVariant:function(p){var E=k.getVariantChanges(Object.assign(p,{changeInstance:true}));var l=E.map(function(o){return o.getDefinition().fileName;});if(!i(l,p.change.getDefinition().fileName)){var v=k.getVariant(p);v.controlChanges=E.concat([p.change]);return true;}return false;},removeChangeFromVariant:function(p){var l=k.getVariantChanges(Object.assign(p,{changeInstance:true}));var v=k.getVariant(p);var m=false;if(v){v.controlChanges=l.filter(function(o){if(!m&&o.getId()===p.change.getId()){m=true;return false;}return true;});}return m;},loadInitialChanges:function(p){var v=k.getContent(p.reference);return Object.keys(v).reduce(function(I,s){var l=v[s].currentVariant?"currentVariant":"defaultVariant";var A={vmReference:s,vReference:v[s][l],reference:p.reference};return I.concat(k.getVariantChanges(Object.assign({},p,A)));},[]);},fillVariantModel:function(p){var v=k.getContent(p.reference);return Object.keys(v).reduce(function(o,s){o[s]={defaultVariant:v[s].defaultVariant,variants:[]};if(v[s].currentVariant){o[s].currentVariant=v[s].currentVariant;}e(Object.assign(p,{vmReference:s})).forEach(function(l,m){o[s].variants[m]=JSON.parse(JSON.stringify({key:l.content.fileName,title:l.content.content.title,layer:l.content.layer,favorite:l.content.content.favorite,visible:l.content.content.visible,author:O.get("content.support.user",l)}));});return o;},{});},updateChangesForVariantManagementInMap:function(p){var v=k.getContent(p.reference);var o=v[p.vmReference];if(p.changeContent.fileType==="ctrl_variant_change"){o.variants.some(function(l){if(l.content.fileName===p.changeContent.selector.id){return f(l.variantChanges,p.changeContent,p.add);}});}else if(p.changeContent.fileType==="ctrl_variant_management_change"){return f(o.variantManagementChanges,p.changeContent,p.add);}},setCurrentVariant:function(p){var v=k.getContent(p.reference);v[p.vmReference].currentVariant=p.newVReference;},updateVariantsState:function(p){var o=F.getFlexObjectsFromStorageResponse(p.reference);if(!o.variantSection){L.error("Variant management state is not initialized yet");return;}o.variantSection=p.content;if(p.changeToBeAddedOrDeleted){switch(p.changeToBeAddedOrDeleted.getPendingAction()){case"NEW":g(p.changeToBeAddedOrDeleted.getDefinition(),o);break;case"DELETE":h(p.changeToBeAddedOrDeleted.getDefinition(),o);break;}}}};return k;},true);sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/prepareAppDescriptorMap',["sap/ui/fl/Change"],function(C){"use strict";return function(p){var c=p.storageResponse.changes.appDescriptorChanges||[];var a=c.map(function(o){return new C(o);});return{appDescriptorChanges:a};};});sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/prepareChangesMap',["sap/ui/fl/Change"],function(C){"use strict";return function(p){var c=p.storageResponse.changes.changes;var a=c.map(function(o){return new C(o);});return{changes:a};};});sap.ui.predefine('sap/ui/fl/apply/_internal/flexState/prepareVariantsMap',["sap/ui/fl/Utils","sap/base/util/ObjectPath","sap/base/Log","sap/ui/fl/Change","sap/base/util/includes","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/base/util/isEmptyObject","sap/base/util/each","sap/base/util/values","sap/base/util/merge","sap/ui/core/Component","sap/ui/fl/LayerUtils"],function(U,O,L,C,i,V,a,e,v,m,b,c){"use strict";function d(A,B){var D=m({},A);B.forEach(function(E){D[E.fileName]={content:E,controlChanges:[],variantChanges:{}};});return D;}function f(A,B){var D=m({},A);B.forEach(function(E){D[E.variantReference]=D[E.variantReference]||t(E.variantReference);D[E.variantReference].controlChanges.push(E);});return D;}function g(A,B){var D=m({},A);B.forEach(function(E){D[E.selector.id]=D[E.selector.id]||t(E.selector.id);var F=D[E.selector.id].variantChanges[E.changeType]||[];F.push(E);D[E.selector.id].variantChanges[E.changeType]=F;});return D;}function h(A){var B=m({},A);v(A).forEach(function(D){var S=O.get("variantChanges.setVisible",D);if(S&&S.length>0){var E=x(S);if(!E.getContent().visible&&E.getContent().createdByReset){delete B[D.content.fileName];}}});return B;}function r(A){var B=m({},A);v(B).forEach(function(D){var E=D.content.variantReference;var R;if(E){R=k(B,E,D.content.variantManagementReference);}D.controlChanges=j(R,D.content.layer).concat(D.controlChanges);});return B;}function j(R,A){if(!R){return[];}return v(m({},R.controlChanges)).filter(function(B){return c.compareAgainstCurrentLayer(B.layer,A)===-1;});}function k(A,B,D){var R=A[B];if(!R&&B===D){R=t(B);A[B]=R;}return R;}function l(S){var A={};A=d(A,S.variants);A=f(A,S.variantDependentControlChanges);A=g(A,S.variantChanges);A=h(A);A=r(A);return A;}function n(){return{variantManagementChanges:{},variants:[]};}function o(R,A,T){var B=m({},R);v(A).forEach(function(D){var E=D.content.variantManagementReference;if(!B[E]){B[E]=n();}D=z(D);D=w(D);if(!B[E].currentVariant&&D.content.content.visible&&i(T,D.content.fileName)){B[E].currentVariant=D.content.fileName;}B[E].defaultVariant=E;var S=V.getIndexToSortVariant(B[E].variants,D);B[E].variants.splice(S,0,D);});return B;}function p(R,A){var B=m({},R);A.forEach(function(D){var E=D.selector.id;if(!B[E]){B[E]=n();}var F=D.changeType;if(!B[E].variantManagementChanges[F]){B[E].variantManagementChanges[F]=[];}B[E].variantManagementChanges[F].push(D);B[E]=u(B[E]);});return B;}function q(R){var A=m({},R);e(A,function(B,D){var S=D.variants.findIndex(function(F){return F.content.fileName===B;});var E;if(S===-1){E=t(B);}else{E=D.variants[S];D.variants.splice(S,1);}D.variants.unshift(E);});return A;}function s(A,B,T){var R={};R=o(R,A,T);R=p(R,B);R=q(R);return R;}function t(A){var R=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");return{content:{fileName:A,variantManagementReference:A,content:{title:R.getText("STANDARD_VARIANT_TITLE"),favorite:true,visible:true},support:{user:V.DEFAULT_AUTHOR}},variantChanges:{},controlChanges:[]};}function u(A){var B=m({},A);var D=B.variantManagementChanges;var E;if(!a(D)){E=x(D["setDefault"]);if(E){B.defaultVariant=E.getContent().defaultVariant;}}return B;}function w(A){var B=m({},A);var D=B.variantChanges;var E;e(D,function(F,G){switch(F){case"setTitle":E=x(G);if(E){B.content.content.title=E.getText("title");}break;case"setFavorite":E=x(G);if(E){B.content.content.favorite=E.getContent().favorite;}break;case"setVisible":E=x(G);if(E){B.content.content.visible=E.getContent().visible;}break;default:L.error("No valid changes on variant "+B.content.content.title+" available");}});return B;}function x(A){if(A.length>0){return new C(A[A.length-1]);}return false;}function y(T){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl").getText(T);}function z(A){var B=m({},A);if(B.content.fileName===B.content.variantManagementReference){if(!O.get("content.support.user",B)){var S={support:{user:V.DEFAULT_AUTHOR}};m(B.content,S);}}if(!B.content.content.favorite){B.content.content.favorite=true;}if(!B.content.content.visible){B.content.content.visible=true;}var T=B.content.content.title.match(/.i18n>(\w+)./);if(T){B.content.content.title=y(T[1]);}return B;}return function(P){if(a(P)||!O.get("storageResponse.changes.variants",P)){return{};}var T=O.get(["technicalParameters",V.VARIANT_TECHNICAL_PARAMETER],P.componentData)||[];var A=l(P.storageResponse.changes);A=s(A,P.storageResponse.changes.variantManagementChanges,T);m(P.unfilteredStorageResponse.changes,{variantSection:A});return A;};});sap.ui.predefine('sap/ui/fl/apply/_internal/storageResultDisassemble',["sap/ui/fl/apply/_internal/StorageUtils","sap/base/util/merge"],function(S,m){"use strict";function _(f,c){if(c.content.fileName!==c.content.variantManagementReference){f.push(c.content);}c.controlChanges.forEach(function(o){f.push(o);});for(var C in c.variantChanges){f=f.concat(c.variantChanges[C]);}return f;}return function(r){var f=r.changes||[];for(var v in r.variantSection){var V=r.variantSection[v];for(var c in V.variantManagementChanges){f=f.concat(V.variantManagementChanges[c]);}f=V.variants.reduce(_,f);}var g=S.getGroupedFlexObjects(f);var d=S.filterAndSortResponses(g);delete r.changes;delete r.variantSection;m(d[0],r);return d;};});sap.ui.predefine('sap/ui/fl/variants/VariantModel',["sap/ui/model/json/JSONModel","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/BusyIndicator","sap/ui/fl/Layer","sap/ui/fl/Utils","sap/ui/fl/LayerUtils","sap/ui/fl/Change","sap/ui/fl/changeHandler/Base","sap/ui/fl/apply/_internal/changes/Reverter","sap/ui/fl/apply/_internal/controlVariants/URLHandler","sap/base/util/merge","sap/base/util/includes","sap/base/util/ObjectPath","sap/ui/fl/apply/_internal/flexState/FlexState","sap/base/util/isEmptyObject"],function(J,a,B,L,U,b,C,c,R,d,f,i,O,F,e){"use strict";function _(){var v=Object.keys(this.oData);v.forEach(function(s){var p={variantManagementReference:s,currentVariantReference:this.oData[s].currentVariant||this.oData[s].defaultVariant,newVariantReference:true};var m=this.oChangePersistence.loadSwitchChangesMapForComponent(p);k(R.revertMultipleChanges.bind(null,m.changesToBeReverted,{appComponent:this.oAppComponent,modifier:a,flexController:this.oFlexController}),this,s).then(function(){delete this.oData[s];delete this.oVariantController.getChangeFileContent()[s];this._ensureStandardVariantExists(s);}.bind(this));}.bind(this));d.initialize({model:this});d.update({parameters:[],updateHashEntry:true,model:this});return this._oVariantSwitchPromise;}function g(E,p){return k(function(P,v){var m=v.model;var s=v.vmReference;var l=false;var t=P.key;var S=P.key;return Promise.resolve().then(function(){if(O.get([s,"currentVariant"],m.oData)&&m.oData[s].currentVariant!==m.oData[s].originalCurrentVariant){S=m.oData[s].originalCurrentVariant;l=true;return m.updateCurrentVariant(s,t,m.oAppComponent,true);}}).then(function(){if(O.get([s,"modified"],m.oData)===true){var n=m.oVariantController.getVariantChanges(s,S,true);return h({changes:n,vmReference:s,vReference:S,revert:!l,model:m}).then(function(){m.oData[s].originalCurrentVariant=t;m.oData[s].modified=false;m.checkUpdate(true);});}});}.bind(null,E.getParameters(),p),p.model,p.vmReference);}function h(p){var v=p.model._getDirtyChangesFromVariantChanges(p.changes);return Promise.resolve().then(function(){if(p.revert){return R.revertMultipleChanges(v,{appComponent:p.model.oAppComponent,modifier:a,flexController:p.model.oFlexController});}}).then(function(){v.forEach(function(o){p.model.oVariantController.removeChangeFromVariant(o,p.vmReference,p.vReference);p.model.oFlexController.deleteChange(o,p.model.oAppComponent);});});}function j(m,v,l){m.oData[v].variantBusy=l;m.checkUpdate();}function k(l,m,v){m._oVariantSwitchPromise=m._oVariantSwitchPromise.catch(function(){}).then(j.bind(null,m,v,true)).then(l).then(j.bind(null,m,v,false)).catch(function(E){j(m,v,false);throw E;});m.oFlexController.setVariantSwitchPromise(m._oVariantSwitchPromise);return m._oVariantSwitchPromise;}var V=J.extend("sap.ui.fl.variants.VariantModel",{constructor:function(D,o,A,l){this.pSequentialImportCompleted=Promise.resolve();J.apply(this,arguments);this.bObserve=l;if(!o){o=sap.ui.requireSync("sap/ui/fl/FlexControllerFactory").createForControl(A);}this.oFlexController=o;this.oChangePersistence=this.oFlexController._oChangePersistence;this.oVariantController=this.oChangePersistence._oVariantController;this.oAppComponent=A;this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");this._oVariantSwitchPromise=Promise.resolve();this.oVariantController.assignResetMapListener(_.bind(this));if(e(D)){D=this.oVariantController.fillVariantModel();}if(D&&typeof D==="object"){Object.keys(D).forEach(function(K){D[K].variants.forEach(function(v){if(!D[K].currentVariant&&(v.key===D[K].defaultVariant)){D[K].currentVariant=v.key;}v.originalTitle=v.title;v.originalFavorite=v.favorite;v.originalVisible=v.visible;});D[K].originalCurrentVariant=D[K].currentVariant;D[K].originalDefaultVariant=D[K].defaultVariant;});this.setData(D);}d.initialize({model:this});}});V.prototype.updateCurrentVariant=function(v,n,A,I){var s=this.oData[v].originalCurrentVariant;var p={variantManagementReference:v,currentVariantReference:s,newVariantReference:n};var S=function(p){var m=this.oChangePersistence.loadSwitchChangesMapForComponent(p);return R.revertMultipleChanges(m.changesToBeReverted,{appComponent:A||this.oAppComponent,modifier:a,flexController:this.oFlexController}).then(this.oFlexController.applyVariantChanges.bind(this.oFlexController,m.changesToBeApplied,A||this.oAppComponent)).then(function(){this.oData[v].originalCurrentVariant=n;this.oData[v].currentVariant=n;if(this.oData[v].updateVariantInURL){d.updateVariantInURL({vmReference:v,newVReference:n,model:this});this.oVariantController.updateCurrentVariantInMap(v,n);}this.checkUpdate();}.bind(this));}.bind(this,p);if(I){return S();}return k(S,this,v);};V.prototype.getCurrentVariantReference=function(v){return this.oData[v].currentVariant;};V.prototype.getVariantManagementReference=function(v){var s="";var I=-1;Object.keys(this.oData).some(function(K){return this.oData[K].variants.some(function(o,l){if(o.key===v){s=K;I=l;return true;}});}.bind(this));return{variantManagementReference:s,variantIndex:I};};V.prototype.getVariant=function(v,s){return this.oVariantController.getVariant(s||this.getVariantManagementReference(v).variantManagementReference,v);};V.prototype.getVariantProperty=function(v,p){return this.getVariant(v).content.content[p];};V.prototype.addChange=function(o){var v=o.getVariantReference();var s=this.getVariantManagementReference(v).variantManagementReference;this.oData[s].modified=!!this.oData[s].variantsEditable;this.checkUpdate(true);return this.oVariantController.addChangeToVariant(o,s,v);};V.prototype.removeChange=function(o){var v=o.getVariantReference();var s=this.getVariantManagementReference(v).variantManagementReference;return this.oVariantController.removeChangeFromVariant(o,s,v);};V.prototype._getVariantTitleCount=function(n,v){var D=this.getData();return D[v].variants.reduce(function(l,o){if(n.toLowerCase()===o.title.toLowerCase()&&o.visible){l++;}return l;},0);};V.prototype._duplicateVariant=function(p){var n=p.newVariantReference;var s=p.sourceVariantReference;var v=p.variantManagementReference;var S=this.getVariant(s);var l=this.oVariantController.getVariantChanges(v,s,true).map(function(r){return r.getDefinition();});var D={content:{},controlChanges:l,variantChanges:{}};var m=b.compareAgainstCurrentLayer(S.content.layer,!this._bDesignTimeMode?L.USER:"");Object.keys(S.content).forEach(function(K){if(K==="fileName"){D.content[K]=n;}else if(K==="variantReference"){if(m===0){D.content[K]=S.content["variantReference"];}else if(m===-1){D.content[K]=s;}}else if(K==="content"){D.content[K]=JSON.parse(JSON.stringify(S.content[K]));D.content.content.title=p.title;}else{D.content[K]=S.content[K];}});D.content["layer"]=p.layer;l=D.controlChanges.slice();var o={};var q;D.controlChanges=l.reduce(function(r,t){if(b.compareAgainstCurrentLayer(t.layer,!this._bDesignTimeMode?L.USER:"")===0){o=f({},t);o.variantReference=D.content.fileName;if(!o.support){o.support={};}o.support.sourceChangeFileName=t.fileName;o.packageName="$TMP";q=C.createInitialFileContent(o);r.push(new C(q));}return r;}.bind(this),[]);return D;};V.prototype.copyVariant=function(p){var D=this._duplicateVariant(p);var v={key:D.content.fileName,layer:p.layer,title:D.content.content.title,originalTitle:D.content.content.title,favorite:true,originalFavorite:true,rename:true,change:true,remove:true,visible:true,originalVisible:true};var o=this.oFlexController.createVariant(D,p.appComponent);var l=[];[o].concat(o.getControlChanges()).forEach(function(m){l.push(this.oChangePersistence.addDirtyChange(m));}.bind(this));var I=this.oVariantController.addVariantToVariantManagement(f({},o.getDefinitionWithChanges(),{content:{content:{visible:v.visible,favorite:v.favorite}}}),p.variantManagementReference);this.oData[p.variantManagementReference].variants.splice(I,0,v);return this.updateCurrentVariant(p.variantManagementReference,o.getId(),p.appComponent,true).then(function(){return l;});};V.prototype.removeVariant=function(p){var l=this.oChangePersistence.getDirtyChanges().filter(function(o){return(o.getVariantReference&&o.getVariantReference()===p.variant.getId())||o.getId()===p.variant.getId();});return this.updateCurrentVariant(p.variantManagementReference,p.sourceVariantReference,p.component).then(function(){var I=this.oVariantController.removeVariantFromVariantManagement(p.variant,p.variantManagementReference);this.oData[p.variantManagementReference].variants.splice(I,1);this.checkUpdate();l.forEach(function(o){this.oChangePersistence.deleteChange(o);}.bind(this));}.bind(this));};V.prototype.collectModelChanges=function(v,l){var D=this.getData()[v];var m=D.variants;var n=[];var p={};m.forEach(function(o){if(o.originalTitle!==o.title){p={variantReference:o.key,changeType:"setTitle",title:o.title,originalTitle:o.originalTitle,layer:l};n.push(p);}if(o.originalFavorite!==o.favorite){p={variantReference:o.key,changeType:"setFavorite",favorite:o.favorite,originalFavorite:o.originalFavorite,layer:l};n.push(p);}if(!o.visible&&o.originalVisible){p={variantReference:o.key,changeType:"setVisible",visible:false,layer:l};n.push(p);}});if(D.originalDefaultVariant!==D.defaultVariant){p={variantManagementReference:v,changeType:"setDefault",defaultVariant:D.defaultVariant,originalDefaultVariant:D.originalDefaultVariant,layer:l};n.push(p);}return n;};V.prototype.manageVariants=function(v,s,l,m){return new Promise(function(r){v.attachEventOnce("manage",{resolve:r,variantManagementReference:s,layer:l},this.fnManageClickRta,this);v.openManagementDialog(true,m);}.bind(this));};V.prototype.setVariantProperties=function(v,p,A){var l=-1;var o;var m=null;var D=this.getData();if(p.variantReference){l=this.getVariantManagementReference(p.variantReference).variantIndex;o=D[v].variants[l];}var n={};var q={};switch(p.changeType){case"setTitle":q.title=p.title;o.title=p.title;o.originalTitle=o.title;break;case"setFavorite":q.favorite=p.favorite;o.favorite=p.favorite;o.originalFavorite=o.favorite;break;case"setVisible":q.visible=p.visible;q.createdByReset=false;o.visible=p.visible;o.originalVisible=o.visible;break;case"setDefault":q.defaultVariant=p.defaultVariant;D[v].defaultVariant=p.defaultVariant;D[v].originalDefaultVariant=D[v].defaultVariant;var H=d.getStoredHashParams({model:this});if(H){if(D[v].defaultVariant!==D[v].currentVariant&&H.indexOf(D[v].currentVariant)===-1){d.update({parameters:H.concat(D[v].currentVariant),updateURL:!this._bDesignTimeMode,updateHashEntry:true,model:this});}else if(D[v].defaultVariant===D[v].currentVariant&&H.indexOf(D[v].currentVariant)>-1){H.splice(H.indexOf(D[v].currentVariant),1);d.update({parameters:H,updateURL:!this._bDesignTimeMode,updateHashEntry:true,model:this});}}if(!A&&D[v].currentVariant!==p.defaultVariant){this.updateCurrentVariant(v,p.defaultVariant,p.appComponent);}break;default:break;}if(l>-1){var s=this.oVariantController._setVariantData(q,v,l);D[v].variants.splice(l,1);D[v].variants.splice(s,0,o);}else if(this.oVariantController._mVariantManagement[v]){this.oVariantController._mVariantManagement[v].defaultVariant=p.defaultVariant;}if(A===true){n.changeType=p.changeType;n.layer=p.layer;if(p.changeType==="setDefault"){n.fileType="ctrl_variant_management_change";n.selector=a.getSelector(v,p.appComponent);}else{if(p.changeType==="setTitle"){c.setTextInChange(n,"title",p.title,"XFLD");}n.fileType="ctrl_variant_change";n.selector=a.getSelector(p.variantReference,p.appComponent);}m=this.oFlexController.createBaseChange(n,p.appComponent);m.setContent(q);this.oVariantController._updateChangesForVariantManagementInMap(m.getDefinition(),v,true);this.oChangePersistence.addDirtyChange(m);}else{if(p.change){this.oVariantController._updateChangesForVariantManagementInMap(p.change.getDefinition(),v,false);this.oChangePersistence.deleteChange(p.change);}}this.setData(D);this.checkUpdate(true);return m;};V.prototype._ensureStandardVariantExists=function(v){if(!this.oVariantController){throw new Error("An sap.ui.fl.variants.VariantController instance was not found.");}var D=this.getData();if(!D[v]){D[v]={currentVariant:v,originalCurrentVariant:v,defaultVariant:v,originalDefaultVariant:v,variants:[{key:v,title:this._oResourceBundle.getText("STANDARD_VARIANT_TITLE"),originalTitle:this._oResourceBundle.getText("STANDARD_VARIANT_ORIGINAL_TITLE"),favorite:true,originalFavorite:true,visible:true,originalVisible:true,author:this.oVariantController.DEFAULT_AUTHOR}]};this.setData(D);var o={changes:{variantSection:{}}};var l={defaultVariant:v,variantManagementChanges:{},variants:[{content:{fileName:v,fileType:"ctrl_variant",variantManagementReference:v,variantReference:"",support:{user:this.oVariantController.DEFAULT_AUTHOR},content:{title:this._oResourceBundle.getText("STANDARD_VARIANT_TITLE"),favorite:true,visible:true}},controlChanges:[],variantChanges:{}}]};o.changes.variantSection[v]=l;this.oVariantController.setChangeFileContent(o,{});}};V.prototype.setModelPropertiesForControl=function(v,D,o){var r=function(m,v,D){if((m.layer===b.getCurrentLayer(!D))&&(m.key!==v)){return true;}return false;};this.oData[v].modified=false;this.oData[v].showFavorites=true;var l=this._bDesignTimeMode;if(l!==D){this._bDesignTimeMode=D;if(D){d.clearAllVariantURLParameters({model:this});}else if(l){d.update({parameters:d.getStoredHashParams({model:this}),updateURL:true,updateHashEntry:false,model:this});}}if(!(typeof this.fnManageClick==="function"&&typeof this.fnManageClickRta==="function")){this._initializeManageVariantsEvents();}o.detachManage(this.fnManageClick,this);if(D){this.oData[v].variantsEditable=false;this.oData[v].variants.forEach(function(m){m.rename=true;m.change=true;m.remove=r(m,v,D);});}else{if(this.oData[v]._isEditable){o.attachManage({variantManagementReference:v},this.fnManageClick,this);this.oData[v].variantsEditable=true;this.oData[v].variants.forEach(function(m){m.remove=r(m,v,D);if(m.layer===b.getCurrentLayer(true)){m.rename=true;m.change=true;}else{m.rename=false;m.change=false;}});}else{this.oData[v].variantsEditable=false;this.oData[v].variants.forEach(function(m){m.remove=false;m.rename=false;m.change=false;});}}};V.prototype._initializeManageVariantsEvents=function(){this.fnManageClickRta=function(E,D){var l=this.collectModelChanges(D.variantManagementReference,D.layer);D.resolve(l);};this.fnManageClick=function(E,D){if(!this.oFlexController||!this.oVariantController){return;}var l=this.collectModelChanges(D.variantManagementReference,b.getCurrentLayer(true));l.forEach(function(o){o.appComponent=this.oAppComponent;this.setVariantProperties(D.variantManagementReference,o,true);}.bind(this));this.oChangePersistence.saveDirtyChanges();};};V.prototype._handleSave=function(E){var v=E.getSource();var A=U.getAppComponentForControl(v);var s=this.getLocalId(v.getId(),A);return k(function(l,A,p){var S=p["def"];var m=this.getCurrentVariantReference(l);var n=this.oVariantController.getVariantChanges(l,m,true);if(p["overwrite"]){return this.oFlexController.saveSequenceOfDirtyChanges(this._getDirtyChangesFromVariantChanges(n)).then(function(r){this.checkDirtyStateForControlModels([l]);return r;}.bind(this));}var N=U.createDefaultFileName();var P={variantManagementReference:l,appComponent:A,layer:b.getCurrentLayer(true),title:p["name"],sourceVariantReference:m,newVariantReference:N};return this.copyVariant(P).then(function(o){if(S){var q={changeType:"setDefault",defaultVariant:N,originalDefaultVariant:this.oData[l].defaultVariant,appComponent:A,layer:b.getCurrentLayer(true),variantManagementReference:l};var r=this.setVariantProperties(l,q,true);o.push(r);}this.oData[l].modified=false;this.checkUpdate(true);return h({changes:n,vmReference:l,vReference:m,model:this}).then(this.oFlexController.saveSequenceOfDirtyChanges.bind(this.oFlexController,o));}.bind(this));}.bind(this,s,A,E.getParameters()),this,s);};V.prototype.getLocalId=function(I,A){return a.getSelector(I,A).id;};V.prototype.getVariantManagementReferenceForControl=function(v){var s=v.getId();var A=U.getAppComponentForControl(v);return(A&&A.getLocalId(s))||s;};V.prototype.switchToDefaultForVariantManagement=function(v){if(this.oData[v].currentVariant!==this.oData[v].defaultVariant){B.show(200);this.updateCurrentVariant(v,this.oData[v].defaultVariant).then(function(){B.hide();});}};V.prototype.switchToDefaultForVariant=function(v){Object.keys(this.oData).forEach(function(s){if(!v||this.oData[s].currentVariant===v){this.switchToDefaultForVariantManagement(s);}}.bind(this));};V.prototype.registerToModel=function(v){var s=this.getVariantManagementReferenceForControl(v);this._ensureStandardVariantExists(s);this.oData[s]._isEditable=v.getEditable();v.attachEvent("select",{vmReference:s,model:this},g);v.attachSave(this._handleSave,this);this.setModelPropertiesForControl(s,false,v);var u=v.getUpdateVariantInURL();this.oData[s].updateVariantInURL=u;d.registerControl({vmReference:s,updateURL:!!u,model:this});d.handleModelContextChange({model:this,vmControl:v});};V.prototype._getDirtyChangesFromVariantChanges=function(l){var m=l.map(function(o){return o.getDefinition().fileName;});return this.oChangePersistence.getDirtyChanges().filter(function(o){return i(m,o.getId());});};V.prototype.checkDirtyStateForControlModels=function(v){v.forEach(function(s){var m=this.oData[s];if(m.modified===true){var l=this.getCurrentVariantReference(s);var n=this.oVariantController.getVariantChanges(s,l,true);var D=this._getDirtyChangesFromVariantChanges(n);if(D.length===0){m.modified=false;}}}.bind(this));this.checkUpdate(true);};V.prototype.getCurrentControlVariantIds=function(){return Object.keys(this.oData||{}).reduce(function(l,v){return l.concat([this.oData[v].currentVariant]);}.bind(this),[]);};return V;},true);sap.ui.predefine('sap/ui/fl/write/_internal/Storage',["sap/ui/fl/apply/_internal/StorageUtils","sap/ui/fl/write/_internal/StorageFeaturesMerger","sap/base/util/ObjectPath"],function(S,a,O){"use strict";var W="sap/ui/fl/write/_internal/connectors/";function _(){return S.getConnectors(W,false);}function f(l,C){var F=C.filter(function(o){return o.layers.indexOf("ALL")!==-1||o.layers.indexOf(l)!==-1;});if(F.length===1){return F[0];}if(F.length===0){throw new Error("No Connector configuration could be found to write into layer: "+l);}if(F.length>1){throw new Error("sap.ui.core.Configuration 'flexibilityServices' has a misconfiguration: Multiple Connector configurations were found to write into layer: "+l);}}function b(C){var h=C.map(function(o){return o.writeConnectorModule.loadFeatures({url:o.url}).then(function(F){return{features:F,layers:o.layers};}).catch(S.logAndResolveDefault.bind(null,{features:{},layers:o.layers},o,"loadFeatures"));});return Promise.all(h);}function c(l){if(!l){return Promise.reject("No layer was provided");}return _().then(f.bind(this,l));}function d(p){if(p.draft){return new Promise(function(r,h){sap.ui.require(["sap/ui/fl/write/api/FeaturesAPI"],function(F){F.isVersioningEnabled(p.layer).then(function(D){if(D){r();}else{h("Draft is not supported for the given layer: "+p.layer);}});});});}return Promise.resolve();}function e(A,p){return d(p).then(c.bind(undefined,p.layer)).then(function(C){p.url=C.url;var o=O.get(A,C.writeConnectorModule);return o.call(C.writeConnectorModule,p);});}var g={};g.write=function(p){return e("write",p);};g.remove=function(p){return e("remove",p);};g.update=function(p){return e("update",p);};g.reset=function(p){return e("reset",p);};g.getFlexInfo=function(p){return e("getFlexInfo",p);};g.loadFeatures=function(){return _().then(b).then(a.mergeResults);};g.publish=function(p){return e("publish",p);};g.versions={load:function(p){return _().then(e.bind(undefined,"versions.load",p));},activate:function(p){return _().then(e.bind(undefined,"versions.activate",p));},discardDraft:function(p){return _().then(e.bind(undefined,"versions.discardDraft",p));}};return g;},true);sap.ui.predefine('sap/ui/fl/write/_internal/StorageFeaturesMerger',["sap/base/util/merge"],function(m){"use strict";var D={isKeyUser:false,isVariantSharingEnabled:false,isAtoAvailable:false,isAtoEnabled:false,versioning:{},isProductiveSystem:true,isZeroDowntimeUpgradeRunning:false,system:"",client:""};function _(r){var v={};var V=!!r.features.isVersioningEnabled;r.layers.forEach(function(l){v[l]=V;});return v;}return{mergeResults:function(r){var R=D;r.forEach(function(o){Object.keys(o.features).forEach(function(k){if(k!=="isVersioningEnabled"){R[k]=o.features[k];}});R.versioning=m(R.versioning,_(o));});return R;}};});sap.ui.predefine('sap/ui/fl/write/_internal/Versions',["sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/write/_internal/Storage","sap/ui/fl/Utils"],function(C,S,U){"use strict";var _={};function a(p){var o=C.getChangePersistenceForComponent(p.nonNormalizedReference,p.appVersion);var d=o.getDirtyChanges().concat();d.forEach(function(e){o.deleteChange(e,true);});return d.length>0;}function b(v){return v.some(function(o){return o.versionNumber===0;});}function c(v,o){if(b(v)){v.shift();}v.splice(0,0,o);return v;}var V={};V.initialize=function(p){var r=p.reference;var l=p.layer;if(_[r]&&_[r][l]){return Promise.resolve(_[r][l]);}return S.versions.load(p).then(function(v){_[r]=_[r]||{};_[r][l]=v;return _[r][l];});};V.getVersions=function(p){var r=p.reference;var l=p.layer;if(!_[r]||!_[r][l]){throw Error("Versions for reference '"+r+"' and layer '"+l+"' were not initialized.");}return _[r][l];};V.clearInstances=function(){_={};};V.ensureDraftVersionExists=function(p){var r=U.normalizeReference(p.reference);var v=_[r][p.layer];if(!b(v)){_[r][p.layer].splice(0,0,{versionNumber:0});}};V.activateDraft=function(p){var v=V.getVersions(p);var d=b(v);var o=C.getChangePersistenceForComponent(p.nonNormalizedReference,p.appVersion);var D=o.getDirtyChanges().length>0;var s;if(D){s=o.saveDirtyChanges(false,undefined,true);}else{s=Promise.resolve();}if(!d&&!D){return Promise.reject("No draft exists");}return s.then(S.versions.activate.bind(undefined,p)).then(function(e){return c(v,e);});};V.discardDraft=function(p){var v=V.getVersions(p);if(b(v)){return S.versions.discardDraft(p).then(function(){v.shift();a(p);return true;});}var d=a(p);return Promise.resolve(d);};return V;});sap.ui.predefine('sap/ui/model/base/ManagedObjectModel',['../json/JSONModel','../json/JSONPropertyBinding','../json/JSONListBinding','sap/ui/base/ManagedObject','sap/ui/base/ManagedObjectObserver','../Context','../ChangeReason',"sap/base/util/uid","sap/base/Log","sap/base/util/isPlainObject","sap/base/util/deepClone"],function(J,a,b,M,c,C,d,u,L,e,f){"use strict";var g="@custom",I="--";function _(n,o,A,O){var p=A.get(o)||[],q,r;for(var i=0;i<p.length;i++){q=p[i];if(!(q instanceof M)){continue;}r=true;if(O){n._oObserver.observe(q,{properties:true,aggregations:true});}else{n._oObserver.unobserve(q,{properties:true,aggregations:true});}var s=q.getMetadata().getAllAggregations();for(var K in s){_(n,q,s[K],O);}}if(r){var K=o.getId()+"/@"+A.name;if(O){if(!n._mObservedCount.aggregations[K]){n._mObservedCount.aggregations[K]=0;}n._mObservedCount.aggregations[K]++;}else{delete n._mObservedCount.aggregations[K];}}}function h(n){var s,i=n.length-1,p=[];while(!(n[i].node instanceof M)){if(s){p.splice(0,0,s);}s=n[i].path;i--;}return[n[i].node,n[i+1],p,s];}function j(o){var D="",p;var t=typeof o;if(o==null||(t!="object"&&t!="function")){D=o;}else if(e(o)){D=JSON.stringify(o);}else if(o instanceof M){D=o.getId();for(p in o.mProperties){D=D+"$"+j(o.mProperties[p]);}}else if(Array.isArray(o)){for(var i=0;o.length;i++){D=D+"$"+j(o);}}else{L.warning("Could not stringify object "+o);D="$";}return D;}var k=b.extend("sap.ui.model.base.ManagedObjectModelAggregationBinding",{constructor:function(){b.apply(this,arguments);this._getOriginOfManagedObjectModelBinding();},_mightBeAffectedByChangesInside:function(o){while(o){if(o.getParent()===this._oOriginMO){return true;}o=o.getParent();}return false;},getEntryKey:function(o){var O=o.getObject();if(O instanceof M){return O.getId();}return b.prototype.getEntryKey.apply(this,arguments);},getEntryData:function(o){var O=o.getObject();if(O instanceof M){return j(O);}return b.prototype.getEntryData.apply(this,arguments);},_getContexts:function(s,i){var S;if(this._oAggregation){var o=this._oOriginMO.getBinding(this._sMember);if(o){var n=o.getModel();S=n.iSizeLimit;}var B=this._oOriginMO.getBindingInfo(this._sMember);if(B&&s>=0&&i&&S&&i>S){var U=false;if(s!=B.startIndex){B.startIndex=s;U=true;}if(i!=B.length){B.length=i;U=true;}if(U){this._oAggregation.update(this._oOriginMO,"change");}}}return b.prototype._getContexts.apply(this,arguments);},_getOriginOfManagedObjectModelBinding:function(){if(!this._oOriginMO){var o=this.oModel,n=[];o._getObject(this.sPath,this.oContext,n);var v=h(n);this._oOriginMO=v[0];this._aPartsInJSON=v[2];this._sMember=v[3];this._oAggregation=this._oOriginMO.getMetadata().getAggregation(this._sMember);}},getLength:function(){if(this._aPartsInJSON.length==0){var i=this._oOriginMO.getBinding(this._sMember);if(i&&i.isA("sap.ui.model.ListBinding")){return i.getLength();}}return b.prototype.getLength.apply(this,arguments);},isLengthFinal:function(){if(this._aPartsInJSON.length==0){var i=this._oOriginMO.getBinding(this._sMember);if(i&&i.isA("sap.ui.model.ListBinding")){return i.isLengthFinal();}}return true;}});var l=a.extend("sap.ui.model.base.ManagedObjectModelPropertyBinding");var m=J.extend("sap.ui.model.base.ManagedObjectModel",{constructor:function(o,D){if(!D&&typeof D!="object"){D={};}D[g]={};this._oObject=o;this._mObservedCount={properties:{},aggregations:{}};this.mListBinding={};J.apply(this,[D]);this._oObserver=new c(this.observerChanges.bind(this));}});m.prototype.getAggregation=J.prototype.getProperty;m.prototype.setData=function(D,i){var n={};n[g]=D;J.prototype.setData.apply(this,[n,i]);};m.prototype.getJSON=function(){return JSON.stringify(this.oData[g]);};m.prototype.setProperty=function(p,v,o,A){var r=this.resolve(p,o),n,O,P;if(!r){return false;}if(r.indexOf("/"+g)===0){return J.prototype.setProperty.apply(this,arguments);}n=r.lastIndexOf("/");O=r.substring(0,n||1);P=r.substr(n+1);var N=[],q=this._getObject(O,null,N);if(q){if(q instanceof M){var s=q.getMetadata().getManagedProperty(P);if(s){if(s.get(q)!==v){s.set(q,v);var F=function(B){var p=this.resolve(B.sPath,B.oContext);return p?p.startsWith(r):false;}.bind(this);this.checkUpdate(false,A,F);return true;}}else{L.warning("The setProperty method only supports properties, the path "+r+" does not point to a property",null,"sap.ui.model.base.ManagedObjectModel");}}else if(q[P]!==v){var V=h(N);var t=f(V[1].node),w=V[2];var x=t;for(var i=0;i<w.length;i++){x=x[w[i]];}x[P]=v;var y="/"+P;if(w.length>0){y="/"+w.join("/")+y;}var D=r.lastIndexOf(y);var z=r.substr(0,D);return this.setProperty(z,t,o);}}return false;};m.prototype.addBinding=function(B){J.prototype.addBinding.apply(this,arguments);if(B instanceof k){var A=B.sPath.replace("/","");this.mListBinding[A]=B;}B.checkUpdate(false);};m.prototype.removeBinding=function(B){J.prototype.removeBinding.apply(this,arguments);if(B instanceof k){var A=B.sPath.replace("/","");delete this.mListBinding[A];}this._observeBeforeEvaluating(B,false);};m.prototype.firePropertyChange=function(p){if(p.reason===d.Binding){p.resolvedPath=this.resolve(p.path,p.context);}J.prototype.firePropertyChange.call(this,p);};m.prototype.bindAggregation=function(p,o,P){return J.prototype.bindProperty.apply(this,arguments);};m.prototype.bindProperty=function(p,o,P){var B=new l(this,p,o,P);return B;};m.prototype.bindList=function(p,o,s,F,P){var B=new k(this,p,o,s,F,P);return B;};m.prototype.getManagedObject=function(p,o){if(p instanceof C){o=p;p=o.getPath();}var O=this.getProperty(p,o);if(O instanceof M){return O;}return null;};m.prototype.getRootObject=function(){return this._oObject;};m.prototype._observePropertyChange=function(o,p){if(!o||!p){return;}var K=o.getId()+"/@"+p.name;if(!this._oObserver.isObserved(o,{properties:[p.name]})){this._oObserver.observe(o,{properties:[p.name]});this._mObservedCount.properties[K]=1;}else{this._mObservedCount.properties[K]++;}};m.prototype._unobservePropertyChange=function(o,p){if(!o||!p){return;}var K=o.getId()+"/@"+p.name;this._mObservedCount.properties[K]--;if(this._mObservedCount.properties[K]==0){this._oObserver.unobserve(o,{properties:[p.name]});delete this._mObservedCount.properties[K];}};m.prototype._observeAggregationChange=function(o,A){if(!o||!A){return;}var K=o.getId()+"/@"+A.name;if(!this._oObserver.isObserved(o,{aggregations:[A.name]})){this._oObserver.observe(o,{aggregations:[A.name]});this._mObservedCount.aggregations[K]=1;_(this,o,A,true);}else{this._mObservedCount.aggregations[K]++;}};m.prototype._unobserveAggregationChange=function(o,A){if(!o||!A){return;}var K=o.getId()+"/@"+A.name;this._mObservedCount.aggregations[K]--;if(this._mObservedCount.aggregations[K]==0){this._oObserver.unobserve(o,{aggregations:[A.name]});delete this._mObservedCount.aggregations[K];}};m.prototype._createId=function(i){var o=this._oObject;if(typeof o.createId==="function"){return o.createId(i);}if(!i){return o.getId()+I+u();}if(i.indexOf(o.getId()+I)!=0){return o.getId()+I+i;}return i;};m.prototype._getSpecialNode=function(n,s,p,P){if(n instanceof M){if(s==="className"){if(n.getMetadata){return n.getMetadata().getName();}else{return typeof n;}}else if(s==="id"){return n.getId();}else if(s==="metadataContexts"){return n._oProviderData;}}else if(s==="binding"&&p&&P){return p.getBinding(P);}else if(s==="bound"&&p&&P){return p.isBound(P);}else if(s==="bindingInfo"&&p&&P){return p.getBindingInfo(P);}else if(Array.isArray(n)){if(s==="length"){return n.length;}else if(s.indexOf("id=")===0){var o=s.substring(3),F=null;for(var i=0;i<n.length;i++){if(n[i].getId()===this._createId(o)||n[i].getId()===o){F=n[i];break;}}return F;}}return null;};m.prototype._getObject=function(p,o,n){var N=this._oObject,r="",t=this;if(n){n.push({path:"/",node:N});}this.aBindings.forEach(function(B){if(!B._bAttached){t._observeBeforeEvaluating(B,true);}});if(typeof p==="string"&&p.indexOf("/")!=0&&!o){return null;}if(o instanceof M){N=o;r=p;}else if(!o||o instanceof C){r=this.resolve(p,o);if(!r){return N;}if(r.indexOf("/"+g)===0){return J.prototype._getObject.apply(this,[p,o]);}}else{N=o;r=p;}if(!N){return null;}var P=r.split("/"),i=0;if(!P[0]){i++;}var q=null,s=null,v;while(N!==null&&P[i]){v=P[i];if(v=="id"){v="@id";}if(v.indexOf("@")===0){N=this._getSpecialNode(N,v.substring(1),q,s);}else if(N instanceof M){var w=N.getMetadata();if(w.isInstanceOf("sap.ui.core.IDScope")&&v.indexOf("#")===0){N=N.byId(v.substring(1));}else{q=N;s=v;var x=w.getManagedProperty(v);if(x){N=x.get(N);}else{var A=w.getManagedAggregation(v);if(A){N=A.get(N);}else{if(N&&N[v]&&typeof N[v]==="function"){N=N[v]();}else{N=null;}}}}}else if(Array.isArray(N)||e(N)){N=N[v];}else{if(N&&N[v]&&typeof N[v]==="function"){N=N[v]();}else{N=null;}}if(n){n.push({path:v,node:N});}i++;}return N;};m.prototype.destroy=function(){for(var n in this._mAggregationObjects){var o=this._mAggregationObjects[n];if(o.object.invalidate.fn){o.object.invalidate=o.object.invalidate.fn;}}J.prototype.destroy.apply(this,arguments);};m.prototype._observeBeforeEvaluating=function(B,o){if(!B.isResolved()){return;}var p=B.getPath();var i=B.getContext(),n=this._oObject,r;if(i instanceof M){n=i;r=p;}else if(!i||i instanceof C){r=this.resolve(p,i);if(!r){return;}if(r.indexOf("/"+g)===0){return;}}else{return;}var P=r.split("/");if(!P[0]){P.shift();}var s=P[0];if(n.getMetadata().isInstanceOf("sap.ui.core.IDScope")&&s.indexOf("#")===0){n=n.byId(s.substring(1));s=P[1];}if(n instanceof M){var N=n.getMetadata(),q=N.getManagedProperty(s);if(q){if(o===true){this._observePropertyChange(n,q);}else if(o===false){this._unobservePropertyChange(n,q);}}else{var A=N.getAggregation(s)||N.getAllPrivateAggregations()[s];if(A){if(o===true){this._observeAggregationChange(n,A);}else if(o===false){this._unobserveAggregationChange(n,A);}}}B._bAttached=o;}};m.prototype.observerChanges=function(o){if(o.type=="aggregation"){var A={};if(o.child instanceof M){A=o.child.getMetadata().getAllAggregations();}if(o.mutation=="insert"){if(o.child instanceof M){this._oObserver.observe(o.child,{properties:true,aggregations:true});}for(var K in A){_(this,o.child,A[K],true);}if(this.mListBinding[o.name]){var i=this._oObject.getBinding(o.name);var n=this._oObject.getAggregation(o.name);if(i&&i.getCurrentContexts().length!=n.length){return;}}}else{if(o.child instanceof M){this._oObserver.unobserve(o.child,{properties:true,aggregations:true});}for(var K in A){_(this,o.child,A[K],false);}}}else if(o.type==="property"){this.aBindings.forEach(function(B){if(B._mightBeAffectedByChangesInside&&B._mightBeAffectedByChangesInside(o.object)){B.checkUpdate(true);}});}this.checkUpdate();};m.prototype.checkUpdate=function(F,A,i){if(A){if(!this.sUpdateTimer){this.sUpdateTimer=setTimeout(function(){this.checkUpdate(F,false,i);}.bind(this),0);}return;}if(this.sUpdateTimer){clearTimeout(this.sUpdateTimer);this.sUpdateTimer=null;}var B=this.aBindings.slice(0);B.forEach(function(o){if(!i||i(o)){o.checkUpdate(F);}});};return m;});
/*!
 * @copyright@
 */
sap.ui.predefine('sap/ui/generic/app/navigation/service/SelectionVariant',["./NavError","sap/ui/base/Object","sap/ui/thirdparty/jquery","sap/base/Log"],function(E,B,q,L){"use strict";var S=B.extend("sap.ui.generic.app.navigation.service.SelectionVariant",{_rVALIDATE_SIGN:new RegExp("[E|I]"),_rVALIDATE_OPTION:new RegExp("EQ|NE|LE|GE|LT|GT|BT|CP"),constructor:function(s){this._mParameters={};this._mSelectOptions={};this._sId="";if(s!==undefined){if(typeof s==="string"){this._parseFromString(s);}else if(typeof s==="object"){this._parseFromObject(s);}else{throw new E("SelectionVariant.INVALID_INPUT_TYPE");}}},getID:function(){return this._sId;},setID:function(i){this._sId=i;},setText:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}this._sText=n;},getText:function(){return this._sText;},setParameterContextUrl:function(u){if(typeof u!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}this._sParameterCtxUrl=u;},getParameterContextUrl:function(){return this._sParameterCtxUrl;},getFilterContextUrl:function(){return this._sFilterCtxUrl;},setFilterContextUrl:function(u){if(typeof u!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}this._sFilterCtxUrl=u;},addParameter:function(n,v){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(typeof v!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(n===""){throw new E("SelectionVariant.PARAMETER_WITHOUT_NAME");}if(this._mSelectOptions[n]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION");}this._mParameters[n]=v;return this;},removeParameter:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(n===""){throw new E("SelectionVariant.PARAMETER_WITHOUT_NAME");}delete this._mParameters[n];return this;},renameParameter:function(n,N){if(typeof n!=="string"||typeof N!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(n===""||N===""){throw new E("SelectionVariant.PARAMETER_WITHOUT_NAME");}if(this._mParameters[n]!==undefined){if(this._mSelectOptions[N]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION");}if(this._mParameters[N]){throw new E("SelectionVariant.PARAMETER_COLLISION");}this._mParameters[N]=this._mParameters[n];delete this._mParameters[n];}return this;},getParameter:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}return this._mParameters[n];},getParameterNames:function(){return Object.keys(this._mParameters);},addSelectOption:function(p,s,o,l,h){if(typeof p!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(p===""){throw new E("SelectionVariant.INVALID_PROPERTY_NAME");}if(typeof s!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(typeof o!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(typeof l!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(o==="BT"&&typeof h!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(!this._rVALIDATE_SIGN.test(s.toUpperCase())){throw new E("SelectionVariant.INVALID_SIGN");}if(!this._rVALIDATE_OPTION.test(o.toUpperCase())){throw new E("SelectionVariant.INVALID_OPTION");}if(this._mParameters[p]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION");}if(o!=="BT"){if((h!==undefined)&&(h!=="")&&(h!==null)){throw new E("SelectionVariant.HIGH_PROVIDED_THOUGH_NOT_ALLOWED");}}if(this._mSelectOptions[p]===undefined){this._mSelectOptions[p]=[];}var e={Sign:s.toUpperCase(),Option:o.toUpperCase(),Low:l};if(o==="BT"){e.High=h;}else{e.High=null;}for(var i=0;i<this._mSelectOptions[p].length;i++){var a=this._mSelectOptions[p][i];if(a.Sign===e.Sign&&a.Option===e.Option&&a.Low===e.Low&&a.High===e.High){return this;}}this._mSelectOptions[p].push(e);return this;},removeSelectOption:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.SELOPT_WRONG_TYPE");}if(n===""){throw new E("SelectionVariant.SELOPT_WITHOUT_NAME");}delete this._mSelectOptions[n];return this;},renameSelectOption:function(n,N){if(typeof n!=="string"||typeof N!=="string"){throw new E("SelectionVariant.SELOPT_WRONG_TYPE");}if(n===""||N===""){throw new E("SelectionVariant.SELOPT_WITHOUT_NAME");}if(this._mSelectOptions[n]!==undefined){if(this._mSelectOptions[N]){throw new E("SelectionVariant.SELOPT_COLLISION");}if(this._mParameters[N]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION");}this._mSelectOptions[N]=this._mSelectOptions[n];delete this._mSelectOptions[n];}return this;},getSelectOption:function(p){if(typeof p!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(p===""){throw new E("SelectionVariant.INVALID_PROPERTY_NAME");}var e=this._mSelectOptions[p];if(!e){return undefined;}return JSON.parse(JSON.stringify(e));},getSelectOptionsPropertyNames:function(){return Object.keys(this._mSelectOptions);},getPropertyNames:function(){return this.getParameterNames().concat(this.getSelectOptionsPropertyNames());},massAddSelectOption:function(p,s){if(!Array.isArray(s)){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}for(var i=0;i<s.length;i++){var o=s[i];this.addSelectOption(p,o.Sign,o.Option,o.Low,o.High);}return this;},getValue:function(n){var v=this.getSelectOption(n);if(v!==undefined){return v;}var p=this.getParameter(n);if(p!==undefined){v=[{Sign:"I",Option:"EQ",Low:p,High:null}];return v;}return undefined;},isEmpty:function(){return this.getParameterNames().length===0&&this.getSelectOptionsPropertyNames().length===0;},toJSONObject:function(){var e={Version:{Major:"1",Minor:"0",Patch:"0"},SelectionVariantID:this._sId};if(this._sParameterCtxUrl){e.ParameterContextUrl=this._sParameterCtxUrl;}if(this._sFilterCtxUrl){e.FilterContextUrl=this._sFilterCtxUrl;}if(this._sText){e.Text=this._sText;}else{e.Text="Selection Variant with ID "+this._sId;}this._determineODataFilterExpression(e);this._serializeParameters(e);this._serializeSelectOptions(e);return e;},toJSONString:function(){return JSON.stringify(this.toJSONObject());},_determineODataFilterExpression:function(e){e.ODataFilterExpression="";},_serializeParameters:function(e){if(this._mParameters.length===0){return;}e.Parameters=[];q.each(this._mParameters,function(p,P){var o={PropertyName:p,PropertyValue:P};e.Parameters.push(o);});},_serializeSelectOptions:function(e){if(this._mSelectOptions.length===0){return;}e.SelectOptions=[];q.each(this._mSelectOptions,function(p,a){var s={PropertyName:p,Ranges:a};e.SelectOptions.push(s);});},_parseFromString:function(j){if(j===undefined){throw new E("SelectionVariant.UNABLE_TO_PARSE_INPUT");}if(typeof j!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}var i=JSON.parse(j);this._parseFromObject(i);},_parseFromObject:function(i){if(i.SelectionVariantID===undefined){L.warning("SelectionVariantID is not defined");i.SelectionVariantID="";}this.setID(i.SelectionVariantID);if(i.ParameterContextUrl!==undefined&&i.ParameterContextUrl!==""){this.setParameterContextUrl(i.ParameterContextUrl);}if(i.FilterContextUrl!==undefined&&i.FilterContextUrl!==""){this.setFilterContextUrl(i.FilterContextUrl);}if(i.Text!==undefined){this.setText(i.Text);}if(i.Parameters){this._parseFromStringParameters(i.Parameters);}if(i.SelectOptions){this._parseFromStringSelectOptions(i.SelectOptions);}},_parseFromStringParameters:function(p){q.each(p,q.proxy(function(i,e){this.addParameter(e.PropertyName,e.PropertyValue);},this));},_parseFromStringSelectOptions:function(s){q.each(s,q.proxy(function(i,o){if(!o.Ranges){L.warning("Select Option object does not contain a Ranges entry; ignoring entry");return true;}if(!Array.isArray(o.Ranges)){throw new E("SelectionVariant.SELECT_OPTION_RANGES_NOT_ARRAY");}q.each(o.Ranges,q.proxy(function(I,r){this.addSelectOption(o.PropertyName,r.Sign,r.Option,r.Low,r.High);},this));},this));}});return S;},true);
/*!
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash strict include="omit,uniq,uniqBy,uniqWith,intersection,intersectionBy,intersectionWith,pick,pickBy,debounce,throttle,max,min,castArray,curry,merge,mergeWith"`
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
sap.ui.predefine('sap/base/util/restricted/_/lodash.custom',function(){'use strict';var u;var V='4.17.10';var L=200;var F='Expected a function';var H='__lodash_hash_undefined__';var M=500;var P='__lodash_placeholder__';var C=1,a=2,b=4;var c=1,d=2;var W=1,f=2,g=4,h=8,i=16,j=32,k=64,l=128,m=256,o=512;var p=800,q=16;var I=1/0,r=9007199254740991,s=1.7976931348623157e+308,N=0/0;var t=4294967295;var w=[['ary',l],['bind',W],['bindKey',f],['curry',h],['curryRight',i],['flip',o],['partial',j],['partialRight',k],['rearg',m]];var v='[object Arguments]',x='[object Array]',y='[object AsyncFunction]',z='[object Boolean]',A='[object Date]',B='[object Error]',D='[object Function]',E='[object GeneratorFunction]',G='[object Map]',J='[object Number]',K='[object Null]',O='[object Object]',Q='[object Promise]',R='[object Proxy]',S='[object RegExp]',T='[object Set]',U='[object String]',X='[object Symbol]',Y='[object Undefined]',Z='[object WeakMap]';var $='[object ArrayBuffer]',_='[object DataView]',a1='[object Float32Array]',b1='[object Float64Array]',c1='[object Int8Array]',d1='[object Int16Array]',e1='[object Int32Array]',f1='[object Uint8Array]',g1='[object Uint8ClampedArray]',h1='[object Uint16Array]',i1='[object Uint32Array]';var j1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k1=/^\w*$/,l1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var m1=/[\\^$.*+?()[\]{}|]/g;var n1=/^\s+|\s+$/g;var o1=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,p1=/\{\n\/\* \[wrapped with (.+)\] \*/,q1=/,? & /;var r1=/\\(\\)?/g;var s1=/\w*$/;var t1=/^[-+]0x[0-9a-f]+$/i;var u1=/^0b[01]+$/i;var v1=/^\[object .+?Constructor\]$/;var w1=/^0o[0-7]+$/i;var x1=/^(?:0|[1-9]\d*)$/;var y1={};y1[a1]=y1[b1]=y1[c1]=y1[d1]=y1[e1]=y1[f1]=y1[g1]=y1[h1]=y1[i1]=true;y1[v]=y1[x]=y1[$]=y1[z]=y1[_]=y1[A]=y1[B]=y1[D]=y1[G]=y1[J]=y1[O]=y1[S]=y1[T]=y1[U]=y1[Z]=false;var z1={};z1[v]=z1[x]=z1[$]=z1[_]=z1[z]=z1[A]=z1[a1]=z1[b1]=z1[c1]=z1[d1]=z1[e1]=z1[G]=z1[J]=z1[O]=z1[S]=z1[T]=z1[U]=z1[X]=z1[f1]=z1[g1]=z1[h1]=z1[i1]=true;z1[B]=z1[D]=z1[Z]=false;var A1=parseInt;var B1=typeof global=='object'&&global&&global.Object===Object&&global;var C1=typeof self=='object'&&self&&self.Object===Object&&self;var D1=B1||C1||Function('return this')();var E1=typeof exports=='object'&&exports&&!exports.nodeType&&exports;var F1=E1&&typeof module=='object'&&module&&!module.nodeType&&module;var G1=F1&&F1.exports===E1;var H1=G1&&B1.process;var I1=(function(){try{var n=F1&&F1.require&&F1.require('util').types;if(n){return n;}return H1&&H1.binding&&H1.binding('util');}catch(e){}}());var J1=I1&&I1.isMap,K1=I1&&I1.isSet,L1=I1&&I1.isTypedArray;function M1(e,n,Y5){switch(Y5.length){case 0:return e.call(n);case 1:return e.call(n,Y5[0]);case 2:return e.call(n,Y5[0],Y5[1]);case 3:return e.call(n,Y5[0],Y5[1],Y5[2]);}return e.apply(n,Y5);}function N1(e,B6){var n=-1,Y5=e==null?0:e.length;while(++n<Y5){if(B6(e[n],n,e)===false){break;}}return e;}function O1(e,n){var Y5=-1,I6=e==null?0:e.length,J6=0,K6=[];while(++Y5<I6){var L6=e[Y5];if(n(L6,Y5,e)){K6[J6++]=L6;}}return K6;}function P1(e,n){var Y5=e==null?0:e.length;return!!Y5&&V1(e,n,0)>-1;}function Q1(e,n,Y5){var I6=-1,J6=e==null?0:e.length;while(++I6<J6){if(Y5(n,e[I6])){return true;}}return false;}function R1(e,B6){var n=-1,Y5=e==null?0:e.length,I6=Array(Y5);while(++n<Y5){I6[n]=B6(e[n],n,e);}return I6;}function S1(e,n){var Y5=-1,I6=n.length,J6=e.length;while(++Y5<I6){e[J6+Y5]=n[Y5];}return e;}function T1(e,n){var Y5=-1,I6=e==null?0:e.length;while(++Y5<I6){if(n(e[Y5],Y5,e)){return true;}}return false;}function U1(e,n,Y5,I6){var J6=e.length,K6=Y5+(I6?1:-1);while((I6?K6--:++K6<J6)){if(n(e[K6],K6,e)){return K6;}}return-1;}function V1(e,n,Y5){return n===n?g2(e,n,Y5):U1(e,W1,Y5);}function W1(e){return e!==e;}function X1(e){return function(n){return n==null?u:n[e];};}function Y1(n,B6){var e=-1,Y5=Array(n);while(++e<n){Y5[e]=B6(e);}return Y5;}function Z1(e){return function(n){return e(n);};}function $1(e,n){return e.has(n);}function _1(e,n){var Y5=e.length,I6=0;while(Y5--){if(e[Y5]===n){++I6;}}return I6;}function a2(e,n){return e==null?u:e[n];}function b2(e){var n=-1,Y5=Array(e.size);e.forEach(function(I6,J6){Y5[++n]=[J6,I6];});return Y5;}function c2(e,n){return function(Y5){return e(n(Y5));};}function d2(e,n){var Y5=-1,I6=e.length,J6=0,K6=[];while(++Y5<I6){var L6=e[Y5];if(L6===n||L6===P){e[Y5]=P;K6[J6++]=Y5;}}return K6;}function e2(e,n){return n=='__proto__'?u:e[n];}function f2(e){var n=-1,Y5=Array(e.size);e.forEach(function(I6){Y5[++n]=I6;});return Y5;}function g2(e,n,Y5){var I6=Y5-1,J6=e.length;while(++I6<J6){if(e[I6]===n){return I6;}}return-1;}var h2=Array.prototype,i2=Function.prototype,j2=Object.prototype;var k2=D1['__core-js_shared__'];var l2=i2.toString;var m2=j2.hasOwnProperty;var n2=(function(){var e=/[^.]+$/.exec(k2&&k2.keys&&k2.keys.IE_PROTO||'');return e?('Symbol(src)_1.'+e):'';}());var o2=j2.toString;var p2=l2.call(Object);var q2=RegExp('^'+l2.call(m2).replace(m1,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var r2=G1?D1.Buffer:u,s2=D1.Symbol,t2=D1.Uint8Array,u2=r2?r2.allocUnsafe:u,v2=c2(Object.getPrototypeOf,Object),w2=Object.create,x2=j2.propertyIsEnumerable,y2=h2.splice,z2=s2?s2.isConcatSpreadable:u,A2=s2?s2.toStringTag:u;var B2=(function(){try{var n=a5(Object,'defineProperty');n({},'',{});return n;}catch(e){}}());var C2=Object.getOwnPropertySymbols,D2=r2?r2.isBuffer:u,E2=c2(Object.keys,Object),F2=Math.max,G2=Math.min,H2=Date.now;var I2=a5(D1,'DataView'),J2=a5(D1,'Map'),K2=a5(D1,'Promise'),L2=a5(D1,'Set'),M2=a5(D1,'WeakMap'),N2=a5(Object,'create');var O2=M2&&new M2;var P2={};var Q2=I5(I2),R2=I5(J2),S2=I5(K2),T2=I5(L2),U2=I5(M2);var V2=s2?s2.prototype:u,W2=V2?V2.valueOf:u,X2=V2?V2.toString:u;function Y2(){}var Z2=(function(){function e(){}return function(n){if(!e6(n)){return{};}if(w2){return w2(n);}e.prototype=n;var Y5=new e;e.prototype=u;return Y5;};}());function $2(){}function _2(e){this.__wrapped__=e;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=t;this.__views__=[];}_2.prototype=Z2($2.prototype);_2.prototype.constructor=_2;function a3(e){var n=-1,Y5=e==null?0:e.length;this.clear();while(++n<Y5){var I6=e[n];this.set(I6[0],I6[1]);}}function b3(){this.__data__=N2?N2(null):{};this.size=0;}function c3(e){var n=this.has(e)&&delete this.__data__[e];this.size-=n?1:0;return n;}function d3(e){var n=this.__data__;if(N2){var Y5=n[e];return Y5===H?u:Y5;}return m2.call(n,e)?n[e]:u;}function e3(e){var n=this.__data__;return N2?(n[e]!==u):m2.call(n,e);}function f3(e,n){var Y5=this.__data__;this.size+=this.has(e)?0:1;Y5[e]=(N2&&n===u)?H:n;return this;}a3.prototype.clear=b3;a3.prototype['delete']=c3;a3.prototype.get=d3;a3.prototype.has=e3;a3.prototype.set=f3;function g3(e){var n=-1,Y5=e==null?0:e.length;this.clear();while(++n<Y5){var I6=e[n];this.set(I6[0],I6[1]);}}function h3(){this.__data__=[];this.size=0;}function i3(e){var n=this.__data__,Y5=E3(n,e);if(Y5<0){return false;}var I6=n.length-1;if(Y5==I6){n.pop();}else{y2.call(n,Y5,1);}--this.size;return true;}function j3(e){var n=this.__data__,Y5=E3(n,e);return Y5<0?u:n[Y5][1];}function k3(e){return E3(this.__data__,e)>-1;}function l3(e,n){var Y5=this.__data__,I6=E3(Y5,e);if(I6<0){++this.size;Y5.push([e,n]);}else{Y5[I6][1]=n;}return this;}g3.prototype.clear=h3;g3.prototype['delete']=i3;g3.prototype.get=j3;g3.prototype.has=k3;g3.prototype.set=l3;function m3(e){var n=-1,Y5=e==null?0:e.length;this.clear();while(++n<Y5){var I6=e[n];this.set(I6[0],I6[1]);}}function n3(){this.size=0;this.__data__={'hash':new a3,'map':new(J2||g3),'string':new a3};}function o3(e){var n=$4(this,e)['delete'](e);this.size-=n?1:0;return n;}function p3(e){return $4(this,e).get(e);}function q3(e){return $4(this,e).has(e);}function r3(e,n){var Y5=$4(this,e),I6=Y5.size;Y5.set(e,n);this.size+=Y5.size==I6?0:1;return this;}m3.prototype.clear=n3;m3.prototype['delete']=o3;m3.prototype.get=p3;m3.prototype.has=q3;m3.prototype.set=r3;function s3(e){var n=-1,Y5=e==null?0:e.length;this.__data__=new m3;while(++n<Y5){this.add(e[n]);}}function t3(e){this.__data__.set(e,H);return this;}function u3(e){return this.__data__.has(e);}s3.prototype.add=s3.prototype.push=t3;s3.prototype.has=u3;function v3(e){var n=this.__data__=new g3(e);this.size=n.size;}function w3(){this.__data__=new g3;this.size=0;}function x3(e){var n=this.__data__,Y5=n['delete'](e);this.size=n.size;return Y5;}function y3(e){return this.__data__.get(e);}function z3(e){return this.__data__.has(e);}function A3(e,n){var Y5=this.__data__;if(Y5 instanceof g3){var I6=Y5.__data__;if(!J2||(I6.length<L-1)){I6.push([e,n]);this.size=++Y5.size;return this;}Y5=this.__data__=new m3(I6);}Y5.set(e,n);this.size=Y5.size;return this;}v3.prototype.clear=w3;v3.prototype['delete']=x3;v3.prototype.get=y3;v3.prototype.has=z3;v3.prototype.set=A3;function B3(e,n){var Y5=$5(e),I6=!Y5&&Z5(e),J6=!Y5&&!I6&&b6(e),K6=!Y5&&!I6&&!J6&&k6(e),L6=Y5||I6||J6||K6,M6=L6?Y1(e.length,String):[],N6=M6.length;for(var O6 in e){if((n||m2.call(e,O6))&&!(L6&&(O6=='length'||(J6&&(O6=='offset'||O6=='parent'))||(K6&&(O6=='buffer'||O6=='byteLength'||O6=='byteOffset'))||m5(O6,N6)))){M6.push(O6);}}return M6;}function C3(e,n,Y5){if((Y5!==u&&!eq(e[n],Y5))||(Y5===u&&!(n in e))){H3(e,n,Y5);}}function D3(e,n,Y5){var I6=e[n];if(!(m2.call(e,n)&&eq(I6,Y5))||(Y5===u&&!(n in e))){H3(e,n,Y5);}}function E3(e,n){var Y5=e.length;while(Y5--){if(eq(e[Y5][0],n)){return Y5;}}return-1;}function F3(e,n){return e&&C4(n,s6(n),e);}function G3(e,n){return e&&C4(n,t6(n),e);}function H3(e,n,Y5){if(n=='__proto__'&&B2){B2(e,n,{'configurable':true,'enumerable':true,'value':Y5,'writable':true});}else{e[n]=Y5;}}function I3(e,n,Y5,I6,J6,K6){var L6,M6=n&C,N6=n&a,O6=n&b;if(Y5){L6=J6?Y5(e,I6,J6,K6):Y5(e);}if(L6!==u){return L6;}if(!e6(e)){return e;}var P6=$5(e);if(P6){L6=h5(e);if(!M6){return B4(e,L6);}}else{var Q6=e5(e),R6=Q6==D||Q6==E;if(b6(e)){return t4(e,M6);}if(Q6==O||Q6==v||(R6&&!J6)){L6=(N6||R6)?{}:i5(e);if(!M6){return N6?E4(e,G3(L6,e)):D4(e,F3(L6,e));}}else{if(!z1[Q6]){return J6?e:{};}L6=j5(e,Q6,M6);}}K6||(K6=new v3);var S6=K6.get(e);if(S6){return S6;}K6.set(e,L6);if(i6(e)){e.forEach(function(V6){L6.add(I3(V6,n,Y5,V6,e,K6));});return L6;}if(g6(e)){e.forEach(function(V6,I6){L6.set(I6,I3(V6,n,Y5,I6,e,K6));});return L6;}var T6=O6?(N6?V4:U4):(N6?t6:s6);var U6=P6?u:T6(e);N1(U6||e,function(V6,I6){if(U6){I6=V6;V6=e[I6];}D3(L6,I6,I3(V6,n,Y5,I6,e,K6));});return L6;}function J3(e,B6,n){var Y5=-1,I6=e.length;while(++Y5<I6){var J6=e[Y5],K6=B6(J6);if(K6!=null&&(L6===u?(K6===K6&&!j6(K6)):n(K6,L6))){var L6=K6,M6=J6;}}return M6;}function K3(e,n,Y5,I6,J6){var K6=-1,L6=e.length;Y5||(Y5=l5);J6||(J6=[]);while(++K6<L6){var M6=e[K6];if(n>0&&Y5(M6)){if(n>1){K3(M6,n-1,Y5,I6,J6);}else{S1(J6,M6);}}else if(!I6){J6[J6.length]=M6;}}return J6;}var L3=G4();function M3(e,n){n=s4(n,e);var Y5=0,I6=n.length;while(e!=null&&Y5<I6){e=e[H5(n[Y5++])];}return(Y5&&Y5==I6)?e:u;}function N3(e,n,Y5){var I6=n(e);return $5(e)?I6:S1(I6,Y5(e));}function O3(e){if(e==null){return e===u?Y:K;}return(A2&&A2 in Object(e))?b5(e):y5(e);}function P3(e,n){return e>n;}function Q3(e,n){return e!=null&&n in Object(e);}function R3(e,B6,n){var Y5=n?Q1:P1,I6=e[0].length,J6=e.length,K6=J6,L6=Array(J6),M6=Infinity,N6=[];while(K6--){var O6=e[K6];if(K6&&B6){O6=R1(O6,Z1(B6));}M6=G2(O6.length,M6);L6[K6]=!n&&(B6||(I6>=120&&O6.length>=120))?new s3(K6&&O6):u;}O6=e[0];var P6=-1,Q6=L6[0];outer:while(++P6<I6&&N6.length<M6){var R6=O6[P6],S6=B6?B6(R6):R6;R6=(n||R6!==0)?R6:0;if(!(Q6?$1(Q6,S6):Y5(N6,S6,n))){K6=J6;while(--K6){var T6=L6[K6];if(!(T6?$1(T6,S6):Y5(e[K6],S6,n))){continue outer;}}if(Q6){Q6.push(S6);}N6.push(R6);}}return N6;}function S3(e){return f6(e)&&O3(e)==v;}function T3(e,n,Y5,I6,J6){if(e===n){return true;}if(e==null||n==null||(!f6(e)&&!f6(n))){return e!==e&&n!==n;}return U3(e,n,Y5,I6,T3,J6);}function U3(e,n,Y5,I6,J6,K6){var L6=$5(e),M6=$5(n),N6=L6?x:e5(e),O6=M6?x:e5(n);N6=N6==v?O:N6;O6=O6==v?O:O6;var P6=N6==O,Q6=O6==O,R6=N6==O6;if(R6&&b6(e)){if(!b6(n)){return false;}L6=true;P6=false;}if(R6&&!P6){K6||(K6=new v3);return(L6||k6(e))?Q4(e,n,Y5,I6,J6,K6):R4(e,n,N6,Y5,I6,J6,K6);}if(!(Y5&c)){var S6=P6&&m2.call(e,'__wrapped__'),T6=Q6&&m2.call(n,'__wrapped__');if(S6||T6){var U6=S6?e.value():e,V6=T6?n.value():n;K6||(K6=new v3);return J6(U6,V6,Y5,I6,K6);}}if(!R6){return false;}K6||(K6=new v3);return S4(e,n,Y5,I6,J6,K6);}function V3(e){return f6(e)&&e5(e)==G;}function W3(e,n,Y5,I6){var J6=Y5.length,K6=J6,L6=!I6;if(e==null){return!K6;}e=Object(e);while(J6--){var M6=Y5[J6];if((L6&&M6[2])?M6[1]!==e[M6[0]]:!(M6[0]in e)){return false;}}while(++J6<K6){M6=Y5[J6];var N6=M6[0],O6=e[N6],P6=M6[1];if(L6&&M6[2]){if(O6===u&&!(N6 in e)){return false;}}else{var Q6=new v3;if(I6){var R6=I6(O6,P6,N6,e,n,Q6);}if(!(R6===u?T3(P6,O6,c|d,I6,Q6):R6)){return false;}}}return true;}function X3(e){if(!e6(e)||r5(e)){return false;}var n=c6(e)?q2:v1;return n.test(I5(e));}function Y3(e){return f6(e)&&e5(e)==T;}function Z3(e){return f6(e)&&d6(e.length)&&!!y1[O3(e)];}function $3(e){if(typeof e=='function'){return e;}if(e==null){return A6;}if(typeof e=='object'){return $5(e)?d4(e[0],e[1]):c4(e);}return D6(e);}function _3(e){if(!s5(e)){return E2(e);}var n=[];for(var Y5 in Object(e)){if(m2.call(e,Y5)&&Y5!='constructor'){n.push(Y5);}}return n;}function a4(e){if(!e6(e)){return x5(e);}var n=s5(e),Y5=[];for(var I6 in e){if(!(I6=='constructor'&&(n||!m2.call(e,I6)))){Y5.push(I6);}}return Y5;}function b4(e,n){return e<n;}function c4(e){var n=_4(e);if(n.length==1&&n[0][2]){return u5(n[0][0],n[0][1]);}return function(Y5){return Y5===e||W3(Y5,e,n);};}function d4(e,n){if(o5(e)&&t5(n)){return u5(H5(e),n);}return function(Y5){var I6=q6(Y5,e);return(I6===u&&I6===n)?r6(Y5,e):T3(n,I6,c|d);};}function e4(e,n,Y5,I6,J6){if(e===n){return;}L3(n,function(K6,L6){if(e6(K6)){J6||(J6=new v3);f4(e,n,L6,Y5,e4,I6,J6);}else{var M6=I6?I6(e2(e,L6),K6,(L6+''),e,n,J6):u;if(M6===u){M6=K6;}C3(e,L6,M6);}},t6);}function f4(e,n,Y5,I6,J6,K6,L6){var M6=e2(e,Y5),N6=e2(n,Y5),O6=L6.get(N6);if(O6){C3(e,Y5,O6);return;}var P6=K6?K6(M6,N6,(Y5+''),e,n,L6):u;var Q6=P6===u;if(Q6){var R6=$5(N6),S6=!R6&&b6(N6),T6=!R6&&!S6&&k6(N6);P6=N6;if(R6||S6||T6){if($5(M6)){P6=M6;}else if(a6(M6)){P6=B4(M6);}else if(S6){Q6=false;P6=t4(N6,true);}else if(T6){Q6=false;P6=y4(N6,true);}else{P6=[];}}else if(h6(N6)||Z5(N6)){P6=M6;if(Z5(M6)){P6=o6(M6);}else if(!e6(M6)||(I6&&c6(M6))){P6=i5(N6);}}else{Q6=false;}}if(Q6){L6.set(N6,P6);J6(P6,N6,I6,K6,L6);L6['delete'](N6);}C3(e,Y5,P6);}function g4(e,n){return h4(e,n,function(Y5,I6){return r6(e,I6);});}function h4(e,n,Y5){var I6=-1,J6=n.length,K6={};while(++I6<J6){var L6=n[I6],M6=M3(e,L6);if(Y5(M6,L6)){k4(K6,s4(L6,e),M6);}}return K6;}function i4(e){return function(n){return M3(n,e);};}function j4(e,n){return D5(z5(e,n,A6),e+'');}function k4(e,n,Y5,I6){if(!e6(e)){return e;}n=s4(n,e);var J6=-1,K6=n.length,L6=K6-1,M6=e;while(M6!=null&&++J6<K6){var N6=H5(n[J6]),O6=Y5;if(J6!=L6){var P6=M6[N6];O6=I6?I6(P6,N6,M6):u;if(O6===u){O6=e6(P6)?P6:(m5(n[J6+1])?[]:{});}}D3(M6,N6,O6);M6=M6[N6];}return e;}var l4=!O2?A6:function(e,n){O2.set(e,n);return e;};var m4=!B2?A6:function(e,n){return B2(e,'toString',{'configurable':true,'enumerable':false,'value':z6(n),'writable':true});};function n4(e,n,Y5){var I6=-1,J6=e.length;if(n<0){n=-n>J6?0:(J6+n);}Y5=Y5>J6?J6:Y5;if(Y5<0){Y5+=J6;}J6=n>Y5?0:((Y5-n)>>>0);n>>>=0;var K6=Array(J6);while(++I6<J6){K6[I6]=e[I6+n];}return K6;}function o4(e){if(typeof e=='string'){return e;}if($5(e)){return R1(e,o4)+'';}if(j6(e)){return X2?X2.call(e):'';}var n=(e+'');return(n=='0'&&(1/e)==-I)?'-0':n;}function p4(e,B6,n){var Y5=-1,I6=P1,J6=e.length,K6=true,L6=[],M6=L6;if(n){K6=false;I6=Q1;}else if(J6>=L){var N6=B6?null:N4(e);if(N6){return f2(N6);}K6=false;I6=$1;M6=new s3;}else{M6=B6?[]:L6;}outer:while(++Y5<J6){var O6=e[Y5],P6=B6?B6(O6):O6;O6=(n||O6!==0)?O6:0;if(K6&&P6===P6){var Q6=M6.length;while(Q6--){if(M6[Q6]===P6){continue outer;}}if(B6){M6.push(P6);}L6.push(O6);}else if(!I6(M6,P6,n)){if(M6!==L6){M6.push(P6);}L6.push(O6);}}return L6;}function q4(e,n){n=s4(n,e);e=A5(e,n);return e==null||delete e[H5(O5(n))];}function r4(e){return a6(e)?e:[];}function s4(e,n){if($5(e)){return e;}return o5(e,n)?[e]:G5(p6(e));}function t4(e,n){if(n){return e.slice();}var Y5=e.length,I6=u2?u2(Y5):new e.constructor(Y5);e.copy(I6);return I6;}function u4(e){var n=new e.constructor(e.byteLength);new t2(n).set(new t2(e));return n;}function v4(e,n){var Y5=n?u4(e.buffer):e.buffer;return new e.constructor(Y5,e.byteOffset,e.byteLength);}function w4(e){var n=new e.constructor(e.source,s1.exec(e));n.lastIndex=e.lastIndex;return n;}function x4(e){return W2?Object(W2.call(e)):{};}function y4(e,n){var Y5=n?u4(e.buffer):e.buffer;return new e.constructor(Y5,e.byteOffset,e.length);}function z4(e,n,Y5,I6){var J6=-1,K6=e.length,L6=Y5.length,M6=-1,N6=n.length,O6=F2(K6-L6,0),P6=Array(N6+O6),Q6=!I6;while(++M6<N6){P6[M6]=n[M6];}while(++J6<L6){if(Q6||J6<K6){P6[Y5[J6]]=e[J6];}}while(O6--){P6[M6++]=e[J6++];}return P6;}function A4(e,n,Y5,I6){var J6=-1,K6=e.length,L6=-1,M6=Y5.length,N6=-1,O6=n.length,P6=F2(K6-M6,0),Q6=Array(P6+O6),R6=!I6;while(++J6<P6){Q6[J6]=e[J6];}var S6=J6;while(++N6<O6){Q6[S6+N6]=n[N6];}while(++L6<M6){if(R6||J6<K6){Q6[S6+Y5[L6]]=e[J6++];}}return Q6;}function B4(e,n){var Y5=-1,I6=e.length;n||(n=Array(I6));while(++Y5<I6){n[Y5]=e[Y5];}return n;}function C4(e,n,Y5,I6){var J6=!Y5;Y5||(Y5={});var K6=-1,L6=n.length;while(++K6<L6){var M6=n[K6];var N6=I6?I6(Y5[M6],e[M6],M6,Y5,e):u;if(N6===u){N6=e[M6];}if(J6){H3(Y5,M6,N6);}else{D3(Y5,M6,N6);}}return Y5;}function D4(e,n){return C4(e,c5(e),n);}function E4(e,n){return C4(e,d5(e),n);}function F4(e){return j4(function(n,Y5){var I6=-1,J6=Y5.length,K6=J6>1?Y5[J6-1]:u,L6=J6>2?Y5[2]:u;K6=(e.length>3&&typeof K6=='function')?(J6--,K6):u;if(L6&&n5(Y5[0],Y5[1],L6)){K6=J6<3?u:K6;J6=1;}n=Object(n);while(++I6<J6){var M6=Y5[I6];if(M6){e(n,M6,I6,K6);}}return n;});}function G4(e){return function(n,B6,Y5){var I6=-1,J6=Object(n),K6=Y5(n),L6=K6.length;while(L6--){var M6=K6[e?L6:++I6];if(B6(J6[M6],M6,J6)===false){break;}}return n;};}function H4(e,n,Y5){var I6=n&W,J6=I4(e);function K6(){var fn=(this&&this!==D1&&this instanceof K6)?J6:e;return fn.apply(I6?Y5:this,arguments);}return K6;}function I4(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6]);}var Y5=Z2(e.prototype),I6=e.apply(Y5,n);return e6(I6)?I6:Y5;};}function J4(e,n,Y5){var I6=I4(e);function J6(){var K6=arguments.length,L6=Array(K6),M6=K6,N6=Y4(J6);while(M6--){L6[M6]=arguments[M6];}var O6=(K6<3&&L6[0]!==N6&&L6[K6-1]!==N6)?[]:d2(L6,N6);K6-=O6.length;if(K6<Y5){return M4(e,n,K4,J6.placeholder,u,L6,O6,u,u,Y5-K6);}var fn=(this&&this!==D1&&this instanceof J6)?I6:e;return M1(fn,this,L6);}return J6;}function K4(e,n,Y5,I6,J6,K6,L6,M6,N6,O6){var P6=n&l,Q6=n&W,R6=n&f,S6=n&(h|i),T6=n&o,U6=R6?u:I4(e);function V6(){var W6=arguments.length,X6=Array(W6),Y6=W6;while(Y6--){X6[Y6]=arguments[Y6];}if(S6){var Z6=Y4(V6),$6=_1(X6,Z6);}if(I6){X6=z4(X6,I6,J6,S6);}if(K6){X6=A4(X6,K6,L6,S6);}W6-=$6;if(S6&&W6<O6){var _6=d2(X6,Z6);return M4(e,n,K4,V6.placeholder,Y5,X6,_6,M6,N6,O6-W6);}var a7=Q6?Y5:this,fn=R6?a7[e]:e;W6=X6.length;if(M6){X6=B5(X6,M6);}else if(T6&&W6>1){X6.reverse();}if(P6&&N6<W6){X6.length=N6;}if(this&&this!==D1&&this instanceof V6){fn=U6||I4(fn);}return fn.apply(a7,X6);}return V6;}function L4(e,n,Y5,I6){var J6=n&W,K6=I4(e);function L6(){var M6=-1,N6=arguments.length,O6=-1,P6=I6.length,Q6=Array(P6+N6),fn=(this&&this!==D1&&this instanceof L6)?K6:e;while(++O6<P6){Q6[O6]=I6[O6];}while(N6--){Q6[O6++]=arguments[++M6];}return M1(fn,J6?Y5:this,Q6);}return L6;}function M4(e,n,Y5,I6,J6,K6,L6,M6,N6,O6){var P6=n&h,Q6=P6?L6:u,R6=P6?u:L6,S6=P6?K6:u,T6=P6?u:K6;n|=(P6?j:k);n&=~(P6?k:j);if(!(n&g)){n&=~(W|f);}var U6=[e,n,J6,S6,Q6,T6,R6,M6,N6,O6];var V6=Y5.apply(u,U6);if(q5(e)){C5(V6,U6);}V6.placeholder=I6;return E5(V6,e,n);}var N4=!(L2&&(1/f2(new L2([,-0]))[1])==I)?C6:function(e){return new L2(e);};function O4(e,n,Y5,I6,J6,K6,L6,M6){var N6=n&f;if(!N6&&typeof e!='function'){throw new TypeError(F);}var O6=I6?I6.length:0;if(!O6){n&=~(j|k);I6=J6=u;}L6=L6===u?L6:F2(m6(L6),0);M6=M6===u?M6:m6(M6);O6-=J6?J6.length:0;if(n&k){var P6=I6,Q6=J6;I6=J6=u;}var R6=N6?u:W4(e);var S6=[e,n,Y5,I6,J6,P6,Q6,K6,L6,M6];if(R6){w5(S6,R6);}e=S6[0];n=S6[1];Y5=S6[2];I6=S6[3];J6=S6[4];M6=S6[9]=S6[9]===u?(N6?0:e.length):F2(S6[9]-O6,0);if(!M6&&n&(h|i)){n&=~(h|i);}if(!n||n==W){var T6=H4(e,n,Y5);}else if(n==h||n==i){T6=J4(e,n,M6);}else if((n==j||n==(W|j))&&!J6.length){T6=L4(e,n,Y5,I6);}else{T6=K4.apply(u,S6);}var U6=R6?l4:C5;return E5(U6(T6,S6),e,n);}function P4(e){return h6(e)?u:e;}function Q4(e,n,Y5,I6,J6,K6){var L6=Y5&c,M6=e.length,N6=n.length;if(M6!=N6&&!(L6&&N6>M6)){return false;}var O6=K6.get(e);if(O6&&K6.get(n)){return O6==n;}var P6=-1,Q6=true,R6=(Y5&d)?new s3:u;K6.set(e,n);K6.set(n,e);while(++P6<M6){var S6=e[P6],T6=n[P6];if(I6){var U6=L6?I6(T6,S6,P6,n,e,K6):I6(S6,T6,P6,e,n,K6);}if(U6!==u){if(U6){continue;}Q6=false;break;}if(R6){if(!T1(n,function(T6,V6){if(!$1(R6,V6)&&(S6===T6||J6(S6,T6,Y5,I6,K6))){return R6.push(V6);}})){Q6=false;break;}}else if(!(S6===T6||J6(S6,T6,Y5,I6,K6))){Q6=false;break;}}K6['delete'](e);K6['delete'](n);return Q6;}function R4(e,n,Y5,I6,J6,K6,L6){switch(Y5){case _:if((e.byteLength!=n.byteLength)||(e.byteOffset!=n.byteOffset)){return false;}e=e.buffer;n=n.buffer;case $:if((e.byteLength!=n.byteLength)||!K6(new t2(e),new t2(n))){return false;}return true;case z:case A:case J:return eq(+e,+n);case B:return e.name==n.name&&e.message==n.message;case S:case U:return e==(n+'');case G:var M6=b2;case T:var N6=I6&c;M6||(M6=f2);if(e.size!=n.size&&!N6){return false;}var O6=L6.get(e);if(O6){return O6==n;}I6|=d;L6.set(e,n);var P6=Q4(M6(e),M6(n),I6,J6,K6,L6);L6['delete'](e);return P6;case X:if(W2){return W2.call(e)==W2.call(n);}}return false;}function S4(e,n,Y5,I6,J6,K6){var L6=Y5&c,M6=U4(e),N6=M6.length,O6=U4(n),P6=O6.length;if(N6!=P6&&!L6){return false;}var Q6=N6;while(Q6--){var R6=M6[Q6];if(!(L6?R6 in n:m2.call(n,R6))){return false;}}var S6=K6.get(e);if(S6&&K6.get(n)){return S6==n;}var T6=true;K6.set(e,n);K6.set(n,e);var U6=L6;while(++Q6<N6){R6=M6[Q6];var V6=e[R6],W6=n[R6];if(I6){var X6=L6?I6(W6,V6,R6,n,e,K6):I6(V6,W6,R6,e,n,K6);}if(!(X6===u?(V6===W6||J6(V6,W6,Y5,I6,K6)):X6)){T6=false;break;}U6||(U6=R6=='constructor');}if(T6&&!U6){var Y6=e.constructor,Z6=n.constructor;if(Y6!=Z6&&('constructor'in e&&'constructor'in n)&&!(typeof Y6=='function'&&Y6 instanceof Y6&&typeof Z6=='function'&&Z6 instanceof Z6)){T6=false;}}K6['delete'](e);K6['delete'](n);return T6;}function T4(e){return D5(z5(e,u,K5),e+'');}function U4(e){return N3(e,s6,c5);}function V4(e){return N3(e,t6,d5);}var W4=!O2?C6:function(e){return O2.get(e);};function X4(e){var n=(e.name+''),Y5=P2[n],I6=m2.call(P2,n)?Y5.length:0;while(I6--){var J6=Y5[I6],K6=J6.func;if(K6==null||K6==e){return J6.name;}}return n;}function Y4(e){var n=m2.call(Y2,'placeholder')?Y2:e;return n.placeholder;}function Z4(){var e=Y2.iteratee||B6;e=e===B6?$3:e;return arguments.length?e(arguments[0],arguments[1]):e;}function $4(e,n){var Y5=e.__data__;return p5(n)?Y5[typeof n=='string'?'string':'hash']:Y5.map;}function _4(e){var n=s6(e),Y5=n.length;while(Y5--){var I6=n[Y5],J6=e[I6];n[Y5]=[I6,J6,t5(J6)];}return n;}function a5(e,n){var Y5=a2(e,n);return X3(Y5)?Y5:u;}function b5(n){var Y5=m2.call(n,A2),I6=n[A2];try{n[A2]=u;var J6=true;}catch(e){}var K6=o2.call(n);if(J6){if(Y5){n[A2]=I6;}else{delete n[A2];}}return K6;}var c5=!C2?E6:function(e){if(e==null){return[];}e=Object(e);return O1(C2(e),function(n){return x2.call(e,n);});};var d5=!C2?E6:function(e){var n=[];while(e){S1(n,c5(e));e=v2(e);}return n;};var e5=O3;if((I2&&e5(new I2(new ArrayBuffer(1)))!=_)||(J2&&e5(new J2)!=G)||(K2&&e5(K2.resolve())!=Q)||(L2&&e5(new L2)!=T)||(M2&&e5(new M2)!=Z)){e5=function(e){var n=O3(e),Y5=n==O?e.constructor:u,I6=Y5?I5(Y5):'';if(I6){switch(I6){case Q2:return _;case R2:return G;case S2:return Q;case T2:return T;case U2:return Z;}}return n;};}function f5(e){var n=e.match(p1);return n?n[1].split(q1):[];}function g5(e,n,Y5){n=s4(n,e);var I6=-1,J6=n.length,K6=false;while(++I6<J6){var L6=H5(n[I6]);if(!(K6=e!=null&&Y5(e,L6))){break;}e=e[L6];}if(K6||++I6!=J6){return K6;}J6=e==null?0:e.length;return!!J6&&d6(J6)&&m5(L6,J6)&&($5(e)||Z5(e));}function h5(e){var n=e.length,Y5=new e.constructor(n);if(n&&typeof e[0]=='string'&&m2.call(e,'index')){Y5.index=e.index;Y5.input=e.input;}return Y5;}function i5(e){return(typeof e.constructor=='function'&&!s5(e))?Z2(v2(e)):{};}function j5(e,n,Y5){var I6=e.constructor;switch(n){case $:return u4(e);case z:case A:return new I6(+e);case _:return v4(e,Y5);case a1:case b1:case c1:case d1:case e1:case f1:case g1:case h1:case i1:return y4(e,Y5);case G:return new I6;case J:case U:return new I6(e);case S:return w4(e);case T:return new I6;case X:return x4(e);}}function k5(e,n){var Y5=n.length;if(!Y5){return e;}var I6=Y5-1;n[I6]=(Y5>1?'& ':'')+n[I6];n=n.join(Y5>2?', ':' ');return e.replace(o1,'{\n/* [wrapped with '+n+'] */\n');}function l5(e){return $5(e)||Z5(e)||!!(z2&&e&&e[z2]);}function m5(e,n){var Y5=typeof e;n=n==null?r:n;return!!n&&(Y5=='number'||(Y5!='symbol'&&x1.test(e)))&&(e>-1&&e%1==0&&e<n);}function n5(e,n,Y5){if(!e6(Y5)){return false;}var I6=typeof n;if(I6=='number'?(_5(Y5)&&m5(n,Y5.length)):(I6=='string'&&n in Y5)){return eq(Y5[n],e);}return false;}function o5(e,n){if($5(e)){return false;}var Y5=typeof e;if(Y5=='number'||Y5=='symbol'||Y5=='boolean'||e==null||j6(e)){return true;}return k1.test(e)||!j1.test(e)||(n!=null&&e in Object(n));}function p5(e){var n=typeof e;return(n=='string'||n=='number'||n=='symbol'||n=='boolean')?(e!=='__proto__'):(e===null);}function q5(e){var n=X4(e),Y5=Y2[n];if(typeof Y5!='function'||!(n in _2.prototype)){return false;}if(e===Y5){return true;}var I6=W4(Y5);return!!I6&&e===I6[0];}function r5(e){return!!n2&&(n2 in e);}function s5(e){var n=e&&e.constructor,Y5=(typeof n=='function'&&n.prototype)||j2;return e===Y5;}function t5(e){return e===e&&!e6(e);}function u5(e,n){return function(Y5){if(Y5==null){return false;}return Y5[e]===n&&(n!==u||(e in Object(Y5)));};}function v5(e){var n=V5(e,function(I6){if(Y5.size===M){Y5.clear();}return I6;});var Y5=n.cache;return n;}function w5(e,n){var Y5=e[1],I6=n[1],J6=Y5|I6,K6=J6<(W|f|l);var L6=((I6==l)&&(Y5==h))||((I6==l)&&(Y5==m)&&(e[7].length<=n[8]))||((I6==(l|m))&&(n[7].length<=n[8])&&(Y5==h));if(!(K6||L6)){return e;}if(I6&W){e[2]=n[2];J6|=Y5&W?0:g;}var M6=n[3];if(M6){var N6=e[3];e[3]=N6?z4(N6,M6,n[4]):M6;e[4]=N6?d2(e[3],P):n[4];}M6=n[5];if(M6){N6=e[5];e[5]=N6?A4(N6,M6,n[6]):M6;e[6]=N6?d2(e[5],P):n[6];}M6=n[7];if(M6){e[7]=M6;}if(I6&l){e[8]=e[8]==null?n[8]:G2(e[8],n[8]);}if(e[9]==null){e[9]=n[9];}e[0]=n[0];e[1]=J6;return e;}function x5(e){var n=[];if(e!=null){for(var Y5 in Object(e)){n.push(Y5);}}return n;}function y5(e){return o2.call(e);}function z5(e,n,Y5){n=F2(n===u?(e.length-1):n,0);return function(){var I6=arguments,J6=-1,K6=F2(I6.length-n,0),L6=Array(K6);while(++J6<K6){L6[J6]=I6[n+J6];}J6=-1;var M6=Array(n+1);while(++J6<n){M6[J6]=I6[J6];}M6[n]=Y5(L6);return M1(e,this,M6);};}function A5(e,n){return n.length<2?e:M3(e,n4(n,0,-1));}function B5(e,n){var Y5=e.length,I6=G2(n.length,Y5),J6=B4(e);while(I6--){var K6=n[I6];e[I6]=m5(K6,Y5)?J6[K6]:u;}return e;}var C5=F5(l4);var D5=F5(m4);function E5(e,n,Y5){var I6=(n+'');return D5(e,k5(I6,J5(f5(I6),Y5)));}function F5(e){var n=0,Y5=0;return function(){var I6=H2(),J6=q-(I6-Y5);Y5=I6;if(J6>0){if(++n>=p){return arguments[0];}}else{n=0;}return e.apply(u,arguments);};}var G5=v5(function(e){var n=[];if(e.charCodeAt(0)===46){n.push('');}e.replace(l1,function(Y5,I6,J6,K6){n.push(J6?K6.replace(r1,'$1'):(I6||Y5));});return n;});function H5(e){if(typeof e=='string'||j6(e)){return e;}var n=(e+'');return(n=='0'&&(1/e)==-I)?'-0':n;}function I5(n){if(n!=null){try{return l2.call(n);}catch(e){}try{return(n+'');}catch(e){}}return'';}function J5(e,n){N1(w,function(Y5){var I6='_.'+Y5[0];if((n&Y5[1])&&!P1(e,I6)){e.push(I6);}});return e.sort();}function K5(e){var n=e==null?0:e.length;return n?K3(e,1):[];}var L5=j4(function(e){var n=R1(e,r4);return(n.length&&n[0]===e[0])?R3(n):[];});var M5=j4(function(e){var B6=O5(e),n=R1(e,r4);if(B6===O5(n)){B6=u;}else{n.pop();}return(n.length&&n[0]===e[0])?R3(n,Z4(B6,2)):[];});var N5=j4(function(e){var n=O5(e),Y5=R1(e,r4);n=typeof n=='function'?n:u;if(n){Y5.pop();}return(Y5.length&&Y5[0]===e[0])?R3(Y5,u,n):[];});function O5(e){var n=e==null?0:e.length;return n?e[n-1]:u;}function P5(e){return(e&&e.length)?p4(e):[];}function Q5(e,n){return(e&&e.length)?p4(e,Z4(n,2)):[];}function R5(e,n){n=typeof n=='function'?n:u;return(e&&e.length)?p4(e,u,n):[];}var S5=function(){return D1.Date.now();};function T5(e,n,Y5){n=Y5?u:n;var I6=O4(e,h,u,u,u,u,u,n);I6.placeholder=T5.placeholder;return I6;}function U5(e,n,Y5){var I6,J6,K6,L6,M6,N6,O6=0,P6=false,Q6=false,R6=true;if(typeof e!='function'){throw new TypeError(F);}n=n6(n)||0;if(e6(Y5)){P6=!!Y5.leading;Q6='maxWait'in Y5;K6=Q6?F2(n6(Y5.maxWait)||0,n):K6;R6='trailing'in Y5?!!Y5.trailing:R6;}function S6(_6){var a7=I6,b7=J6;I6=J6=u;O6=_6;L6=e.apply(b7,a7);return L6;}function T6(_6){O6=_6;M6=setTimeout(W6,n);return P6?S6(_6):L6;}function U6(_6){var a7=_6-N6,b7=_6-O6,c7=n-a7;return Q6?G2(c7,K6-b7):c7;}function V6(_6){var a7=_6-N6,b7=_6-O6;return(N6===u||(a7>=n)||(a7<0)||(Q6&&b7>=K6));}function W6(){var _6=S5();if(V6(_6)){return X6(_6);}M6=setTimeout(W6,U6(_6));}function X6(_6){M6=u;if(R6&&I6){return S6(_6);}I6=J6=u;return L6;}function Y6(){if(M6!==u){clearTimeout(M6);}O6=0;I6=N6=J6=M6=u;}function Z6(){return M6===u?L6:X6(S5());}function $6(){var _6=S5(),a7=V6(_6);I6=arguments;J6=this;N6=_6;if(a7){if(M6===u){return T6(N6);}if(Q6){M6=setTimeout(W6,n);return S6(N6);}}if(M6===u){M6=setTimeout(W6,n);}return L6;}$6.cancel=Y6;$6.flush=Z6;return $6;}function V5(e,n){if(typeof e!='function'||(n!=null&&typeof n!='function')){throw new TypeError(F);}var Y5=function(){var I6=arguments,J6=n?n.apply(this,I6):I6[0],K6=Y5.cache;if(K6.has(J6)){return K6.get(J6);}var L6=e.apply(this,I6);Y5.cache=K6.set(J6,L6)||K6;return L6;};Y5.cache=new(V5.Cache||m3);return Y5;}V5.Cache=m3;function W5(e,n,Y5){var I6=true,J6=true;if(typeof e!='function'){throw new TypeError(F);}if(e6(Y5)){I6='leading'in Y5?!!Y5.leading:I6;J6='trailing'in Y5?!!Y5.trailing:J6;}return U5(e,n,{'leading':I6,'maxWait':n,'trailing':J6});}function X5(){if(!arguments.length){return[];}var e=arguments[0];return $5(e)?e:[e];}function eq(e,n){return e===n||(e!==e&&n!==n);}var Z5=S3(function(){return arguments;}())?S3:function(e){return f6(e)&&m2.call(e,'callee')&&!x2.call(e,'callee');};var $5=Array.isArray;function _5(e){return e!=null&&d6(e.length)&&!c6(e);}function a6(e){return f6(e)&&_5(e);}var b6=D2||F6;function c6(e){if(!e6(e)){return false;}var n=O3(e);return n==D||n==E||n==y||n==R;}function d6(e){return typeof e=='number'&&e>-1&&e%1==0&&e<=r;}function e6(e){var n=typeof e;return e!=null&&(n=='object'||n=='function');}function f6(e){return e!=null&&typeof e=='object';}var g6=J1?Z1(J1):V3;function h6(e){if(!f6(e)||O3(e)!=O){return false;}var n=v2(e);if(n===null){return true;}var Y5=m2.call(n,'constructor')&&n.constructor;return typeof Y5=='function'&&Y5 instanceof Y5&&l2.call(Y5)==p2;}var i6=K1?Z1(K1):Y3;function j6(e){return typeof e=='symbol'||(f6(e)&&O3(e)==X);}var k6=L1?Z1(L1):Z3;function l6(e){if(!e){return e===0?e:0;}e=n6(e);if(e===I||e===-I){var n=(e<0?-1:1);return n*s;}return e===e?e:0;}function m6(e){var n=l6(e),Y5=n%1;return n===n?(Y5?n-Y5:n):0;}function n6(e){if(typeof e=='number'){return e;}if(j6(e)){return N;}if(e6(e)){var n=typeof e.valueOf=='function'?e.valueOf():e;e=e6(n)?(n+''):n;}if(typeof e!='string'){return e===0?e:+e;}e=e.replace(n1,'');var Y5=u1.test(e);return(Y5||w1.test(e))?A1(e.slice(2),Y5?2:8):(t1.test(e)?N:+e);}function o6(e){return C4(e,t6(e));}function p6(e){return e==null?'':o4(e);}function q6(e,n,Y5){var I6=e==null?u:M3(e,n);return I6===u?Y5:I6;}function r6(e,n){return e!=null&&g5(e,n,Q3);}function s6(e){return _5(e)?B3(e):_3(e);}function t6(e){return _5(e)?B3(e,true):a4(e);}var u6=F4(function(e,n,Y5){e4(e,n,Y5);});var v6=F4(function(e,n,Y5,I6){e4(e,n,Y5,I6);});var w6=T4(function(e,n){var Y5={};if(e==null){return Y5;}var I6=false;n=R1(n,function(K6){K6=s4(K6,e);I6||(I6=K6.length>1);return K6;});C4(e,V4(e),Y5);if(I6){Y5=I3(Y5,C|a|b,P4);}var J6=n.length;while(J6--){q4(Y5,n[J6]);}return Y5;});var x6=T4(function(e,n){return e==null?{}:g4(e,n);});function y6(e,n){if(e==null){return{};}var Y5=R1(V4(e),function(I6){return[I6];});n=Z4(n);return h4(e,Y5,function(I6,J6){return n(I6,J6[0]);});}function z6(e){return function(){return e;};}function A6(e){return e;}function B6(e){return $3(typeof e=='function'?e:I3(e,C));}function C6(){}function D6(e){return o5(e)?X1(H5(e)):i4(e);}function E6(){return[];}function F6(){return false;}function G6(e){return(e&&e.length)?J3(e,A6,P3):u;}function H6(e){return(e&&e.length)?J3(e,A6,b4):u;}Y2.castArray=X5;Y2.constant=z6;Y2.curry=T5;Y2.debounce=U5;Y2.flatten=K5;Y2.intersection=L5;Y2.intersectionBy=M5;Y2.intersectionWith=N5;Y2.iteratee=B6;Y2.keys=s6;Y2.keysIn=t6;Y2.memoize=V5;Y2.merge=u6;Y2.mergeWith=v6;Y2.omit=w6;Y2.pick=x6;Y2.pickBy=y6;Y2.property=D6;Y2.throttle=W5;Y2.toPlainObject=o6;Y2.uniq=P5;Y2.uniqBy=Q5;Y2.uniqWith=R5;Y2.eq=eq;Y2.get=q6;Y2.hasIn=r6;Y2.identity=A6;Y2.isArguments=Z5;Y2.isArray=$5;Y2.isArrayLike=_5;Y2.isArrayLikeObject=a6;Y2.isBuffer=b6;Y2.isFunction=c6;Y2.isLength=d6;Y2.isMap=g6;Y2.isObject=e6;Y2.isObjectLike=f6;Y2.isPlainObject=h6;Y2.isSet=i6;Y2.isSymbol=j6;Y2.isTypedArray=k6;Y2.last=O5;Y2.max=G6;Y2.min=H6;Y2.stubArray=E6;Y2.stubFalse=F6;Y2.noop=C6;Y2.now=S5;Y2.toFinite=l6;Y2.toInteger=m6;Y2.toNumber=n6;Y2.toString=p6;Y2.VERSION=V;T5.placeholder=Y2;return Y2;});
// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.predefine('sap/ushell/ApplicationType',["sap/ui/thirdparty/URI","sap/base/Log","sap/ushell/utils","sap/ushell/URLTemplateProcessor","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/_ApplicationType/wdaResolution","sap/ushell/_ApplicationType/guiResolution","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/Config"],function(U,L,u,a,A,s,w,g,p,C){"use strict";function b(x,B,E){var I=x.inbound;var R=I&&I.resolutionResult;if(!(!I||!R||!(R["sap.wda"]))){return w.constructFullWDAResolutionResult(x,B,E);}if(!(!I||!R)){return w.constructWDAResolutionResult(x,B,E);}}function c(x,B,E){var y=new U(B),I=x.inbound,z=I&&I.resolutionResult,D=jQuery.extend(true,{},x.mappedIntentParamsPlusSimpleDefaults),S,F;if(D["sap-system"]){S=D["sap-system"][0];delete D["sap-system"];}if(D["sap-system-src"]){F=D["sap-system-src"][0];delete D["sap-system-src"];}return new Promise(function(R,G){s.spliceSapSystemIntoURI(y,z.systemAlias,S,F,"WCF",z.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).done(function(H){var P=A.getURLParsing().paramsToString(D),J=A.appendParametersToUrl(P,H.toString());var K={url:J,text:z.text||"",additionalInformation:z.additionalInformation||"",applicationType:"WCF",fullWidth:true};R(K);}).fail(function(H){G(H);});});}function d(x,B,E){var I=x.inbound,y,S,z,D,R={};["applicationType","additionalInformation","applicationDependencies"].forEach(function(P){if(I.resolutionResult.hasOwnProperty(P)){R[P]=I.resolutionResult[P];}});R.url=B;if(R.applicationDependencies&&typeof R.url==="undefined"){R.url="";}if(typeof R.url==="undefined"){return Promise.reject("Cannot resolve intent: url was not specified in matched inbound");}D=jQuery.extend(true,{},x.mappedIntentParamsPlusSimpleDefaults);R.reservedParameters={};var F={"sap-ui-fl-max-layer":true,"sap-ui-fl-control-variant-id":true,"sap-ui-fl-version":true};Object.keys(F).forEach(function(N){var V=D[N];if(V){delete D[N];R.reservedParameters[N]=V;}});x.mappedDefaultedParamNames=x.mappedDefaultedParamNames.filter(function(G){return!F[G];});if(x.mappedDefaultedParamNames.length>0){D["sap-ushell-defaultedParameterNames"]=[JSON.stringify(x.mappedDefaultedParamNames)];}S=D["sap-system"]&&D["sap-system"][0];z=D["sap-system-src"]&&D["sap-system-src"][0];R["sap-system"]=S;if(typeof z==="string"){R["sap-system-src"]=z;}x.effectiveParameters=D;y=A.getURLParsing().paramsToString(D);if(y){R.url=R.url+((R.url.indexOf("?")<0)?"?":"&")+y;}if(typeof I.resolutionResult.ui5ComponentName!=="undefined"){R.ui5ComponentName=I.resolutionResult.ui5ComponentName;}R.text=I.title;return Promise.resolve(R);}function e(){var H=new U().fragment();var x=H.lastIndexOf("&/");if(x>0){return H.substr(x+1);}}function f(){var x=sap.ushell.Container.getService("UserInfo");var y=x.getUser();var z=sap.ui.getCore().getConfiguration();var B=u.getUi5Version();var D=y.getContentDensity();var T=y.getTheme();if(T.indexOf("sap_")!==0){var E=sap.ushell.User.prototype.constants.themeFormat.THEME_NAME_PLUS_URL;T=y.getTheme(E);}var F;var G;if(z){G=z.getLanguage&&z.getLanguage();F=z.getSAPLogonLanguage&&z.getSAPLogonLanguage();}var H=window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1";return{language:G,logonLanguage:F,theme:T,themeServiceRoot:H,isDebugMode:!!window["sap-ui-debug"],ui5Version:B,contentDensity:D,sapPlugins:h()};}function h(){var S=sap.ushell.Container.getService("PluginManager");if(S){return S._getNamesOfPluginsWithAgents();}else{return"";}}function i(x,B,E){var I=x.inbound;var T=I.templateContext;var R={innerAppRoute:e()||x.parsedIntent.appSpecificRoute,targetNavMode:x.targetNavigationMode,defaultParameterNames:x.mappedDefaultedParamNames,startupParameter:x.mappedIntentParamsPlusSimpleDefaults,env:f()};var y=a.expand(T.payload,T.site,R,T.siteAppSection,"startupParameter");var z={applicationType:"URL",text:I.title,appCapabilities:j(T.payload.capabilities||{},T.siteAppSection),url:y,extendedInfo:m(x,y)};return n(y).then(function(D){z.url=D;return z;},function(){return z;});}function j(T,S){var x=u.clone(T);x.navigationMode=k(T.navigationMode,S);return x;}function k(T,S){var x=l(T);var y=u.getMember(S,"sap|integration.navMode");switch(y){case"inplace":return"embedded";case"explace":if(x==="embedded"){return"newWindowThenEmbedded";}if(["newWindowThenEmbedded","newWindow"].indexOf(x)>=0){return x;}L.error("App-defined navigation mode was ignored","Application requests to be opened in a new window but no expected navigation mode was defined on the template","sap.ushell.ApplicationType");default:return x;}}function l(x){var I;switch(x){case"inplace":I="embedded";break;case"explace":I="newWindow";break;default:I=x||"newWindow";}return I;}function m(x){var I={};I.appParams={};if(x.mappedIntentParamsPlusSimpleDefaults){I.appParams=JSON.parse(JSON.stringify(x.mappedIntentParamsPlusSimpleDefaults));}return I;}function n(x){return new Promise(function(R,y){var z=new U(x);var P=z.query(true);sap.ushell.Container.getService("ShellNavigation").compactParams(P,["sap-language","sap-theme","sap-ui-app-id","transaction"],undefined,true).done(function(B){if(!B.hasOwnProperty("sap-intent-param")){R(x);return;}z.query(B);var D=z.toString();R(D);}).fail(function(E){y(E);});});}function o(x,B,E){var I=x.inbound,y=I&&I.resolutionResult,R={};var z=new U(B);var D=jQuery.extend(true,{},x.mappedIntentParamsPlusSimpleDefaults);if(x.inbound&&x.inbound.action==="launchURL"&&x.inbound.semanticObject==="Shell"){delete D["sap-external-url"];}var S=D["sap-system"]&&D["sap-system"][0];var F=D["sap-system-src"]&&D["sap-system-src"][0];R["sap-system"]=S;delete D["sap-system"];if(typeof F==="string"){R["sap-system-src"]=F;delete D["sap-system-src"];}return(new Promise(function(G,H){if(A.absoluteUrlDefinedByUser(z,y.systemAlias,y.systemAliasSemantics)){G(B);}else{s.spliceSapSystemIntoURI(z,y.systemAlias,S,F,"URL",y.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(H).done(function(J){var K=J.toString();G(K);});}})).then(function(G){var P=A.getURLParsing().paramsToString(D);var H=C.last("/core/navigation/flpURLDetectionPattern");var J=new RegExp(H);return J.test(G)?A.appendParametersToIntentURL(D,G):A.appendParametersToUrl(P,G);},Promise.reject.bind(Promise)).then(function(G){["additionalInformation","applicationDependencies"].forEach(function(P){if(I.resolutionResult.hasOwnProperty(P)){R[P]=I.resolutionResult[P];}});R.url=G;R.text=I.title;R.applicationType="URL";return Promise.resolve(R);},Promise.reject.bind(Promise));}var q={URL:{type:"URL",defaultFullWidthSetting:true,generateResolutionResult:function(x){var y=x.inbound.hasOwnProperty("templateContext");return y?i.apply(null,arguments):o.apply(null,arguments);},easyAccessMenu:{intent:"Shell-startURL",resolver:null,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:false,systemSelectionPriority:1}},WDA:{type:"WDA",defaultFullWidthSetting:true,generateResolutionResult:b,easyAccessMenu:{intent:"Shell-startWDA",resolver:w.resolveEasyAccessMenuIntentWDA,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:2}},TR:{type:"TR",defaultFullWidthSetting:true,generateResolutionResult:g.generateTRResolutionResult,easyAccessMenu:{intent:"Shell-startGUI",resolver:g.resolveEasyAccessMenuIntentWebgui,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:3}},NWBC:{type:"NWBC",defaultFullWidthSetting:true},WCF:{type:"WCF",generateResolutionResult:c,defaultFullWidthSetting:true},SAPUI5:{type:"SAPUI5",generateResolutionResult:d,defaultFullWidthSetting:false}};function r(){return Object.keys(q).map(function(x){return q[x];}).filter(function(x){return typeof x.easyAccessMenu==="object";});}function t(){var E={};r().forEach(function(x){E[x.easyAccessMenu.intent]=x.easyAccessMenu.resolver;});return function(x,R){if(E[x]&&(!R||R!=="SAPUI5")){return E[x];}return null;};}function v(x){if(!q[x]){return false;}return q[x].defaultFullWidthSetting;}Object.defineProperty(q,"enum",{value:Object.keys(q).reduce(function(x,y){if(q[y].type){x[y]=q[y].type;}return x;},{})});var M={getEasyAccessMenuResolver:t(),getEasyAccessMenuDefinitions:r,getDefaultFullWidthSetting:v};Object.keys(M).forEach(function(x){Object.defineProperty(q,x,{value:M[x]});});return q;});sap.ui.predefine('sap/ushell/Config',["sap/ushell/EventHub","sap/ushell/bootstrap/common/common.create.configcontract.core","sap/ushell/_Config/utils"],function(E,C,c){"use strict";var o=C.createConfigContract(window["sap-ushell-config"]);var f=E.createChannel(o);var a=Object.keys(f).reduce(function(a,m){a[m]=function(){if(!f){f=E.createChannel(o);}return f[m].apply(f,arguments);};return a;},{_reset:function(){f=null;},registerConfiguration:function(O,b){o=b;},createModel:function(p,b){if(!f){f=E.createChannel(o);}return c.createModel(f,o,p,b);}});return a;},false);sap.ui.predefine('sap/ushell/TechnicalParameters',["sap/ushell/utils/type"],function(t){"use strict";var T={"sap-navigation-scope":{injectFrom:"inboundParameter",sticky:true,stickyName:"sap-navigation-scope-filter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A));}else{S(b(p,o));}});}},"sap-fiori-id":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A)||a("/sap.fiori/registrationIds",A));}else{S(b(p,o));}});}},"sap-ui-fl-max-layer":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-fl-control-variant-id":{injectFrom:"startupParameter",isIntentParameter:false,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-fl-version":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-app-id-hint":{injectFrom:"startupParameter",isIntentParameter:true,getValue:d},"sap-ach":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A)||a("/sap.app/ach",A));}else{S(b(p,o));}});}},"sap-prelaunch-operations":{injectFrom:"inboundParameter",isIntentParameter:true,getValue:d}};function d(p){return Promise.reject(p+" is reserved for shell internal usage only");}function g(p,A){var j=A.getComponentData().technicalParameters||{};return j[p];}function a(p,A){var m=A.getMetadata()?A.getMetadata():undefined;var v=m.getManifestEntry(p);if(!t.isArray(v)){v=[v];}return v;}function b(p,A){var r=A.getReservedParameters();return r&&r[p];}function c(p,A,o,s){if(!T[p]){return Promise.reject(p+" is not a known technical parameter");}return T[p].getValue(p,A,o,s);}function e(F){if(!F){F={};}return Object.keys(T).filter(function(o){var p=T[o];return Object.keys(F).every(function(s){var D=F[s];var H=p.hasOwnProperty(s);if(H){return p[s]===D;}return false;});}).map(function(m){return Object.keys(T[m]).reduce(function(p,P){p[P]=T[m][P];return p;},{name:m});});}function f(){return Object.keys(T);}function i(p){return T.hasOwnProperty(p);}function h(p,A,o,s){if(s==="UI5"){return g(p,A);}return b(p,o);}return{getParameterValue:c,getParameterValueSync:h,getParameters:e,getParameterNames:f,isTechnicalParameter:i};},false);sap.ui.predefine('sap/ushell/URLTemplateProcessor',["sap/ui/thirdparty/URI","sap/ui/thirdparty/URITemplate","sap/ushell/utils/type","sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/utils","sap/ushell/_URLTemplateProcessor/Resolvers","sap/ushell/_URLTemplateProcessor/DependencyGraph","sap/ushell/_URLTemplateProcessor/TemplateParameterParser"],function(U,u,t,c,a,r,d,T){"use strict";function l(s){jQuery.sap.log.debug(s,"sap.ushell.URLTemplateProcessor");}function f(v){if(typeof v==="undefined"){return"<undefined>";}if(typeof v==="string"){if(v===""){return"<empty string>";}return"'"+v+"'";}if(typeof v==="number"){return"(number) "+v;}if(typeof v==="boolean"){return"(bool) "+v;}var s;if(typeof v==="object"){s=JSON.stringify(v);if(s.length>255){s=s.substr(0,255)+"...";}}else{s="{other type}";}return s;}function m(h,i){var j=c(h);var k=c(i);return Object.keys(k).reduce(function(o,O){o[O]=k[O];return o;},j);}function b(p,s,D){var M=p&&Array.isArray(p.mergeWith);var P=p&&p.names;if(!M){return P;}return p.mergeWith.reduce(function(o,h){var i=T.parsePath(D,h);if(i.pathType==="relative"){throw new Error("Please only specify absolute paths via mergeWith");}i.value.forEach(function(k){if(k.type!=="literal"){throw new Error("Please do not specify references in mergeWith paths");}});var j=r.resolvePath(i,{},s,{},{});return m(j,o);},P);}function e(p){var P=Object.keys(p).filter(function(s){return typeof p[s]==="object"&&(p[s].hasOwnProperty("renameTo"));});var o=[];P.forEach(function(s){var h=p[s];if(h.hasOwnProperty("renameTo")){o.push(function(i,j){var R=j;R=j.replace(new RegExp(s+"=","g"),h.renameTo+"=");return R;});}});return o;}function g(o,s,R,A,D){l("[TEMPLATE EXPANSION] "+o.urlTemplate);var h=b(o.parameters,s,D)||{};var i=a.removeArrayParameterNotation(R[D]||{});var j=T.parseTemplateParameterSet(h,D);var k=T.parseTemplateParameterSetAsLiterals(i);var p=m(k,j);l("- parsed template parameters: "+JSON.stringify(p,null,3));var G=d.buildDependencyGraph(p);l("- created dependency graph: "+JSON.stringify(G,null,3));var n=d.getDependencyResolutionOrder(G);l("- resolving in order: "+n.join(" > "));var q=r.resolveAllParameters(p,n,s,R,A,D);Object.keys(q).forEach(function(x){var y=q[x];l(x+" --> "+f(y));});var P=e(h||{});var v=o.urlTemplate;var w=U.expand(v,q).toString();l("- created URL: "+w);P.forEach(function(O){w=O(v,w);});if(P.length>0){l("- created URL (post expansion): "+w);}return w;}return{expand:g};},false);sap.ui.predefine('sap/ushell/User',["sap/ui/thirdparty/URI","sap/ui/base/EventProvider","sap/ui/core/LocaleData"],function(U,E,L){"use strict";function c(o){if(o===undefined){return undefined;}return jQuery.extend(true,{},o);}function g(u){var o;if(u.host&&typeof u.host==="function"&&u.host()){o=u.host();if(typeof u.protocol==="function"&&u.protocol()){o=u.protocol()+"://"+o;}return o;}return"";}function i(t){return t.indexOf("sap_")===0;}var a=function(C){var b=[],B,s,o,S,e=new E();this.getEmail=function(){return C.email;};this.getFirstName=function(){return C.firstName;};this.getFullName=function(){return C.fullName;};this.getId=function(){return C.id;};this.getLanguage=function(){return C.language;};this.getLanguageBcp47=function(){return C.languageBcp47;};this.getLanguageText=function(){var l=sap.ui.getCore().getConfiguration().getLocale(),d=new L(l),f=sap.ui.getCore().getConfiguration().getLanguageTag();f=f.replace("-","_");var h=d.getLanguages(),j=h[f]||this.getLanguage().toUpperCase();return j;};this.getLastName=function(){return C.lastName;};this.getImage=function(){return C.image;};this.setImage=function(u){C.image=u;e.fireEvent("onSetImage",u);};this.attachOnSetImage=function(f,d){e.attachEvent("onSetImage",f,d);};this.isJamActive=function(){return C.isJamActive===true;};this.isLanguagePersonalized=function(){return C.isLanguagePersonalized===true;};this.getTheme=function(t){if(t===a.prototype.constants.themeFormat.ORIGINAL_THEME){return S.originalTheme.theme;}if(t===a.prototype.constants.themeFormat.THEME_NAME_PLUS_URL){return o.theme+(o.locationPath?"@"+o.locationOrigin+o.locationPath:"");}if(t===a.prototype.constants.themeFormat.NWBC){if(i(o.theme)){return o.theme;}return this.getTheme(a.prototype.constants.themeFormat.THEME_NAME_PLUS_URL);}return o.theme;};this.getThemeRoot=function(t){if(C.ranges&&C.ranges.theme&&C.ranges.theme[t]&&C.ranges.theme[t].themeRoot){return C.ranges.theme[t].themeRoot;}return"";};this.setTheme=function(n){if(this.isSetThemePermitted()===false){var d="setTheme not permitted";jQuery.sap.log.error(d);throw new Error(d);}o=this._amendTheme({theme:n,root:this.getThemeRoot(n)},s);if(n!==S.originalTheme.theme){this.setChangedProperties({propertyName:"theme",name:"THEME"},S.originalTheme.theme,n);S=o;}this.applyTheme(n);};this.applyTheme=function(n){var t=this;var T=this._amendTheme({theme:n,root:this.getThemeRoot(n)},s),N;o=T;if(T.suppliedRoot){sap.ui.getCore().applyTheme(T.theme,T.suppliedRoot+"/UI5/");}else if(T.path){sap.ui.getCore().applyTheme(T.theme,T.path+"/UI5/");}else{sap.ui.getCore().applyTheme(T.theme);}sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(A){N=t.getTheme(a.prototype.constants.themeFormat.NWBC);A.postMessageToIframeApp("sap.ushell.appRuntime","themeChange",{"currentThemeId":N,"themeServiceRoute":window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1"});});};this.setLanguage=function(n){if(n){this.setChangedProperties({propertyName:"language",name:"LANGUAGE"},C.language,n);C.language=n;}};this.getAccessibilityMode=function(){return C.accessibility;};this.setAccessibilityMode=function(A){if(this.isSetAccessibilityPermitted()===false){var d="setAccessibilityMode not permitted";jQuery.sap.log.error(d);throw new Error(d);}C.accessibility=A;};this.isSetAccessibilityPermitted=function(){return C.setAccessibilityPermitted;};this.isSetThemePermitted=function(){return C.setThemePermitted;};this.getContentDensity=function(){return C.contentDensity;};this.setContentDensity=function(d){if(this.isSetContentDensityPermitted()===false){var f="setContentDensity not permitted";jQuery.sap.log.error(f);throw new Error(f);}this.setChangedProperties({propertyName:"contentDensity",name:"CONTENT_DENSITY"},C.contentDensity,d);C.contentDensity=d;};this.isSetContentDensityPermitted=function(){return C.setContentDensityPermitted;};this.getChangedProperties=function(){return jQuery.extend(true,[],b);};this.setChangedProperties=function(p,d,n){b.push({propertyName:p.propertyName,name:p.name,oldValue:d,newValue:n});};this.resetChangedProperties=function(){b=[];};this.resetChangedProperty=function(p){b=b.filter(function(P){return!(p===P.propertyName);});};this.getTrackUsageAnalytics=function(){return C.trackUsageAnalytics;};this.setTrackUsageAnalytics=function(t){this.setChangedProperties({propertyName:"trackUsageAnalytics",name:"TRACKING_USAGE_ANALYTICS"},C.trackUsageAnalytics,t);C.trackUsageAnalytics=t;};this.setImageConsent=function(d){this.setChangedProperties({propertyName:"isImageConsent",name:"ISIMAGECONSENT"},C.isImageConsent,d);C.isImageConsent=d;};this.getImageConsent=function(){return C.isImageConsent;};s={locationPathUi5:(new U(jQuery.sap.getModulePath(""))).absoluteTo(document.location).pathname(),locationPathCustom:C.themeRoot||"",locationOrigin:g(new U(document.location))};if(!s.locationPathUi5){jQuery.sap.log.warning("User: Could not set UI5 location path");}if(!s.locationPathCustom){jQuery.sap.log.warning("User: Could not set location path for custom themes");}if(!s.locationOrigin){jQuery.sap.log.warning("User: Could not set front-end server location origin");}B=C.bootTheme||{theme:"",root:""};o=this._amendTheme(B,s);S=o;};a.prototype._amendTheme=function(t,s){var T={},b,r;function d(R,s){var u,o,p={};u=new U(R);o=g(u);if(o){p.locationOrigin=o;p.locationPath=u.path();}else{p.locationOrigin=s.locationOrigin;p.locationPath=R;}return p;}if(!t||!t.theme||!s){return{originalTheme:{theme:"",root:""},theme:"",suppliedRoot:"",path:"",locationPath:"",locationOrigin:""};}T.originalTheme=c(t);if(T.originalTheme.theme.indexOf("@")>0){b=T.originalTheme.theme.split("@",2);T.theme=b[0];T.suppliedRoot=b[1];r=d(b[1],s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.theme=T.originalTheme.theme;if(T.originalTheme.root){T.suppliedRoot=T.originalTheme.root;r=d(T.originalTheme.root,s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.suppliedRoot="";if(i(T.theme)){T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathUi5;T.path="";return T;}T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathCustom;T.path=T.locationPath;return T;};a.prototype.constants={themeFormat:{ORIGINAL_THEME:"O",THEME_NAME_PLUS_URL:"N+U",NWBC:"NWBC"}};return a;},true);sap.ui.predefine('sap/ushell/_ApplicationType/guiResolution',["sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ui/thirdparty/jquery"],function(U,a,S,c,p,q){"use strict";function r(O,K){K.forEach(function(s){delete O[s];});}function i(P,I){return I&&I.signature&&I.signature&&I.signature.parameters&&I.signature.parameters[P]&&I.signature.parameters[P].required===true;}function g(E,I){var y=i("DYNP_OKCODE",I)||i("DYNP_NO1ST",I);var B=[];if(y){return[];}var z=b(E);function A(s){return s.toUpperCase();}var N=Object.keys(z).map(A).sort();function C(s,D){if(s.length!==D.length){return false;}return s.every(function(F,G){return s[G]==D[G];});}if(C(["DYNP_NO1ST","DYNP_OKCODE"],N)||C(["DYNP_OKCODE"],N)||C(["DYNP_NO1ST"],N)){B=Object.keys(z);}return B;}function b(P){var B=c.filterObject(P,d);return B;}function d(N,V){var s;if(arguments.length===1){s=N.split(/[=](.+)?/);if(s.length>1){return d.apply(null,s);}}return!(N.indexOf("sap-")===0||N.charAt(0)==="~");}function e(M,B,E){var I=M.inbound;var R=I&&I.resolutionResult;if(!(!I||!R||!(R["sap.gui"])||!(R.applicationType==="TR"))){return l(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/~canvas;")>=0)||!(R.url.indexOf("app/transaction/APB_LPD_CALL_")===-1))){return n(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/~canvas;")>=0)||!(R.url.indexOf("app/transaction/APB_LPD_CALL_")>=0))){return m(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/its/webgui")>=0)||!(R.url.indexOf("APB_LPD_CALL_")===-1))){return o(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/its/webgui")>=0)||!(R.url.indexOf("APB_LPD_CALL_")!==-1))){return k(M,B,E);}throw new Error("Cannot generate TR resolution result");}function f(T,s,y,E){var z,A;z="/gui/sap/its/webgui?%7etransaction="+T+"&%7enosplash=1";A=new U(z);return S.spliceSapSystemIntoURI(A,S.LOCAL_SYSTEM_ALIAS,s,y,"NATIVEWEBGUI",S.SYSTEM_ALIAS_SEMANTICS.apply,E);}function h(Q,P,s,y){var I,z="P_OBJECT"+y,M=132;var A=a.getURLParsing().privparamsToString(P,"%25","%21");if(!A){return Q;}var B="";j("P_OBJECT",Q,s,y,function(E){var F=E.replace(z,"");B=decodeURIComponent(F);if(B.length>0){B=B+"%25";}return z;});A=B+A;var C={pObjX:"",pObject:""};A.match(new RegExp(".{1,"+M+"}","g")).map(function(E){return encodeURIComponent(E);}).forEach(function(E,G){var F="P_OBJECT";var H="pObject";if(G>0){F="P_OBJ"+G;H="pObjX";}var J=C[H].length===0?"":s;C[H]=C[H]+J+F+y+E;});I=[C.pObjX,C.pObject].filter(function(E){return E.length>0;}).join(s);var D=j("P_OBJECT",Q,s,y,function(F){return I;});if(D.found){return D.query;}return Q+(Q.length===0?"":s)+I;}function j(T,Q,s,y,A){var F=false,P=T+y;var z=Q.split(s).map(function(B){if(B.indexOf(P)!==0){return B;}F=true;return A(B);}).filter(function(B){return typeof B!=="undefined";}).join(s);return{found:F,query:z};}function k(M,B,E){var I=M.inbound,s=I&&I.resolutionResult,R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}return new Promise(function(C,D){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"NATIVEWEBGUI",s.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(D).done(function(W){var P=W.search();var F=P.split("&").map(function(Q){var G;if(Q.indexOf("?%7etransaction")===0||Q.indexOf("%7etransaction")===0){G=h(Q,y,"%3b","%3d");return G;}return Q;}).join("&");W.search(F);["additionalInformation","applicationDependencies"].forEach(function(G){if(I.resolutionResult.hasOwnProperty(G)){R[G]=I.resolutionResult[G];}});R.url=W.toString();R.text=I.title;R.applicationType="TR";C(R);});});}function l(M,B,E){var I=M.inbound,s=I&&I.resolutionResult,y=M.mappedIntentParamsPlusSimpleDefaults||{};var z=s.systemAlias;if(y["sap-system"]){z=y["sap-system"][0];}var A;if(y["sap-system-src"]){A=y["sap-system-src"][0];}return new Promise(function(R,C){f(I.resolutionResult["sap.gui"].transaction,z,A,E).done(function(D){p.mapParameterNamesAndRemoveObjects(M);var F=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,D);if(F&&M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.platform.runtime"]){F["sap.platform.runtime"]=M.inbound.resolutionResult["sap.platform.runtime"];}F["sap-system"]=z;R(F);}).fail(C);});}function m(M,B,E){var I=M.inbound,s=I&&I.resolutionResult;var R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}return new Promise(function(C,D){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"WEBGUI",s.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(D).done(function(W){var P=W.search();P=h(P,y,"&","=");W.search(P);["additionalInformation","applicationDependencies"].forEach(function(F){if(I.resolutionResult.hasOwnProperty(F)){R[F]=I.resolutionResult[F];}});R.url=W.toString();R.text=I.title;R.applicationType="NWBC";C(R);});});}function n(M,B,E){var I=M.inbound,s=I&&I.resolutionResult;var R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}var C=g(y,I||{});r(y,C);return new Promise(function(D,F){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"WEBGUI",R.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(F).done(function(W){var G=a.getURLParsing().paramsToString(y);var P=W.search();if(G){P=P+((P.indexOf("?")<0)?"?":"&")+G;}W.search(P);["additionalInformation","applicationDependencies"].forEach(function(H){if(I.resolutionResult.hasOwnProperty(H)){R[H]=I.resolutionResult[H];}});R.url=W.toString();R.text=I.title;R.applicationType="NWBC";D(R);});});}function o(M,B,E){var I=M.inbound,R=I&&I.resolutionResult,F={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true,"sap-system-src":true};var W=new U(B);var s=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var y=s["sap-system"]&&s["sap-system"][0];var z=s["sap-system-src"]&&s["sap-system-src"][0];Object.keys(s).forEach(function(P){if(F[P.toLowerCase()]){delete s[P];}});return new Promise(function(A,C){S.spliceSapSystemIntoURI(W,R.systemAlias,y,z,"NATIVEWEBGUI",R.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(C).done(function(W){var R=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,W);A(R);});});}function t(I,M,W){var F={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true};var R={};var E=q.extend(true,{},M);var s=E["sap-system"]&&E["sap-system"][0];var y=E["sap-system-src"]&&E["sap-system-src"][0];R["sap-system"]=s;if(typeof y==="string"){R["sap-system-src"]=y;}Object.keys(E).forEach(function(D){if(F[D.toLowerCase()]){delete E[D];}});var z=g(E,I||{});r(E,z);var A=u(E);r(E,Object.keys(A));var P=W.search();var B=P.split("&").map(function(Q){var N;if(!d(Q)){if(Q.indexOf("=")>=0){N=Q.split("=");if(!A.hasOwnProperty(N[0])){A[N[0]]=N[1];}}else{q.sap.log.error("Found no '=' separator of Webgui non-business parameter. Parameter will be skipped.","'"+Q+"'","sap.ushell.services.ClientSideTargetResolution");}return undefined;}var D;if(Q.indexOf("?%7etransaction")===0||Q.indexOf("%7etransaction")===0){D=w(Q,E,"%3b","%3d");return D;}return Q;}).filter(function(D){return typeof D!=="undefined";}).join("&");var C=a.getURLParsing().paramsToString(A);B=[B,C.replace("~","%7e")].join("&");W.search(B);["additionalInformation","applicationDependencies","sap.platform.runtime"].forEach(function(D){if(I.resolutionResult.hasOwnProperty(D)){R[D]=I.resolutionResult[D];}});R.url=W.toString();R.text=I.title;R.applicationType="TR";return R;}function u(P){var N;N=c.filterObject(P,function(K,V){return!d(K,V);});return N;}function v(T){var s="^(.+?)(%20|(%20)(.+))?$",y=new RegExp(s,"i"),z,P={hasParameters:null,transactionParamName:"",transactionCode:"",parameters:[]};var A=T.split("=");if(A.length>2){return{"error":"Found more than one assignment ('=') in the transaction query parameter","details":"Only one '=' sign is expected in "+T};}if(A.length<2||typeof A[1]==="undefined"||A[1].length===0){return{"error":"The transaction query parameter must specify at least the transaction name","details":"Got "+T+" instead."};}P.transactionParamName=A[0];z=A[1];var M=z.match(y);if(!M){return{"error":"Cannot parse ~transaction query parameter value.","details":z+" should match /"+s+"/"};}P.transactionCode=M[1];if(M[2]&&M[2]!=="%20"){var B=M[4]||"";B.split("%3b").forEach(function(N){var C=N.split("%3d"),D=C[0];if(D&&typeof D==="string"&&D.length>0){P.parameters.push({name:D,value:C[1]});}});}P.hasParameters=false;if(P.parameters.length>0){P.hasParameters=true;P.transactionCode=P.transactionCode.replace(/^[*]/,"");}return P;}function w(T,P){var s=v(T);if(s.error){q.sap.log.error(s.error,s.details,"sap.ushell.services.ClientSideTargetResolution");return T;}var y=s.parameters.map(function(B){return B.name.toUpperCase()+"%3d"+B.value;});var z={};Object.keys(P).forEach(function(K){z[K.toUpperCase()]=P[K];});var A=a.getURLParsing().privparamsToString(z,"%3b","%3d");if(A){y.push(A);}var H=y.length>0;return s.transactionParamName+"="+(H?"*":"")+s.transactionCode+(H?"%20":"")+y.join("%3b");}function x(I,M,E){return new Promise(function(R,s){var y;if(I.params["sap-system-src"]){y=I.params["sap-system-src"][0];}var z=I.params["sap-system"]?I.params["sap-system"][0]:undefined;var A=I.params["sap-ui2-tcode"]?I.params["sap-ui2-tcode"][0]:undefined;f(A,z,y,E).done(function(B){delete M.intentParamsPlusAllDefaults["sap-ui2-tcode"];p.mapParameterNamesAndRemoveObjects(M);var C=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,B);if(C&&M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.platform.runtime"]){C["sap.platform.runtime"]=M.inbound.resolutionResult["sap.platform.runtime"];}C["sap-system"]=z;C.text=A;R(C);}).fail(function(B){s(B);});});}return{generateTRResolutionResult:e,resolveEasyAccessMenuIntentWebgui:x,injectEffectiveParametersIntoWebguiQueryParam:w,injectEffectiveParametersIntoWebguiPobjectParam:h,amendGuiParam:j,parseWebguiTransactionQueryParam:v,getWebguiNonBusinessParameters:u,getWebguiBusinessParameters:b,isWebguiBusinessParameter:d,buildNativeWebGuiURI:f,constructFullWebguiResolutionResult:l};},false);sap.ui.predefine('sap/ushell/_ApplicationType/systemAlias',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject"],function(U,u,q,i){"use strict";var S="";var O={apply:"apply",applied:"applied"};function a(o){return(o.protocol()||"").length>0;}function r(l,m,E){var n=typeof m==="string";var o=[l];if(n){o.unshift(m);}var K=u.generateLocalStorageKey("sap-system-data",o);var L=u.getLocalStorage();var p=L.getItem(K);var t={};if(p){try{t=JSON.parse(p);}catch(w){return new q.Deferred().reject("Cannot parse system data from local storage at key '"+K+"'. Data: "+p);}return new q.Deferred().resolve(t).promise();}else if(n){return new q.Deferred().reject("Cannot find data for system '"+l+"' in local storage using key '"+K+"'");}if(!E){return new q.Deferred().reject("fallback: the adapter does not implement resolveSystemAlias").promise();}return E(l);}function b(l,m,o,n,E){var N=o,D=new q.Deferred();r(l,m,E).fail(function(p){D.reject(p);}).done(function(R){var V=v(R);if(!V.isValid){h(V);D.reject("Invalid system alias definition");return D;}var p=g(R,new U(window.location.toString()).protocol()),t=R[p],Q,L,w;if(l===S&&t.host===""&&(t.port===0||t.port==="")){p="";}N.protocol(p);N.hostname(t.host);N.port(t.port);k(N,n,t.pathPrefix,E).fail(function(x){D.reject(x);}).done(function(N){Q=N.query();if(typeof R.client==="string"&&R.client!==""){Q=Q+(Q.length>0?"&":"")+"sap-client="+R.client;}if(typeof R.language==="string"&&R.language!==""){L=R.language;}else{w=sap.ushell.Container.getUser();if(!w){q.sap.log.error("Cannot retieve the User object via sap.ushell.Container while determining sap-language","will default to 'en' language","sap.ushell.services.ClientSideTargetResolution");L="en";}else{L=w.getLanguage();}}Q=Q+(Q.length>0?"&":"")+"sap-language="+L;N.query(Q);if(R.hasOwnProperty("rfc")&&n==="NATIVEWEBGUI"){var W=d(R.rfc,t.host,N);var P=N.path()+";"+W;N.path(P);o._parts.path=P;}D.resolve(N);});});return D.promise();}function s(o,l,m,n,p,t,E){var D=new q.Deferred();if(t!==O.apply&&t!==O.applied){throw new Error("Invalid system alias semantic was provided: '"+t+"'");}if(t===O.applied&&((typeof m==="undefined"||l===m))){return D.resolve(o).promise();}if(t===O.apply&&typeof l==="undefined"&&typeof m==="undefined"){return D.resolve(o).promise();}if(p==="URL"&&t==O.applied){return c(o,l,m,n,E);}(new Promise(function(R){if(t===O.apply){R({targetUri:o,alias:m||l,sapSystemSrc:m?n:undefined});return;}e(o,l,undefined,p,E).fail(function(w){D.reject(w);}).done(function(w){R({targetUri:w,alias:m});});})).then(function(A){b(A.alias,A.sapSystemSrc,A.targetUri,p,E).fail(function(w){D.reject(w);}).done(function(I){D.resolve(I);});});return D.promise();}function c(o,l,m,n,E){var D=new q.Deferred();if(l===S||typeof l==="undefined"){if(a(o)){return D.resolve(o);}b(m,n,o,"URL",E).fail(function(p){D.reject(p);}).done(function(p){D.resolve(p);});return D.promise();}r(l,n,E).fail(function(p){D.reject(p);}).done(function(R){var p=g(R,new U(window.location.toString()).protocol()),t=R[p],w;if((o.protocol()||"").toLowerCase()===p&&(o.hostname()||"")===t.host&&(o.path().indexOf(t.pathPrefix)===0)){o.protocol("");o.hostname("");w=o.path().replace(t.pathPrefix,"");o.path(w);j(o,["sap-language","sap-client"]);b(m,n,o,"URL",E).fail(function(x){D.reject(x);}).done(function(x){D.resolve(x);});}else{D.resolve(o);}});return D.promise();}function d(l,m){var R,n,I,t,p;I=!!l.systemId;if(I){t=[l.systemId&&("~sysid="+l.systemId),l.loginGroup&&("~loginGroup="+l.loginGroup),l.sncNameR3&&("~messageServer="+encodeURIComponent(l.sncNameR3)),l.sncNameR3&&("~sncNameR3="+encodeURIComponent(l.sncNameR3)),l.sncQoPR3&&("~sncQoPR3="+l.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}else{p=(l.host||"");n=p.toLowerCase()===m.toLowerCase();R=/^[/][HGMR][/].*/.test(p);if(p.length>0&&!n&&!R){q.sap.log.error("Invalid connect string provided in 'host' field of system alias","Data for rfc destination provided are: "+JSON.stringify(l,null,3),"sap.ushell.services.ClientSideTargetResolution");}t=[p&&!R&&!n&&("~rfcHostName="+p),R&&("~connectString="+encodeURIComponent(p)),l.service&&("~service="+l.service),l.sncNameR3&&("~sncNameR3="+encodeURIComponent(l.sncNameR3)),l.sncQoPR3&&("~sncQoPR3="+l.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}return t.join(";").replace(/(%[A-F0-9]{2})/g,function(E){return E.toLowerCase();});}function e(o,l,m,n,E){var D=new q.Deferred();if(typeof l==="undefined"){f(o,l,n,undefined,E).fail(function(p){D.reject(p);}).done(function(N){D.resolve(N);});return D.promise();}r(l,m,E).fail(function(p){D.reject(p);}).done(function(R){f(o,l,n,R,E).fail(function(p){D.reject(p);}).done(function(N){D.resolve(N);});});return D.promise();}function f(o,l,m,R,E){var n,p,t,w,D=new q.Deferred(),P=new q.Deferred();o.protocol("");o.hostname("");o.port("");j(o,["sap-client","sap-language"]);if(!i(R)||typeof l!=="string"){return D.resolve(o).promise();}p=g(R,new U(window.location.toString()).protocol());n=R[p];w=(typeof n.pathPrefix==="string")&&n.pathPrefix;if(w!==""){P.resolve(w);}else{r("",undefined,E).fail(function(x){D.reject(x);}).done(function(x){var y=x[p];P.resolve(y.pathPrefix);});}P.fail(function(x){D.reject(x);}).done(function(w){if(w&&w.length>0){t=o.path();t=t.replace(w,"");if(t.indexOf("/")!==0){t="/"+t;}o.path(t);}if(m==="NATIVEWEBGUI"&&R.hasOwnProperty("rfc")){t=o.path();t=t.split(";").filter(function(x){return x.indexOf("~sysid=")!==0&&x.indexOf("~service=")!==0&&x.indexOf("~loginGroup=")!==0&&x.indexOf("~messageServer=")!==0&&x.indexOf("~sncNameR3=")!==0&&x.indexOf("~sncQoPR3=")!==0;}).join(";");o.path(t);}D.resolve(o);});return D.promise();}function g(o,B){if(o.hasOwnProperty("https")){return"https";}if(o.hasOwnProperty("http")){return"http";}q.sap.log.error("Cannot select which system alias to pick between http/https","make sure they are provided in the given system alias collection","sap.ushell.services.ClientSideTargetResolution");return undefined;}function h(V){q.sap.log.error("Invalid system alias definition: "+V.debug,"ERRORS:"+V.errors.map(function(E){return"\n - "+E;}).join(""),"sap.ushell.ApplicationType");}function v(R){function l(F){var E=[];if(typeof F.host!=="string"){E.push("host field must be a string");}if(typeof F.port!=="number"&&typeof F.port!=="string"){E.push("port field must be a number or a string");}if(typeof F.pathPrefix!=="string"){E.push("pathPrefix field must be a string");}return E;}var E=[],H=R.hasOwnProperty("https"),m=R.hasOwnProperty("http");if(!m&&!H){E.push("at least one of 'http' or 'https' fields must be defined");}if(H){l(R.https).forEach(function(n){E.push("https>"+n);});}if(m){l(R.http).forEach(function(n){E.push("http>"+n);});}if(E.length>0){return{isValid:false,errors:E,debug:JSON.stringify(R,null,3)};}return{isValid:true};}function j(o,p){var B={},t;p.forEach(function(P){B[P]=true;});t=o.query();t=t.split("&").filter(function(P){var l=(P.split("=")[0]||"").toLowerCase();return!B.hasOwnProperty(l);}).join("&");o.query(t);}function k(o,l,p,E){var D=new q.Deferred(),t;if(l==="URL"&&p.length===0){return D.resolve(o).promise();}function m(P){var R=P+o.path();o.path(R.replace(/\/+/g,"/"));D.resolve(o);}r("",undefined,E).fail(function(n){D.reject(n);}).done(function(R){var n=g(R,new U(window.location.toString()).protocol());var L=R[n].pathPrefix;var P=p===L;if(p.length>0&&!P){if((l==="WDA"||l==="WEBGUI")&&o.path().indexOf("~canvas")>=0){t=o.path();t="/~canvas"+t.split("~canvas")[1];o.path(t);}}if(p.length===0){m(L);}else{m(p);}});return D.promise();}return{LOCAL_SYSTEM_ALIAS:S,SYSTEM_ALIAS_SEMANTICS:O,spliceSapSystemIntoURI:s,isAbsoluteURI:a,stripURI:e,selectSystemAliasDataName:g,constructNativeWebguiParameters:d};},false);sap.ui.predefine('sap/ushell/_ApplicationType/utils',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ushell/_ApplicationType/systemAlias"],function(U,u,s){"use strict";var a;function g(){if(!a){a=sap.ushell.Container.getService("URLParsing");}return a;}function b(o,S,e){if(!e||e===s.SYSTEM_ALIAS_SEMANTICS.applied){return s.isAbsoluteURI(o)&&!S;}if(e===s.SYSTEM_ALIAS_SEMANTICS.apply){return s.isAbsoluteURI(o);}throw new Error("Invalid system alias semantics: '"+e+"'");}function c(p,e){var S,f;if(p){var h=e.match(/#.*/);if(h){f=h;S=e.replace(h,"");}else{S=e;f="";}e=S+((e.indexOf("?")<0)?"?":"&")+p+f;}return e;}function d(p,e){var a=g();var f=e.match(/#.*/);var h=f&&f[0];if(!h){var P=a.paramsToString(p);return c(P,e);}var i=a.parseShellHash(h);Object.keys(p).forEach(function(m){var n=p[m];i.params[m]=[n];});var j=Object.keys(i.params).reduce(function(o,K){var v=i.params[K];var V=v.map(function(m){return encodeURIComponent(m);});o[encodeURIComponent(K)]=V;return o;},{});i.params=j;var k=e.replace(h,"");var l=a.constructShellHash(i);return k+"#"+l;}return{getURLParsing:g,appendParametersToUrl:c,appendParametersToIntentURL:d,absoluteUrlDefinedByUser:b};},false);sap.ui.predefine('sap/ushell/_ApplicationType/wdaResolution',["sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath"],function(U,a,s,q,O){"use strict";function c(p,m){return new Promise(function(R,j){var E=q.extend(true,{},p);if(m.length>0){E["sap-ushell-defaultedParameterNames"]=[JSON.stringify(m)];}delete E["sap-system"];sap.ushell.Container.getService("ShellNavigation").compactParams(E,["sap-xapp-state","sap-ushell-defaultedParameterNames","sap-intent-params"],undefined,true).fail(function(k){j(k);}).done(function(o){var k=a.getURLParsing().paramsToString(o);R(k);});});}function b(u,j){var p=u.search();if(j){p=p+((p.indexOf("?")<0)?"?":"&")+j;}return u.search(p).toString();}function d(A,C,I,o,E){var S,j,u,k,l,m=q.extend(true,{},o);if(C){m["sap-wd-configId"]=C;}if(m["sap-system"]){S=m["sap-system"][0];delete m["sap-system"];}if(m.hasOwnProperty("sap-system-src")){j=m["sap-system-src"][0];delete m["sap-system-src"];}l=a.getURLParsing().paramsToString(m);if(I){u=e(A,l);}else{u=f(A,l);}k=new U(u);return s.spliceSapSystemIntoURI(k,s.LOCAL_SYSTEM_ALIAS,S,j,"WDA",s.SYSTEM_ALIAS_SEMANTICS.apply,E);}function e(A,u){return"/ui2/nwbc/~canvas;window=app/wda/"+A+"/"+"?"+u;}function f(n,u){var N=n.indexOf("/")!==0;if(N){n="sap/"+n;}return"/webdynpro/"+n+"?"+u;}function g(I,F,S,j){var R={"sap-system":S,url:F,text:I.title,applicationType:"NWBC"};if(typeof j==="string"){R["sap-system-src"]=j;}["additionalInformation","applicationDependencies"].forEach(function(p){if(I.resolutionResult.hasOwnProperty(p)){R[p]=I.resolutionResult[p];}});return R;}function h(m,B,E){var I=O.get("inbound.resolutionResult",m),M=m.mappedIntentParamsPlusSimpleDefaults||{};var S=I.systemAlias;if(M["sap-system"]){S=M["sap-system"][0];}var j;if(M["sap-system-src"]){j=M["sap-system-src"][0];}var o={"sap-system":[S]};if(typeof j==="string"){o["sap-system-src"]=[j];}var C=I["sap.wda"].compatibilityMode;if(C===undefined){C=true;}return new Promise(function(R,k){d(I["sap.wda"].applicationId,I["sap.wda"].configId,C,o,E).done(function(w){var M=m.mappedIntentParamsPlusSimpleDefaults;c(M,m.mappedDefaultedParamNames).then(function(u){var F=b(w,u);var S=M["sap-system"]&&M["sap-system"][0];var j=M["sap-system-src"]&&M["sap-system-src"][0];var l=g(m.inbound,F,S,j);R(l);},function(l){k(l);});}).fail(function(l){k(l);});});}function i(m,B,E){var I=m.inbound,o=I&&I.resolutionResult,M=m.mappedIntentParamsPlusSimpleDefaults;var w=new U(B);var S=M["sap-system"]&&M["sap-system"][0];var j=M["sap-system-src"]&&M["sap-system-src"][0];return Promise.all([(new Promise(function(D,R){s.spliceSapSystemIntoURI(w,o.systemAlias,S,j,"WDA",o.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(R).done(D);})),c(M,m.mappedDefaultedParamNames)]).then(function(R){var W=R[0];var u=R[1];var F=b(W,u);var k=g(I,F,S,j);return k;},function(k){return Promise.reject(k);});}function r(I,m,E){var C,A,o,j=true;A=I.params["sap-ui2-wd-app-id"][0];C=(O.get("params.sap-ui2-wd-conf-id",I)||[])[0];o=Object.keys(I.params).reduce(function(R,p){if(p!=="sap-ui2-wd-app-id"&&p!=="sap-ui2-wd-conf-id"){R[p]=I.params[p];}return R;},{});return new Promise(function(R,k){d(A,C,j,o,E).done(function(u){var S=I.params.hasOwnProperty("sap-system-src")&&I.params["sap-system-src"][0];var l=I.params.hasOwnProperty("sap-system")&&I.params["sap-system"][0];var n={url:u.toString(),applicationType:"NWBC",text:A,additionalInformation:"","sap-system":l};if(typeof S==="string"){n["sap-system-src"]=S;}if(m&&m.inbound&&m.inbound.resolutionResult&&m.inbound.resolutionResult["sap.platform.runtime"]){n["sap.platform.runtime"]=m.inbound.resolutionResult["sap.platform.runtime"];}R(n);}).fail(function(l){k(l);});});}return{resolveEasyAccessMenuIntentWDA:r,constructFullWDAResolutionResult:h,constructWDAResolutionResult:i};},false);sap.ui.predefine('sap/ushell/_Config/utils',[],function(){"use strict";function i(p,C){var e=[];var n=[];var o=C;var f=false;var P=p.split("/");P.shift();P.forEach(function(g){if(!f&&o.hasOwnProperty(g)){o=o[g];e.push(g);return;}f=true;n.push(g);});return{contractPart:"/"+e.join("/"),nonContractPart:n};}function a(v){return v&&v.isA&&v.isA("sap.ui.model.Context");}function w(C,p,o,v){var D=o;p.forEach(function(P,I){if(I===p.length-1){D[P]=v;return;}if(!D.hasOwnProperty(P)){throw new Error("Cannot find "+P+" inside "+C);}D=D[P];});}function c(p){var P=function(e){return p+e;};if(typeof p==="object"){var S="/";P=function(e){var f=e.split(S);f.shift();var F=f.shift();return p[F]+(f.length>0?S+f.join(S):"");};}return P;}function b(p,m,P){var f=c(P);var F=f(p);if(a(m)&&p.charAt(0)!=="/"){var r=m.getPath()+"/"+p;F=f(r);}return F;}function s(f,C,m,p){m.setData=function(P,D){throw new Error("not yet implemented");};m.setProperty=function(P,D,M){var F=b(P,M,p);var I=i(F,C);if(I.nonContractPart.length===0){f.emit(I.contractPart,D);return;}var B=f.last(I.contractPart);w(I.contractPart,I.nonContractPart,B,D);f.emit(I.contractPart,B);};return m;}function d(f,C,p,e){var m,S,g,P;if(typeof p==="string"){var h=p;P=h;var I=f.last(h);if(Object.prototype.toString.apply(I)!=="[object Object]"){throw new Error("Cannot bind on leaf property of Configuration: '"+h+"'");}m=new e(I);g=m.setData.bind(m);f.on(h).do(function(v){g(v);});return s(f,C,m,P);}if(Object.prototype.toString.apply(p)==="[object Object]"){var D=p;var M=Object.keys(D).reduce(function(M,k){var j=D[k];M[k]=f.last(j);f.on(j).do(function(k,v){S("/"+k,v);}.bind(null,k));return M;},{});m=new e(M);S=m.setProperty.bind(m);return s(f,C,m,D);}throw new Error("Invalid parameter provided to createModel. Must be an object or a string.");}return{createModel:d};},false);sap.ui.predefine('sap/ushell/_URLTemplateProcessor/DependencyGraph',["sap/ushell/utils/clone"],function(c){"use strict";function i(n){return typeof n==="string"||n.type==="wildcard"||n.type==="literal"||n.type==="intentParameter"||n.type==="reference";}function a(n){return n.type==="reference"&&!n.namespace;}function b(G,p,n){if(!G.hasOwnProperty(p)){G[p]=[];}if(a(n)){G[p].push(n.value);}}function d(p){var D={};var A=b.bind(null,D);Object.keys(p).forEach(function(P){var n=p[P];v(n,P,A);});return D;}function e(n){var N=n.type;if(N==="expression"){return[n.value];}if(N==="function"){return(n.args||[]).concat(n.params||[]);}if(N==="pipe"||N==="path"){return n.value;}throw new Error("Unknown type encountered while building dependency graph: '"+N+"'");}function v(n,p,A){A(p,n);if(i(n)){return;}var N=e(n);N.forEach(function(n){v(n,p,A);});}function g(D){var o=c(D);var n,N,r=[],R={};do{var f=Object.keys(o);n=f.length;f.forEach(function(s){if(o[s].length>0){o[s]=o[s].filter(function(h){var w=!R[h];var m=o.hasOwnProperty(h);return w&&m;});}if(o[s].length===0){delete o[s];r.push(s);R[s]=true;}});N=Object.keys(o).length;}while(n!==N);if(N!==0){throw new Error("Graph of dependencies contains cyclic references");}return r;}return{buildDependencyGraph:d,getDependencyResolutionOrder:g};},false);sap.ui.predefine('sap/ushell/_URLTemplateProcessor/Functions',["sap/ushell/utils/type","sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/utils","sap/ui/thirdparty/URI"],function(t,c,u,U){"use strict";var O={url:{args:["urlPart?"],minValues:0,maxValues:0,fn:function(A){var o=new U();var k=["protocol","scheme","username","password","hostname","port","host","userinfo","authority","origin","subdomain","domain","tld","pathname","path","directory","filename","suffix","search","query","hash","fragment","resource"];var m="toString";if(A.urlPart){if(k.indexOf(A.urlPart)===-1){throw new Error("The URL part '"+A.urlPart+"' is not valid. Please use one of "+k.join(", "));}m=A.urlPart;}return o[m]();}},if:{args:["trueCondition"],minValues:1,maxValues:2,fn:function(A,v){var V=g(v);if(i(A.trueCondition)){return V.length===1?undefined:V.pop();}return V[0];}},and:{args:["emptyCondition?"],minValues:1,fn:function(A,v){var V=g(v);if(typeof A.emptyCondition==="undefined"&&A.length>0){return undefined;}if(typeof A.emptyCondition!=="undefined"&&i(A.emptyCondition)){return undefined;}var l=V.pop();var k=V.every(u.hasValue);return k?l:undefined;}},or:{args:["emptyCondition?"],minValues:1,fn:function(A,v){var V=g(v);if(typeof A.emptyCondition==="undefined"&&A.length>0){return undefined;}if(typeof A.emptyCondition!=="undefined"&&i(A.emptyCondition)){return undefined;}return V.reduce(function(P,n){if(u.hasValue(P)){return P;}return u.hasValue(n)?n:undefined;});}},join:{args:["macroSeparator?","microSeparator?"],minValues:1,fnPipe:function(A,v){var V=[v];return O.join.fn.call(this,A,V);},fn:function(A,v){var m=A.macroSeparator||"";var M=A.microSeparator||"";v=v.map(function(s){if(!t.isPlainObject(s)&&!t.isArray(s)){return s;}var T=Object.prototype.toString.apply(s);if(T==="[object Object]"){var S=u.removeArrayParameterNotation(s);return Object.keys(S).sort().map(function(k){return k+M+s[k];}).join(m);}if(T==="[object Array]"){return s.join(m);}});return v.join(m);}},match:{args:["strRegex"],minValues:1,fnPipe:function(A,v){var s=A.strRegex;var k=new RegExp(s);return Object.keys(v).reduce(function(o,n){if(k.exec(n)){o[n]=v[n];}return o;},{});},fn:function(A,v){if(v===undefined){return undefined;}var s=A.strRegex;var k=new RegExp(s);var m=v.filter(function(V){var I;if(t.isPlainObject(V)){I=Object.keys(V);}else if(t.isArray(V)){I=V;}else{I=[""+V];}return I.some(k.exec.bind(k));});return m.length===v.length?true:undefined;}},not:{args:[],minValues:1,fnPipe:function(A,v){return Object.keys(v).length>0?undefined:"";},fn:function(A,v){var E=O.and.fn(A,v);return E===undefined?"":undefined;}},encodeURIComponent:{args:[],minValues:1,maxValues:1,fnPipe:function(A,v){return Object.keys(v).reduce(function(o,k){o[k]=encodeURIComponent(v[k]);return o;},{});},fn:function(A,v){var T=v.map(function(V){return encodeURIComponent(V);});return T;}}};function i(v){if(typeof v==="undefined"){return true;}if(typeof v==="string"){return v==="";}if(typeof v==="object"){return Object.keys(v).length===0;}if(typeof v==="number"){return v===0;}if(typeof v==="boolean"){return v===false;}throw new Error("Unexpected type for value");}function g(v){var V;if(t.isArray(v)){V=v;}else if(t.isPlainObject(v)){V=[v];}else if(v===undefined){return[];}else{throw new Error("Unexpected type");}return V;}function a(F,o,v){if(v!==undefined&&!t.isPlainObject(v)){throw new Error("Invalid value type passed to '"+F+"' in pipe context. An object is expected.");}}function b(F,o,v){if(v!==undefined&&!t.isArray(v)){throw new Error("Invalid value type passed to '"+F+"' in value context. An array is expected.");}var n=t.isArray(v)?v.length:0;if(u.hasValue(o.maxValues)&&n>o.maxValues){throw new Error("Too many values were passed to '"+F+"'. Please pass maximum "+o.maxValues+" values.");}if(u.hasValue(o.minValues)&&n<o.minValues){throw new Error("Too few values were passed to '"+F+"'. Please pass minimum "+o.minValues+" values.");}}function d(A){var E=false;A.map(e).reduce(function(R,n){if(!R&&n){E=true;}return n;},true);return E;}function e(A){return A.charAt(A.length-1)!=="?";}function r(A){return A.substr(0,A.length-1);}function p(F,A){var k=c(O[F].args);if(d(k)){throw new Error("Invalid argument signature. Make sure all optional arguments appear in the end.");}var o={length:A.length};var R=k.filter(e);var m=R>A.length;if(m){throw new Error(F+" requires "+R+" arguments but "+A.length+" was specified");}A.forEach(function(v){var n=k.shift();var I=!e(n);if(I){n=r(n);}if(A.length>0){o[n]=v;}});return o;}function f(P,F,k,I){if(!O.hasOwnProperty(F)){throw"Invalid function: "+F;}var o=p(F,k);if(P){a(F,O[F],I);}else{b(F,O[F],I);}if(P){if(!O[F].fnPipe){throw new Error("The function '"+F+"' cannot be executed in pipe context");}return O[F].fnPipe(o,I);}return O[F].fn(o,I);}function h(s){return s.split("").map(function(k){if(k==="["){return"[\\[]";}return"["+k+"]";}).join("");}function j(){var A=Object.keys(O);return A.map(h).join("|");}return{getPossibleFunctionsRegExpString:j,applyFunctionInValueContext:f.bind(null,false),applyFunctionInPipeContext:f.bind(null,true),_setURIDependency:function(F){U=F;}};},false);sap.ui.predefine('sap/ushell/_URLTemplateProcessor/Resolvers',["sap/ushell/_URLTemplateProcessor/Functions","sap/ushell/utils/type","sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/utils"],function(f,t,c,u){"use strict";var O={"literal":r,"expression":g,"reference":h,"function":e,"path":b,"pipe":d};function a(s,p,k){var C=null;var P=[];var F=false;var l=p.join("/");C=s;if(typeof C==="undefined"){F=true;}p.forEach(function(m,I){if(F){return;}P.push(m);if(!C.hasOwnProperty(m)){C=undefined;F=true;return;}if(!C.hasOwnProperty(m)){throw new Error("Cannot find path '"+l+"' in given structure: '"+m+"' seems to be missing in the object.");}C=C[m];});return C;}function r(p){return p.value;}function b(p,R,s,A,o,D){var k=p.value.map(function(P){return i(P,R,s,A,o,D);});var I=p.pathType==="relative";var l=I?A:s;return a(l,k,R);}function d(p,R,s,A,o,D){var P=p.value;if(P[0].type!=="wildcard"){throw new Error("Leading wildcard expected in pipe expression");}if(P[0].value!=="*"){throw new Error("Unsupported wildcard expression: "+P[0].value);}return P.slice(1).reduce(function(v,k){if(k.type!=="function"){throw new Error("Invalid operation specified in pipe expression");}return f.applyFunctionInPipeContext(k.name,k.args.map(function(l){return i(l,R,s,A,o,D);}),v);},c(o[D]||{}));}function e(p,R,s,A,o,D){var F=p.name;var k=p.args.map(function(P){return i(P,R,s,A,o,D);});var v=p.params.map(function(P){return i(P,R,s,A,o,D);});return f.applyFunctionInValueContext(F,k,v);}function g(p,R,s,A,o,D){var E=p.value;if(O[E.type]){return i(E,R,s,A,o,D);}throw new Error("unknown expression type: "+E.type);}function h(p,R,s,A,o,D){var v=p.value;if(!p.hasOwnProperty("namespace")){return R[v];}var n=p.namespace;var E="The template attemps to take the value '"+v+"' from '"+n+"' namespace.";if(!o.hasOwnProperty(n)){throw new Error(E+" However this value was not defined at runtime. The template should reference only defined values.");}var N=o[n];var k=v===".";if(k){return N;}if(typeof N!=="object"){throw new Error(E+" However the runtime did not define the namespace as an object. The template cannot access the desired value using the object notation in this case.");}return N[v];}function i(p,R,s,A,o,D){var P=p.type;if(O[P]){return O[P](p,R,s,A,o,D);}throw new Error("Cannot resolve unknown parameter type: '"+P+"'");}function j(p,R,s,o,A,D){var k={};R.forEach(function(P){var l=p[P];var m=i(l,k,s,A,o,D);k[P]=m;});return k;}return{resolveLiteral:r,resolveExpression:g,resolveReference:h,resolveFunction:e,resolvePath:b,resolvePipe:d,resolveParameterValue:i,resolveAllParameters:j};},false);sap.ui.predefine('sap/ushell/_URLTemplateProcessor/TemplateParameterParser',["sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/Functions"],function(c,f){"use strict";function p(D,E){var s=m();var v=s.exec(E);if(v===null){throw new Error("Cannot parse expression: '"+E+"'");}var S=r(E);if(S.indexOf("*")===0){return a(D,S);}var A="^("+f.getPossibleFunctionsRegExpString()+")[^a-z]";var w=new RegExp(A);if(w.exec(S)){return i(D,S);}return e(D,S);}function a(D,P){var s=j(D,P,"|");var w=s.shift();return{type:"pipe",value:[{type:"wildcard",value:w}].concat(s.map(i.bind(null,D)))};}function b(R){var s=R.substr(1);var N;if(s.indexOf(":")>=0){var v=s.split(":");N=v[0];s=v[1];}var w={type:"reference",value:s};if(N){w.namespace=N;}return w;}function d(D,P){var s=P.split("/");var v="relative";if(s[0]===""){v="absolute";s.shift();}if(s[0]==="."){s.shift();}return{type:"path",pathType:v,value:s.map(g.bind(null,D))};}function e(D,L){if(L.charAt(0)==="{"&&L.charAt(L.length-1)==="}"){return e(D,r(L));}if(L.indexOf(".")===0||L.indexOf("/")===0){return d(D,L);}if(L.charAt(0)==="'"&&L.charAt(L.length-1)==="'"){return h(r(L));}if(L.charAt(0)==="&"){return b(L);}return{type:"reference",value:L,namespace:D};}function g(D,P){if(P.charAt(0)==="{"&&P.charAt(P.length-1)==="}"){return e(D,r(P));}return{type:"literal",value:P};}function h(L){return{type:"literal",value:L};}function i(D,F){var v=F.split(/[(\s]/)[0];var R=o(F,v);R=R.replace(/^\s+/,"");var w="";if(R.charAt(0)==="("){var x=R.search(/([)]\s)|([)]$)/);if(x===-1){throw new Error("Cannot find termination of function '"+R+"' in '"+F+"'");}w=R.substr(1,x-1);R=o(R,"("+w+")");R=R.replace(/^\s+/,"");}var y=R;return{type:"function",name:v,args:j(D,w,",").map(function(s){return s.charAt(0)==="{"?r(s):"'"+s+"'";}).map(e.bind(null,D)),params:j(D,y,",").map(e.bind(null,D))};}function j(D,L,s){if(!L){return[];}var S=L.split(s).reduce(function(A,N,I){if(I===0){A.push(N);return A;}var v=A.length-1;var P=A[v];var M=P.length>0&&P.charAt(P.length-1)==="\\";var w="";if(M){w=A.pop();w=w.substr(0,w.length-1)+s;}A.push(w+N);return A;},[]);return S;}function k(D,P){var s=P;var R=null;if(Object.prototype.toString.apply(P)==="[object Object]"){s=P.value;R=P.renameTo;}var I=q(s);if(I){return h(s);}var T="expression";var v=p(D,s);var w={type:T,value:v};if(R){v.renameTo=R;}return w;}function l(s){var E=s.indexOf("{")===0;var v=m();var G=v.exec(s);if(!G){if(E){throw new Error("Expression was expected. But "+s+" does not look like a valid expression");}return null;}return G[1];}function m(){var O="[a-zA-Z0-9]+?:";var v="((&("+O+")?)?[.a-zA-Z0-9_-]+?)";var Q="('(.*?)')";var U="([^' ]*?)";var V="{("+v+")}";var P="("+"[.]?([/]("+v+"|"+V+"))+"+")";var L="("+P+"|"+Q+"|"+v+"|"+V+")";var s="("+L+"(,"+L+")*)";var F="("+U+"|"+V+")";var w="("+F+"(,"+F+")*)";var x="("+"[(]"+w+"[)]"+")?";var A=f.getPossibleFunctionsRegExpString();var y="("+"("+A+")"+"("+x+")"+")";var W="([*]([|]"+y+")*)";var E="^{("+W+"|"+"(("+y+")([ ]("+s+"))?)"+"|"+"("+L+")"+")}$";var z=new RegExp(E);return z;}function n(s){return l(s)!==null;}function r(s){var C=s.split("");C.shift();C.pop();return C.join("");}function o(T,P){if(T.indexOf(P)===0){return T.substr(P.length);}throw new Error("Given string does not start with prefix '"+P+"'");}function q(s){return typeof s==="string"&&!n(s);}function t(P,D){return Object.keys(P).reduce(function(s,N){var v=P[N];s[N]=k(D,v);return s;},{});}function u(P,D){return Object.keys(P).reduce(function(s,N){var v=P[N];s[N]=h(v);return s;},{});}return{parseTemplateParameterSet:t,parseTemplateParameterSetAsLiterals:u,parsePath:d,_isExpression:n,_parseList:j,_parseParameterValue:k};},false);sap.ui.predefine('sap/ushell/_URLTemplateProcessor/utils',["sap/ushell/utils/type"],function(t){"use strict";function h(v){return v!==null&&typeof v!=="undefined";}function r(p){return Object.keys(p).reduce(function(o,P){var v=p[P];if(Object.prototype.toString.apply(v)==="[object Array]"){o[P]=v[0];}else if(typeof v==="string"){o[P]=v;}else{throw new Error("Parameters should be passed as strings or array of strings");}return o;},{});}return{hasValue:h,removeArrayParameterNotation:r};},false);sap.ui.predefine('sap/ushell/appRuntime/ui5/AppCommunicationMgr',["sap/ushell/appRuntime/ui5/AppRuntimePostMessage","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/Log","sap/ui/thirdparty/URI"],function(A,q,O,L,U){"use strict";var C="sap.ushell.appRuntime.ui5.AppCommunicationMgr";var s,t={},T={},a=0,b=[],p=0;function c(){this.init=function(){var d=this;s=A.getHandlers();A.registerCommunicationHandler("sap.ushell.PostMessage",{oInboundActions:{"callTunnelFunction":{executeServiceCallFn:function(S){var e=S.oMessageData.body.content,f=d.restoreArray(e.arguments);t[e.UUID].fnCallback.apply(this,Object.values(f));return new q.Deferred().resolve().promise();}}}});d.handleMessageEvent=c.prototype._handleMessageEvent.bind(d,d);addEventListener("message",d.handleMessageEvent);};this.restoreArray=function(o){var d=[],i=0;while(o[i]){d.push(o[i]);i++;}return d;};this.destroy=function(){removeEventListener("message",this.handleMessageEvent);};this._handleMessageResponse=function(m){if(m.request_id&&b[m.request_id]){var r=b[m.request_id];if(m.status==="success"){r.resolve(m.body.result);}else{r.reject();}}};this._handleMessageRequest=function(o,m,M){var d=this,P=O.create("sap-ushell-config.services.PostMessage.config"),S=M&&M.service,e,f,g,h,i;L.debug("App Runtime received post message request from origin '"+m.origin+"': "+JSON.stringify(M),null,C);if(!S){return;}if(P&&P.enabled===false){L.warning("App Runtime received message for "+f+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,C);this.sendResponseMessage(m,M,"error",{message:"feature disabled"});return;}if(!this._isTrustedPostMessageSource(o,m)){L.warning("App Runtime received message from untrusted origin '"+m.origin+"': "+JSON.stringify(m.data),null,C);this.sendResponseMessage(m,M,"error",{message:"Invalid request"});return;}if(S.indexOf(".")>0){e=S.split(".");g=e[e.length-1];f=S.substr(0,S.length-g.length-1);}else{this.sendResponseMessage(m,M,"error",{message:"Invalid service name: '"+S+"'"});return;}var j={oMessage:m,oMessageData:M,oContainer:o};try{h=s[f];i=h&&h.oInboundActions[g];if(i&&i.executeServiceCallFn){i.executeServiceCallFn(j).done(function(r){d.sendResponseMessage(m,M,"success",{result:r});}).fail(function(k){d.sendResponseMessage(m,M,"error",{message:k});});}else{this.sendResponseMessage(m,M,"error",{message:"Unknown service name: '"+M.service+"'"});}}catch(E){this.sendResponseMessage(m,M,"error",{message:E.message});}};this._getCFLPWindow=function(){return window.parent;};this._isTrustedPostMessageSource=function(o,m){var d=false,P=o._getCFLPWindow();if(P){d=(m.source===P);}return d;};this.sendResponseMessage=function(m,M,S,B){var r=this.stringify({type:"response",service:M.service,request_id:M.request_id,status:S,body:B});L.debug("Sending post message response to origin ' "+m.origin+"': "+r,null,C);if(typeof m.source!=="object"||m.source===null){L.debug("Cannot send response message to origin ' "+m.origin,"`source` member of request message is not an object",C);return;}m.source.postMessage(r,m.origin);};this._getTargetWindow=function(){return window.parent;};this.postMessage=function(m){var d,e=this._getTargetWindow();if(m){try{if(m.type==="request"&&!m.request_id){m.request_id=this.getId();}d=this.stringify(m);e.postMessage(d,"*");}catch(f){L.error("Message '"+m+"' cannot be posted: "+f,"sap.ui5Isolation.AppCommunicationMgr");}}};this.sendMessageToOuterShell=function(m,P,r){var d=new q.Deferred(),M={"type":"request","service":m,"body":(P||{}),"request_id":r};this.postMessage(M);b[M.request_id]=d;return d.promise();};this.getId=function(){return"SAPUI5_APPRUNTIME_MSGID_"+(++p);};}c.prototype._handleMessageEvent=function(o,m){if(m===undefined){return;}var M=m.data;if(typeof M==="string"){try{M=this.parse(m.data,this);}catch(e){L.debug("Message received from origin '"+m.origin+"' cannot be parsed: "+e,M,C);return;}}if(M.type==="request"){return o._handleMessageRequest(o,m,M);}else if(M.type==="response"){return o._handleMessageResponse(M);}};c.prototype.stringify=function(d){var e=function(g){if(t[g]){return{type:"tunnel",UUID:t[g]};}a++;t[a]={fnCallback:g};t[g]=a;return{type:"tunnel",UUID:a};},f=[],r=JSON.stringify(d,function(k,v){if(v!==null){if(typeof v==='object'||typeof v==="function"){if(f.indexOf(v)!==-1){return;}f.push(v);}}if(typeof v==="function"){var n=T[v];if(n){return{type:"reversetunnel",UUID:n};}return e(v);}return v;});return r;};c.prototype.parse=function(d,o){return JSON.parse(d,function(k,v){if(v&&v.type==="tunnel"){var e=function(){return o.sendMessageToOuterShell("sap.ushell.PostMessage.callTunnelFunction",{"content":{UUID:v.UUID,arguments:arguments}});};T[e]=v.UUID;return e;}else if(v&&v.type==="reversetunnel"){return t[v.UUID].fnCallback;}return v;});};return new c();},false);sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntime',["sap/base/util/LoaderExtensions","sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppCommunicationMgr","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ui/thirdparty/URI","sap/ushell/appRuntime/ui5/SessionHandlerAgent","sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent","sap/ushell/appRuntime/ui5/services/ShellUIService","sap/ushell/ui5service/UserStatus","sap/ushell/appRuntime/ui5/services/AppConfiguration","sap/ui/core/Popup","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/Log","sap/ui/core/ComponentContainer","sap/ushell/appRuntime/ui5/renderers/fiori2/RendererExtensions"],function(L,A,a,b,U,S,c,d,f,g,P,q,i,h,C){"use strict";var p=new U().search(true),o,s,D="sap/ushell/appRuntime/ui5/AppRuntimeDefaultConfiguration.json",E=false,j=false,k={};function l(){this.main=function(){var t=this;a.init();Promise.all([t.getPageConfig(),c.getURLParameters(t._getURI()),t.fetchStartupPlugins()]).then(function(v){var u=v[1],e=u["sap-ui-app-id"];k=v[2];t.setModulePaths();t.init();Promise.all([t.initServicesContainer(),t.getAppInfo(e)]).then(function(v){var n=v[1];S.init();t.createApplication(e,u,n).then(function(r){t.renderApplication(r);});});});};this._getURI=function(){return new U().query(true);};this.init=function(){A.registerCommHandlers({"sap.ushell.appRuntime":{oInboundActions:{"hashChange":{executeServiceCallFn:function(e){var H=e.oMessageData.body.sHash;if(H&&H.length>0){window.hasher.replaceHash(H);}return new q.Deferred().resolve().promise();}},"setDirtyFlag":{executeServiceCallFn:function(e){var I=e.oMessageData.body.bIsDirty;if(I!==sap.ushell.Container.getDirtyFlag()){sap.ushell.Container.setDirtyFlag(I);}return new q.Deferred().resolve().promise();}},"themeChange":{executeServiceCallFn:function(e){var n=e.oMessageData.body.currentThemeId;sap.ushell.Container.getUser().setTheme(n);return new q.Deferred().resolve().promise();}},"buttonClick":{executeServiceCallFn:function(e){sap.ushell.renderers.fiori2.Renderer.handleHeaderButtonClick(e.oMessageData.body.buttonId);return new q.Deferred().resolve().promise();}},"uiDensityChange":{executeServiceCallFn:function(e){var n=e.oMessageData.body.isTouch;q("body").toggleClass("sapUiSizeCompact",(n==="0")).toggleClass("sapUiSizeCozy",(n==="1"));return new q.Deferred().resolve().promise();}}}}});};this.getStartupPlugins=function(){return k;};this.inIframe=function(){try{return window.self!==window.top;}catch(e){return true;}};this.isInsideYellowBox=function(){var I=false,t=this;return new Promise(function(r){if(t.inIframe()){var T=setTimeout(function(){if(!I){r(false);}},500);b.sendMessageToOuterShell("sap.ushell.appRuntime.shellCheck",{}).then(function(){I=true;clearTimeout(T);r(I);});}else{r(false);}});};this.fetchStartupPlugins=function(){var t=this;return new Promise(function(r){t.isInsideYellowBox().then(function(I){if(I){b.sendMessageToOuterShell("sap.ushell.appRuntime.startupPlugins",{}).then(function(k){r(k);});}else{r({});}});});};this.getPageConfig=function(){var e,n;return new Promise(function(r){L.loadResource(D,{async:true}).then(function(t){e=q("meta[name='sap.ushellConfig.ui5appruntime']")[0];n=JSON.parse(e.content);window["sap-ushell-config"]=q.extend(true,{},t,n);r();});});};this.setModulePaths=function(){if(window["sap-ushell-config"].modulePaths){var e=Object.keys(window["sap-ushell-config"].modulePaths);for(var n in e){(function(){var r={};r[e[n].replace(/\./g,"/")]=window["sap-ushell-config"].modulePaths[e[n]];sap.ui.loader.config({paths:r});}());}}};this.initServicesContainer=function(){return new Promise(function(r){sap.ui.require(["sap/ushell/appRuntime/ui5/services/Container"],function(e){e.bootstrap("apprt",{apprt:"sap.ushell.appRuntime.ui5.services.adapters"}).then(function(){r();});});});};this._getURIParams=function(){return p;};this.getAppInfo=function(e){var n=window["sap-ushell-config"].ui5appruntime.config.appIndex.data,M=window["sap-ushell-config"].ui5appruntime.config.appIndex.module,t=this;return new Promise(function(r){if(n&&!i(n)){c.getAppInfo(M,t.createApplication.bind(t),t.renderApplication.bind(t));r(n);}else{sap.ui.require([M.replace(/\./g,"/")],function(u){c.init(u,t.createApplication.bind(t),t.renderApplication.bind(t));u.getAppInfo(e).then(function(v){r(v);});});}});};this.setApplicationParameters=function(e,u){var n,r,t,v=new q.Deferred();function w(x,I){var y="";if(x&&x.length>0){y=(x.startsWith("?")?"":"?")+x;}if(I&&I.length>0){y+=(y.length>0?"&":"?")+I;}return y;}if(u.hasOwnProperty("sap-startup-params")){n=(new U("?"+u["sap-startup-params"])).query(true);if(n.hasOwnProperty("sap-intent-param")){r=n["sap-intent-param"];delete n["sap-intent-param"];}t=(new U("?")).query(n).toString();if(r){b.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppStateData",{"sAppStateKey":r}).then(function(M){e.url+=w(t,M);v.resolve();},function(x){e.url+=w(t);v.resolve();});}else{e.url+=w(t);v.resolve();}}else{v.resolve();}return v.promise();};this.setHashChangedCallback=function(){function t(n){if(n&&typeof n==="string"&&n.length>0){b.sendMessageToOuterShell("sap.ushell.appRuntime.hashChange",{"newHash":n});}}window.hasher.changed.add(t.bind(this),this);};this.createApplication=function(e,u,n){var t=this,r=function(v){b.sendMessageToOuterShell("sap.ushell.services.ShellUIService.showShellUIBlocker",{"bShow":v.getParameters().visible});};return new Promise(function(R){o=new C({id:e+"-content",width:"100%",height:"100%"});var v="0";if(p.hasOwnProperty("sap-touch")){v=p["sap-touch"];if(v!=="0"&&v!=="1"){v="0";}}q("body").toggleClass("sapUiSizeCompact",(v==="0")).toggleClass("sapUiSizeCozy",(v==="1"));if(!s){sap.ushell.renderers.fiori2.utils.init();s=sap.ushell.Container.getService("ShellNavigation");s.init(function(){});s.registerNavigationFilter(function(){if(sap.ushell.Container.getDirtyFlag()){return s.NavigationFilterStatus.Abandon;}return s.NavigationFilterStatus.Continue;});}c.setComponent(o);new d({scopeObject:o,scopeType:"component"});new f({scopeObject:o,scopeType:"component"});if(P.attachBlockLayerStateChange){P.attachBlockLayerStateChange(r);}t.setApplicationParameters(n,u).done(function(){t.setHashChangedCallback();sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(w){w.createComponent({ui5ComponentName:e,applicationDependencies:n,url:n.url},"todo-replaceDummyShellHash",false).then(function(x){t.overrideSendAsEmailFn();t.loadPlugins();R(x);});});});});};this.overrideSendAsEmailFn=function(){if(E===true){return;}E=true;if(sap.m&&sap.m.URLHelper&&sap.m.URLHelper.triggerEmail){sap.m.URLHelper.triggerEmail=function(t,e,B,n,r){b.sendMessageToOuterShell("sap.ushell.services.ShellUIService.sendEmail",{"sTo":t,"sSubject":e,"sBody":B,"sCc":n,"sBcc":r,"sIFrameURL":document.URL,"bSetAppStateToPublic":true});};}};this.loadPlugins=function(){if(j===true){return;}j=true;sap.ushell.Container.getServiceAsync("PluginManager").then(function(e){e.loadPlugins("RendererExtensions");});};this.renderApplication=function(r){o.setComponent(r.componentHandle.getInstance()).placeAt("content");};}var m=new l();m.main();return m;});sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntimePostMessage',["sap/ui/thirdparty/jquery"],function(q){"use strict";var a={};function A(){this.getHandlers=function(){return a;};this.registerCommHandlers=function(c){var i=[];Object.keys(c).forEach(function(k){var C=c[k];if(C.oInboundActions){Object.keys(C.oInboundActions).forEach(function(b){i.push({action:b,service:k});});}});q.extend(a,c);return i;};this.registerCommunicationHandler=function(k,c){var C=a[k],i=[];if(!C){C=a[k]={oInboundActions:{}};}if(c.oInboundActions){Object.keys(c.oInboundActions).forEach(function(b){C.oInboundActions[b]=c.oInboundActions[b];i.push({action:b,service:k});});}return i;};this._getPostMesageInterface=function(s,i){var c=a[s],I;if(c&&c.oRequestCalls&&c.oRequestCalls[i]){I=c.oRequestCalls[i];}return I;};}return new A();});sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI',["sap/ushell/appRuntime/ui5/AppRuntimePostMessage","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A,a){"use strict";function b(){this.getHandlers=function(){return A.getHandlers();};this.registerCommHandlers=function(c){var i=A.registerCommHandlers(c);a.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.subscribe",i);};this.registerCommunicationHandler=function(k,c){var i=A.registerCommunicationHandler(k,c);a.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.subscribe",i);};this._getPostMesageInterface=function(s,i){return A._getPostMesageInterface(s,i);};}return new b();});sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntimeService',["sap/ushell/appRuntime/ui5/AppCommunicationMgr"],function(A){"use strict";function a(){this.sendMessageToOuterShell=function(m,p,r){return A.sendMessageToOuterShell(m,p,r);};}return new a();},false);sap.ui.predefine('sap/ushell/appRuntime/ui5/SessionHandlerAgent',["sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ui/thirdparty/jquery"],function(A,a,q){"use strict";function S(){this.init=function(){var t=this;A.registerCommunicationHandler("sap.ushell.sessionHandler",{oInboundActions:{"logout":{executeServiceCallFn:function(m){return t.handleLogoutEvent(m);}},"extendSessionEvent":{executeServiceCallFn:function(m){return t.handleExtendSessionEvent(m);}}}});this.attachUserEvents();this.userActivityHandler();};this.handleLogoutEvent=function(){var d=new q.Deferred();this.detachUserEvents();sap.ushell.Container.logout().then(function(){return d.resolve().promise();});return d.promise();};this.handleExtendSessionEvent=function(){sap.ushell.Container.sessionKeepAlive();return new q.Deferred().resolve().promise();};this.attachUserEvents=function(){q(document).on("mousedown.sessionTimeout mousemove.sessionTimeout",this.userActivityHandler.bind(this));q(document).on("keyup.sessionTimeout",this.userActivityHandler.bind(this));q(document).on("touchstart.sessionTimeout",this.userActivityHandler.bind(this));};this.detachUserEvents=function(){q(document).off("mousedown.sessionTimeout mousemove.sessionTimeout");q(document).off("keydown.sessionTimeout");q(document).off("touchstart.sessionTimeout");};this.userActivityHandler=function(e){if(this.oUserActivityTimer!==undefined){return;}var t=this;this.oUserActivityTimer=setTimeout(function(){a.sendMessageToOuterShell("sap.ushell.sessionHandler.notifyUserActive",{});t.oUserActivityTimer=undefined;},1000);};}var s=new S();return s;});sap.ui.predefine('sap/ushell/appRuntime/ui5/renderers/fiori2/RendererExtensions',['sap/ushell/EventHub','sap/base/util/ObjectPath'],function(E,O){"use strict";function _(C){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"});},0);E.emit("RendererLoaded",{rendererName:"fiori2"});}function a(x,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",x,D);},0);}function b(I,L,x){}function c(I,L,x){}function d(I,L,x){}function e(I,L,x){}function f(B,L,x){}function g(B,L,x){}function h(C,L,x){}function i(L,x){}function j(I,L,x){}function k(I,L,x){}function l(I,L,x){}function m(I,L,x){}function n(){return{};}function o(I,L,T,x){}function p(C,S){}function q(x){}function r(T){}function s(L,V){}function t(H){}function u(F){}function v(){}function R(){this.addHeaderItem=d;this.setHeaderItemVisibility=o;this.addSubHeader=b;this.removeSubHeader=c;this.addHeaderEndItem=l;this.removeHeaderItem=e;this.removeHeaderEndItem=m;this.addEndUserFeedbackCustomUI=p;this.addOptionsActionSheetButton=f;this.removeOptionsActionSheetButton=g;this.setFooter=u;this.removeFooter=v;this.addUserPreferencesEntry=q;this.setHeaderTitle=r;this.setHeaderHiding=t;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=j;this.removeFloatingActionButton=k;this.setLeftPaneContent=h;this.removeLeftPaneContent=i;this.setLeftPaneVisibility=s;this.getConfiguration=n;}var w=new R();var U={publishExternalEvent:a,init:_};O.set("sap.ushell.renderers.fiori2.utils",U);O.set("sap.ushell.renderers.fiori2.RendererExtensions",w);return w;},false);sap.ui.predefine('sap/ushell/appRuntime/ui5/services/AppDelegationBootstrap',["sap/ushell/appRuntime/ui5/services/TunnelsAgent"],function(t){"use strict";function A(){this.init=function(){};this.bootstrap=function(){t.reflectEvents({"addlistener":{iInterface:document,sFuncName:"addEventListener",fnProxy:function(e,c,u){var C={};if(c.getPairedInterface){C={pairedInterface:c.getPairedInterface()};}else{C=c;}return[e,C,u];},fnSpy:function(e){return e==="click"||e==="keypress";}},"removelistener":{iInterface:document,sFuncName:"removeEventListener",fnProxy:function(e,c,u){var C={};if(c.getPairedInterface){C={pairedInterface:c.getPairedInterface()};}else{C=c;}return[e,C,u];},fnSpy:function(e){return e==="click"||e==="keypress";}},"appOpening":{iInterface:sap.ui.getCore().getEventBus(),sFuncName:"subscribe",fnSpy:function(p,e){return p==="launchpad"&&e==="appOpening";}}});};}return new A();},true);sap.ui.predefine('sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent',["sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/base/util/UriParameters","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/ushell/appRuntime/ui5/services/TunnelsAgent","sap/ushell/appRuntime/ui5/services/AppDelegationBootstrap"],function(A,a,U,b,q,t,d){"use strict";function c(C){var e=this,f,g,o={},r,R,h={};this.getAppInfo=function(m,i,j){sap.ui.require([m.replace(/\./g,"/")],function(f){e.init(f,i,j);});};this.init=function(i,j,k){f=i;g=j;R=k;A.registerCommHandlers({"sap.ushell.services.appLifeCycle":{"oInboundActions":{"create":{executeServiceCallFn:function(m){var M=JSON.parse(m.oMessage.data),s=new U(M.body.sUrl).get("sap-ui-app-id");window.hasher.replaceHash(M.body.sHash);e.create(s,M.body.sUrl);return new q.Deferred().resolve().promise();}},"destroy":{executeServiceCallFn:function(m){var M=JSON.parse(m.oMessage.data);e.destroy(M.body.sCacheId);return new q.Deferred().resolve().promise();}},"store":{executeServiceCallFn:function(m){var M=JSON.parse(m.oMessage.data);e.store(M.body.sCacheId);return new q.Deferred().resolve().promise();}},"restore":{executeServiceCallFn:function(m){var M=JSON.parse(m.oMessage.data);window.hasher.replaceHash(M.body.sHash);e.restore(M.body.sCacheId);return new q.Deferred().resolve().promise();}}}},"sap.ushell.eventDelegation":{"oInboundActions":{"registerEventHandler":{executeServiceCallFn:function(s){var E=JSON.parse(s.oMessageData.body.sEventObject),l=E.eventKey,m=E.eventData;if(h.hasOwnProperty(l)){var n=h[l];for(var p=0;p<n.length;p++){n[p](m);}}return new q.Deferred().resolve().promise();}}}}});this.initialSetup();};this.initialSetup=function(){d.bootstrap();a.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.setup",{isStateful:true,isKeepAlive:true,lifecycle:{bActive:true,bSwitch:true,bStorageIdentifier:true},settings:{bTheme:true,bLocal:true},session:{bSignOffSupport:true,bExtendSessionSupport:true}});};this.restore=function(s){var i=o[s],j=i.getComponentInstance();i.setVisible(true);if(j){if(j.restore){j.restore();}if(j.getRouter&&j.getRouter()&&j.getRouter().initialize){j.getRouter().initialize();}r=i;}};this.store=function(s){var i=r,j;o[s]=i;j=i.getComponentInstance();i.setVisible(false);if(j){if(j.suspend){j.suspend();}if(j.getRouter&&j.getRouter()){j.getRouter().stop();}}};this.getURLParameters=function(u){return new Promise(function(i,j){if(u.hasOwnProperty("sap-intent-param")){var s=u["sap-intent-param"];a.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppStateData",{"sAppStateKey":s}).then(function(p){delete u["sap-intent-param"];var k=q.extend({},u,(new b("?"+p)).query(true),true);i(k);},function(E){i(u);});}else{i(u);}});};this.create=function(i,u){var j=new Promise(function(k){f.getAppInfo(i).then(function(l){k(l);});}).then(function(k){e.getURLParameters(new b(u).query(true)).then(function(l){g(i,l,k).then(function(m){R(m);});});});return j;};this.setComponent=function(i){r=i;};this.destroy=function(s){if(s){if(o[s]===r){r=undefined;}o[s].destroy();delete o[s];}else if(r){r.destroy();r=undefined;}};this.jsonStringifyFn=function(j){var s=JSON.stringify(j,function(k,v){return(typeof v==="function")?v.toString():v;});return s;};}return new c();},true);sap.ui.predefine('sap/ushell/appRuntime/ui5/services/TunnelsAgent',["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A){"use strict";function T(){var t={},a=this;this.reflectEvents=function(s){for(var S in s){if(s.hasOwnProperty(S)){this.reflectEventEntry(S,s[S]);}}};this.reflectEventEntry=function(s,S){var i=S.iInterface,f=S.sFuncName,b=s,c=S.fnSpy,p=S.fnProxy,e="",C=function(){var o=arguments,d=c.apply(undefined,arguments);if(p){o=p.apply(undefined,arguments);}if(d){a.callTunnel({tunnelName:b,oData:o});}};if(!S.iInterface){e+="strategy "+s+" is missing mandatory property 'iInterface'.\n";}if(!S.sFuncName){e+="strategy "+s+" is missing mandatory property 'sFuncName'.\n";}if(e){throw e;}this.replace({iInterface:i,sFuncName:f,fnCallback:C,sWrap:"after"});};this.getCallTunnelFunction=function(){var t={},a=this;return function(p){var f=p.tunnelName,o=p.oData;if(!t[f]){a.getTunnel(f).done(function(r){t[f]=r.endPoint;t[f].apply(undefined,o);});}else{t[f].apply(undefined,o);}};};this.callTunnel=function(p){var f=p.tunnelName,o=p.oData;return new Promise(function(r){if(!t[f]){a.getTunnel(f).done(function(R){t[f]=R.endPoint;t[f].apply(undefined,o).done(function(d){r(d);});});}else{t[f].apply(undefined,o).done(function(d){r(d);});}});};this.replace=function(p){var o=p.iInterface[p.sFuncName],w=p.sWrap;p.iInterface[p.sFuncName]=function(){if(w==="before"){o.apply(this,arguments);}p.fnCallback.apply(undefined,arguments);if(w==="after"){o.apply(this,arguments);}};return{getOriginal:function(){return o;}};};this.useInterface=function(d){var i=d.name,c=d.callback,p=d.params;var C="sap.ushell.tunnelRegistry."+i;A.sendMessageToOuterShell(C,p).done(c);};this.getTunnel=function(s){var c="sap.ushell.tunnelRegistry."+s;return A.sendMessageToOuterShell(c,{});};this.usePairedInterface=function(c){var s=c.sService,m=c.sMethodName,p=c.fnPackArgs,C=s+"."+m;var b=function(){var P=p.apply(undefined,arguments);return A.sendMessageToOuterShell(C,P);};b.getPairedInterface=function(){return[s,m].join('.');};return b;};}return new T();},true);sap.ui.predefine('sap/ushell/bootstrap/common/common.create.configcontract.core',["sap/ui/thirdparty/URI"],function(U){"use strict";var d={};function c(m){var G={};function a(M,p){var P=p.split("/");var s=P.slice(0,P.length-1).join("/");var l=P.pop();if(M.hasOwnProperty(s)){return M[s][l];}var D=P.reduce(function(o,h){if(!o||!o.hasOwnProperty(h)){return{};}return o[h];},m);M[s]=D;return D[l];}function b(p,D){var s=a(G,p);d[p]=D;return s!==undefined?s:D;}function e(p,o){var E=b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined);var P=b("renderers/fiori2/componentData/config/applications/Shell-home/"+p,undefined);var O=b("renderers/fiori2/componentData/config/applications/Shell-home/"+o,undefined);P=(E===false)?false:P;P=(P!==undefined)?P:E;if(E===undefined||E){if(P===false){return false;}return(O!==undefined)?O:P;}return false;}function f(){var p="renderers/fiori2/componentData/config/enableBackGroundShapes";var E=a(G,p);if(E===undefined){E=!b("ushell/spaces/enabled",false);}d[p]=!!E;return!!E;}var C={core:{extension:{enableHelp:b("renderers/fiori2/componentData/config/enableHelp",false),EndUserFeedback:b("services/EndUserFeedback/config/enabled",true),SupportTicket:b("services/SupportTicket/config/enabled",false)},navigation:{enableInPlaceForClassicUIs:{GUI:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/GUI",false),WDA:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WDA",false),WCF:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WCF",true)},enableWebguiLocalResolution:true,enableWdaLocalResolution:true,flpURLDetectionPattern:b("services/ClientSideTargetResolution/config/flpURLDetectionPattern","[/]FioriLaunchpad.html[^#]+#[^-]+?-[^-]+")},spaces:{enabled:b("ushell/spaces/enabled",false),configurable:b("ushell/spaces/configurable",false)},darkMode:{enabled:b("ushell/darkMode/enabled",false),supportedThemes:b("ushell/darkMode/supportedThemes",[{dark:"sap_fiori_3_dark",light:"sap_fiori_3"}])},productSwitch:{enabled:!!b("ushell/productSwitch/url",""),url:b("ushell/productSwitch/url","")},shellHeader:{application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,showLogo:false,ShellAppTitleState:undefined,rootIntent:b("renderers/fiori2/componentData/config/rootIntent",""),title:""},userPreferences:{dialogTitle:"Settings",isDetailedEntryMode:false,activeEntryPath:null,entries:[],profiling:[]},shell:{cacheConfiguration:b("renderers/fiori2/componentData/config/cacheConfiguration",{}),enableAbout:b("renderers/fiori2/componentData/config/enableAbout",true),enablePersonalization:b("renderers/fiori2/componentData/config/enablePersonalization",b("renderers/fiori2/componentData/config/applications/Shell-home/enablePersonalization",true)),enableRecentActivity:b("renderers/fiori2/componentData/config/enableRecentActivity",true),enableRecentActivityLogging:b("renderers/fiori2/componentData/config/enableRecentActivityLogging",true),enableFiori3:true,model:{enableSAPCopilotWindowDocking:undefined,enableBackgroundShapes:f(),personalization:undefined,contentDensity:undefined,setTheme:undefined,userDefaultParameters:undefined,disableHomeAppCache:undefined,enableHelp:undefined,enableTrackingActivity:undefined,searchAvailable:false,searchFiltering:true,showEndUserFeedback:false,searchTerm:"",isPhoneWidth:false,enableNotifications:b("services/Notifications/config/enabled",false),enableNotificationsUI:false,notificationsCount:0,currentViewPortState:"Center",migrationConfig:undefined,allMyAppsMasterLevel:undefined,userStatus:undefined,userStatusUserEnabled:true,shellAppTitleData:{currentViewInPopover:"navigationMenu",enabled:false,showGroupsApps:false,showCatalogsApps:false,showExternalProvidersApps:false},userImage:{personPlaceHolder:"sap-icon://person-placeholder",account:"sap-icon://account"},currentState:{stateName:"blank",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:false,showRecentActivity:true,search:"",paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]}}},home:{animationRendered:false,disableSortedLockedGroups:b("renderers/fiori2/componentData/config/applications/Shell-home/disableSortedLockedGroups",false),draggedTileLinkPersonalizationSupported:true,editTitle:false,enableHomePageSettings:b("renderers/fiori2/componentData/config/applications/Shell-home/enableHomePageSettings",true),enableRenameLockedGroup:b("renderers/fiori2/componentData/config/applications/Shell-home/enableRenameLockedGroup",false),enableTileActionsIcon:b("renderers/fiori2/componentData/config/enableTileActionsIcon",b("renderers/fiori2/componentData/config/applications/Shell-home/enableTileActionsIcon",false)),enableTilesOpacity:b("services/ClientSideTargetResolution/config/enableTilesOpacity",b("renderers/fiori2/componentData/config/applications/Shell-home/enableTilesOpacity",true)),enableTransientMode:b("ushell/home/enableTransientMode",false),featuredGroup:{enable:b("ushell/home/featuredGroup/enable",false),frequentCard:b("ushell/home/featuredGroup/frequentCard",true)&&b("ushell/home/featuredGroup/enable",false),recentCard:b("ushell/home/featuredGroup/recentCard",true)&&b("ushell/home/featuredGroup/enable",false)},gridContainer:b("ushell/home/gridContainer",false),homePageGroupDisplay:b("renderers/fiori2/componentData/config/applications/Shell-home/homePageGroupDisplay","scroll"),isInDrag:false,optimizeTileLoadingThreshold:b("renderers/fiori2/componentData/config/applications/Shell-home/optimizeTileLoadingThreshold",100),sizeBehavior:b("renderers/fiori2/componentData/config/sizeBehavior","Responsive"),sizeBehaviorConfigurable:b("renderers/fiori2/componentData/config/sizeBehaviorConfigurable",false),wrappingType:b("ushell/home/tilesWrappingType","Normal"),segments:b("renderers/fiori2/componentData/config/applications/Shell-home/segments",undefined),tileActionModeActive:false},catalog:{enabled:b("renderers/fiori2/componentData/config/enablePersonalization",b("renderers/fiori2/componentData/config/applications/Shell-home/enablePersonalization",true))||b("renderers/fiori2/componentData/config/enableAppFinder",false),appFinderDisplayMode:b("renderers/fiori2/componentData/config/applications/Shell-home/appFinderDisplayMode",undefined),easyAccessNumbersOfLevels:b("renderers/fiori2/componentData/config/applications/Shell-home/easyAccessNumbersOfLevels",undefined),enableCatalogSearch:b("renderers/fiori2/componentData/config/enableSearchFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableSearchFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSearch",true))),enableCatalogSelection:b("renderers/fiori2/componentData/config/enableCatalogSelection",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSelection",true)),enableCatalogTagFilter:b("renderers/fiori2/componentData/config/enableTagFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogTagFilter",true)),enableEasyAccess:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined),enableEasyAccessSAPMenu:(b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)===false)?false:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessSAPMenu",b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)),enableEasyAccessSAPMenuSearch:e("enableEasyAccessSAPMenu","enableEasyAccessSAPMenuSearch"),enableEasyAccessUserMenu:(b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)===false)?false:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenu",b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)),enableEasyAccessUserMenuSearch:e("enableEasyAccessUserMenu","enableEasyAccessUserMenuSearch"),enableHideGroups:b("renderers/fiori2/componentData/config/enableHideGroups",b("renderers/fiori2/componentData/config/applications/Shell-home/enableHideGroups",true)),sapMenuServiceUrl:undefined,userMenuServiceUrl:b("renderers/fiori2/componentData/config/applications/Shell-home/userMenuServiceUrl",undefined)}}};return C;}function g(){return d;}return{createConfigContract:c,getDefaultConfiguration:g};},false);sap.ui.predefine('sap/ushell/navigationMode',[],function(){"use strict";var e={};var _=function(E){var i=true;if(E){if(typeof E!=="object"){i=false;}else{Object.keys(E).forEach(function(k){if(["GUI","WDA","WCF"].indexOf(k)===-1){i=false;}else if(typeof E[k]!=="boolean"){i=false;}});}}if(!i){jQuery.sap.log.error("Invalid parameter: 'enableInPlaceForClassicUIs' must be an object; allowed properties: GUI|WDA, type boolean","Actual parameter: "+JSON.stringify(E),"sap.ushell.services.navigationMode");}};e._isLegacyApplicationType=function(A){switch(A){case"WDA":case"TR":case"NWBC":case"WCF":return true;default:return false;}};var a=function(A){switch(A){case"TR":return"GUI";case"WDA":return"WDA";case"WCF":return"WCF";default:return undefined;}};var b=function(E,A){if(jQuery.isPlainObject(E)){return E[a(A)];}return false;};e.compute=function(n,E,s,A,o){var i,l,c=["inplace","explace"];_(o);var N={};if(c.indexOf(E)>=0){N["sap-ushell-next-navmode"]=E;}if(c.indexOf(s)>=0){i=e._getInternalNavigationMode(s,n);jQuery.sap.log.debug("Navigation mode was forced to "+i,"because sap-ushell-navmode parameter was set to "+s+" for target with applicationType: "+A,"sap.ushell.navigationMode");N.navigationMode=i;N.explicitNavMode=true;return N;}l=e._isLegacyApplicationType(A)&&e._isLegacyApplicationType(n);if(b(o,n)===true&&!l){N.navigationMode="embedded";}return N;};e._getInternalNavigationMode=function(E,A){var i={SAPUI5:{inplace:"embedded",explace:"newWindowThenEmbedded"},WDA:{inplace:"embedded",explace:"newWindowThenEmbedded"},TR:{inplace:"embedded",explace:"newWindowThenEmbedded"},URL:{inplace:"embedded",explace:"newWindow"},WCF:{inplace:"embedded",explace:"newWindowThenEmbedded"}};if(!i.hasOwnProperty(A)){jQuery.sap.log.error(A+" is not a valid application type","expected one of "+Object.keys(i).join(", "),"sap.ushell.navigationMode");return null;}if(E!=="inplace"&&E!=="explace"){jQuery.sap.log.error(E+" is not a valid external navigation mode","expected one of 'inplace', 'explace'","sap.ushell.navigationMode");return null;}return i[A][E];};e.getExternalNavigationMode=function(i){var E={embedded:"inplace",newWindowThenEmbedded:"explace",replace:"inplace",newWindow:"explace"};if(!E.hasOwnProperty(i)){jQuery.sap.log.error(i+" is not a recognized internal navigation mode","expected one of "+Object.keys(E).join(","),"sap.ushell.navigationMode");return null;}return E[i];};var w=["NWBC","WDA","TR","WCF"];e.getNavigationMode=function(r,c){var A=r.additionalInformation,s=r.applicationType,u,U;if(w.indexOf((c||{}).applicationType)>-1&&!(c||{}).explicitNavMode){return'newWindowThenEmbedded';}if(r.appCapabilities&&r.appCapabilities.navigationMode){return r.appCapabilities.navigationMode;}if((A===null||typeof A==="string"||typeof A==="undefined")&&(s==="URL"||s==="SAPUI5")){if(A&&A.indexOf("managed=")===0){if(A==="managed=FioriWave1"){return"embedded";}if(A==="managed="){return"newWindow";}return undefined;}if(A&&A.indexOf("SAPUI5.Component=")===0){u="[a-zA-Z0-9_]+";U=["^SAPUI5.Component=",u,"([.]",u,")*$"].join("");if(!(new RegExp(U)).test(A)){jQuery.sap.log.warning(["The UI5 component name in",A,"is not valid.","Please use names satisfying",U].join(" "));}return"embedded";}return"newWindow";}if(w.indexOf(s)>-1){return"newWindowThenEmbedded";}return undefined;};e.computeNavigationModeForHomepageTiles=function(A,s,i){var r={applicationType:A,additionalInformation:s};if(w.indexOf(A)>-1&&i){return"embedded";}return this.getNavigationMode(r);};return e;},true);sap.ui.predefine('sap/ushell/resources',['sap/ui/model/resource/ResourceModel'],function(R){"use strict";var r={};r.getTranslationModel=function(l){var t=new R({bundleUrl:jQuery.sap.getModulePath("sap.ushell.renderers.fiori2.resources.resources",".properties"),bundleLocale:l});return t;};r.i18nModel=r.getTranslationModel(sap.ui.getCore().getConfiguration().getLanguage());r.i18n=r.i18nModel.getResourceBundle();return r;},true);sap.ui.predefine('sap/ushell/services/AppConfiguration',["sap/ushell/utils","sap/ushell/EventHub","sap/base/Log","sap/ui/util/Mobile","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/i18n/ResourceBundle","sap/ushell/resources","sap/ui/core/IconPool","sap/m/library"],function(u,E,L,M,q,O,R,r,I,m){"use strict";var B=m.ButtonType;function A(){var o={},a=true,c=null,b=[],d=[];E.on("AppRendered").do(e.bind(this));function e(){a=false;if(d.length){for(var i=0;i<d.length;i++){d[i]();}d.length=0;}}this.addActivity=function(g){var C=sap.ushell.Container;return C&&C.getService("UserRecents").addActivity(g);};this.setApplicationInInitMode=function(){a=true;};this.getApplicationRequestQueue=function(){return d;};this.getCurrentApplication=function(){return c;};this.getCurrentAppliction=this.getCurrentApplication;this.getMetadata=function(g){if(!g){g=c;}if(g){var h=hasher&&hasher.getHash?hasher.getHash():"",k=this._processKey(h);if(!(o.hasOwnProperty(k))||!o[k].complete){this.addMetadata(g,k);}if(!o[k]){o[k]={complete:false};}if(!o[k].title){o[k].title=g.text||r.i18n.getText("default_app_title");}return o[k];}return{};};this._processKey=function(C){var i=C.split("?")[0],p=C.split("?")[1],s,P={},S,g="",h="",j;if(p){s=p.split("&");s.forEach(function(k){var l=k.split("=");P[l[0]]=l[1];});S=Object.keys(P).sort();S.forEach(function(k,l){h=l?"&":"?";g+=h+k+"="+P[k];});return i+g;}j=sap.ushell.Container.getService("URLParsing").parseShellHash(C);i=j?j.semanticObject+"-"+j.action:"";return i;};this.setCurrentApplication=function(g){c=g;if(d.length){d.length=0;}};this.setHeaderHiding=function(){L.warning("Application configuration headerHiding property is deprecated and has no effect");};this.addApplicationSettingsButtons=function(g){if(a){d.push(function(){f(g);});}else{f(g);}};function f(g){var i,h=[],j=sap.ushell.Container.getRenderer("fiori2");for(i=0;i<g.length;i++){var C=g[i];h.push(C.getId());C.setIcon(C.getIcon()||I.getIconURI("customize"));if(r.i18n.getText("userSettings")===C.getProperty("text")){C.setProperty("text",r.i18n.getText("userAppSettings"));}C.setType(B.Unstyled);}if(sap.ushell.Container&&j){if(b.length){j.hideActionButton(b,true);}b=h;j.showActionButton(h,true,undefined,true);}}this.setWindowTitle=function(t){window.document.title=t;};this.setIcons=function(i){M.setIcons(i);};this.setApplicationFullWidth=function(v){sap.ushell.components.applicationIntegration.AppLifeCycle.setApplicationFullWidth(v);};this.getSettingsControlAsync=function(){var D=new q.Deferred();sap.ui.require(["sap/ushell/ui/footerbar/SettingsButton"],function(S){D.resolve(new S());});return D.promise();};this.getSettingsControl=function(){var s="sap/ushell/ui/footerbar/SettingsButton",g="sap.ushell.ui.footerbar.SettingsButton",S=sap.ui.require(s);if(S){return new S();}q.sap.require(g);S=O.get(g||"");return new S();};this.getApplicationName=function(g){var h,s=(g&&g.additionalInformation)||null;if(s){h=/^SAPUI5\.Component=(.+)$/i.exec(s);if(h){return h[1];}}return null;};this.getApplicationUrl=function(g){var U=(g&&g.url)||null,s="P_TCODE",i;if(U){if(g.applicationType==="NWBC"&&U.indexOf(s)){return U;}i=U.indexOf("?");if(i>=0){U=U.slice(0,i);}if(U.slice(-1)!=="/"){U+="/";}}return U;};this.getPropertyValueFromConfig=function(C,p,g){var v;if(g&&C.hasOwnProperty(p+"Resource")){v=g.getText(C[p+"Resource"]);}else if(C.hasOwnProperty(p)){v=C[p];}return v;};this.getPropertyValueFromManifest=function(l,p,P){var s=p[P].manifestEntryKey,g=p[P].path,h=l.getManifestEntry(s);return O.get(g||"",h);};this.addMetadata=function(g,k){try{var C=this.getApplicationName(g),U=this.getApplicationUrl(g),l,h,p={"fullWidth":{"manifestEntryKey":"sap.ui","path":"fullWidth"},"hideLightBackground":{"manifestEntryKey":"sap.ui","path":"hideLightBackground"},"title":{"manifestEntryKey":"sap.app","path":"title"},"icon":{"manifestEntryKey":"sap.ui","path":"icons.icon"},"favIcon":{"manifestEntryKey":"sap.ui","path":"icons.favIcon"},"homeScreenIconPhone":{"manifestEntryKey":"sap.ui","path":"icons.phone"},"homeScreenIconPhone@2":{"manifestEntryKey":"sap.ui","path":"icons.phone@2"},"homeScreenIconTablet":{"manifestEntryKey":"sap.ui","path":"icons.tablet"},"homeScreenIconTablet@2":{"manifestEntryKey":"sap.ui","path":"icons.tablet@2"},"startupImage320x460":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x920"},"startupImage640x920":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x920"},"startupImage640x1096":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x1096"},"startupImage768x1004":{"manifestEntryKey":"sap.ui","path":"icons.startupImage768x1004"},"startupImage748x1024":{"manifestEntryKey":"sap.ui","path":"icons.startupImage748x1024"},"startupImage1536x2008":{"manifestEntryKey":"sap.ui","path":"icons.startupImage1536x2008"},"startupImage1496x2048":{"manifestEntryKey":"sap.ui","path":"icons.startupImage1496x2048"},"compactContentDensity":{"manifestEntryKey":"sap.ui5","path":"contentDensities.compact"},"cozyContentDensity":{"manifestEntryKey":"sap.ui5","path":"contentDensities.cozy"}},i,s,j,n,P,t,v,w=g&&g.componentHandle;if(k){if(!(o.hasOwnProperty(k))){o[k]={complete:false};}if(!o[k].complete){if(w){l=w.getMetadata();}else if(C){L.warning("No component handle available for '"+C+"'; SAPUI5 component metadata is incomplete",null,"sap.ushell.services.AppConfiguration");return;}if(l){h=l.getConfig();n=(l.getManifest()!==undefined);o[k].complete=true;if(h){t=h.resourceBundle||"";if(t){if(t.slice(0,1)!=="/"){t=U+t;}v=R.create({url:t,locale:sap.ui.getCore().getConfiguration().getLanguage()});}}for(P in p){if(p.hasOwnProperty(P)){if(n){o[k][P]=this.getPropertyValueFromManifest(l,p,P);}if(h&&o[k][P]===undefined){o[k][P]=this.getPropertyValueFromConfig(h,P,v);}}}o[k].version=l.getVersion();o[k].technicalName=l.getComponentName();}else if(u.isApplicationTypeEmbeddedInIframe(g.applicationType)){var W="/~canvas;window=app/wda/",x=g.url.indexOf(W),y="/bc/gui/sap/its/webgui",z=g.url.indexOf(y);if(x>=0){o[k].technicalName=g.url.substring((x+W.length),g.url.indexOf("/",(x+W.length)));}o[k].complete=true;if(z>=0){var D="etransaction=",F=g.url.indexOf(D,z+y.length),G=g.url.indexOf("&",F),H=(G>=0)?G:g.url.length;o[k].technicalName=decodeURIComponent(g.url.substring(F+D.length,H))+" (TCODE)";}}else{L.warning("No technical information for the given application could be determined",null,"sap.ushell.services.AppConfiguration");}}i=["favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"];s=(U&&U[U.length-1]==="/")?U.substring(0,U.length-1):U;j=function(U){if(U.match(/^https?:\/\/.*/)){return false;}return U&&U[0]!=="/";};i.forEach(function(K){var N=o[k][K],Q=null;if(N){Q=j(N)?s+"/"+N:N;}o[k][K]=Q;});}}catch(J){L.warning("Application configuration could not be parsed");}};}return new A();},true);sap.ui.predefine('sap/ushell/services/AppLifeCycle',["sap/ui/base/EventProvider","sap/ushell/TechnicalParameters"],function(E,T){"use strict";var S="appLoaded";function A(a,c,p,C){var o,e,v;this.getCurrentApplication=function(){return o;};this.attachAppLoaded=function(d,f,l){e.attachEvent(S,d,f,l);};this.detachAppLoaded=function(f,l){e.detachEvent(S,f,l);};e=new E();v=sap.ui.getCore().byId("viewPortContainer");if(!v||typeof v.attachAfterNavigate!=="function"){jQuery.sap.log.error("Error during instantiation of AppLifeCycle service","Could not attach to afterNavigate event","sap.ushell.services.AppLifeCycle");return;}v.attachAfterNavigate(function(b){var d,f,s,g,h,H=false;if(b.mParameters.toId.indexOf("applicationShellPage")===0){f=b.mParameters.to.getApp();}else if(b.mParameters.toId.indexOf("application")===0){f=b.mParameters.to;}if(f&&typeof f.getComponentHandle==="function"&&f.getComponentHandle()){g=f.getComponentHandle().getInstance();}else if(f){d=f.getAggregation("child");if(d){g=d.getComponentInstance();}}else{g=sap.ui.getCore().getComponent(b.mParameters.to.getComponent());}if(g){h=g.getId();H=h.indexOf("Shell-home-component")!==-1||h.indexOf("Shell-appfinder-component")!==-1;}s=f&&typeof f.getApplicationType==="function"&&f.getApplicationType();if((!s||s==="URL")&&g){s="UI5";}o={applicationType:s,componentInstance:g,homePage:H,getTechnicalParameter:function(P){return T.getParameterValue(P,g,f,s);},getIntent:function(){var i=hasher&&hasher.getHash();if(!i){return Promise.reject("Could not identify current application hash");}var j=sap.ushell.Container.getServiceAsync("URLParsing");return j.then(function(P){return P.parseShellHash(i);});}};setTimeout(function(){e.fireEvent(S,o);},0);});}A.hasNoAdapter=true;return A;},true);sap.ui.predefine('sap/ushell/services/AppState',["sap/ushell/services/_AppState/WindowAdapter","sap/ushell/services/_AppState/SequentializingAdapter","sap/ushell/services/_AppState/AppState","sap/ushell/services/_AppState/Sequentializer","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/utils","sap/ui/thirdparty/jquery"],function(W,S,A,a,b,u,q){"use strict";function g(C){return u.isDefined(C)&&u.isDefined(C.transient)?!!C.transient:true;}function c(o,C,p,d){this._oConfig=d&&d.config;this._sSessionKey="";this._oAdapter=new S(o);this._oAdapter=new W(this,this._oAdapter,d);}c.prototype._getSessionKey=function(){if(!this._sSessionKey){this._sSessionKey=this._getGeneratedKey();}return this._sSessionKey;};c.prototype.getAppState=function(k){var d=new q.Deferred(),t=this,o;this._loadAppState(k).done(function(k,D,p,P){o=new A(t,k,false,D,undefined,undefined,undefined,p,P);d.resolve(o);}).fail(function(){o=new A(t,k);d.resolve(o);});return d.promise();};c.prototype._getGeneratedKey=function(){var s=sap.ushell.Container.getService("Personalization").getGeneratedKey();s=("AS"+s).substring(0,40);return s;};c.prototype.createEmptyAppState=function(C,t,p,P){var k=this._getGeneratedKey(),o,s="",d="",U=u.isDefined(t)?t:g(this._oConfig);if(p!==undefined&&!this.isPersistencyMethodSupported(p)){p=undefined;P=undefined;}if(C){if(!(C instanceof sap.ui.core.UIComponent)){throw new Error("oComponent passed must be a UI5 Component");}if(C.getMetadata&&C.getMetadata()&&typeof C.getMetadata().getName==="function"){s=C.getMetadata().getName()||"";}if(!s&&C.getMetadata&&C.getMetadata().getComponentName){s=C.getMetadata().getComponentName();}if(C.getMetadata&&C.getMetadata()&&typeof C.getMetadata().getManifest==="function"&&typeof C.getMetadata().getManifest()==="object"&&typeof C.getMetadata().getManifest()["sap.app"]==="object"){d=C.getMetadata().getManifest()["sap.app"].ach||"";}}if(U===true){p=P=undefined;}else if(p===undefined&&this.isPersistencyMethodSupported(b.PersonalState)){p=b.PersonalState;P=undefined;}o=new A(this,k,true,undefined,s,d,U,p,P);return o;};c.prototype.createEmptyUnmodifiableAppState=function(){var k=this._getGeneratedKey(),o;o=new A(this,k,false);return o;};c.prototype._saveAppState=function(k,d,s,C,t,p,P){var e=this._getSessionKey(),U=u.isDefined(t)?t:g(this._oConfig);if(U){p=undefined;P=undefined;}else if(p!=undefined){if(!this.isPersistencyMethodSupported(p)){if(this.isPersistencyMethodSupported(b.PersonalState)){p=b.PersonalState;}else{p=undefined;}P=undefined;}}return this._oAdapter.saveAppState(k,e,d,s,C,U,p,P);};c.prototype._loadAppState=function(k){return this._oAdapter.loadAppState(k);};c.prototype.deleteAppState=function(k){return this._oAdapter.deleteAppState(k);};c._getSequentializer=function(){return new a();};c.prototype.getSupportedPersistencyMethods=function(){if(this._oAdapter.getSupportedPersistencyMethods){return this._oAdapter.getSupportedPersistencyMethods();}return[];};c.prototype.isPersistencyMethodSupported=function(p){var s=this.getSupportedPersistencyMethods();if(s.length>0&&p!==undefined){return(s.indexOf(p)>=0);}else{return false;}};c.prototype.makeStatePersistent=function(k,p,P){var d=new q.Deferred(),t=this;if(this.getSupportedPersistencyMethods().length===0){return d.resolve().promise();}if(this.isPersistencyMethodSupported(p)){t.getAppState(k).done(function(o){if(o._iPersistencyMethod!==p){o.bTransient=false;o._iPersistencyMethod=p;o._oPersistencySettings=P;t._saveAppState(k,o._sData,o._sAppName,o._sACHComponent,false,p,P).done(function(){d.resolve();}).fail(function(m){d.reject(m);});}else{d.resolve();}});}else{d.reject("AppState.makeStatePersistent - adapter does not support persistence method: "+p);}return d.promise();};c.WindowAdapter=W;c.hasNoAdapter=false;return c;},true);sap.ui.predefine('sap/ushell/services/ClientSideTargetResolution',["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/AppConfiguration","sap/ushell/services/_ClientSideTargetResolution/InboundProvider","sap/ushell/services/_ClientSideTargetResolution/InboundIndex","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/Search","sap/ushell/services/_ClientSideTargetResolution/StagedLogger","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/services/_ClientSideTargetResolution/XAppStateProcessing","sap/ushell/navigationMode","sap/ushell/Config","sap/ushell/ApplicationType","sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/systemAlias","sap/ushell/TechnicalParameters","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject"],function(u,c,a,I,b,V,s,l,f,p,P,x,n,C,A,U,S,T,O,q,i){"use strict";function d(o,e,g,h){this._init.apply(this,arguments);}d.prototype._init=function(o,e,g,h){this._iLogId=0;sap.ui.lazyRequire("sap/ui/generic/app/navigation/service/SelectionVariant");if(!this._implementsServiceInterface(o)){q.sap.log.error("Cannot get Inbounds","ClientSideTargetResolutionAdapter should implement getInbounds method","sap.ushell.services.ClientSideTargetResolution");return;}this._oInboundProvider=new I(o.getInbounds.bind(o));this._oHaveEasyAccessSystemsDeferreds={userMenu:null,sapMenu:null};this._oServiceConfiguration=h;this._oAdapter=o;};d.prototype._implementsServiceInterface=function(o){if(typeof o.getInbounds==="function"){return true;}return false;};d.prototype._getURLParsing=function(){if(!this._oURLParsing){this._oURLParsing=sap.ushell.Container.getService("URLParsing");}return this._oURLParsing;};d.prototype._extractInboundFilter=function(o){if(!this._oAdapter.hasSegmentedAccess){return undefined;}if(typeof o!=="string"){return undefined;}var F=o.indexOf("#")===0?o:"#"+o;var e=this._getURLParsing().parseShellHash(F);if(!e||!e.semanticObject||!e.action){return undefined;}return[{semanticObject:e.semanticObject,action:e.action}];};d.prototype.resolveHashFragment=function(h){var t=this,D=new q.Deferred(),B=this._oAdapter.resolveHashFragmentFallback&&this._oAdapter.resolveHashFragmentFallback.bind(this._oAdapter),e=this._extractInboundFilter(h);this._oInboundProvider.getInbounds(e).then(function(g){t._resolveHashFragment(h,B,g).done(function(o){return D.resolve(o);}).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};d.prototype.resolveTileIntent=function(h){var t=this,D=new q.Deferred(),e=this._extractInboundFilter(h);this._oInboundProvider.getInbounds(e).then(function(o){t._resolveTileIntent(h,undefined,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};d.prototype.resolveTileIntentInContext=function(e,h){var o,D=new q.Deferred();o=b.createIndex(e.concat(V.getInbounds()));this._resolveTileIntent(h,undefined,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));return D.promise();};d.prototype._resolveHashFragment=function(h,B,e){var g=this._getURLParsing(),t=this,D=new q.Deferred(),F=h.indexOf("#")===0?h:"#"+h,j=g.parseShellHash(F);if(j===undefined){q.sap.log.error("Could not parse shell hash '"+h+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return D.reject().promise();}j.formFactor=u.getFormFactor();this._getMatchingInbounds(j,e,{bExcludeTileInbounds:true}).fail(function(E){q.sap.log.error("Could not resolve "+h,"_getMatchingInbounds promise rejected with: "+E,"sap.ushell.services.ClientSideTargetResolution");D.reject(E);}).done(function(m){var M;if(m.length===0){q.sap.log.warning("Could not resolve "+h,"rejecting promise","sap.ushell.services.ClientSideTargetResolution");D.reject("Could not resolve navigation target");return;}m=t._applySapNavigationScopeFilter(m,j);M=m[0];c.whenDebugEnabled(function(){function k(K,v){return this[K]===undefined?"<undefined>":v;}function r(v,w){return(v==="_original")?undefined:k.call(this,v,w);}var o=JSON.stringify(M,r,"   ");q.sap.log.debug("The following target will now be resolved",o,"sap.ushell.services.ClientSideTargetResolution");});t._resolveSingleMatchingTarget(M,B,F).done(function(o){D.resolve(o);}).fail(D.reject.bind(D));});return D.promise();};d.prototype._applySapNavigationScopeFilter=function(m,o){var e=o&&o.params&&o.params["sap-navigation-scope-filter"];if(!e){return m;}var F=m.filter(function(M){var g=O.get("inbound.signature.parameters",M);var h=g&&g["sap-navigation-scope"];if(h){return e[0]===h.defaultValue.value;}});return F.length>0?F:m;};d.prototype._resolveSingleMatchingTarget=function(m,B,F){var t=this,D=new q.Deferred(),o=this._getURLParsing(),e=o.parseShellHash(F),g=[e.semanticObject,e.action].join("-"),h=(m.inbound.resolutionResult||{}).applicationType;var E;if(this._oAdapter.resolveSystemAlias){E=this._oAdapter.resolveSystemAlias.bind(this._oAdapter);}var j=A.getEasyAccessMenuResolver(g,h);if(j){j(e,m,E).then(function(R){var N=n.compute(O.get("inbound.resolutionResult.applicationType",m),(m.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(m.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(a.getCurrentApplication()||{}).applicationType,C.last("/core/navigation/enableInPlaceForClassicUIs"));u.shallowMergeObject(R,N);R.inboundPermanentKey=m.inbound.permanentKey||m.inbound.id;D.resolve(R);},function(k){D.reject(k);});return D.promise();}var r=this._getReservedParameters(m);p.mapParameterNamesAndRemoveObjects(m);x.mixAppStateIntoResolutionResultAndRename(m,sap.ushell.Container.getService("AppState")).done(function(m){var R=function(){return t._constructFallbackResolutionResult.call(t,m,B,F);};if(A[h]){R=A[h].generateResolutionResult;}delete m.intentParamsPlusAllDefaults["sap-tag"];delete m.mappedIntentParamsPlusSimpleDefaults["sap-tag"];m.mappedDefaultedParamNames=m.mappedDefaultedParamNames.filter(function(v){return v!=="sap-tag";});var k=O.get("inbound.resolutionResult.url",m);P.executePrelaunchOperations(m,r["sap-prelaunch-operations"]).then(function(){return R(m,k,E);}).then(function(v){v.reservedParameters=r;v.inboundPermanentKey=m.inbound.permanentKey||m.inbound.id;return v;}).then(function(v){q.sap.log.debug("Intent was resolved to the following target",JSON.stringify(m.resolutionResult,null,3),"sap.ushell.services.ClientSideTargetResolution");u.shallowMergeObject(m.resolutionResult,v);D.resolve(m.resolutionResult);},function(M){if(typeof M==="string"&&M.indexOf("fallback:")>=0){t._constructFallbackResolutionResult.call(this,m,B,F).then(function(v){u.shallowMergeObject(m.resolutionResult,v);D.resolve(m.resolutionResult);},D.reject.bind(D));}else{D.reject(M);}});});return D.promise();};d.prototype._getReservedParameters=function(m){var r=T.getParameters({injectFrom:"startupParameter"}).map(function(o){return o.name;});var R=c.extractParameters(r,m.intentParamsPlusAllDefaults);T.getParameters({injectFrom:"inboundParameter"}).forEach(function(o){var e=o.name;var g=m.inbound&&m.inbound.signature&&m.inbound.signature.parameters;if(g&&Object.keys(g).length>0){var h=g[e];var j=h&&h.defaultValue&&h.defaultValue.hasOwnProperty("value");var k=h&&h.filter&&h.filter.hasOwnProperty("value");if(h&&(k||j)){if(j){R[e]=h.defaultValue.value;}else{R[e]=h.filter.value;}}else{delete R[e];}delete m.intentParamsPlusAllDefaults[e];var t=m.defaultedParamNames.indexOf(e);if(t>=0){m.defaultedParamNames.splice(t,1);}}});return R;};d.prototype._resolveTileIntent=function(h,B,o){var e=this._getURLParsing(),t=this,D=new q.Deferred(),F=h.indexOf("#")===0?h:"#"+h,g=e.parseShellHash(F);if(g===undefined){q.sap.log.error("Could not parse shell hash '"+h+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return D.reject("Cannot parse shell hash").promise();}g.formFactor=u.getFormFactor();this._getMatchingInbounds(g,o,{bExcludeTileInbounds:false}).fail(function(E){q.sap.log.error("Could not resolve "+h,"_getMatchingInbounds promise rejected with: "+E,"sap.ushell.services.ClientSideTargetResolution");D.reject(E);}).done(function(m){var M;if(m.length===0){q.sap.log.warning("Could not resolve "+h,"no matching targets were found","sap.ushell.services.ClientSideTargetResolution");D.reject("No matching targets found");return;}M=m[0];t._resolveSingleMatchingTileIntent(M,B,F).done(D.resolve.bind(D)).fail(D.reject.bind(D));});return D.promise();};d.prototype._resolveSingleMatchingTileIntent=function(m,B,F){var D=new q.Deferred(),e=(m.inbound.resolutionResult||{}).applicationType,t=this;var E;if(this._oAdapter.resolveSystemAlias){E=this._oAdapter.resolveSystemAlias.bind(this._oAdapter);}p.mapParameterNamesAndRemoveObjects(m);x.mixAppStateIntoResolutionResultAndRename(m,sap.ushell.Container.getService("AppState")).done(function(m){var r=function(){return t._constructFallbackResolutionResult.call(t,m,B,F);};if(A[e]){r=A[e].generateResolutionResult;}delete m.intentParamsPlusAllDefaults["sap-tag"];delete m.mappedIntentParamsPlusSimpleDefaults["sap-tag"];m.mappedDefaultedParamNames=m.mappedDefaultedParamNames.filter(function(h){return h!=="sap-tag";});var g=O.get("inbound.resolutionResult.url",m);r(m,g,E).then(function(R){u.shallowMergeObject(m.resolutionResult,R);var o=q.extend(true,{},m.inbound.tileResolutionResult);o.startupParameters=m.effectiveParameters;o.navigationMode=m.resolutionResult.navigationMode;if(!o.navigationMode){o.navigationMode=n.getNavigationMode(m.resolutionResult);}D.resolve(o);q.sap.log.debug("Tile Intent was resolved to the following target",JSON.stringify(o,null,3),"sap.ushell.services.ClientSideTargetResolution");},function(M){D.reject(M);});});return D.promise();};d.prototype._constructFallbackResolutionResult=function(m,B,F){var e={},D;Object.keys(m.intentParamsPlusAllDefaults).forEach(function(g){if(Array.isArray(m.intentParamsPlusAllDefaults[g])){e[g]=m.intentParamsPlusAllDefaults[g];}});D=m.mappedDefaultedParamNames||m.defaultedParamNames;if(D.length>0){e["sap-ushell-defaultedParameterNames"]=[JSON.stringify(D)];}if(typeof B!=="function"){q.sap.log.error("Cannot resolve hash fragment",F+" has matched an inbound that cannot be resolved client side and no resolveHashFragmentFallback method was implemented in ClientSideTargetResolutionAdapter","sap.ushell.services.ClientSideTargetResolution");return Promise.reject("Cannot resolve hash fragment: no fallback provided.");}q.sap.log.warning("Cannot resolve hash fragment client side",F+" has matched an inbound that cannot be resolved client side. Using fallback logic","sap.ushell.services.ClientSideTargetResolution");return new Promise(function(r,R){B(F,q.extend(true,{},m.inbound),e).done(function(o){var g={};["applicationType","additionalInformation","url","applicationDependencies","text"].forEach(function(h){if(o.hasOwnProperty(h)){g[h]=o[h];}});r(g);}).fail(R.bind(null));});};d.prototype.getDistinctSemanticObjects=function(){var D=new q.Deferred();this._oInboundProvider.getInbounds().then(function(o){var e={};o.getAllInbounds().forEach(function(g){if(typeof g.semanticObject==="string"&&g.semanticObject!=="*"&&!g.hideIntentLink&&g.semanticObject.length>0){e[g.semanticObject]=true;}});D.resolve(Object.keys(e).sort());},function(){D.reject.apply(D,arguments);});return D.promise();};d.prototype.getLinks=function(o){var N,t=this,e,m,g,D=new q.Deferred(),h;if(arguments.length===1&&i(arguments[0])){N=arguments[0];h=q.extend(true,{},N);["action","semanticObject"].forEach(function(j){if(N.hasOwnProperty(j)){h[j]=N[j];}});if(h.appStateKey){h.params=h.params||{};h.params["sap-xapp-state"]=[h.appStateKey];delete h.appStateKey;}}else if(arguments.length<=3){q.sap.log.warning("Passing positional arguments to getLinks is deprecated","Please use nominal arguments instead","sap.ushell.services.ClientSideTargetResolution");e=arguments[0];m=arguments[1];g=arguments[2];h={semanticObject:e,params:m,ignoreFormFactor:g};}else{return D.reject("invalid arguments for getLinks").promise();}this._oInboundProvider.getInbounds().then(function(j){t._getLinks(h,j).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};d.prototype._validateGetSemanticObjectLinksArgs=function(o){var e=o.semanticObject,g=o.action,h=!o.hasOwnProperty("action");if(typeof e!=="undefined"||h){if(typeof e!=="string"){q.sap.log.error("invalid input for _getLinks","the semantic object must be a string, got "+Object.prototype.toString.call(e)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}if(h&&e.match(/^\s+$/)){q.sap.log.error("invalid input for _getLinks","the semantic object must be a non-empty string, got '"+e+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}if(!h&&e.length===0){q.sap.log.error("invalid input for _getLinks","the semantic object must not be an empty string, got '"+e+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}}if(typeof g!=="undefined"){if(typeof g!=="string"){q.sap.log.error("invalid input for _getLinks","the action must be a string, got "+Object.prototype.toString.call(g)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action";}if(g.length===0){q.sap.log.error("invalid input for _getLinks","the action must not be an empty string, got '"+g+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action";}}return undefined;};d.prototype._getLinks=function(o,e){var g=o.semanticObject,h=o.action,m=o.params,w=!!o.withAtLeastOneUsedParam,t=!!o.treatTechHintAsFilter,j=o.ignoreFormFactor,k=o.hasOwnProperty("sortResultsBy")?o.sortResultsBy:"intent";if(o.hasOwnProperty("sortResultOnTexts")){q.sap.log.warning("the parameter 'sortResultOnTexts' was experimantal and is no longer supported","getLinks results will be sorted by '"+k+"'","sap.ushell.services.ClientsideTargetResolution");}var r={bExcludeTileInbounds:true};var E=this._validateGetSemanticObjectLinksArgs(o);if(o.tags){r.tags=o.tags;}if(E){return new q.Deferred().reject(E).promise();}if(g==="*"){return q.when([]);}function v(y,m){var G=y.paramsToString(m);return G?"?"+G:"";}var y=this._getURLParsing(),D=new q.Deferred(),F=u.getFormFactor(),z=y.parseParameters(v(y,m)),B={semanticObject:(g===""?undefined:g),action:h,formFactor:(j?undefined:F),params:z};if(t){B.treatTechHintAsFilter=true;}this._getMatchingInbounds(B,e,r).done(function(M){var G={},R=M.map(function(K){var L=g||K.inbound.semanticObject,N="#"+L+"-"+K.inbound.action,Q;if(L==="*"){return undefined;}if(K.inbound.action==="*"){return undefined;}if(K.inbound&&K.inbound.hasOwnProperty("hideIntentLink")&&K.inbound.hideIntentLink===true){return undefined;}if(!G.hasOwnProperty(N)){G[N]={matchingInbound:K.inbound,count:1};if(K.inbound.signature.additionalParameters==="ignored"){Q=c.filterObjectKeys(z,function($){return($.indexOf("sap-")===0)||K.inbound.signature.parameters.hasOwnProperty($);},false);}else{Q=z;}if(w){var W=Object.keys(Q).some(function($){return $.indexOf("sap-")!==0;});if(!W){G[N].hideReason="getLinks called with 'withAtLeastOneUsedParam = true', but the inbound had no business parameters defined.";return undefined;}}var X=c.inboundSignatureMeetsParameterOptions(K.inbound.signature.parameters,o.paramsOptions||[]);if(!X){G[N].hideReason="inbound signature does not meet the requested parameter filter options";return undefined;}var Y={"intent":N+v(y,Q),"text":K.inbound.title};if(K.inbound.icon){Y.icon=K.inbound.icon;}if(K.inbound.subTitle){Y.subTitle=K.inbound.subTitle;}if(K.inbound.shortTitle){Y.shortTitle=K.inbound.shortTitle;}var Z=O.get("inbound.signature.parameters.sap-tag.defaultValue.value",K);if(Z){Y.tags=[Z];}return Y;}G[N].count++;return undefined;}).filter(function(K){return typeof K==="object";});if(k!=="priority"){R.sort(function(K,L){return K[k]<L[k]?-1:1;});}if(R.length===0){q.sap.log.debug("_getLinks returned no results");}else if(q.sap.log.getLevel()>=q.sap.log.Level.DEBUG){if(q.sap.log.getLevel()>=q.sap.log.Level.TRACE){var H=[];var J=[];R.forEach(function(K){var L=K.intent.split("?")[0];if(G[L].hideReason){J.push(["-",L+"("+G[L].hideReason+")\n"," text:",K.text+"\n"," full intent:",K.intent].join(" "));}else{H.push(["-",L,G[L].count>1?"("+(G[L].count-1)+" others matched)\n":"\n","text:",K.text+"\n","full intent:",K.intent].join(" "));}});q.sap.log.debug("_getLinks filtered to the following unique intents:","\n"+H.join("\n"),"sap.ushell.services.ClientSideTargetResolution");q.sap.log.debug("_getLinks would have also returned the following unique intents, but something prevented this:",J.join("\n"),"sap.ushell.services.ClientSideTargetResolution");}else{q.sap.log.debug("_getLinks filtered to unique intents.","Reporting histogram: \n - "+Object.keys(G).join("\n - "),"sap.ushell.services.ClientSideTargetResolution");}}D.resolve(R);}).fail(D.reject.bind(D));return D.promise();};d.prototype._getMatchingInbounds=function(o,e,g){var t=this,h,j,L,k,m,E,r,D=new q.Deferred();if(g){h=g.tags;E=g.bExcludeTileInbounds;}c.whenDebugEnabled(function(){L=++t._iLogId;});l.begin(function(){function v(M){var y=M.action||(typeof M.action==="undefined"?"<any>":"<invalid-value>");var z=M.semanticObject||(typeof M.semanticObject==="undefined"?"<any>":"<invalid-value>");return t._getURLParsing().constructShellHash({semanticObject:z,action:y,params:M.params});}var w=v(o);return{logId:L,title:"Matching Intent '"+w+"' to inbounds (form factor: "+(o.formFactor||"<any>")+")",moduleName:"sap.ushell.services.ClientSideTargetResolution",stages:["STAGE1: Find matching inbounds","STAGE2: Resolve references","STAGE3: Rematch with references","STAGE4: Sort matched targets"]};});m=o.semanticObject;j=o.action;this._oShellHash=o;k=h?e.getSegmentByTags(h):e.getSegment(m,j);if(E){r=k.filter(function(v){return!v.tileResolutionResult||!v.tileResolutionResult.isCustomTile;});}else{r=k;}s.match(o,r,{},c.isDebugEnabled()).then(function(v){l.log(function(){return{logId:L,stage:1,prefix:"\u2718",lines:Object.keys(v.noMatchReasons||{}).map(function(w){return w+" "+v.noMatchReasons[w];})};});l.log(function(){var w=v.matchResults.map(function(y){return f.formatInbound(y.inbound);});return{logId:L,stage:1,prefix:w.length>0?"\u2705":"\u2718",lines:w.length>0?w:["No inbound was matched"]};});var M=Object.keys(v.missingReferences||[]);if(M.length===0){l.log(function(){return{logId:L,stage:2,prefix:"\u2705",line:"No need to resolve references"};});return new q.Deferred().resolve({matchResults:v.matchResults,referencesToInclude:null}).promise();}l.log(function(){return{logId:L,stage:2,line:"@ Must resolve the following references:",prefix:"\u2022",lines:M};});var R=new q.Deferred();sap.ushell.Container.getService("ReferenceResolver").resolveReferences(M).done(function(w){l.log(function(){return{logId:L,stage:2,line:"\u2705 resolved references with the following values:",prefix:"\u2022",lines:Object.keys(w).map(function(y){return y+": '"+w[y]+"'";})};});R.resolve({matchResults:v.matchResults,referencesToInclude:w});}).fail(function(w){l.log(function(){return{logId:L,stage:2,prefix:"\u274c",line:"Failed to resolve references: "+w};});D.resolve([]);});return R.promise();}).then(function(v){var M,w,R=v.referencesToInclude;if(!R){l.log(function(){return{logId:L,stage:3,line:"rematch was skipped (no references to resolve)",prefix:"\u2705"};});return new q.Deferred().resolve(v).promise();}w=v.matchResults;M=w.map(function(y){return y.inbound;});return s.match(o,M,R,0).then(function(F){l.log(function(){var w=F.matchResults||[];if(w.length>=1){return{logId:L,stage:3,line:"The following inbounds re-matched:",lines:w.map(function(y){return f.formatInbound(y.inbound);}),prefix:"\u2705"};}return{logId:L,stage:3,line:"No inbounds re-matched",prefix:"-"};});return F;});}).then(function(F){var M=F.matchResults||[];if(M.length<=1){l.log(function(){return{logId:L,stage:4,line:"Nothing to sort"};});D.resolve(M);return;}var v=s.sortMatchingResultsDeterministic(F.matchResults||[]);l.log(function(){var w=v.map(function(y){return f.formatInbound(y.inbound||{})+(y.matchesVirtualInbound?" (virtual)":"")+"\n[ Sort Criteria ] "+"\n * 1 * sap-priority: '"+y["sap-priority"]+"'"+"\n * 2 * Sort string: '"+y.priorityString+"\n * 3 * Deterministic blob: '"+s.serializeMatchingResult(y)+"'";});return{logId:L,stage:4,line:"Sorted inbounds as follows:",lines:w,prefix:".",number:true};});D.resolve(v);});return D.promise().then(function(M){l.end(function(){return{logId:L};});return M;});};d.prototype._isIntentSupportedOne=function(e,o){var D=new q.Deferred(),g=this._getURLParsing().parseShellHash(e);if(e==="#"){D.resolve(true);return D.promise();}if(g===undefined){return D.reject("Could not parse shell hash '"+e+"'").promise();}g.formFactor=u.getFormFactor();this._getMatchingInbounds(g,o,{bExcludeTileInbounds:true}).done(function(t){D.resolve(t.length>0);}).fail(function(){D.reject();});return D.promise();};d.prototype.isIntentSupported=function(e){var t=this,D=new q.Deferred();this._oInboundProvider.getInbounds().then(function(o){t._isIntentSupported(e,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};d.prototype._isIntentSupported=function(e,o){var t=this,D=new q.Deferred(),m={};D.resolve();function g(h,j){m[h]={supported:j};}var r=[];e.forEach(function(h){var N=t._isIntentSupportedOne(h,o);N.fail(function(E){r.push(E);});N.done(function(j){g(h,j);});D=q.when(D,N);});var R=new q.Deferred();D.done(function(){R.resolve(m);}).fail(function(){R.reject("One or more input intents contain errors: "+r.join(", "));});return R.promise();};d.prototype.getUserDefaultParameterNames=function(){var t=this,D=new q.Deferred();this._oInboundProvider.getInbounds().then(function(o){var r;try{r=t._getUserDefaultParameterNames(o.getAllInbounds());D.resolve(r);}catch(e){D.reject("Cannot get user default parameters from inbounds: "+e);}},function(){D.reject.apply(D,arguments);});return D.promise();};d.prototype._getUserDefaultParameterNames=function(e){var r={simple:{},extended:{}};e.forEach(function(t){var o=t.signature&&t.signature.parameters||[];Object.keys(o).forEach(function(g){var h=o[g],R,E,j,k;if(h){if(h.filter&&h.filter.format==="reference"){j=h.filter.value;}else if(h.defaultValue&&h.defaultValue.format==="reference"){j=h.defaultValue.value;}if(typeof j==="string"){k=sap.ushell.Container.getService("ReferenceResolver");R=k.extractUserDefaultReferenceName(j);if(typeof R==="string"){r.simple[R]={};}E=k.extractExtendedUserDefaultReferenceName(j);if(typeof E==="string"){r.extended[E]={};}}}});});return r;};d.prototype.getEasyAccessSystems=function(m){var r={},o,v,D;m=m||"sapMenu";if(this._oHaveEasyAccessSystemsDeferreds[m]){return this._oHaveEasyAccessSystemsDeferreds[m].promise();}this._oHaveEasyAccessSystemsDeferreds[m]=new q.Deferred();D=this._oHaveEasyAccessSystemsDeferreds[m];function e(g,h,v){if(!g){return false;}var j=[g.semanticObject,g.action].join("-");return v[m][j]&&g.deviceTypes&&h!==undefined&&g.deviceTypes[h];}o=A.getEasyAccessMenuDefinitions().reduce(function(o,E){var g=E.easyAccessMenu.intent.split("-")[1];o[g]={appType:E.type,priority:E.easyAccessMenu.systemSelectionPriority};return o;},{});v={userMenu:A.getEasyAccessMenuDefinitions().reduce(function(g,E){var h=E.easyAccessMenu.intent;g[h]=E.easyAccessMenu.showSystemSelectionInUserMenu;return g;},{}),sapMenu:A.getEasyAccessMenuDefinitions().reduce(function(g,E){var h=E.easyAccessMenu.intent;g[h]=E.easyAccessMenu.showSystemSelectionInSapMenu;return g;},{})};this._oInboundProvider.getInbounds().then(function(g){var L={};g.getAllInbounds().filter(function(h){return e(h,u.getFormFactor(),v);}).forEach(function(E){var h;if(i(E.signature.parameters["sap-system"])&&E.signature.parameters["sap-system"].hasOwnProperty("filter")){h=O.get("signature.parameters.sap-system.filter.value",E);}if(typeof h==="string"){var j=o[E.action].priority;var k=o[E.action].appType;if(!r[h]){L[h]=-1;r[h]={appType:{}};}if(L[h]<j){r[h].text=E.title;L[h]=j;}r[h].appType[k]=true;}else{q.sap.log.warning("Cannot extract sap-system from easy access menu inbound: "+f.formatInbound(E),"This parameter is supposed to be a string. Got '"+h+"' instead.","sap.ushell.services.ClientSideTargetResolution");}});D.resolve(r);},function(){D.reject.apply(D,arguments);});return D.promise();};d.hasNoAdapter=false;return d;},true);sap.ui.predefine('sap/ushell/services/CommonDataModel',["sap/ushell/services/_CommonDataModel/PersonalizationProcessor","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/ushell/services/_CommonDataModel/SiteConverter","sap/base/util/isEmptyObject","sap/base/util/deepClone","sap/base/util/Version","sap/ushell/Config","sap/base/util/includes"],function(P,O,q,a,S,b,d,V,C,c){"use strict";var e="sap.ushell.services.CommonDataModel",f={"STATIC_LAUNCHER":"sap.ushell.StaticAppLauncher","DYNAMIC_LAUNCHER":"sap.ushell.DynamicAppLauncher","CARD":"sap.ushell.Card"};function g(A,o,p,s){var h=new q.Deferred();this._oAdapter=A;this._oPersonalizationProcessor=new P();this._oSiteDeferred=h;this._oOriginalSite={};this._oPersonalizedSite={};this._oContentProviderIndex={};this._oSiteConverter=new S();this._mPersonalizationDeltas={};this._oGetSitePromise=A.getSite().then(this._loadAndApplyPersonalization.bind(this)).fail(h.reject);}g.prototype._loadAndApplyPersonalization=function(s){this._oOriginalSite=q.extend(true,{},s);var o=new V(s._version);if(o.compareTo("3.1.0")<0){this._oAdapter.getPersonalization(o).then(function(p){if(p){this._mPersonalizationDeltas=d(p);}else{this._mPersonalizationDeltas={version:"3.0.0",_version:"3.0.0"};}this._triggerMixinPersonalisationInSite(s,p);}.bind(this)).fail(this._oSiteDeferred.reject);}else{this._oPersonalizedPages={};this._oOriginalSite=this._ensureStandardVizTypesPresent(this._oOriginalSite);this._oSiteDeferred.resolve(this._oOriginalSite);}};g.prototype._triggerMixinPersonalisationInSite=function(s,p){return new Promise(function(r,h){this._oPersonalizationProcessor.mixinPersonalization(s,p).done(function(o){this._oPersonalizedSite=this._ensureCompleteSite(o);this._oPersonalizedSite=this._ensureGroupsOrder(this._oPersonalizedSite);this._oPersonalizedSite=this._ensureStandardVizTypesPresent(this._oPersonalizedSite);this._oSiteDeferred.resolve(this._oPersonalizedSite);r(this._oPersonalizedSite);}.bind(this)).fail(function(m){this._oSiteDeferred.reject(m);h();}.bind(this));}.bind(this));};g.prototype._triggerMixinPersonalisationInSiteAndStore=function(s,p,h){return this._triggerMixinPersonalisationInSite(s,p).then(function(o){var i=this._oSiteConverter.convertTo("3.1.0",d(o));if(this._oPersonalizedPages){this._oPersonalizedPages[h]=i;}return i;}.bind(this));};g.prototype.getHomepageGroups=function(){var D=new q.Deferred();this._oSiteDeferred.then(function(s){var G=(s&&s.site&&s.site.payload&&s.site.payload.groupsOrder)?s.site.payload.groupsOrder:[];D.resolve(G);});return D.promise();};g.prototype.getGroups=function(){var D=new q.Deferred();this._oSiteDeferred.then(function(s){var G=[];Object.keys(s.groups).forEach(function(k){G.push(s.groups[k]);});D.resolve(G);});return D.promise();};g.prototype.getGroup=function(i){var D=new q.Deferred();this._oSiteDeferred.then(function(s){var G=s.groups[i];if(G){D.resolve(G);}else{D.reject("Group "+i+" not found");}});return D.promise();};g.prototype.getSite=function(){return this._oSiteDeferred.promise();};g.prototype.getPage=function(p){return new Promise(function(r,h){var E=C.last("/core/shell/enablePersonalization");this._oGetSitePromise.done(function(){if(E){this._getPageAndPersonalization(p).then(function(o){var i=o.page,j=o.personalization,k=this._oSiteConverter.convertTo("3.0.0",d(i));this._oOriginalSite.pages[i.identification.id]=d(i);this._mPersonalizationDeltas=d(j);var m=j[p]||{};this._triggerMixinPersonalisationInSiteAndStore.call(this,k,m,p).then(r).catch(function(){h("Personalization Processor: Cannot mixin the personalization.");});}.bind(this)).catch(h);}else if(!this._oAdapter.getPage){r(this._oOriginalSite.pages[p]);}else{this._oAdapter.getPage(p).then(r).catch(h);}}.bind(this)).fail(h);}.bind(this));};g.prototype._getPageAndPersonalization=function(p){return new Promise(function(r,h){var i;var o=new Promise(function(k,m){this._oAdapter.getPersonalization(this._oOriginalSite._version).done(k).fail(m);}.bind(this));if(!this._oAdapter.getPage){var j=this._oOriginalSite.pages[p];i=Promise.resolve(j);}else{i=this._oAdapter.getPage(p);}Promise.all([i,o]).then(function(k){r({page:k[0],personalization:k[1]});}).catch(function(){h("CommonDataModel Service: Cannot get page "+p+" or its personalization");});}.bind(this));};g.prototype.getPages=function(p){return new Promise(function(r,h){var E=C.last("/core/shell/enablePersonalization");var i;this._oGetSitePromise.done(function(){if(!this._oAdapter.getPages){var o={};for(var s in this._oOriginalSite.pages){if(c(p,this._oOriginalSite.pages[s].identification.id)){o[s]=this._oOriginalSite.pages[s];}}i=Promise.resolve(o);}else{i=this._oAdapter.getPages(p);}if(!E){return r(i.then(function(j){return Object.keys(j).map(function(s){return j[s];});}));}return i.then(function(j){var k=Promise.all(p.map(function(s){var m=j[s];if(!m){return Promise.resolve();}return new Promise(function(n,t){this._oAdapter.getPersonalization(this._oOriginalSite._version).done(function(u){var v=m,w=u,x=this._oSiteConverter.convertTo("3.0.0",d(v));this._oOriginalSite.pages[v.identification.id]=d(v);this._mPersonalizationDeltas=d(w);var y=w[v.identification.id]||{};this._triggerMixinPersonalisationInSiteAndStore.call(this,x,y,v.identification.id).then(function(z){n(z);}).catch(t);}.bind(this)).fail(t);}.bind(this));}.bind(this)));var F=k.then(function(m){return m.filter(function(n){return!!n;});});return r(F);}.bind(this)).catch(h);}.bind(this)).fail(h);}.bind(this));};g.prototype.getAllPages=function(){return sap.ushell.Container.getServiceAsync("Menu").then(function(m){return m.getSpacesPagesHierarchy();}).then(function(h){var p=[];h.spaces.forEach(function(s){s.pages.forEach(function(o){if(p.indexOf(o.id)===-1){p.push(o.id);}});});return this.getPages(p);}.bind(this));};g.prototype.getApplications=function(){return new Promise(function(r,h){this._oSiteDeferred.then(function(s){var A=s.applications;if(A){r(A);}else{h("CDM applications not found.");}}).fail(h);}.bind(this));};g.prototype.getVisualizations=function(){return new Promise(function(r,h){this._oSiteDeferred.then(function(s){var v=s.visualizations;if(v){r(v);}else{h("CDM visualizations not found.");}}).fail(h);}.bind(this));};g.prototype.getGroupFromOriginalSite=function(G){var D=new q.Deferred();if(typeof G==="string"&&this._oOriginalSite&&this._oOriginalSite.groups&&this._oOriginalSite.groups[G]){D.resolve(q.extend(true,{},this._oOriginalSite.groups[G]));}else{D.reject("Group does not exist in original site.");}return D.promise();};g.prototype.getOriginalPage=function(p){return this._oOriginalSite.pages[p];};g.prototype.save=function(p){var D=new q.Deferred(),o,h;if(this._oOriginalSite._version==="3.1.0"){if(!p){return D.reject("No page id was provided").promise();}h=this._oSiteConverter.convertTo("3.0.0",this._oOriginalSite.pages[p]);o=this._oSiteConverter.convertTo("3.0.0",this._oPersonalizedPages[p]);}else{h=this._oOriginalSite;o=this._oPersonalizedSite;}this._oPersonalizationProcessor.extractPersonalization(o,h).done(function(E){if(!b(E)){if(this._mPersonalizationDeltas.version===undefined||this._mPersonalizationDeltas._version===undefined){this._mPersonalizationDeltas.version=this._oOriginalSite._version;this._mPersonalizationDeltas._version=this._oOriginalSite._version;}if(p){this._mPersonalizationDeltas[p]=E;}else{this._mPersonalizationDeltas=E;}this._setPersonalization(this._mPersonalizationDeltas).then(D.resolve).catch(D.reject);}else{D.resolve();}}.bind(this)).fail(function(){D.reject("Personalization Processor: Cannot extract personalization.");});return D.promise();};g.prototype._setPersonalization=function(h,p){if(this._oPendingPersonalizationDeferred){if(!this._oNextPersonalizationQuery){this._oNextPersonalizationQuery={fnNextCall:null,aPromiseResolvers:[]};}return new Promise(function(r,i){this._oNextPersonalizationQuery.fnNextCall=this._setPersonalization.bind(this,h,p);this._oNextPersonalizationQuery.aPromiseResolvers.push({resolve:r,reject:i});}.bind(this));}this._oPendingPersonalizationDeferred=this._oAdapter.setPersonalization(h,p);return new Promise(function(r,i){this._oPendingPersonalizationDeferred.then(r).fail(i).always(function(){delete this._oPendingPersonalizationDeferred;if(this._oNextPersonalizationQuery){var n=this._oNextPersonalizationQuery.fnNextCall();this._cleanupPersonalizationQueuePromises(n,this._oNextPersonalizationQuery.aPromiseResolvers);delete this._oNextPersonalizationQuery;}}.bind(this));}.bind(this));};g.prototype._cleanupPersonalizationQueuePromises=function(n,h){h.forEach(function(p){n.then(p.resolve).catch(p.reject);});};function l(){var p=sap.ushell.Container.getService("PluginManager");return p.loadPlugins("ContentProvider");}g.prototype._getUnreferencedCatalogApplications=function(E){var u={};var A=Object.keys(E.applications).map(function(s){return E.applications[s]["sap.app"].id;}).reduce(function(i,s){i[s]=true;return i;},{});var o=E.catalogs;Object.keys(o).forEach(function(s){var h=o[s].payload.appDescriptors;h.map(function(i){return i.id;}).filter(function(i){return!A[i];}).forEach(function(B){if(!u.hasOwnProperty(s)){u[s]={};}u[s][B]=true;});});return u;};g.prototype._formatUnreferencedApplications=function(s,u){return"One or more apps from "+s+" content provider are not listed among the applications section "+"of the extended site and will be discarded - "+Object.keys(u).map(function(h){var B=Object.keys(u[h]).map(function(U){return"'"+U+"'";});return"From catalog '"+h+"': "+B.join(", ");}).join("; ");};g.prototype._removeUnreferencedApplications=function(E,u){Object.keys(E.catalogs).forEach(function(s){var o=E.catalogs[s].payload;var A=o.appDescriptors;o.appDescriptors=A.filter(function(h){return u[s]&&!u[s][h.id];});});};g.prototype.getExtensionSites=function(){var t=this;var D=new q.Deferred();l().done(function(){var h=Object.keys(t._oContentProviderIndex),T=h.length;if(T===0){D.resolve([]);return;}var G=h.map(function(s,i){var o=t._oContentProviderIndex[s];var j;try{j=o.getSite();if(!j||typeof j.then!=="function"){throw"getSite does not return a Promise";}}catch(E){j=Promise.reject("call to getSite failed: "+E);}return j.then(function(s,k){var m=q.extend(true,{},k);var u=t._getUnreferencedCatalogApplications(k);if(Object.keys(u).length>0){var n=t._formatUnreferencedApplications(s,u);q.sap.log.error(n,null,e);t._removeUnreferencedApplications(m,u);}var L={providerId:s,success:true,site:m};D.notify(L);return L;}.bind(null,s),function(s,k){return{providerId:s,success:false,error:k};}.bind(null,s));});Promise.all(G).then(function(L){D.resolve(L);});});return D.promise();};g.prototype.registerContentProvider=function(i,s){if(this._oContentProviderIndex[i]){q.sap.log.error("a content provider with ID '"+i+"' is already registered",null,e);return;}this._oContentProviderIndex[i]=s;q.sap.log.debug("ContentProvider '"+i+"' was registered",null,e);};g.prototype._ensureCompleteSite=function(p){if(p.groups){var G=p.groups;Object.keys(G).forEach(function(k){if(!G[k]){delete G[k];}else{if(!G[k].payload){G[k].payload={};}if(!G[k].payload.links){G[k].payload.links=[];}if(!G[k].payload.tiles){G[k].payload.tiles=[];}if(!G[k].payload.groups){G[k].payload.groups=[];}}});}return p;};g.prototype._ensureGroupsOrder=function(s){var G=O.get("site.payload.groupsOrder",s),o=s.groups,h,i=0;if(!G){return s;}while(i<G.length){h=G[i];if(!o[h]){G.splice(i,1);}else{i++;}}return s;};g.prototype.getPlugins=(function(){var D,E,p;E=function(s,o){var h,n=Object.keys(o).length;if(n===0){return{};}if(!o.hasOwnProperty("Shell-plugin")){q.sap.log.error("Cannot find inbound with id 'Shell-plugin' for plugin '"+s+"'","plugin startup configuration cannot be determined correctly",e);return{};}if(n>1){q.sap.log.warning("Multiple inbounds are defined for plugin '"+s+"'","plugin startup configuration will be determined using "+"the signature of 'Shell-plugin' inbound.",e);}h=O.get("signature.parameters",o["Shell-plugin"])||{};return Object.keys(h).reduce(function(r,N){var i=O.get(N+".defaultValue.value",h);if(typeof i==="string"){r[N]=i;}return r;},{});};D=function(o){Object.keys(o).filter(function(s){return typeof o[s]==="object";}).forEach(function(s){o[s]=D(o[s]);});return Object.freeze(o);};return function(o){if(o!==undefined){p=o;}if(p){return q.when(p);}p={};return this.getSite().then(function(s){var A=s.applications||{};Object.keys(A).filter(function(h){return O.get("type",this[h]["sap.flp"])==="plugin";},A).forEach(function(h){var i,j,k=this[h],m={};if(!a(k["sap.platform.runtime"])){q.sap.log.error("Cannot find 'sap.platform.runtime' section for plugin '"+h+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel");}else if(!a(k["sap.platform.runtime"].componentProperties)){q.sap.log.error("Cannot find 'sap.platform.runtime/componentProperties' "+"section for plugin '"+h+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel");}else{m=k["sap.platform.runtime"].componentProperties;}p[h]={url:m.url,component:k["sap.ui5"].componentName};var n=O.get("crossNavigation.inbounds",k["sap.app"])||{};j=E(h,n);i=q.extend(m.config||{},j);if(i){p[h].config=i;}if(m.asyncHints){p[h].asyncHints=m.asyncHints;}var r=O.get("deviceTypes",k["sap.ui"]);if(r){p[h].deviceTypes=r;}},A);return D(p);},function(v){return v;});};})();g.prototype._ensureStandardVizTypesPresent=function(s){if(!(s._version&&s._version.startsWith("3."))){return s;}if(!s.vizTypes){s.vizTypes={};}if(!s.vizTypes[f.STATIC_LAUNCHER]){s.vizTypes[f.STATIC_LAUNCHER]=q.sap.loadResource("sap/ushell/components/tiles/cdm/applauncher/manifest.json");}if(!s.vizTypes[f.DYNAMIC_LAUNCHER]){s.vizTypes[f.DYNAMIC_LAUNCHER]=q.sap.loadResource("sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json");}if(!s.vizTypes[f.CARD]){s.vizTypes[f.CARD]=q.sap.loadResource("sap/ushell/services/_CommonDataModel/vizTypeDefaults/cardManifest.json");}return s;};g.prototype.getMenuEntries=function(m){return new Promise(function(r,h){this._oSiteDeferred.then(function(s){var M=O.get("menus."+m+".payload.menuEntries",s);r(d(M)||[]);});}.bind(this));};g.hasNoAdapter=false;return g;},true);sap.ui.predefine('sap/ushell/services/ContentExtensionAdapterFactory',["sap/ushell/Config","sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig","sap/ui/thirdparty/jquery"],function(C,a,q){"use strict";var b={};b.getAdapters=function(c){var d=b._getConfigAdapters(c);var A={};var e=d.map(function(o){var E=C.last(o.configSwitch);if(!E){return Promise.resolve();}var f=b._getAdapter(o);f.then(function(g){A[o.contentProviderName]=g;});return f;});return new Promise(function(r){q.when.apply(q,e).then(function(){r(A);});});};b._getConfigAdapters=function(c){if(!c){c=a._getConfigAdapters();}if(!Array.isArray(c)){c=[c];}return c;};b._getAdapter=function(c){var d=new q.Deferred();var A=c.configHandler?c.configHandler():{};var m=c.adapter.replace(/\./g,"/");sap.ui.require([m],function(){var i=b._getAdapterInstance(c.adapter,c.system,null,A);d.resolve(i);});return d.promise();};b._getAdapterInstance=function(A,s,p,c){var d=q.sap.getObject(A);if(d){var D={config:c||{}};return new d(s,p,D);}return null;};return b;});sap.ui.predefine('sap/ushell/services/LaunchPage',["sap/ushell/services/ContentExtensionAdapterFactory","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/Config"],function(C,q,r,A,a){"use strict";function L(o){var t=this,T=[],b=C.getAdapters();this.oAdapters={"default":o};b.then(function(c){q.extend(this.oAdapters,c);}.bind(this));this.getGroups=function(){if(a.last("/core/spaces/enabled")){return new q.Deferred().resolve([]).promise();}var d=new q.Deferred();b.then(function(){var G=Object.keys(t.oAdapters).map(function(s){return t._getAdapter(s).getGroups();});q.when.apply(q,G).done(function(){var c=[].concat.apply([],arguments);d.resolve(c);}).fail(function(){q.sap.log.error("getGroups failed");});});return d.promise();};this.getGroupsForBookmarks=function(G){var d=q.Deferred();this.getGroups().then(function(c){this.getDefaultGroup().then(function(D){if(c.length>0){c=c.filter(function(e){if(G!==undefined&&G===true){return this.isGroupVisible(e);}return(!this.isGroupLocked(e)&&this.isGroupVisible(e));}.bind(this));c=c.map(function(e){return{title:(e===D&&r.i18n.getText("my_group"))||this.getGroupTitle(e),object:e};}.bind(this));}d.resolve(c);}.bind(this),function(e){q.sap.log.error("getGroupsForBookmarks - getDefaultGroup - failed: "+e.message);});}.bind(this),function(e){q.sap.log.error("getGroupsForBookmarks - getGroups - failed: "+e.message);});return d.promise();};this.getDefaultGroup=function(){var p=this._getAdapter().getDefaultGroup();p.fail(function(){q.sap.log.error("getDefaultGroup failed");});return p;};this.getGroupTitle=function(G){return this._getAdapter(G.contentProvider).getGroupTitle(G);};this.getGroupId=function(G){return this._getAdapter(G.contentProvider).getGroupId(G);};this.getGroupById=function(G){var D=q.Deferred(),t=this;this.getGroups().then(function(c){c=q.grep(c,function(e){return t.getGroupId(e)===G;});D.resolve((c&&c.length>0?c[0]:undefined));});return D.promise();};this.getGroupTiles=function(G){return this._getAdapter(G.contentProvider).getGroupTiles(G);};this.getTilesByGroupId=function(G){var D=q.Deferred(),t=this;this.getGroupById(G).then(function(c){if(c){var d=t._getAdapter(c.contentProvider).getGroupTiles(c);if(d){d=d.map(function(e){return{id:t.getTileId(e),title:t.getTileTitle(e),subtitle:t.getCatalogTilePreviewSubtitle(e),url:t.getCatalogTileTargetURL(e),icon:t.getCatalogTilePreviewIcon(e),groupId:G};});}else{d=[];}D.resolve(d);}else{D.resolve([]);}});return D.promise();};this.getLinkTiles=function(G){return this._getAdapter(G.contentProvider).getLinkTiles(G);};this.addGroupAt=function(s,i){var p,c=i,o=this._getAdapter();if(o.addGroupAt){p=o.addGroupAt(s,i);p.fail(function(){q.sap.log.error("addGroup "+s+" failed");});}else{var d=new q.Deferred();p=o.addGroup(s);p.done(function(n){var m=this.moveGroup(n,c),e=n;m.done(function(){d.resolve(e);});m.fail(function(){d.reject();});}.bind(this));p.fail(function(){q.sap.log.error("addGroup "+s+" failed");d.reject();});return d.promise();}return p;};this.addGroup=function(s){var p=this._getAdapter().addGroup(s);p.fail(function(){q.sap.log.error("addGroup "+s+" failed");});return p;};this.removeGroup=function(G,i){var p=this._getAdapter(G.contentProvider).removeGroup(G,i);p.fail(function(){q.sap.log.error("Fail to removeGroup "+t.getGroupTitle(G));});return p;};this.resetGroup=function(G,i){var p=this._getAdapter(G.contentProvider).resetGroup(G,i);p.fail(function(){q.sap.log.error("Fail to resetGroup "+t.getGroupTitle(G));});return p;};this.isGroupRemovable=function(G){return this._getAdapter(G.contentProvider).isGroupRemovable(G);};this.isGroupLocked=function(G){var o=this._getAdapter(G.contentProvider);if(typeof o.isGroupLocked==="function"){return o.isGroupLocked(G);}return false;};this.isGroupFeatured=function(G){var o=this._getAdapter(G.contentProvider);if(typeof o.isGroupFeatured==="function"){return o.isGroupFeatured(G);}return false;};this.moveGroup=function(G,n){var p=this._getAdapter(G.contentProvider).moveGroup(G,n);p.fail(function(){q.sap.log.error("Fail to moveGroup "+t.getGroupTitle(G));});return p;};this.setGroupTitle=function(G,s){var p=this._getAdapter(G.contentProvider).setGroupTitle(G,s);p.fail(function(){q.sap.log.error("Fail to set Group title: "+t.getGroupTitle(G));});return p;};this.hideGroups=function(h){var d=new q.Deferred(),o=this._getAdapter();if(typeof o.hideGroups!=="function"){d.reject("hideGroups() is not implemented in the Adapter.");}else{o.hideGroups(h).done(function(){d.resolve();}).fail(function(m){q.sap.log.error("Fail to store groups visibility."+m);d.reject();});}return d.promise();};this.isGroupVisible=function(G){var o=this._getAdapter(G.contentProvider);if(typeof o.isGroupVisible==="function"){return o.isGroupVisible(G);}return true;};this.addTile=function(c,G){var p=this._getAdapter(G.contentProvider).addTile(c,G),t=this;p.done(function(){t.changeURLStatesToPersistent(t.getCatalogTileTargetURL(c));});p.fail(function(){q.sap.log.error("Fail to add Tile: "+t.getCatalogTileId(c));});return p;};this.removeTile=function(G,c,i){var p=this._getAdapter(G.contentProvider).removeTile(G,c,i),t=this;p.done(function(){t.deleteURLStatesPersistentData(t.getCatalogTileTargetURL(c));});p.fail(function(){q.sap.log.error("Fail to remove Tile: "+t.getTileId(c));});return p;};this.moveTile=function(c,s,i,S,d,n){var p=this._getAdapter().moveTile(c,s,i,S,d,n);p.fail(function(){q.sap.log.error("Fail to move Tile: "+t.getTileId(c));});return p;};this.isLinkPersonalizationSupported=function(c){var s=c&&c.contentProvider,o=this._getAdapter(s);if(typeof o.isLinkPersonalizationSupported==="function"){return o.isLinkPersonalizationSupported(c);}return false;};this.getTileId=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getTileId(c);};this.getTileTitle=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getTileTitle(c);};this.getTileType=function(c){var s=c&&c.contentProvider,o=this._getAdapter(s);if(o.getTileType){return o.getTileType(c);}return"tile";};this.getTileView=function(c){var s=c&&c.contentProvider,d=this._getAdapter(s).getTileView(c);if(!q.isFunction(d.promise)){d=new q.Deferred().resolve(d).promise();}return d;};this.getCardManifest=function(G){var s=G&&G.contentProvider;return this._getAdapter(s).getCardManifest(G);};this.getAppBoxPressHandler=function(c){var s=c&&c.contentProvider,o=this._getAdapter(s);if(o.getAppBoxPressHandler){return o.getAppBoxPressHandler(c);}return undefined;};this.getTileSize=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getTileSize(c);};this.getTileTarget=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getTileTarget(c);};this.getTileDebugInfo=function(c){var s=c&&c.contentProvider,o=this._getAdapter(s);if(typeof o.getTileDebugInfo==="function"){return o.getTileDebugInfo(c);}return undefined;};this.isTileIntentSupported=function(c){var s=c&&c.contentProvider,o=this._getAdapter(s);if(typeof o.isTileIntentSupported==="function"){return o.isTileIntentSupported(c);}return true;};this.refreshTile=function(c){var s=c&&c.contentProvider;this._getAdapter(s).refreshTile(c);};this.setTileVisible=function(c,n){var s=c&&c.contentProvider;return this._getAdapter(s).setTileVisible(c,n);};this.registerTileActionsProvider=function(p){if(typeof p!=="function"){throw new Error("Tile actions Provider is not a function");}T.push(p);};this.getTileActions=function(c){var d=[],e,s=c&&c.contentProvider,o=this._getAdapter(s);if(typeof o.getTileActions==="function"){e=o.getTileActions(c);if(e&&e.length&&e.length>0){d.push.apply(d,e);}}for(var i=0;i<T.length;i++){e=T[i](c);if(e&&e.length&&e.length>0){d.push.apply(d,e);}}return d;};this.getCatalogs=function(){return this._getAdapter().getCatalogs();};this.isCatalogsValid=function(){return this._getAdapter().isCatalogsValid();};this.getCatalogData=function(c){var l=this._getAdapter();if(typeof l.getCatalogData!=="function"){q.sap.log.warning("getCatalogData not implemented in adapter",null,"sap.ushell.services.LaunchPage");return{id:this.getCatalogId(c)};}return l.getCatalogData(c);};this.getCatalogError=function(c){return this._getAdapter().getCatalogError(c);};this.getCatalogId=function(c){return this._getAdapter().getCatalogId(c);};this.getCatalogTitle=function(c){return this._getAdapter().getCatalogTitle(c);};this.getCatalogTiles=function(c){var p=this._getAdapter().getCatalogTiles(c);p.fail(function(){q.sap.log.error("Fail to get Tiles of Catalog: "+t.getCatalogTitle(c));});return p;};this.getCatalogTileId=function(c){return this._getAdapter(c.contentProvider).getCatalogTileId(c);};this.getCatalogTileTitle=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTileTitle(c);};this.getCatalogTileSize=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTileSize(c);};this.getCatalogTileViewControl=function(c){var s=c&&c.contentProvider;var l=this._getAdapter(s);if(typeof l.getCatalogTileViewControl==="function"){return l.getCatalogTileViewControl(c);}var d=new q.Deferred(),R=this.getCatalogTileView(c);d.resolve(R);return d.promise();};this.getCatalogTileView=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTileView(c);};this.getCatalogTileTargetURL=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTileTargetURL(c);};this.getCatalogTileTags=function(c){var s=c&&c.contentProvider;var l=this._getAdapter(s);if(typeof l.getCatalogTileTags==="function"){return l.getCatalogTileTags(c);}return[];};this.getCatalogTileKeywords=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTileKeywords(c);};this.getCatalogTilePreviewTitle=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTilePreviewTitle(c);};this.getCatalogTilePreviewInfo=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTilePreviewInfo(c);};this.getCatalogTilePreviewSubtitle=function(c){var s=c&&c.contentProvider;var l=this._getAdapter(s);if(l.getCatalogTilePreviewSubtitle){return l.getCatalogTilePreviewSubtitle(c);}};this.getCatalogTilePreviewIcon=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTilePreviewIcon(c);};this.addBookmark=function(p,G){var P,d,m,s,t=this;if(!p.title){q.sap.log.error("Add Bookmark - Missing title");throw new Error("Title missing in bookmark configuration");}if(!p.url){q.sap.log.error("Add Bookmark - Missing URL");throw new Error("URL missing in bookmark configuration");}if(G&&this.isGroupLocked(G)){d=new q.Deferred();P=d.promise();m="Tile cannot be added, target group ("+this.getGroupTitle(G)+")is locked!";d.reject(m);q.sap.log.error(m);}else{s=G&&G.contentProvider;P=this._getAdapter(s).addBookmark(p,G);P.done(function(){t.changeURLStatesToPersistent(p.url);});P.fail(function(){q.sap.log.error("Fail to add bookmark for URL: "+p.url+" and Title: "+p.title);});}return P;};this.countBookmarks=function(u){if(!u||typeof u!=="string"){q.sap.log.error("Fail to count bookmarks. No valid URL");throw new Error("Missing URL");}var p=this._getAdapter().countBookmarks(u);p.fail(function(){q.sap.log.error("Fail to count bookmarks");});return p;};this.deleteBookmarks=function(u){var t=this;if(!u||typeof u!=="string"){throw new Error("Missing URL");}var p=this._getAdapter().deleteBookmarks(u);p.done(function(){t.deleteURLStatesPersistentData(u);});p.fail(function(){q.sap.log.error("Fail to delete bookmark for: "+u);});return p;};this.updateBookmarks=function(u,p){if(!u||typeof u!=="string"){q.sap.log.error("Fail to update bookmark. No valid URL");throw new Error("Missing URL");}if(!p||typeof p!=="object"){q.sap.log.error("Fail to update bookmark. No valid parameters, URL is: "+u);throw new Error("Missing parameters");}var P=this._getAdapter().updateBookmarks(u,p);P.fail(function(){q.sap.log.error("Fail to update bookmark for: "+u);});return P;};this.onCatalogTileAdded=function(s){return this._getAdapter().onCatalogTileAdded(s);};this.changeURLStatesToPersistent=function(u){var c=sap.ushell.Container.getService("AppState");if(c.getSupportedPersistencyMethods().length===0){return;}if(u&&u.length>0){try{var x=g(u,"sap-xapp-state"),i=g(u,"sap-iapp-state");if(x!==undefined){c.makeStatePersistent(x,A.PersonalState);}if(i!==undefined){c.makeStatePersistent(i,A.PersonalState);}}catch(e){q.sap.log.error("error in converting transiant state to personal persistent when bookmark is added",e,"sap.ushell.services.LaunchPage");}}};this.deleteURLStatesPersistentData=function(u){var c=sap.ushell.Container.getService("AppState");if(c.getSupportedPersistencyMethods().length===0){return;}if(u&&u.length>0){try{var x=g(u,"sap-xapp-state"),i=g(u,"sap-iapp-state");if(x!==undefined||i!==undefined){this.countBookmarks(u).done(function(d){if(d===0){if(x!==undefined){c.deleteAppState(x);}if(i!==undefined){c.deleteAppState(i);}}});}}catch(e){q.sap.log.error("error in deleting persistent state when bookmark is deleted",e,"sap.ushell.services.LaunchPage");}}};function g(u,p){var R=new RegExp("(?:"+p+"=)([^&/]+)"),s=R.exec(u),v=undefined;if(s&&s.length===2){v=s[1];}return v;}}L.prototype._getAdapter=function(s){return this.oAdapters[s]||this.oAdapters.default;};L.hasNoAdapter=false;return L;},true);sap.ui.predefine('sap/ushell/services/NavTargetResolution',["sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ushell/navigationMode","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/UriParameters"],function(b,u,n,U,q,M,c,O,d){"use strict";function N(A,C,p,s){var S=s&&s.config,I=function(){return!!(S&&S.enableClientSideTargetResolution);},r=function(h){var a=I()?this._resolveHashFragmentClientSide(h):A.resolveHashFragment(h);return a;},l,R=[{name:"DefaultAdapter",isApplicable:function(){return true;},resolveHashFragment:r.bind(this)}],o;this._isClientSideTargetResolutionEnabled=I;this._nextResolveHashFragment=function(a,h){var e,f;e=a.pop();if(e.isApplicable(h)){q.sap.log.info("NavTargetResolution: custom resolver "+e.name+" resolves "+h);f=this._nextResolveHashFragment.bind(this,a);return e.resolveHashFragment(h,f);}return this._nextResolveHashFragment(a,h);};this._resolveHashFragmentClientSide=function(h){var H=this._validateHashFragment(h),f;if(!H.success){return new q.Deferred().reject(h+" is not a valid hash fragment").promise();}f=H.hashFragmentWithoutHash;return this._resolveHashFragmentClientSideAndFixApplicationType(f);};this._resolveHashFragmentClientSideAndFixApplicationType=function(f){var D=new q.Deferred();sap.ushell.Container.getService("ClientSideTargetResolution").resolveHashFragment(f).done(function(a){if(a&&a.applicationType==="SAPUI5"){a.applicationType="URL";}D.resolve(a);}).fail(function(){D.reject.apply(D,arguments);});return D.promise();};this._validateHashFragment=function(h){var H="",v={success:false};if(h&&h.charAt(0)!=="#"){throw new u.Error("Hash fragment expected in _validateHashFragment","sap.ushell.services.NavTargetResolution");}H=h.substring(1);if(H){v.success=true;}v.hashFragmentWithoutHash=H;return v;};this.expandCompactHash=function(h){var a=sap.ushell.Container.getService("URLParsing"),P,D=new q.Deferred();P=a.parseShellHash(h);if(P&&P.params&&P.params["sap-intent-param"]){sap.ushell.Container.getService("AppState").getAppState(P.params["sap-intent-param"][0]).done(function(e){var v=e.getData("sap-intent-param"),H=h;if(v){H=sap.ushell.Container.getService("URLShortening").expandParamGivenRetrievalFunction(h,"sap-intent-param",function(){return v;});}D.resolve(H);}).fail(function(){D.resolve(h);});}else{D.resolve(h);}return D.promise();};var w=["NWBC","WDA","TR"];this._adjustResolutionResultForUi5Components=function(a){var m,e;if(typeof a!=="object"){return;}delete a["sap.platform.runtime"];if(a&&a.applicationType&&a.applicationType==="SAPUI5"){a.applicationType="URL";}if(a.applicationType==="URL"){m=/^SAPUI5\.Component=(.*)/.exec(a.additionalInformation);e=m&&m[1];if(e){a.ui5ComponentName=e;}}};this._getSapSystem=function(h,a){var e;if(a&&a["sap-system"]){return a["sap-system"];}if(a&&a.url){e=(new d(a.url)).get("sap-system");if(e){return e;}}if(w.indexOf(a.applicationType)>=0&&h&&h.substring(1)){e=(new d(h.substring(1))).get("sap-system");if(e){return e;}}return undefined;};this.resolveTarget=function(a){var h,e=u.clone(a),D=new q.Deferred();u.addTime("resolveTarget");M.average("sap.ushell.navigation.resolveTarget");u.storeSapSystemToLocalStorage(e);h=sap.ushell.Container.getService("URLParsing").constructShellHash(e);sap.ushell.Container.getService("NavTargetResolution").resolveHashFragment("#"+h).done(function(f){M.end("sap.ushell.navigation.resolveTarget");D.resolve({url:f.url,text:f.text,externalNavigationMode:f.externalNavigationMode});}).fail(function(m){D.reject(m);});return D.promise();};this.resolveHashFragment=function(h){var D=new q.Deferred(),a=/sap-ushell-enc-test=([^&]*)(&.*)?$/,m,e,f,t=this;u.addTime("resolveHashFragment");M.average("sap.ushell.navigation.resolveHashFragment");this.expandCompactHash(h).done(function(H){if(H.indexOf("sap-ushell-enc-test")>=0){m=a.exec(H);if(m){e=m[1];if(e!=="A%20B%2520C"){sap.ushell.Container.getService("Message").error("This navigation is flagged as erroneous because"+" (likely the calling procedure) generated a wrong encoded hash."+" Please track down the encoding error and make sure to use the CrossApplicationNavigation service for navigation.","Navigation encoding wrong");}H=H.replace(/sap-ushell-enc-test=([^&]*)&/,"");H=H.replace(/(&|\?)sap-ushell-enc-test=([^&]*)$/,"");}}var P=t._invokeResolveHashChain(H);if(typeof A.processPostResolution==="function"){P=A.processPostResolution(H,P);}P.done(function(g){t._adjustResolutionResultForUi5Components(g);if(c(g)){if(!g.hasOwnProperty("navigationMode")){g.navigationMode=n.getNavigationMode(g,b.getCurrentApplication());}g.targetNavigationMode=n.getExternalNavigationMode(g.navigationMode);}if(c(g)&&!g.hasOwnProperty("sap-system")){f=t._getSapSystem(h,g);if(f){g["sap-system"]=f;}}M.end("sap.ushell.navigation.resolveHashFragment");D.resolve(g);}).fail(function(g){D.reject(g);});}).fail(function(g){D.reject(g);});return D.promise();};this._invokeResolveHashChain=function(h){var e=R.map(function(a){return a;});return this._nextResolveHashFragment(e,h).done(function(a){o=a;});};this.baseResolveHashFragment=r.bind(this);this._getGetLinksResolver=function(a){var g;if(this._isClientSideTargetResolutionEnabled()){g=this._getLinksClientSide.bind(this);return{resolver:g,warning:undefined,isGetSemanticObjectLinksCall:false};}if(Object.prototype.toString.apply(a.paramsOptions)==="[object Array]"&&a.paramsOptions.length>0){q.sap.log.warning("Parameter options supplied to #getLinks will be ignored because FLP is not configured to use sap.ushell.services.ClientSideTargetResolution for target resolution","provided parameters options: "+JSON.stringify(a.paramsOptions,null,4),"sap.ushell.services.NavTargetResolution");}g=A&&A.getLinks&&A.getLinks.bind(A);if(g){return{resolver:g,warning:undefined,isGetSemanticObjectLinksCall:false};}g=A&&A.getSemanticObjectLinks&&A.getSemanticObjectLinks.bind(A);if(g){return{resolver:g,warning:a.hasOwnProperty("action")?"the action argument was given, however, NavTargetResolutionAdapter does not implement getLinks method. Action will be ignored.":undefined,isGetSemanticObjectLinksCall:true};}return{resolver:undefined,warning:"Cannot determine resolver for getLinks method",isGetSemanticObjectLinksCall:undefined};};this.getLinks=function(a){var t=this,e=a.semanticObject,P=a.params,i=a.ignoreFormFactor,f=a.ui5Component,g=a.appStateKey,h=a.compactIntents,j,H,k=new q.Deferred(),m,v;if(/\?/.test(e)){throw new Error("Parameter must not be part of semantic object");}j=(P===undefined)?undefined:JSON.parse(JSON.stringify(P));if(g){j=j||{};j["sap-xapp-state"]=encodeURIComponent(g);}m=sap.ushell.Container.getService("ShellNavigation");var x=t._getGetLinksResolver(a),y,z;if(x.warning){q.sap.log.warning("A problem occurred while determining the resolver for getLinks",x.warning,"sap.ushell.services.NavTargetResolution");}v=x.resolver;if(v){y=function(E){k.reject(E);};z=function(B){if(h){t._shortenGetSemanticObjectLinksResults(B,f).done(function(D){k.resolve(D);});}else{k.resolve(B);}};if(x.isGetSemanticObjectLinksCall){H={target:{semanticObject:e,action:"dummyAction"},params:j};m.hrefForExternal(H,true,f,true).done(function(B){var D=B.params||j;v(e,D,i).done(z).fail(y);}).fail(function(B){k.reject(B);});}else{v(a).done(z).fail(y);}}else{k.resolve([]);}return k.promise();};this.getDistinctSemanticObjects=function(){if(this._isClientSideTargetResolutionEnabled()){var a=sap.ushell.Container.getService("ClientSideTargetResolution");return a.getDistinctSemanticObjects();}if(A&&A.getDistinctSemanticObjects){return A.getDistinctSemanticObjects.call(A);}q.sap.log.error("Cannot execute getDistinctSemanticObjects method","ClientSideTargetResolution must be enabled or NavTargetResolutionAdapter must implement getDistinctSemanticObjects method","sap.ushell.services.NavTargetResolution");return new q.Deferred().reject("Cannot execute getDistinctSemanticObjects").promise();};this._getLinksClientSide=function(a){var D=new q.Deferred(),e,f=new q.Deferred(),g=sap.ushell.Container.getService("URLParsing");if((a.params||{}).hasOwnProperty("sap-intent-param")){e="#"+a.semanticObject+"-dummyAction?"+g.paramsToString(a.params);this.expandCompactHash(e).done(function(E){f.resolve(g.parseShellHash(E).params);}).fail(D.reject.bind(D));}else{f.resolve(a.params);}f.done(function(){sap.ushell.Container.getService("ClientSideTargetResolution").getLinks(a).done(D.resolve.bind(D)).fail(D.reject.bind(D));});return D.promise();};this._shortenGetSemanticObjectLinksResults=function(g,a){var t=this,e=[],i=0,P=g.length,f=sap.ushell.Container.getService("URLParsing"),h=sap.ushell.Container.getService("ShellNavigation"),D=new q.Deferred();g.forEach(function(j){var k=f.parseShellHash(j.intent),m=h.compactParams(k.params,undefined,a);e.push(m);e[i].done(function(v,x){e[v]={text:j.text,intent:"#"+k.semanticObject+"-"+k.action+"?"+f.paramsToString(x)};}.bind(t,i)).fail(function(v,x){q.sap.log.warning("Cannot shorten GetSemanticObjectLinks result, using expanded form","Failure message: "+x+"; intent had title ''"+j.title+"'' and link ''"+j.intent+"'","sap.ushell.services.NavTargetResolution");e[v]={text:j.text,intent:j.intent};}.bind(t,i)).always(function(){P--;if(P===0){D.resolve(e);}});i++;});return D.promise();};this.isIntentSupported=function(i){var m={},a;if(this._isClientSideTargetResolutionEnabled()){a=sap.ushell.Container.getService("ClientSideTargetResolution");return a.isIntentSupported(i);}if(A.isIntentSupported){return A.isIntentSupported(i);}i.forEach(function(e){m[e]={supported:undefined};});return(new q.Deferred()).resolve(m).promise();};this.isNavigationSupported=function(i){var a=sap.ushell.Container.getService("URLParsing"),D=new q.Deferred(),e=[];e=i.map(function(f){if(typeof f==="string"){return f;}return"#"+a.constructShellHash(f);});this.isIntentSupported(e).done(function(f){var g=e.map(function(h){return f[h]||{supported:false};});D.resolve(g);}).fail(D.reject.bind(D));return D.promise();};this.registerCustomResolver=function(a){if(typeof a.name!=="string"){q.sap.log.error("NavTargetResolution: Custom Resolver must have name {string} member");return false;}if(typeof a.isApplicable!=="function"){q.sap.log.error("NavTargetResolution: Custom Resolver must have isApplicable member");return false;}if(typeof a.resolveHashFragment!=="function"){q.sap.log.error("NavTargetResolution: Custom Resolver must have \"resolveHashFragment\" member");return false;}R.push(a);return true;};if(S&&Array.isArray(S.resolveLocal)){l=S.resolveLocal.map(function(a){return a.linkId;});this.registerCustomResolver({name:"localResolveNavigationResolver",cleanHash:function(h){if(h===""){return"#";}var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));if(!a){return"#";}h="#"+a.semanticObject+"-"+a.action;return h;},_getIndex:function(a){var h=this.cleanHash(a);return l.indexOf(h.substring(1));},isApplicable:function(a){return this._getIndex(a)>=0;},resolveHashFragment:function(h){var D,i=this._getIndex(h),a,e,f,g;D=new q.Deferred();a=JSON.parse(JSON.stringify(S.resolveLocal[i].resolveTo));e=sap.ushell.Container.getService("URLParsing").parseShellHash(h);if(e&&e.params){g=sap.ushell.Container.getService("URLParsing").paramsToString(e.params);if(g){f=a.url.indexOf("?")>=0;a.url=a.url+(f?"&":"?")+g;}}D.resolve(a);return D.promise();}});}this.registerCustomResolver({name:"StandaloneLocalResolver",aElement:undefined,cleanHash:function(h){if(h===""){return undefined;}var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));if(!a){return undefined;}h="#"+a.semanticObject+"-"+a.action;return h;},isRunStandaloneHash:function(h){return typeof h==="string"&&h.indexOf("#Shell-runStandaloneApp")===0;},isApplicable:function(h){h=this.cleanHash(h);if(!h){return false;}return h==="#Test-url"||h==="#Test-local1"||h==="#Test-local2"||h==="#Test-config"||h==="#Test-clear"||this.isRunStandaloneHash(h);},parseUrl:function(a){if(!this.aElement){this.aElement=window.document.createElement("a");}this.aElement.href=a;return this.aElement;},resolveHashFragment:function(h){var D=new q.Deferred(),e=null,t=this,f,P,L,g,i,j,k,m,F=h,v;h=this.cleanHash(h);if(!h){return false;}e={"#Test-config":{applicationType:"URL",url:"/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/demoapps/FioriSandboxConfigApp",additionalInformation:"SAPUI5.Component=sap.ushell.demoapps.FioriSandboxConfigApp"},"none":{applicationType:"URL",url:"",additionalInformation:""}};function x(K){if(localStorage){return localStorage[K];}return undefined;}function y(m,K){var f={},a;for(a in m){if(m.hasOwnProperty(a)){if(a!==K){f[a]=m[a];}}}return f;}function z(a){if(u.calculateOrigin(t.parseUrl(a))!==u.calculateOrigin(window.location)){return undefined;}var H=(new U(t.parseUrl(a).href)).normalizePathname().pathname(),J=O.create("runStandaloneAppFolderWhitelist",S),K;if(!J){return undefined;}for(K in J){if(J.hasOwnProperty(K)){if(J[K]){if(K==="*"||H.indexOf((new U(t.parseUrl(K).href)).normalizePathname().pathname())===0){return a;}}}}return undefined;}function B(K){return(new d(window.location.href)).get(K);}function E(a,K){return(a.params&&a.params[K]&&a.params[K][0])||B(K);}function G(K,V){if(localStorage){localStorage[K]=V;}}if(e[h]){f=e[h];}else if(h==="#Test-clear"){G("sap.ushell.#Test-local1",undefined);G("sap.ushell.#Test-local2",undefined);q.sap.log.info("NavTargetResolution: Local storage keys for #Test have been cleared");f=e["#Test-config"];}else if(this.isRunStandaloneHash(h)){L={applicationType:"URL"};P=sap.ushell.Container.getService("URLParsing").parseShellHash(F);g=(E(P,"sap-ushell-SAPUI5.Component")&&"SAPUI5.Component="+E(P,"sap-ushell-SAPUI5.Component"))||(E(P,"sap-ushell-additionalInformation"));v=E(P,"sap-ushell-url")||"";m=y(P.params,"sap-ushell-SAPUI5.Component");m=y(m,"sap-ushell-additionalInformation");m=y(m,"sap-ushell-url");j=sap.ushell.Container.getService("URLParsing").paramsToString(m);k=v.indexOf("?")>=0;if(j){v=v+(k?(((v[v.length-1]!=="&")&&"&")||""):"?")+j;}L.url=z(v);L.additionalInformation=g;f=L;}else if(h==="#Test-local1"||h==="#Test-local2"||h==="#Test-url"){f=x("sap.ushell."+h);if(!f||f==="undefined"){L={applicationType:"URL"};}else{L=JSON.parse(f);}if((window.location.hostname==="localhost")||(S&&S.allowTestUrlComponentConfig)){i="sap-ushell-test-"+h.substring(6);g=B(i+"-additionalInformation");if(g){L.additionalInformation=g;}v=B(i+"-url");if(v){L.url=z(v);}}if(!L.url){q.sap.log.info("NavTargetResolution: No configured app for "+h+" found ( local storage or url params sap-ushell-test-local1-url  sap-ushell-test-local1-additionalInfo  not supplied? ");q.sap.log.info("NavTargetResolution: Defaulting to config app ...\n");D.reject("URL is not resolvable");return D.promise();}L.url=z(L.url);f=L;}if(f.url===undefined){D.reject("URL is not resolvable");return D.promise();}q.sap.log.info("NavTargetResolution: As URL:  http://localhost:8080/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-ushell-test-local1-url="+encodeURIComponent((f&&f.url)||"")+"&sap-ushell-test-local1-additionalInformation="+encodeURIComponent((f&&f.additionalInfo)||"")+"#Test-local1");q.sap.log.info("NavTargetResolution: Resolving "+h+" to "+JSON.stringify(f));D.resolve(f);return D.promise();}});this.getCurrentResolution=function(){return o;};}N.hasNoAdapter=false;return N;},true);sap.ui.predefine('sap/ushell/services/PageBuilding',["sap/ui2/srvc/factory","sap/ui2/srvc/page","sap/ui/thirdparty/jquery"],function(f,p,q){"use strict";function P(a,c){this.getFactory=function(){return a.getFactory();};this.getPage=function(s){return a.getFactory().createPage(s);};this.getPageSet=function(i){var d=new q.Deferred();a.getFactory().createPageSet(i,d.resolve.bind(d),d.reject.bind(d));return d.promise();};}P.hasNoAdapter=false;return P;},true);sap.ui.predefine('sap/ushell/services/Personalization',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/ContextContainer","sap/ushell/services/_Personalization/WindowAdapter","sap/ushell/services/_Personalization/TransientPersonalizer","sap/ushell/services/_Personalization/PersonalizationContainer","sap/ushell/services/_Personalization/Personalizer","sap/ushell/services/_Personalization/VariantSetAdapter","sap/ushell/services/_Personalization/Variant","sap/ushell/services/_Personalization/VariantSet","sap/ushell/services/_Personalization/WindowAdapterContainer","sap/ui/base/ManagedObject","sap/ui/thirdparty/jquery"],function(u,p,a,C,W,T,P,b,V,c,d,e,M,q){"use strict";function f(A,o,s,g){this._oConfig=(g&&g.config)||{};this._seed=(g&&g.config&&typeof g.config.seed==="string"&&g.config.seed)||"12345678901AFERANDOMBETTER";while(this._seed.length<40){this._seed=this._seed+this._seed;}this._oAppVariantAdapterWithBackendAdapter=this._configureAppVariantStorage(this._oConfig.appVariantStorage);this._oAdapterWithBackendAdapter={lazy:false,instance:new W(this,A)};this._oAdapterWindowOnly={lazy:false,instance:new W(this,undefined)};this._oContainerMap=new u.Map();this._oPendingOperationsMap=new u.Map();}f.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseeded by subsequent save";f.prototype.constants=a;f.prototype._configureAppVariantStorage=function(A){var t=this,D="sap.ushell.adapters.AppVariantPersonalizationAdapter";if(!A){A={adapter:{module:D}};}if(Object.keys(A).length===0||A.enabled===false){return;}var s=(A.adapter&&A.adapter.module)||D,g=s.split(".").join("/");var h=function(){t._oAppVariantAdapterLoadPromise=t._oAppVariantAdapterLoadPromise||(function(){var o=new q.Deferred();try{sap.ui.require([g],R);}catch(r){o.reject(r);}function R(i){try{var j=new i();var w=new W(t,j);o.resolve(w);}catch(E){o.reject(E);}}return o.promise();})();return t._oAppVariantAdapterLoadPromise;};return{lazy:true,create:h};};f.prototype.getGeneratedKey=function(){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",g=s.length,r="",t=this;var R=function(i){return(t._seed.charCodeAt(i)+Math.floor(Math.random()*g))%g;};if(window&&window.crypto&&window.crypto.getRandomValues){var h=new Uint32Array(40);window.crypto.getRandomValues(h);R=function(i){return(h[i]+t._seed.charCodeAt(i))%s.length;};}var j=function(i){return s[R(i)];};while(r.length<40){r+=j(r.length);}return r;};f.prototype.getPersonalizer=function(o,s,g){g=g||this._getApplicationComponent();return new b(this,this._oAdapterWithBackendAdapter.instance,o,s,g);};f.prototype._getApplicationComponent=function(){var o;var O=M._sOwnerId;if(O){o=sap.ui.getCore().getComponent(O);if(o instanceof sap.ui.core.UIComponent){return o;}}return undefined;};f.prototype.getTransientPersonalizer=function(){return new T();};f.prototype.getContainer=function(s,S,o){o=o||this._getApplicationComponent();return this._createContainer(s,S,false,o);};f.prototype.createEmptyContainer=function(s,S,o){o=o||this._getApplicationComponent();return this._createContainer(s,S,true,o);};f.prototype._createContainer=function(s,S,g,o){var t=this,l,h,i,j,A,k,U,D=new q.Deferred();if(typeof s!=="string"){throw new u.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ");}l=p.isLaunchpadReload();U=!!(p.isAppVariant(o)&&(!S||!S.shared)&&this._oAppVariantAdapterWithBackendAdapter);A=p.adjustScope(S,l);if(U){var m=o.getManifestObject();A.component=o;A.appVarId=m.getEntry("/sap.ui5/appVariantId");A.appVersion=m.getEntry("/sap.app/applicationVersion/version");}k=p.addContainerPrefix(s);i=U?this._oAppVariantAdapterWithBackendAdapter:this._oAdapterWithBackendAdapter;h=t._oAdapterWindowOnly;j=p.pickAdapter(S,l,h,i);p.loadAdapter(j).then(function(L){var n,r=new C(t,L,k,A,o);var v=(L&&L.supportsGetWithoutSubsequentLoad===true);if(g&&v){n=new q.Deferred();n.resolve(r);}else{n=r.load();}n.fail(function(){D.reject();}).done(function(){if(g||r._isExpired()){r.clear();}D.resolve(r);});},function(E){D.reject(E);});return D.promise();};f.prototype.delContainer=function(s,S){var D={},o,g="",t=this;S=t._adjustScope(S,false);g=p.addContainerPrefix(s);D=new q.Deferred();o=t._pendingContainerOperations_cancelAddNext(s,null);o.always(function(){t.getContainer(s,S).fail(function(){t._pendingContainerOperations_cancelAddNext(s,D);D.reject();}).done(function(){var A;t._pendingContainerOperations_cancelAddNext(s,D);A=S.validity===0?t._oAdapterWindowOnly:t._oAdapterWithBackendAdapter;p.loadAdapter(A).then(function(l){l.delAdapterContainer(g,S).fail(function(){D.reject();}).done(function(){D.resolve();});},function(){D.reject();});});});return D.promise();};f.prototype._pendingContainerOperations_flushAddNext=function(s,D){var o,S;o=this._oPendingOperationsMap.get(s);if(!o){o=new q.Deferred();o.resolve();}if(D!==null){this._oPendingOperationsMap.put(s,D);}if(!o||o.state()!=="pending"){return o;}clearTimeout(o._sapTimeoutId);o._sapTimeoutId=undefined;if(typeof o._sapFnSave==="function"){S=o._sapFnSave;o._sapFnSave=undefined;S();}return o;};f.prototype._pendingContainerOperations_cancelAddNext=function(s,D){var o;o=this._oPendingOperationsMap.get(s);if(!o){o=new q.Deferred();o.resolve();}if(D!==null){this._oPendingOperationsMap.put(s,D);}if(!o||o.state()!=="pending"){return o;}if(o._sapTimeoutId){clearTimeout(o._sapTimeoutId);o._sapTimeoutId=undefined;o.resolve(f.prototype.SAVE_DEFERRED_DROPPED);}return o;};f.prototype.getPersonalizationContainer=function(s){var g="",o={},D={};if(typeof s!=="string"){throw new u.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ");}g=p.addContainerPrefix(s);if(this._oContainerMap.containsKey(g)){return this._oContainerMap.get(g).promise();}D=new q.Deferred();o=new P(this._oAdapterWithBackendAdapter.instance,g);o.done(function(h){D.resolve(h);}).fail(function(h){D.reject(h);});this._oContainerMap.put(g,D);return D.promise();};f.prototype.delPersonalizationContainer=function(s){var D={},g="",t=this;g=p.addContainerPrefix(s);D=new q.Deferred();this.getPersonalizationContainer(s).fail(function(){D.reject();}).done(function(){t._oAdapterWithBackendAdapter.instance.delAdapterContainer(g).fail(function(){D.reject();}).done(function(){t._oContainerMap.remove(g);D.resolve();});});return D.promise();};f.prototype._adjustScope=p.adjustScope;f.hasNoAdapter=false;f.ContextContainer=C;f.Variant=c;f.VariantSet=d;f.VariantSetAdapter=V;f.WindowAdapter=W;f.WindowAdapterContainer=e;return f;},true);sap.ui.predefine('sap/ushell/services/PluginManager',["sap/ushell/services/_PluginManager/Extensions","sap/base/Log","sap/ushell/EventHub","sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/ushell/utils"],function(g,L,E,q,U,u){"use strict";var S="sap.ushell.services.PluginManager",a="sap-ushell-plugin-type",b="RendererExtensions",c="sap.ushell.components.shell.defaults",s=[b,"UserDefaults","UserImage","ContentProvider","AppWarmup"];function P(C,p,o){var t=this,d=[],f=false,l;this._oPluginCollection={};this._oCategoryLoadingProgress={};this._mInitializedComponentPromise={};this._sPluginAgentsNames="";this._oConfig=(o&&o.config)||{};if(this._oConfig.isBlueBox===undefined){this._oConfig.isBlueBox=false;}s.forEach(function(e){t._oPluginCollection[e]={};t._oCategoryLoadingProgress[e]=new q.Deferred();});this._handlePluginCreation=function(e,h,i){var t=this,j=(t._oPluginCollection[e])[h];try{if(j.hasOwnProperty("component")){if(t._mInitializedComponentPromise.hasOwnProperty(j.component)){t._mInitializedComponentPromise[j.component].then(function(){t._instantiateComponent(j,i);},function(){t._instantiateComponent(j,i);});}else{t._mInitializedComponentPromise[j.component]=t._instantiateComponent(j,i);}}else{q.sap.log.error("Invalid plugin configuration. The plugin "+h+" must contain a <component> key",S);}}catch(k){q.sap.log.error("Error while loading bootstrap plugin: "+j.component||"",S);if(i){i.reject(k);}}};this._getFileNameForXhrAuth=function(){return"Component-preload.js";};this._handleXhrAuthentication=function(A,e){var x;if(A&&["true",true,"X"].indexOf(A["sap-ushell-xhr-authentication"])>-1){if(!e){q.sap.log.error(["Illegal state: configuration parameter 'sap-ushell-xhr-authentication-timeout' set, but no component URL specified.","XHR authentication request will not be sent. Please check the target mapping definitions for plug-ins","and the application index."].join(" "),undefined,S);return q.when();}if(A.hasOwnProperty("sap-ushell-xhr-authentication-timeout")){x=parseInt(A["sap-ushell-xhr-authentication-timeout"],10);if(isNaN(x)){q.sap.log.error(["Invalid value for configuration parameter 'sap-ushell-xhr-authentication-timeout' for plug-in component with URL '",e,"': '",A["sap-ushell-xhr-authentication-timeout"],"' is not a number. Timeout will be ignored."].join(""),undefined,S);}else{sap.ushell.Container.setXhrLogonTimeout(e,x);}}return q.ajax(e+"/"+this._getFileNameForXhrAuth());}return q.when();};this._instantiateComponent=function(e,h){var D=new q.Deferred(),i=JSON.parse(JSON.stringify(e)),A={ui5ComponentName:i.component,url:i.url,getExtensions:g};function j(m){return function(n){m=m||"Cannot create UI5 plugin component: (componentId/appdescrId :"+A.ui5ComponentName+")\n"+n+" properties "+JSON.stringify(A)+"\n This indicates a plugin misconfiguration, see e.g. Note 2316443.";n=n||"";q.sap.log.error(m,n.stack,S);if(h){h.reject.apply(this,arguments);}D.reject.apply(this,arguments);};}function k(){sap.ushell.Container.getService("Ui5ComponentLoader").createComponent(A).done(function(m){if(e.config&&e.config["sap-component-agents"]){d.push({componentName:e.component,url:e.url,agents:e.config["sap-component-agents"],pluginComp:m});}if(h){h.resolve(m);}D.resolve.apply(this,arguments);}).fail(j());}i.name=i.component;delete i.component;A.applicationDependencies=i;if(i.config){A.applicationConfiguration=i.config;delete i.config;}A.loadDefaultDependencies=false;this._handleXhrAuthentication(A.applicationConfiguration,i.url).done(k).fail(j("XHR logon for FLP plugin failed"));return D.promise();};this.getSupportedPluginCategories=function(){return JSON.parse(JSON.stringify(s));};this.getRegisteredPlugins=function(){return JSON.parse(JSON.stringify(this._oPluginCollection));};this.registerPlugins=function(h){var t=this,i,j,k,m=[],n,r;if(!h){return;}u.addTime("PluginManager.registerPlugins");if(this._oConfig.isBlueBox===true){n=new U(window.location.href).get("sap-plugins");if(n&&n.length>0){n=","+n+",";}else{n=undefined;}}else{E.emit("pluginConfiguration",h);}Object.keys(h).sort().forEach(function(v){i=h[v]||{};j=i.config||{};k=j[a]||"";if(i.enabled===false){return;}if(!t._isFormFactorSupported(i)){L.info("Plugin '"+v+"' filtered from result: form factor not supported");return;}if(t._oConfig.isBlueBox===true){if(i.config&&i.config["sap-plugin-agent"]===true){r=(i.config["sap-plugin-agent-id"]||v);if(!t.isPluginAgentSupported(r)){if(n){if(n.indexOf(","+r+",")<0){return;}}else{return;}}}}if(i.enabled===undefined){i.enabled=true;}if(i.hasOwnProperty("module")){q.sap.log.error("Plugin "+v+" cannot get registered, because the module mechanism for plugins is not valid anymore. Plugins need to be defined as SAPUI5 components.",S);q.sap.require(i.module);return;}if(j&&j.hasOwnProperty(a)){if(s&&Array.prototype.indexOf.call(s,k)!==-1){if(m.indexOf(k)===-1){m.push(k);}t._oPluginCollection[k][v]=JSON.parse(JSON.stringify(i));}else{q.sap.log.warning("Plugin "+v+" will not be inserted into the plugin collection of the PluginManager, because of unsupported category "+k,S);}}else{t._oPluginCollection[b][v]=JSON.parse(JSON.stringify(i));if(m.indexOf(b)===-1){m.push(b);}}});try{if(t._oConfig.isBlueBox!==true){t._buildNamesOfPluginsWithAgents();}}catch(e){q.sap.log.error("failed to build plugin agents names list",(e.message||e.toString()),"sap.ushell.services.PluginManager");}m.forEach(function(v){if(t._oCategoryLoadingProgress.hasOwnProperty(v)&&t._oCategoryLoadingProgress[v].state()==="resolved"){t.loadPlugins(v);}});};this._isFormFactorSupported=function(e){var D=e.deviceTypes,h=u.getFormFactor();if(D&&D[h]===false){return false;}return true;};this.getPluginLoadingPromise=function(e){if(this._oCategoryLoadingProgress.hasOwnProperty(e)){return this._oCategoryLoadingProgress[e].promise();}};this.registerAgentLifeCycleManager=function(i){l=i;if(f){l(d);}};this.loadPlugins=function(e){var t=this,h,i,j;u.setPerformanceMark("FLP -- PluginManager.startLoadPlugins");u.addTime("PluginManager.startLoadPlugins["+e+"]");if(s&&Array.prototype.indexOf.call(s,e)!==-1){if(t._oCategoryLoadingProgress[e].pluginLoadingTriggered===undefined){t._oCategoryLoadingProgress[e].pluginLoadingTriggered=true;}if(Object.keys(t._oPluginCollection[e]).length>0){h=[];j=Object.keys(t._oPluginCollection[e]);if(new U(window.location.href).get("sap-ushell-xx-pluginmode")==="discard"&&e==="RendererExtensions"){j=j.filter(function(I){return(t._oPluginCollection[e][I].component===c);});}j.forEach(function(k){var m=t._oPluginCollection[e][k];if(!m.loaded){m.loaded=true;i=new q.Deferred();h.push(i.promise());t._handlePluginCreation(e,k,i);}});q.when.apply(undefined,h).done(function(){u.addTime("PluginManager.endLoadPlugins["+e+"]");u.setPerformanceMark("FLP -- PluginManager.endLoadPlugins");if(l){l(d);}f=true;t._oCategoryLoadingProgress[e].resolve();}).fail(t._oCategoryLoadingProgress[e].reject.bind());}else{t._oCategoryLoadingProgress[e].resolve();}}else{q.sap.log.error("Plugins with category "+e+" cannot be loaded by the PluginManager",S);t._oCategoryLoadingProgress[e].reject("Plugins with category "+e+" cannot be loaded by the PluginManager");}return t._oCategoryLoadingProgress[e].promise();};this._buildNamesOfPluginsWithAgents=function(){var t=this,n="",e;Object.keys(t._oPluginCollection).forEach(function(h){Object.keys(t._oPluginCollection[h]).forEach(function(i){e=t._oPluginCollection[h][i];if(e&&e.enabled&&e.enabled===true){if(e.config&&e.config["sap-plugin-agent"]===true){n+=(e.config["sap-plugin-agent-id"]||i)+",";}}});});if(n.endsWith(",")){n=n.slice(0,-1);}this._sPluginAgentsNames=n;};this._getNamesOfPluginsWithAgents=function(){return this._sPluginAgentsNames;};}P.hasNoAdapter=true;return P;},true);sap.ui.predefine('sap/ushell/services/ReferenceResolver',["sap/ushell/User","sap/ui/model/odata/ODataUtils","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject"],function(U,O,q,i){"use strict";function a(){this.getValue=function(r){var d=new q.Deferred();var v;if(r==="User.env.sap-ui-legacy-date-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyDateFormat();}if(r==="User.env.sap-ui-legacy-number-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyNumberFormat();}if(r==="User.env.sap-ui-legacy-time-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyTimeFormat();}if(r==="User.env.sap-language"){v=sap.ushell.Container.getUser().getLanguage();}if(r==="User.env.sap-languagebcp47"){v=sap.ushell.Container.getUser().getLanguageBcp47();}if(r==="User.env.sap-accessibility"){v=(sap.ushell.Container.getUser().getAccessibilityMode())?"X":undefined;}if(r==="User.env.sap-statistics"){v=(sap.ui.getCore().getConfiguration().getStatistics())?"true":undefined;}if(r==="User.env.sap-theme"){v=sap.ushell.Container.getUser().getTheme(U.prototype.constants.themeFormat.THEME_NAME_PLUS_URL);}if(r==="User.env.sap-theme-name"){v=sap.ushell.Container.getUser().getTheme();}if(r==="User.env.sap-theme-NWBC"){v=sap.ushell.Container.getUser().getTheme(U.prototype.constants.themeFormat.NWBC);}d.resolve({"value":v});return d.promise();};}function R(c,p,C){this._getUserEnvReferenceResolver=function(){if(!this.oUserEnvReferenceResolver){this.oUserEnvReferenceResolver=new a();}return this.oUserEnvReferenceResolver;};this.resolveReferences=function(r){var t=this,d=new q.Deferred(),u,b=[],A=true,D={},o={},e;var g=r.map(function(s){var h;if(s.indexOf("User.env.")===0){h=s;o[h]=1;}if(s.indexOf("UserDefault.")===0){h=t._extractAnyUserDefaultReferenceName(s);D[h]=1;}if(typeof h!=="string"){A=false;q.sap.log.error("'"+s+"' is not a legal reference name","sap.ushell.services.ReferenceResolver");}return{full:s,name:h};});if(!A){return d.reject("One or more references could not be resolved").promise();}Object.keys(D).forEach(function(n){u=u||sap.ushell.Container.getService("UserDefaultParameters");b.push(u.getValue(n));});Object.keys(o).forEach(function(n){e=e||t._getUserEnvReferenceResolver();b.push(e.getValue(n));});q.when.apply(q,b).done(function(){var k={};var I=0,h=arguments;Object.keys(D).forEach(function(n){D[n]=h[I];I=I+1;});Object.keys(o).forEach(function(n){o[n]=h[I];I=I+1;});g.forEach(function(j){var m;if(j.full.indexOf("UserDefault.extended.")===0){m=t.mergeSimpleAndExtended(D[j.name]);if(!i(m)){k[j.full]=m;}else{k[j.full]=undefined;}}else if(j.full.indexOf("UserDefault.")===0){k[j.full]=D[j.name].value;}else if(j.full.indexOf("User.env.")===0){k[j.full]=o[j.name].value;}});d.resolve(k);});return d.promise();};this._extractAnyUserDefaultReferenceName=function(r){var P=this.extractExtendedUserDefaultReferenceName(r);if(typeof P==="string"){return P;}return this.extractUserDefaultReferenceName(r);};this.extractExtendedUserDefaultReferenceName=function(r){if(typeof r!=="string"||r.indexOf("UserDefault.extended.")!==0){return undefined;}return r.replace(/^UserDefault[.]extended[.]/,"");};this.extractUserDefaultReferenceName=function(r){if(typeof r!=="string"||r.indexOf("UserDefault.")!==0||r.indexOf("UserDefault.extended.")===0){return undefined;}return r.replace(/^UserDefault[.]/,"");};this.mergeSimpleAndExtended=function(v){var m=q.extend(true,{},v.extendedValue);if(typeof v.value==="string"){if(!Array.isArray(m.Ranges)){m.Ranges=[];}m.Ranges.push({"Sign":"I","Option":"EQ","Low":v.value,"High":null});}return m;};function f(u){var r=/{([^}%]*%%[^%]+%%)}?/g,b=/([^%]*)%%/,d=/%%([^%]+)%%/,o,e,g,F=[];o=r.exec(u);while(o){e=b.exec(o[1]);g=d.exec(o[1]);F.push({edmType:e[1],name:g[1]});o=r.exec(u);}return F;}this.resolveUserDefaultParameters=function(u){var d=new q.Deferred(),r,s,I=[],o;o=/[^(?]*/.exec(u);r=(o===null)?[]:f(o[0]);r.forEach(function(g){I.push(g.name);});o=/[(?][^]*/.exec(u);r=(o===null)?[]:f(o[0]);var b=[],e={};r.forEach(function(g){b.push(g.name);e[g.name]=g.edmType;});s=b.filter(function(g){if(/^UserDefault\.(?!extended\.).+/.test(g)){return true;}I.push(g);return false;});if(s.length>0){this.resolveReferences(s).done(function(g){var h=u,D=[];Object.keys(g).forEach(function(j){var k,l=false;while(k!=h){k=h;if(g[j]!==undefined){var F=O.formatValue(g[j],e[j]);h=h.replace("{"+e[j]+"%%"+j+"%%}",window.encodeURIComponent(F));}else{l=true;h=h.replace("{"+e[j]+"%%"+j+"%%}","");}}if(l){D.push(j);}});d.resolve({url:h,defaultsWithoutValue:D,ignoredReferences:I});});}else{d.resolve({url:u,defaultsWithoutValue:[],ignoredReferences:I});}return d.promise();};}R.hasNoAdapter=true;return R;},true);sap.ui.predefine('sap/ushell/services/SupportTicket',["sap/ushell/Config"],function(C){"use strict";function S(a,c,p,s){this.createTicket=function(o){return a.createTicket(o);};this.isEnabled=function(){return C.last("/core/extension/SupportTicket");};}S.hasNoAdapter=false;return S;},true);sap.ui.predefine('sap/ushell/services/URLParsing',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/base/util/UriParameters"],function(U,u,b){"use strict";function c(){var r=/^(([A-Za-z0-9_/]+)-([A-Za-z0-9_/-]+)(~([A-Z0-9a-z=+/]+))?)?([?]([^&]|(&[^/]))*&?)?$/;this.getShellHash=function(s){var a=/[^#]*#(([^&]|&[^/])*)(&\/.*)?/,m=a.exec(s);if(m){return m[1];}return undefined;};this.getHash=function(s){var a=/#(.*)/,m=a.exec(s);if(m){return m[1];}return undefined;};this.isIntentUrl=function(s){var a=/^#/,t,l,T,L,h,p;if(typeof s!=="string"){return false;}if(!a.test(s)){t=(new U(s)).normalize();T=t.protocol()+"://"+t.host()+t.pathname();l=(new U(window.location.href)).normalize();L=l.protocol()+"://"+l.host()+l.pathname();if(T!==L){return false;}}h=this.getHash(s);if(!h){return false;}p=this.parseShellHash(h);if(p&&p.semanticObject&&p.action){return true;}return false;};this.parseParameters=function(p){if(!p){return{};}return new b(p).mParams||{};};this.paramsToString=function(p){return u.urlParametersToString(p);};this.privparamsToString=function(p,D,a){return u.urlParametersToString(p,D,a);};this.parseShellHash=function(h){var a=r,s,S,A,C,p,m,e;if(!h){return undefined;}s=this.splitHash(h);m=a.exec(s.shellPart);if(m){S=m[2];A=m[3];C=m[5];p=m[6];e=this.parseParameters(p);return{semanticObject:S,action:A,contextRaw:C,params:e,appSpecificRoute:s.appSpecificRoute};}if(s.appSpecificRoute){return{semanticObject:undefined,action:undefined,contextRaw:undefined,params:{},appSpecificRoute:s.appSpecificRoute};}return undefined;};this.privstripLeadingHash=function(h){if(h[0]==="#"){return h.substring(1);}return h;};this.splitHash=function(h){var a=/^(?:#|)([\S\s]*?)(&\/[\S\s]*)?$/,m,s,A;if(h===undefined||h===null||h===""){return{};}m=a.exec(h);s=m[1];if(s!==""&&!r.test(s)){return{};}A=m[2];if(s||A){return{shellPart:s,appSpecificRoute:A};}return{};};function d(s,a){if(a){return s+a;}return s;}this.constructShellHash=function(s){var e,p,f,i=null,k,l=[],g="?",a=null;if(!s){return"";}if(!s.target){s.target={};s.target.semanticObject=s.semanticObject;s.target.action=s.action;s.target.contextRaw=s.contextRaw;}if(s.target.shellHash||s.target.shellHash===""){f=this.privstripLeadingHash(s.target.shellHash);return d(f,s.appSpecificRoute);}if(s.target.semanticObject&&s.target.action){e=s.target.semanticObject+"-"+s.target.action.replace(/[?].*/,"");}else{return d("",s.appSpecificRoute);}if(s.target.contextRaw){e+="~"+s.target.contextRaw;}g="?";a=null;l=[];for(a in s.params){if(s.params.hasOwnProperty(a)){l.push(a);}}p=(s.params&&JSON.parse(JSON.stringify(s.params)))||{};if(s.appStateKey){l.push("sap-xapp-state");p["sap-xapp-state"]=s.appStateKey;}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(Array.isArray(p[a])){if(p[a].length>1){jQuery.sap.log.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!");}for(i=0;i<p[a].length;i=i+1){e+=g+encodeURIComponent(a)+"="+encodeURIComponent(p[a][i]);g="&";}}else{e+=g+encodeURIComponent(a)+"="+encodeURIComponent(p[a]);g="&";}}return d(e,s.appSpecificRoute);};this.addSystemToServiceUrl=function(s,C){var R,o,S=C;if(!s||s.indexOf("/")!==0||s.indexOf("//")===0){throw new u.Error("Invalid URL: "+s,"sap.ushell.services.URLParsing");}if(C instanceof sap.ui.core.Component){o=(typeof C.getComponentData==="function")&&C.getComponentData();S=o&&o.startupParameters&&o.startupParameters["sap-system"]&&o.startupParameters["sap-system"][0];}R=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(!S&&!C&&R&&R.url){S=new b(R.url).get("sap-system");}if(/^[^?]*(;mo([/;?]|$))/.test(s)){}else if(/^[^?]*(;o=([/;?]|$))/.test(s)){s=s.replace(/;o=([/;?]|$)/,(S?";o="+S:"")+"$1");}else if(!/^[^?]*;o=/.test(s)&&S){s=s.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+S+"$2");}sap.ushell.Container.addRemoteSystemForServiceUrl(s);return s;};}c.hasNoAdapter=true;return c;},true);sap.ui.predefine('sap/ushell/services/URLShortening',function(){"use strict";function U(){var t=this;this.ABBREV_PARAM_NAME="sap-intent-param";this.URL_LENGTH_LIMIT=1023;this.URL_PARAMS_LENGTH_LIMIT=512;this._replaceSapXAppStateRawWithKeyIfRequired=function(v,s){var V,k;if(typeof v!=="string"||/^[A-Z0-9]{40}$/.test(v)){return v;}try{V=JSON.parse(v);}catch(e){jQuery.sap.log.error("This cannot happen: sap-xapp-state parameter value is neither key nor JSON parseable");return v;}k=s&&s.getNextKey();this._storeValue(k,V,s);return k;};this.compactHash=function(u,r,s){var S,k,R,p,o,a,b=[this.ABBREV_PARAM_NAME,"sap-system","sap-xapp-state"];if(r){r.forEach(function(A){b.push(A);});}o=sap.ushell.Container.getService("URLParsing");S=o.parseShellHash(u);if(!S){jQuery.sap.log.error("the URL "+u+" is not compliant. It may break the product and cause unwanted navigation behavior.");return{hash:u};}p="";if(u.charAt(0)==="#"){p="#";}var v=S&&S.params&&S.params["sap-xapp-state"]&&S.params["sap-xapp-state"][0];if(v){S.params["sap-xapp-state"]=[this._replaceSapXAppStateRawWithKeyIfRequired(v,s)];u=p+o.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:S.params,appSpecificRoute:S.appSpecificRoute});}if(typeof u!=="string"||u.length<t.URL_LENGTH_LIMIT){return{hash:u};}if(S&&((S.params&&S.params[t.ABBREV_PARAM_NAME]))){return{hash:u};}k=s&&s.getNextKey();R=this._splitParameters(S.params,b,k);if(!R.key){return{hash:u};}a=o.paramsToString(R.tailParams);this._storeValue(R.key,a,s);return{hash:p+o.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:R.headParams,appSpecificRoute:S.appSpecificRoute}),params:R.headParams,skippedParams:R.tailParams};};this.checkHashLength=function(u){var s,r,p,o;if(typeof u!=="string"||u.length<t.URL_LENGTH_LIMIT){return{hash:u};}o=sap.ushell.Container.getService("URLParsing");s=o.parseShellHash(u);p="";if(u.charAt(0)==="#"){p="#";}r=this._splitParameters(s.params,[],"DummyKey");if(r.key){jQuery.sap.log.error("Application startup parameter length exceeds "+t.URL_PARAMS_LENGTH_LIMIT+" characters, truncation occured!");delete r.headParams[this.ABBREV_PARAM_NAME];return{hash:p+o.constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:r.headParams,appSpecificRoute:s.appSpecificRoute}),params:r.headParams,skippedParams:r.tailParams};}jQuery.sap.log.error("URL exceeds dangerous limits, arbitrary shortening or worse may occur!");return{hash:u};};this._findIndex=function(a,T){var r=a.indexOf(T);if(r>=0){return r;}r=-1;a.every(function(A,i){if(A.length>0&&A[A.length-1]==="*"&&A.substring(0,A.length-1)===T.substring(0,A.length-1)){r=i;return false;}return true;});return r;};this._cmpByList=function(a,A,b){var i,c;a=a||[];if(A===b){return 0;}i=this._findIndex(a,A);c=this._findIndex(a,b);if(i>=0&&c>=0){if((i-c)!==0){return i-c;}if(A<b){return-1;}if(A>b){return+1;}return 0;}if(i>=0){return-1;}if(c>=0){return+1;}if(A<b){return-1;}return+1;};this._sortByPriority=function(l,r){return l.sort(this._cmpByList.bind(this,r));};this._splitParameters=function(p,r,K){var a,i,k,h={},b={},c=false,o,d,e=0,f,l=[];if(!K||typeof K!=="string"){throw new Error("sap.ushell.services.URLShortening._splitParameters: key must be supplied!");}for(a in p){if(Object.prototype.hasOwnProperty.call(p,a)){l.push(a);}}l.sort();l=this._sortByPriority(l,r);for(k=0;k<l.length;k=k+1){a=l[k];o=p[a];if(o.length>1){jQuery.sap.log.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!");}for(i=0;i<o.length;i=i+1){d=p[a][i];f=a.length+d.length;if(f+e>this.URL_PARAMS_LENGTH_LIMIT){if(b[a]){b[a].push(d);}else{b[a]=[d];}c=true;}else if(h[a]){h[a].push(d);}else{h[a]=[d];}e=e+f+1;}}if(c){h[this.ABBREV_PARAM_NAME]=[K];}return{key:K,tailParams:b,headParams:h};};this.expandHash=function(u){var r=function(k){return t._retrieveValue(k);};return this.expandParamGivenRetrievalFunction(u,this.ABBREV_PARAM_NAME,r);};this.expandParamGivenRetrievalFunction=function(u,p,r){var s,v,k,a,b;if(typeof u!=="string"){return u;}s=sap.ushell.Container.getService("URLParsing").parseShellHash(u);k=s&&s.params&&s.params[p]&&s.params[p][0];if(!k){return u;}a="";if(u.charAt(0)==="#"){a="#";}v=r(k);if(!v){return u;}b=this._blendParameters(s.params,p,v);return a+sap.ushell.Container.getService("URLParsing").constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:b,appSpecificRoute:s.appSpecificRoute});};this._retrieveValue=function(){return undefined;};this._storeValue=function(k,v,s){if(s&&typeof s.store==="function"){s.store(v);}};this._blendParameters=function(p,P,v){var n=sap.ushell.Container.getService("URLParsing").parseParameters("?"+v),a;delete p[P];for(a in n){if(Object.prototype.hasOwnProperty.call(n,a)){if(p[a]){p[a]=p[a].concat(n[a]);}else{p[a]=n[a];}}}return p;};}U.hasNoAdapter=true;return U;},true);sap.ui.predefine('sap/ushell/services/Ui5ComponentHandle',function(){"use strict";var U=function(c){this._oComponent=c;};U.onBeforeApplicationInstanceCreated=function(){sap.ui.require(["sap/ushell/Fiori20AdapterTest"],function(){});};U.prototype.getInstance=function(){return this._oComponent;};U.prototype.getMetadata=function(){return this._oComponent.getMetadata();};return U;});sap.ui.predefine('sap/ushell/services/Ui5ComponentLoader',["sap/ushell/utils","sap/ushell/services/Ui5ComponentHandle","sap/ushell/services/_Ui5ComponentLoader/utils","sap/ushell/EventHub","sap/ui/thirdparty/jquery"],function(u,U,o,e,q){"use strict";function a(c,p,C){this._oConfig=(C&&C.config)||{};this.createComponent=function(A,P,w){var b=A||{},l=o.shouldLoadCoreExt(b),d=o.shouldUseAmendedLoading(this._oConfig),L=o.shouldLoadDefaultDependencies(b,this._oConfig,d),n=u.getParameterValueBoolean("sap-ushell-nocb"),f=b.applicationDependencies||{};o.logAnyApplicationDependenciesMessages(f.name,f.messages);if(!b.ui5ComponentName){return new q.Deferred().resolve(A).promise();}delete b.loadCoreExt;delete b.loadDefaultDependencies;var g=o.createComponentData(b.componentData||{},b.url,b.applicationConfiguration,b.reservedParameters);if(b.getExtensions){g.getExtensions=b.getExtensions;delete b.getExtensions;}var s=o.constructAppComponentId(P||{}),h=l&&d,i=o.prepareBundle(this._oConfig.coreResourcesComplement),j=o.createComponentProperties(h,L,n,w,b.applicationDependencies||{},b.ui5ComponentName,b.url,s,i);U.onBeforeApplicationInstanceCreated.call(null,j);var D=new q.Deferred();o.createUi5Component(j,g).then(function(k){var m=new U(k);b.componentHandle=m;var r=l;if(r){b.coreResourcesFullyLoaded=r;e.emit("CoreResourcesComplementLoaded",{status:"success"});}D.resolve(b);},function(E){var k=JSON.stringify(j,null,4);o.logInstantiateComponentError(j.name,E+"",E.status,E.stack,k);D.reject(E);});return D.promise();};this.loadCoreResourcesComplement=function(){if(this.loadCoreResourcesComplementPromise){return this.loadCoreResourcesComplementPromise.promise();}var b=o.prepareBundle(this._oConfig.coreResourcesComplement),d=new q.Deferred();o.loadBundle(b).done(function(){e.emit("CoreResourcesComplementLoaded",{status:"success"});this.loadCoreResourcesComplementPromise=d;d.resolve();}.bind(this)).fail(function(){e.emit("CoreResourcesComplementLoaded",{status:"failed"});d.reject();});return d.promise();};e.once("loadCoreResourcesComplement").do(function(){this.loadCoreResourcesComplement();}.bind(this));}a.hasNoAdapter=true;return a;},true);sap.ui.predefine('sap/ushell/services/UserDefaultParameterPersistence',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L){"use strict";var v=["value","extendedValue","noEdit","alwaysAskPlugin","_shellData","pluginData"];function U(a){this._oAdapter=a;this._oData={};}U.prototype._cleanseValue=function(V){var r=q.extend(true,{},V),a;for(a in r){if(r.hasOwnProperty(a)){if(v.indexOf(a)<0){delete r[a];}}}return r;};U.prototype._testValue=function(){return true;};U.prototype.loadParameterValue=function(p){var d=new q.Deferred(),t=this;if(this._oData[p]){d.resolve(this._oData[p]);}else{this._oAdapter.loadParameterValue(p).done(function(V){var c=t._cleanseValue(V);if(t._testValue(c)){d.resolve(c);}else{L.error("flawed value returned from persistence");d.reject("flawed value returned from persistence");}}).fail(d.reject.bind(this));}return d.promise();};U.prototype.saveParameterValue=function(p,V){var d,c;if(!V){return this.deleteParameter(p);}c=this._cleanseValue(V);d=new q.Deferred();if(!this._testValue(c)||(V&&V.noStore===true)){return d.resolve().promise();}this._oData[p]=c;return this._oAdapter.saveParameterValue(p,c);};U.prototype.deleteParameter=function(p){delete this._oData[p];return this._oAdapter.deleteParameter(p);};U.prototype.getStoredParameterNames=function(){var d=new q.Deferred();this._oAdapter.getStoredParameterNames().done(function(r){r.sort();d.resolve(r);}).fail(d.reject.bind(d));return d.promise();};U.hasNoAdapter=false;return U;},true);sap.ui.predefine('sap/ushell/services/UserDefaultParameters',["sap/ui/base/EventProvider","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/util/deepEqual","sap/base/util/isEmptyObject"],function(E,u,q,d,a){"use strict";var e="valueStored";var s=["value","noEdit","noStore","extendedValue","alwaysAskPlugin"];function U(A,c,p,C){this._aPlugins=[];this._oUserDefaultParametersNames=undefined;this._oWasParameterPersisted={};var t=this,S=new E();function g(P){var v=(typeof P.getComponentData==="function"&&P.getComponentData()&&P.getComponentData().config&&P.getComponentData().config["sap-priority"])||0;if(typeof v!=="number"||isNaN(v)){return 0;}return v;}this._insertPluginOrdered=function(P,o){var f=g(o),i,h;for(i=0;(i<P.length)&&o;++i){h=g(P[i]);if(o&&(f>h)){P.splice(i,0,o);o=undefined;}}if(o){P.push(o);}return P;};this.registerPlugin=function(P){this._aPlugins=this._insertPluginOrdered(this._aPlugins,P);};function b(i,P,f,v,D){if(i>=P.length){D.resolve(v);return;}if(typeof P[i].getUserDefault!=="function"){b(i+1,P,f,v,D);return;}P[i].getUserDefault(f,v).done(function(n){if(n){b(i+1,P,f,n,D);}else{b(i+1,P,f,v,D);}}).fail(function(){q.sap.log.error("invocation of getUserDefault(\""+f+"\") for plugin "+t._getComponentNameOfPlugin(P[i])+" rejected.",null,"sap.ushell.services.UserDefaultParameters");b(i+1,P,f,v,D);});return;}this._getStoreDate=function(){return new Date().toString();};this._storeValue=function(P,v,f){var t=this;var r=new q.Deferred();var D=new q.Deferred();if(f&&v.extendedValue){sap.ushell.Container.getService("ClientSideTargetResolution").getUserDefaultParameterNames(true).done(function(o){var h=t._extractKeyArrays(o);var i=h.extended;D.resolve(i.indexOf(P)<0);}).fail(function(){D.resolve(false);});}else{D.resolve(false);}D.done(function(R){if(R){v.extendedValue=undefined;}if(f&&t._isInitial(v)){v=undefined;t._oWasParameterPersisted[P]=false;}else{v._shellData=q.extend(true,{storeDate:t._getStoreDate()},v._shellData);}sap.ushell.Container.getService("UserDefaultParameterPersistence").saveParameterValue(P,v).always(function(){var o={parameterName:P,parameterValue:u.clone(v||{})};S.fireEvent(e,o);r.resolve(P);});});return r.promise();};this._getPersistedValue=function(P){var o=sap.ushell.Container.getService("UserDefaultParameterPersistence");return o.loadParameterValue(P);};this._isInitial=function(v){return!v||(!v.value&&!v.extendedValue);};this._haveSameMembersValue=function(o,O,m){return m.every(function(r){return o[r]===O[r]||d(o[r],O[r]);});};this._getUserDefaultParameterNames=function(){if(!this._oUserDefaultParametersNames){this._oUserDefaultParametersNames=new q.Deferred();sap.ushell.Container.getService("ClientSideTargetResolution").getUserDefaultParameterNames(true).done(function(P){var o=t._extractKeyArrays(P);var f=o.extended;var h=o.allParameters;var m=t._arrayToObject(h);if(m.length===0){t._oUserDefaultParametersNames.resolve({});}else{t._oUserDefaultParametersNames.resolve({aAllParameterNames:h,aExtendedParameterNames:f,oMetadataObject:m});}});}return this._oUserDefaultParametersNames.promise();};this._isRelevantParameter=function(P){var D=new q.Deferred();this._getUserDefaultParameterNames().done(function(r){if(r.aAllParameterNames&&r.aAllParameterNames.indexOf(P)!==-1){D.resolve();}else{D.reject();}});return D.promise();};this.hasRelevantMaintainableParameters=function(){var t=this,r=new q.Deferred(),h=false,G=[];t._getUserDefaultParameterNames().done(function(P){if(!a(P)&&P.aAllParameterNames){P.aAllParameterNames.forEach(function(f){var o=t.getValue(f);G.push(o);o.done(function(v){if(v&&!v.hasOwnProperty("noEdit")){h=true;return;}});});q.when.apply(undefined,G).done(function(){r.resolve(h);}).fail(function(){r.resolve();});}else{r.resolve();}});return r.promise();};this.getValue=function(P){var t=this,D=new q.Deferred();this._isRelevantParameter(P).fail(function(){D.resolve({});}).done(function(){q.when(t._getPersistedValue(P)).then(function(o){t._oWasParameterPersisted[P]=true;return q.when(o||{});},function(){return q.when({value:undefined});}).then(function(o){var G=new q.Deferred(),v=u.clone(o),f=sap.ushell.Container.getService("PluginManager");var h=(!o._shellData&&t._isInitial(o))||o.noStore||o.alwaysAskPlugin;if(!h){D.resolve(v);return;}f.loadPlugins("UserDefaults").done(function(){b(0,t._aPlugins,P,o,G);}).fail(function(){q.sap.log.error("Cannot get value for "+P+". One or more plugins could not be loaded.");G.reject("Initialization of plugins failed");});G.done(function(n){if(!t._oWasParameterPersisted[P]||!t._haveSameMembersValue(v,n,s)){t._oWasParameterPersisted[P]=true;t._storeValue(P,n);}D.resolve(n);}).fail(D.reject.bind(D));});});return D.promise();};this._addParameterValuesToParameters=function(P,f){var D=new q.Deferred();var h=[];var t=this;f.forEach(function(i){var n=t.getValue(i);h.push(n);n.done(function(v){P[i].valueObject=v;});});q.when.apply(q,h).done(D.resolve.bind(D,P)).fail(D.reject.bind(D,P));return D.promise();};this._arrayToObject=function(P){var r={};P.forEach(function(f){r[f]={};});return r;};this._getComponentNameOfPlugin=function(P){if(typeof P!=="object"||typeof P.getMetadata!=="function"||!P.getMetadata()||typeof P.getMetadata().getComponentName!=="function"){return"'name of plugin could not be determined'";}return P.getMetadata().getComponentName()||"";};this._getEditorDataAndValue=function(D,f,h,m){var t=this;var P=[];var r=[];t._aPlugins.forEach(function(o,i){if(typeof o.getEditorMetadata==="function"){var n=new q.Deferred();P.push(n);try{var j=P.length-1;o.getEditorMetadata(m).done(function(R){r[j]=R;}).always(function(){n.resolve();}).fail(function(){q.sap.log.error("EditorMetadata for plugin "+t._getComponentNameOfPlugin(o)+"cannot be invoked.",null,"sap.ushell.services.UserDefaultParameters");n.resolve();});}catch(k){q.sap.log.error("Error invoking getEditorMetaData on plugin: "+k+k.stack,null,"sap.ushell.services.UserDefaultParameters");n.resolve();}}});q.when.apply(q,P).done(function(){var i=[];var o=r.reverse().reduce(function(j,n){f.forEach(function(k){if(n[k]&&n[k].editorMetadata){j[k].editorMetadata=n[k].editorMetadata;}});return j;},m);f.forEach(function(j){if(!(o[j]&&o[j].editorMetadata)){i.push(j);}});t._addParameterValuesToParameters(o,f).done(function(j){var k=q.extend(true,{},j),K;h.forEach(function(l){if(k[l]){k[l].editorMetadata=k[l].editorMetadata||{};k[l].editorMetadata.extendedUsage=true;}});K=Object.keys(k).splice(0);K.forEach(function(l){var n;if(k[l].valueObject&&k[l].valueObject.noEdit===true){delete k[l];n=i.indexOf(l);if(n>=0){i.splice(n,1);}}});if(i.length>0){q.sap.log.error("The following parameter names have no editor metadata and thus likely no configured plugin:\n\""+i.join("\",\n\"")+"\".");}D.resolve(k);}).fail(D.reject.bind(D));});};this.editorGetParameters=function(){var D=new q.Deferred();var t=this;this._getUserDefaultParameterNames().done(function(P){if(P.oMetadataObject.length===0){D.resolve({});}else{sap.ushell.Container.getService("PluginManager").loadPlugins("UserDefaults").done(function(){t._getEditorDataAndValue(D,P.aAllParameterNames,P.aExtendedParameterNames,P.oMetadataObject);}).fail(function(){q.sap.log.error("One or more plugins could not be loaded");D.reject("Initialization of plugins failed");});}});return D.promise();};this._extractKeyArrays=function(P){var r={extended:[],simple:[],allParameters:[]};r.simple=(P&&P.simple&&Object.keys(P.simple).sort())||[];r.extended=(P&&P.extended&&Object.keys(P.extended).sort())||[];r.allParameters=r.simple.concat(r.extended.filter(function(f){return r.simple.indexOf(f)<0;})).sort();return r;};this.editorSetValue=function(P,v){return this._storeValue(P,v,true);};this.attachValueStored=function(f){S.attachEvent(e,f);};this.detachValueStored=function(f){S.detachEvent(e,f);};}U.hasNoAdapter=true;return U;},true);sap.ui.predefine('sap/ushell/services/UserInfo',["sap/base/Log"],function(L){"use strict";function U(a,c){this.getId=function(){return sap.ushell.Container.getUser().getId();};this.getUser=function(){return sap.ushell.Container.getUser();};this.getThemeList=function(){var p=a.getThemeList();p.fail(function(){L.error("getThemeList failed");});return p;};this.updateUserPreferences=function(){var p=a.updateUserPreferences(sap.ushell.Container.getUser());p.fail(function(){L.error("updateAttributes: ");});return p;};this.getLanguageList=function(){var p=a.getLanguageList();p.fail(function(){L.error("getLanguageList failed");});return p;};}U.hasNoAdapter=false;return U;},true);sap.ui.predefine('sap/ushell/services/_AppState/AppState',["sap/base/Log","sap/ui/thirdparty/jquery"],function(L,q){"use strict";function A(S,k,m,D,a,b,t,p,P){this._oServiceInstance=S;this._sKey=k;this._sData=D;this._sAppName=a;this._sACHComponent=b;this._bTransient=t;this._bModifiable=m;this._iPersistencyMethod=p;this._oPersistencySettings=P;if(this._bModifiable){this.setData=function(o){try{this._sData=JSON.stringify(o);}catch(e){L.error("Data can not be serialized","sap.ushell.services.AppState.AppState");this._sData=undefined;}};this.save=s.bind(this);this.delete=d.bind(this);}}function s(){var D=new q.Deferred();this._oServiceInstance._saveAppState(this._sKey,this._sData,this._sAppName,this._sACHComponent,this._bTransient,this._iPersistencyMethod,this._oPersistencySettings).done(function(){D.resolve();}).fail(function(m){D.reject(m);});return D.promise();}function d(){var D=new q.Deferred();this._oServiceInstance._deleteAppState(this._sKey).done(function(){D.resolve();}).fail(function(m){D.reject(m);});return D.promise();}A.prototype.getData=function(){var o;if(this._sData===undefined||this._sData===""){return undefined;}try{o=JSON.parse(this._sData);}catch(e){L.error("Could not parse ["+this._sData+"]"+e);}return o;};A.prototype.getPersistencyMethod=function(){return this._iPersistencyMethod;};A.prototype.getPersistencySettings=function(){return this._oPersistencySettings;};A.prototype.getKey=function(){return this._sKey;};return A;});sap.ui.predefine('sap/ushell/services/_AppState/AppStatePersistencyMethod',[],function(){"use strict";function A(){this.PersonalState="PersonalState";this.ACLProtectedState="ACLProtectedState";this.PublicState="PublicState";this.AuthorizationProtectedState="AuthorizationProtectedState";}return new A();});sap.ui.predefine('sap/ushell/services/_AppState/LimitedBuffer',[],function(){"use strict";function L(c){this.index=-1;this.capacity=c;this.array=[];}L.prototype._clear=function(){this.array=[];this.index=-1;};L.prototype.addAsHead=function(k,v,p,P){this.index=(this.index+1)%this.capacity;this.array[this.index]={key:k,value:v,persistencyMethod:p,persistencySettings:P};};L.prototype.getByKey=function(k){var i,e;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===k){return this.array[e];}}return undefined;};L.prototype.deleteByKey=function(k){var i,e,r=false;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===k){delete this.array[e];r=true;}}return r;};return L;});sap.ui.predefine('sap/ushell/services/_AppState/Sequentializer',["sap/ui/thirdparty/jquery"],function(q){"use strict";function S(){this.oLastPromise=new q.Deferred();this.oLastPromise.resolve();}S.prototype.addToQueue=function(f){var n=new q.Deferred();this.oLastPromise.always(function(){var r=f();r.done(function(){n.resolve.apply(n,arguments);}).fail(function(){n.reject.apply(n,arguments);});});this.oLastPromise=n;return n.promise();};return S;});sap.ui.predefine('sap/ushell/services/_AppState/SequentializingAdapter',["sap/ushell/services/_AppState/Sequentializer"],function(S){"use strict";function a(u){this._oSequentializer=new S();this._oUnderlyingAdapter=u;}a.prototype.saveAppState=function(k,s,d,A,c,p,P){var f;f=this._oUnderlyingAdapter.saveAppState.bind(this._oUnderlyingAdapter,k,s,d,A,c,p,P);return this._oSequentializer.addToQueue(f);};a.prototype.loadAppState=function(k){return this._oUnderlyingAdapter.loadAppState(k);};a.prototype.deleteAppState=function(k){if(this._oUnderlyingAdapter&&this._oUnderlyingAdapter.deleteAppState){return this._oUnderlyingAdapter.deleteAppState(k);}};a.prototype.getSupportedPersistencyMethods=function(){if(this._oUnderlyingAdapter&&this._oUnderlyingAdapter.getSupportedPersistencyMethods){return this._oUnderlyingAdapter.getSupportedPersistencyMethods();}else{return[];}};return a;});sap.ui.predefine('sap/ushell/services/_AppState/WindowAdapter',["sap/ushell/services/_AppState/LimitedBuffer","sap/base/Log","sap/ui/thirdparty/jquery"],function(L,a,q){"use strict";var W=50;var C=18;function b(){this._init.apply(this,arguments);}b.prototype._init=function(s,B,c){var i=c&&c.config&&c.config.initialAppStates||{};var I=c&&c.config&&c.config.initialAppStatesPromise;this._oServiceInstance=s;this._oBackendAdapter=B;if(!b.prototype.data){b.prototype.data=new L(W);}if(I){I.then(function(i){if(typeof i==="object"){Object.keys(i).forEach(function(k){b.prototype.data.addAsHead(k,i[k]);});}});}Object.keys(i).forEach(function(k){b.prototype.data.addAsHead(k,i[k]);});};b.prototype.saveAppState=function(k,s,d,A,c,t,p,P){this.sComponent=c;var D=new q.Deferred();b.prototype.data.addAsHead(k,d,p,P);if(this._oBackendAdapter&&!t){return this._oBackendAdapter.saveAppState(k,s,d,A,c,p,P);}D.resolve();return D.promise();};b.prototype.loadAppState=function(k){var d=new q.Deferred(),c=b.prototype.data.getByKey(k);if(c){setTimeout(function(){d.resolve(k,c.value,c.persistencyMethod,c.persistencySettings);},0);return d.promise();}try{if(window.opener&&window.opener.sap&&window.opener.sap.ushell){var A=window.opener.sap.ui.require("sap/ushell/services/AppState").WindowAdapter.prototype.data.getByKey(k);if(A){d.resolve(k,A.value);return d.promise();}}}catch(e){if(e.code===C){a.warning("AppState.js - loadAppState: Opener is not of the same origin and cannot be used for AppState resolving.");}else{a.warning("AppState.js - loadAppState: Opener is a FLP but AppState could not get resolved from there.");}}if(this._oBackendAdapter){this._oBackendAdapter.loadAppState(k).done(function(k,D,p,f){b.prototype.data.addAsHead(k,D);d.resolve(k,D,p,f);}).fail(d.reject.bind(d));return d.promise();}d.reject("AppState.js - loadAppState: Application State could not be loaded");return d.promise();};b.prototype.deleteAppState=function(k){var d=new q.Deferred();b.prototype.data.deleteByKey(k);if(this._oBackendAdapter&&this._oBackendAdapter.deleteAppState){return this._oBackendAdapter.deleteAppState(k);}d.resolve();return d.promise();};b.prototype.getSupportedPersistencyMethods=function(){if(this._oBackendAdapter&&this._oBackendAdapter.getSupportedPersistencyMethods){return this._oBackendAdapter.getSupportedPersistencyMethods();}return[];};return b;});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Formatter',[],function(){"use strict";function f(i){return"#"+i.semanticObject+"-"+i.action+"{"+a(i.signature)+"}";}function p(i){var m=i.match(/^#(.+?)-(.+?)({(.+)})?$/);if(!m){throw"Cannot parse inbound";}var r={semanticObject:m[1],action:m[2],signature:{parameters:{}}};if(!m[3]){return r;}r.signature=b(m[4]);return r;}function a(i){var I=i||{},P=I.parameters||{},t={optional:"[FORMAT]",required:"FORMAT"},F={regexp:"/VALUE/",reference:"@VALUE@",value:"VALUE",plain:"VALUE",_unknown:"?VALUE?"},A={allowed:"<+>",notallowed:"<->",ignored:"<o>",_unknown:"<?>"};var h=P&&Object.prototype.toString.apply(P)==="[object Object]"&&Object.keys(P).length>0;if(!h){return"<no params>"+(A[I.additionalParameters]||A._unknown);}var r=[];Object.keys(P).forEach(function(s){var o=P[s],c=o.required?"required":"optional",d=o.filter&&o.filter.value,e=o.defaultValue&&o.defaultValue.value,g=(o.filter&&o.filter.format)||"plain",j=(o.defaultValue&&o.defaultValue.format)||"plain";var v=[],k=F[g]||F._unknown,l=F[j]||F._unknown;if(d){v.push(t["required"].replace("FORMAT",k.replace("VALUE",d)));}if(e){v.push(t["optional"].replace("FORMAT",l.replace("VALUE",e)));}r.push(t[c].replace("FORMAT",s+":"+v.join("")));});return r.join(",")+(A[I.additionalParameters]||A._unknown);}function b(c){function d(v){var V=[{re:new RegExp(/^[/](.+)[/]$/),format:"regexp"},{re:new RegExp(/^[@](.+)[@]$/),format:"reference"},{re:new RegExp(/^[?](.+)[?]$/),format:"???"}].reduce(function(r,D){var m=v.match(D.re);if(r){return r;}if(!m){return null;}return{format:D.format,value:m[1]};},null);if(V){return V;}return{value:v};}function e(j){var n,k,l,m,o,w,M,q,t,O,R,N;N="<no params>";n="[^\\]\\[]";R="("+n+"+?):("+n+"*)(.*)";O="\\["+R+"\\]";t=N+"|"+O+"|"+R;q=new RegExp("^"+t+"$");o={success:false,name:null,value:{}};M=j.match(q);if(!M){return o;}w=M.shift();while(M.length>0){m=M.shift();l=M.shift();k=M.shift();if(m){o.name=m;if(l){o.value.filter=d(l);}if(k){o.value.defaultValue=d(k.replace(/\[(.+)\]/,"$1"));}o.value.required=(w.charAt(0)!=="[");}}o.success=true;return o;}function g(j){return[{"<+>":"allowed"},{"<->":"notallowed"},{"<o>":"ignored"}].reduce(function(R,o,I,k){if(R){return R;}var l=Object.keys(o)[0];if(j===l){return o[l];}return null;},null);}function s(P){var I=[];P.split(":").reduce(function(j,n,k,l){var v,N,V;if(k===0){return n;}if(k<l.length-1){V=n.split(",");if(V.length>1){N=V.pop();v=V.join(",");}else{return j+":"+n;}}else{v=n;}I.push([j,v].join(":"));return N;},"");return I;}var r={parameters:{}};var A=c.substr(c.length-3,3);var h=!!A.match(/<[?o+-]>/);var P=c;if(h){P=c.substr(0,c.length-3);}var S=s(P);S.forEach(function(j){var o=e(j);if(!o.success){throw new Error("Cannot parse parameters from "+c);}if(o.name){r.parameters[o.name]=o.value;}});if(h){var i=g(A);if(i){r.additionalParameters=g(A);}}else{r.additionalParameters="ignored";}return r;}return{formatInboundSignature:a,parseInboundSignature:b,parseInbound:p,formatInbound:f};});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/InboundIndex',["sap/base/util/ObjectPath","sap/base/Log"],function(O,L){"use strict";function g(){return this.index.all;}function a(S){if(S==="*"||S===undefined){return this.index.all;}return(this.index.segment[S]||[]).concat(this.index.always);}function b(T){return T.map(function(d){return this.index.tag[d]||[];},this).reduce(function(u,I){Array.prototype.push.apply(u,I.filter(function(o){return o.isAlreadyInUnion?false:(o.isAlreadyInUnion=true);}));return u;},[]).map(function(I){delete I.isAlreadyInUnion;return I;});}var i=Object.create(Object.prototype,{getSegment:{value:a},getAllInbounds:{value:g},getSegmentByTags:{value:b}});function t(I,o){var T=O.get("signature.parameters.sap-tag.defaultValue.value",I);if(!T){return;}if(!o.tag[T]){o.tag[T]=[];}o.tag[T].push(I);}function s(I,o){var S=I.semanticObject;if(S==="*"){o.always.push(I);}else{if(!o.segment[S]){o.segment[S]=[];}o.segment[S].push(I);}}function c(I){var o={all:I,segment:{},always:[],tag:{}};I.forEach(function(d,e){if(!d){L.warning("Void inbound provided to indexer","the inbound will be skipped");return;}t(d,o);s(d,o);});return Object.create(i,{index:{value:o}});}return{createIndex:c,private:{tagInbound:t,createIndex:c,segmentInbound:s}};});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/InboundProvider',["sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/InboundIndex"],function(v,i){"use strict";function I(){this._init.apply(this,arguments);};I.prototype._init=function(r){this._fnRetrieveInbounds=r;this._oInboundsRetrievalPromise=null;};I.prototype.getInbounds=function(s){if(s){return this._getSomeInbounds(s);}return this._getAllInbounds();};I.prototype._getSomeInbounds=function(s){var t=this;return new Promise(function(r,R){t._fnRetrieveInbounds(s).done(function(a){r(i.createIndex(a.concat(v.getInbounds())));}).fail(function(){R.apply(null,arguments);});});};I.prototype._getAllInbounds=function(){var t=this;if(this._oInboundsRetrievalPromise){return this._oInboundsRetrievalPromise;}this._oInboundsRetrievalPromise=new Promise(function(r,R){t._fnRetrieveInbounds().done(function(a){r(i.createIndex((a||[]).concat(v.getInbounds())));}).fail(function(){R.apply(null,arguments);});});return this._oInboundsRetrievalPromise;};return I;});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/ParameterMapping',[],function(){"use strict";function m(M){var n={},o=M.intentParamsPlusAllDefaults;Object.keys(o).sort().forEach(function(p){var r=g(p,M.inbound.signature,o[p]);if(Array.isArray(M.intentParamsPlusAllDefaults[p])){if(n[r]){jQuery.sap.log.error("collision of values during parameter mapping : \""+p+"\" -> \""+r+"\"");}else{n[r]=M.intentParamsPlusAllDefaults[p];}}});M.mappedIntentParamsPlusSimpleDefaults=n;}function g(p,s,P){if(!P||!Array.isArray(P)){return p;}if(s&&s.parameters&&s.parameters[p]&&s.parameters[p].renameTo){return s.parameters[p].renameTo;}return p;}return{mapParameterNamesAndRemoveObjects:m,getRenameParameterName:g};},false);sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations',["sap/base/Log","sap/ui/generic/app/navigation/service/SelectionVariant","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/utils/clone"],function(L,S,c,C){"use strict";var a="sap.ushell.services.ClientSideTargetResolution.PrelaunchOperations";function _(A){if(!A){return Promise.resolve(null);}return new Promise(function(r,R){sap.ushell.Container.getService("AppState").getAppState(A).done(function(i){r(i);}).fail(function(E){R(E);});});}function b(P,M,s,i,D){if(P.startupParametersModified){M.mappedIntentParamsPlusSimpleDefaults=i;}if(P.defaultedParameterNamesModified){M.mappedDefaultedParamNames=D;}if(P.selectionVariantModified){var A=sap.ushell.Container.getService("AppState");var N=A.createEmptyAppState(undefined,true);N.setData({selectionVariant:s.toJSONObject()});return new Promise(function(r,R){N.save().done(function(){M.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[N.getKey()];r(M);}).fail(function(t){R(t);});});}return Promise.resolve(M);}function d(O){var s=O.type;switch(s){case"merge":case"split":return s+" - source: "+O.source+" & target: "+O.target;case"delete":return s+" - target: "+O.target;default:return"";}}function e(P,s){if(s.getSelectOption(P)){return s.getSelectOption(P)[0].Low;}return undefined;}function f(P,s){if(s.getSelectOption(P)){return s.getSelectOption(P)[0].High;}return undefined;}function g(P,s){if(s[P]){return s[P][0];}return undefined;}function h(O,s,i){var r=O.source[0],t=O.source[1],u=e(r,s),v=e(t,s),w=g(r,i),x=g(t,i),y,z,T=O.target;function A(V,B){if(B===undefined||V===B){return V;}return undefined;}if(u&&v){y=A(u,w);z=A(v,x);}else if(w&&x){y=A(w,u);z=A(x,v);}if(y&&z&&!s.getSelectOption(T)&&!i.hasOwnProperty(T)){s.addSelectOption(T,"I","BT",y,z);return{selectionVariantModified:true,startupParametersModified:false,defaultedParameterNamesModified:false};}return{};}function j(O,s,i){var t=O.target,r=O.source;if(!s.getSelectOption(r)){L.error("Invalid split operation: "+r+" does not exist in selection variant");return false;}if(s.getSelectOption(t[0])){L.error("Invalid split operation: "+t[0]+" already exists in selection variant");return false;}if(s.getSelectOption(t[1])){L.error("Invalid split operation: "+t[1]+" already exists in selection variant");return false;}if(i[t[0]]){L.error("Invalid split operation: "+t[0]+" already exists in startup parameters");return false;}if(i[t[1]]){L.error("Invalid split operation: "+t[1]+" already exists in startup parameters");return false;}return true;}function k(O,s,i){var t=O.target,r=O.source,u=j(O,s,i);if(u){var v=e(r,s),w=f(r,s);s.addSelectOption(t[0],"I","EQ",v,null);i[t[0]]=[v];s.addSelectOption(t[1],"I","EQ",w||v,null);i[t[1]]=[w||v];return{selectionVariantModified:true,startupParametersModified:true,defaultedParameterNamesModified:false};}return{};}function l(O,s,r,D){var t=O.target,u={selectionVariantModified:false,startupParametersModified:false,defaultedParameterNamesModified:false};for(var i=0;i<t.length;i++){var T=t[i];if(T==="sap-xapp-state"){L.warning("Cannot execute delete: 'sap-xapp-state' is not allowed to be deleted");continue;}if(s.getParameter(T)){s.removeParameter(T);u.selectionVariantModified=true;}if(s.getSelectOption(T)){s.removeSelectOption(T);u.selectionVariantModified=true;}if(r[T]){delete r[T];u.startupParametersModified=true;}var v=D.indexOf(T);if(v>-1){D.splice(v,1);u.defaultedParameterNamesModified=true;}}return u;}function m(P){var i;if(P===""){return[];}try{i=JSON.parse(P);}catch(r){L.error("Cannot parse operation array: sap-prelaunch-operations should be in json format.");return[];}if(!Array.isArray(i)){L.error("Invalid operation array: sap-prelaunch-operations should be an array.");return[];}return i;}function n(P){if(P.length===0){return null;}var v={"split":true,"merge":true,"delete":true};var i=P.filter(function(O){return!v[O.type];});if(i.length>0){L.error("Invalid operation: the following sap-prelaunch-operations are invalid: "+i.join(", "));return null;}var s=P.some(function(O){return O.type==="split"&&O.target[0]===O.target[1];});if(s){L.error("Invalid operation: split operation contains the same target value. Use two different target values instead.");return null;}var I=P.some(function(O){if(O.type==="split"){return!O.hasOwnProperty("source")||!O.hasOwnProperty("target")||typeof O.source!=="string"||!Array.isArray(O.target)||Object.keys(O).length!==3||Object.keys(O.target).length!==2;}if(O.type==="merge"){return!O.hasOwnProperty("source")||!O.hasOwnProperty("target")||typeof O.target!=="string"||!Array.isArray(O.source)||Object.keys(O).length!==3||Object.keys(O.source).length!==2;}if(O.type==="delete"){return!O.hasOwnProperty("target")||!Array.isArray(O.target)||Object.keys(O).length!==2;}});if(I){L.error("Invalid operation: one or more operations are specified in an incorrect format.");return null;}return P;}function p(P){var i=m(P);return n(i);}function o(s,P,i,D){var r=c.isDebugEnabled()?[]:null,t={selectionVariantModified:false,startupParametersModified:false};P.forEach(function(O){var E={};switch(O.type){case"split":E=k(O,s,i);break;case"merge":E=h(O,s,i);break;case"delete":E=l(O,s,i,D);break;default:L.error("Invalid operation: "+O.type+" prelaunch operation type is not supported");}if(r){var I=Object.keys(E).length!==0?"\u2705":"\u274c";r.push(I+" "+d(O));}if(Object.keys(E).length===0){L.warning("Cannot execute "+d(O));}t.selectionVariantModified=t.selectionVariantModified||E.selectionVariantModified;t.startupParametersModified=t.startupParametersModified||E.startupParametersModified;t.defaultedParameterNamesModified=t.defaultedParameterNamesModified||E.defaultedParameterNamesModified;});if(r){L.debug(a+"\n"+r.join("\n"));}return t;}function q(M,P){if(!P){return Promise.resolve(M);}var s=M.mappedIntentParamsPlusSimpleDefaults,D=M.mappedDefaultedParamNames,i=s["sap-xapp-state"]&&s["sap-xapp-state"][0],r=p(P);if(!r||r.length===0){return Promise.resolve(M);}return _(i).then(function(A){var t=A?A.getData():{},u=C(s),v=C(D),w;if(t.selectionVariant){w=new S(JSON.stringify(t.selectionVariant));}else{w=new S();}var x=o(w,r,u,v);return b(x,M,w,u,v);});}return{executePrelaunchOperations:q,parseAndValidateOperations:p};});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Search',["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/TechnicalParameters","sap/base/Log","sap/ui/thirdparty/jquery"],function(u,U,v,f,t,L,q){"use strict";var A=[undefined,"GUI","WDA","UI5"];function a(M,I){var R=M.inbound.resolutionResult;if(!R){return"";}return["applicationType","ui5ComponentName","url","additionalInformation","text"].map(function(K){if(I){return R.hasOwnProperty(K)?K+":"+R[K]:"";}return R.hasOwnProperty(K)?R[K]:"";}).join("");}function b(M){return M.sort(function(s,y){if((s["sap-priority"]||0)-(y["sap-priority"]||0)!==0){return-((s["sap-priority"]||0)-(y["sap-priority"]||0));}if(s.priorityString<y.priorityString){return 1;}if(s.priorityString>y.priorityString){return-1;}var S=a(s);var z=a(y);if(S<z){return 1;}else if(S>z){return-1;}return 0;});}function e(I,M){var s;if(I&&I["sap-priority"]&&I["sap-priority"][0]){s=parseInt(I["sap-priority"][0],10);if(!isNaN(s)){M["sap-priority"]=s;}}return;}function m(V,F,K,M){var s;if(!F){return true;}if(!V&&V!==""){return false;}s=F.value;if(F.format==="reference"){if(/UserDefault\.extended\./.test(s)){L.error("Illegal inbound: extended user default '"+s+"' used as filter");return false;}if(K.hasOwnProperty(s)){return V===K[s];}M[s]=true;return true;}if(F.format==="value"||F.format==="plain"||F.format===undefined){return V===F.value;}else if(F.format==="regexp"){return!!V.match("^"+F.value+"$");}L.error("Illegal oFilter format");return false;}function g(M){return M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.ui"]&&M.inbound.resolutionResult["sap.ui"].technology;}function c(M){return M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult.appId;}function d(I,s,K,M,D){var y={},z={};Object.keys(I).forEach(function(P){if(P!=="sap-ushell-defaultedParameterNames"){y[P]=I[P];}});if(!s){return y;}Object.keys(s).forEach(function(P){var T=s[P],B,V=false;if(!y[P]&&T.hasOwnProperty("defaultValue")){if(T.defaultValue.format&&T.defaultValue.format==="reference"){B=T.defaultValue.value;if(K.hasOwnProperty(B)){if(typeof K[B]==="string"){y[P]=[K[B]];V=true;}else if(typeof K[B]==="object"){y[P]=K[B];V=true;}}else{y[P]=[T.defaultValue];M.push(T.defaultValue.value);}}else{y[P]=[T.defaultValue.value];V=true;}if(V){z[P]=true;}}});Object.keys(z).sort().forEach(function(P){D.push(P);});return y;}function h(M,I){M.resolutionResult={};if(I&&I.resolutionResult&&I.resolutionResult.hasOwnProperty("sap.platform.runtime")){M.resolutionResult["sap.platform.runtime"]=I.resolutionResult["sap.platform.runtime"];}Object.keys(M.intentParamsPlusAllDefaults).slice(0).forEach(function(N){if(!Array.isArray(M.intentParamsPlusAllDefaults[N])){if(!M.resolutionResult.oNewAppStateMembers){M.resolutionResult.oNewAppStateMembers={};}M.resolutionResult.oNewAppStateMembers[N]=M.intentParamsPlusAllDefaults[N];}});}function i(R,M){R.forEach(function(s){M[s]=true;});}function j(M){var T=M.intentParamsPlusAllDefaults["sap-ui-tech-hint"]&&M.intentParamsPlusAllDefaults["sap-ui-tech-hint"][0];var I=M.defaultedParamNames&&(M.defaultedParamNames.indexOf("sap-ui-tech-hint")>=0);if(T&&g(M)===T){return I?1:2;}return 0;}function k(M){var s=M.intentParamsPlusAllDefaults["sap-ui-app-id-hint"]&&M.intentParamsPlusAllDefaults["sap-ui-app-id-hint"][0];if(s&&(s===c(M))){return 1;}return 0;}function l(M,y){function z(N){var s="000"+N;return s.substr(s.length-3);}return["AIDM="+k(M),M.genericSO?"g":"x","TECM="+j(M),"MTCH="+z(y.countMatchingParams),"MREQ="+z(y.countMatchingRequiredParams),"NFIL="+z(y.countMatchingFilterParams),"NDEF="+z(y.countDefaultedParams),"POT="+z(y.countPotentiallyMatchingParams),"RFRE="+z(999-y.countFreeInboundParams),"TECP="+n(M)].join(" ");}function n(M){var T=g(M);var P=A.indexOf(T);return Math.max(0,P);}function o(I,s){var y=false;if(I.signature.additionalParameters==="allowed"||I.signature.additionalParameters==="ignored"){return true;}if(I.signature.additionalParameters==="notallowed"||I.signature.additionalParameters===undefined){y=Object.keys(s).every(function(P){return!((!I.signature.parameters[P]&&P.indexOf("sap-")!==0));});}else{L.error("Unexpected value of inbound for signature.additionalParameters");}return y;}function p(I,s,K,D){var M=s.reduce(function(R,y){var z=x(I,y,K,R.missingReferences);if(z.matches){R.matchResults.push(z);}else if(D){(function(){var N=R.noMatchReasons;var B=f.formatInbound(y);N[B]=z.noMatchReason+(z.noMatchDebug?"| DEBUG: "+z.noMatchDebug:"");})();}return R;},{matchResults:[],noMatchReasons:{},missingReferences:{}});return q.when(M);}function r(I,s,y,D,K,M){var S=Object.keys(I).every(function(P){var V=s[P],z=V&&V[0],B=I[P];if(B.required&&(z===null||z===undefined)){return false;}if(B.filter){if(!m(z,B.filter,K,M)){return false;}}return true;});return S;}function w(I,s,y,D,z){var B=0,C=0,E=0,F=0,S={};function G(P){return!t.isTechnicalParameter(P);}var H=Object.keys(y).filter(G);var J=D.filter(G);Object.keys(I).filter(G).forEach(function(P){var V=s[P],K=V&&V[0],M=I[P],N=y.hasOwnProperty(P);if(N){++B;if(M.filter){++E;}if(M.required){++C;}}else if(K===null||K===undefined){++F;}});if(z){S.countPotentiallyMatchingParams=H.filter(function(K){return I.hasOwnProperty(K);}).length;}else{S.countPotentiallyMatchingParams=H.length;}S.countDefaultedParams=J.length;S.countMatchingParams=B;S.countMatchingRequiredParams=C;S.countMatchingFilterParams=E;S.countFreeInboundParams=F;return S;}function x(I,s,K,M){var y={inbound:s};function N(Y,Z,$){Y.matches=false;Y.noMatchReason=Z;Y.noMatchDebug=$;return Y;}function z(Y){Y.matches=true;Y.matchesVirtualInbound=v.isVirtualInbound(s);Y.parsedIntent=I;return Y;}var B=s.semanticObject==="*";y.genericSO=B;var S=I.semanticObject===undefined||I.semanticObject===s.semanticObject||B;if(!S){return N(y,"Semantic object \""+I.semanticObject+"\" did not match");}var C=I.action===undefined||I.action===s.action;if(!C){return N(y,"Action \""+I.action+"\" did not match");}var F=!s.deviceTypes||I.formFactor===undefined||s.deviceTypes[I.formFactor];if(!F){return N(y,"Form factor \""+I.formFactor+"\" did not match","Inbound: ["+Object.keys(s.deviceTypes).filter(function(Y){return!!s.deviceTypes[Y];}).join(", ")+"]");}var T=I.params&&I.params["sap-ui-tech-hint"]&&I.params["sap-ui-tech-hint"][0];if(I.treatTechHintAsFilter&&T){var D=g({inbound:s});if(D!==T){return N(y,"Tech Hint as filter \""+T+"\" did not match","Inbound: ["+D+"]");}}var R=[],E=[],G=I.params||{};var H=d(G,s.signature&&s.signature.parameters,K,R,E);y.intentParamsPlusAllDefaults=H;y.defaultedParamNames=E;e(H,y);var J=r(s.signature.parameters,H,G,E,K,M);if(!J){return N(y,"Inbound parameter signature did not match",f.formatInboundSignature(s.signature));}var P=U.constructParameterDominatorMap(s.signature.parameters);var O=U.findDominatedDefaultParameters(H,E,P);var Q=E.filter(function(Y){return!O[Y];});var V=U.filterObjectKeys(H,function(Y){return!O[Y];});if(!o(s,V)){return N(y,"Additional parameters not allowed",f.formatInboundSignature(s.signature));}var W=s.signature.additionalParameters==="ignored";if(W){U.filterObjectKeys(V,function(Y){if(Y.indexOf("sap-")===0){return true;}if(s.signature.parameters.hasOwnProperty(Y)){return true;}return false;},true);}var X=w(s.signature.parameters,H,G,E,W);h(y,s);y.intentParamsPlusAllDefaults=V;y.defaultedParamNames=Q;y.priorityString=l(y,X);i(R,M);return z(y);}return{match:p,matchOne:x,sortMatchingResultsDeterministic:b,matchesFilter:m,checkAdditionalParameters:o,addDefaultParameterValues:d,extractSapPriority:e,serializeMatchingResult:a};});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/StagedLogger',["sap/ushell/services/_ClientSideTargetResolution/Utils"],function(u){"use strict";var _={};function b(g){var L,o,s=g();if(!s.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #begin method of StagedLogger.");}L=s.logId;if(_[L]){throw new Error("'cannot call #begin twice with same log id: '"+L+"'");}else{_[L]={};}o=_[L];o.title=s.title||null;o.moduleName=s.moduleName||null;var r=function(c,n){if(n===1){return c;}return r(c,n-1)+c;};o.stages=s.stages.map(function(S){return[S,r("-",S.length)];});return L;}function l(g){var L,c,s,d,p,S,n,A;A=g();if(!A.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.");}L=A.logId;S=A.stage;p=A.prefix;d=A.lines;s=A.line;n=A.number;if(!d&&s&&p){s=p+" "+s;}c=_[L].stages[S-1];if(s){c.push(s);}if(d){if(p){p=(s?" ":"")+p;}var f=d.map(function(s,i){return(n?(i+1):"")+(p?p+" ":"")+s;});c.push.apply(c,f);}}function e(g){var A,L,s;A=g();if(!A.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.");}s=A.logId;L=_[s];if(typeof L!=="object"){throw new Error("Logger .end was called on an already ended logger");}var c=L.stages.map(function(S){return S.join("\n");}).join("\n\n");jQuery.sap.log.debug("[REPORT #"+s+"] "+L.title,"\n"+c+"\n",L.moduleName);delete _[s];}function a(){return _;}return{begin:function(){if(!u.isDebugEnabled()){return;}b.apply(null,arguments);},log:function(){if(!u.isDebugEnabled()){return;}l.apply(null,arguments);},end:function(){if(!u.isDebugEnabled()){return;}e.apply(null,arguments);},_getLogs:a};});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Utils',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L,v,f){"use strict";function a(I,D,p){var o={};D.forEach(function(s){var h=p[s].dominatedBy;var j=h.some(function(k){var l=!!I[k];var m=k!==s;var n=D.indexOf(k)===-1;return l&&n&&m;});if(j){o[s]=true;}});return o;}function c(p){var D={},r={};Object.keys(p).forEach(function(k){var R=p[k].renameTo||k;r[R]=r[R]||{"renameTo":R,"dominatedBy":[]};r[R].dominatedBy.push(k);r[R].dominatedBy=r[R].dominatedBy.sort();D[k]=r[R];});return D;}function b(o,F,I){var O=I?o:q.extend(true,{},o);Object.keys(O).forEach(function(k){if(F(k)===false){delete O[k];}});return O;}function d(o,F){var h;h=Object.keys(o).reduce(function(h,k){var V=o[k];if(F(k,V)){h[k]=V;}return h;},{});return h;}function w(h){if(i()){h.call(null);}}function i(){var C=L.getLevel();if(C>=L.Level.DEBUG){return true;}return false;}function e(I,p){return p.every(function(P){var o,O,s;s=P.name;O=P.options;o=I[s];return Object.keys(O).every(function(h){var j=O[h];if(h==="required"){return!!(o||{}).required===j;}return false;});});}function g(p,W){var E={};p.forEach(function(P){if(W[P]){E[P]=W[P];delete W[P];}});return E;}return{inboundSignatureMeetsParameterOptions:e,filterObjectKeys:b,filterObject:d,constructParameterDominatorMap:c,findDominatedDefaultParameters:a,whenDebugEnabled:w,isDebugEnabled:i,extractParameters:g};});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds',[],function(){"use strict";var v={};var A=[{hideIntentLink:true,semanticObject:"Action",action:"search",deviceTypes:{desktop:true,tablet:true,phone:true},signature:{parameters:{},additionalParameters:"notallowed"},resolutionResult:{applicationType:"SAPUI5",ui5ComponentName:"sap.ushell.renderers.fiori2.search.container",additionalInformation:"SAPUI5.Component=sap.ushell.renderers.fiori2.search.container",url:sap.ui.require.toUrl("sap/ushell/renderers/fiori2/search/container"),loadCoreExt:true,loadDefaultDependencies:false}},{hideIntentLink:true,semanticObject:"Shell",action:"compose",deviceTypes:{desktop:true,tablet:true,phone:true},signature:{parameters:{pageId:{required:false,defaultValue:{value:""}},mode:{required:false,defaultValue:{value:"view"}}},additionalParameters:"notallowed"},resolutionResult:{applicationType:"SAPUI5",ui5ComponentName:"sap.ushell.applications.PageComposer",additionalInformation:"SAPUI5.Component=sap.ushell.applications.PageComposer",url:sap.ui.require.toUrl("sap/ushell/applications/PageComposer"),loadCoreExt:true,loadDefaultDependencies:false}},{hideIntentLink:true,semanticObject:"FLPPageTemplate",action:"manage",deviceTypes:{desktop:true,tablet:true,phone:true},signature:{parameters:{pageId:{required:false,defaultValue:{value:""}},mode:{required:false,defaultValue:{value:"view"}}},additionalParameters:"notallowed"},resolutionResult:{applicationType:"SAPUI5",ui5ComponentName:"sap.ushell.applications.PageComposer",additionalInformation:"SAPUI5.Component=sap.ushell.applications.PageComposer",url:sap.ui.require.toUrl("sap/ushell/applications/PageComposer"),loadCoreExt:true,loadDefaultDependencies:false}}];v.isVirtualInbound=function(i){return A.some(function(V){return V===i;});};v.getInbounds=function(){return A;};return v;});sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/XAppStateProcessing',["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/navigationMode","sap/ushell/services/AppConfiguration","sap/ushell/Config","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/ui/generic/app/navigation/service/SelectionVariant"],function(u,c,n,a,C,q,O,i,b,S){"use strict";function m(M,A){var D=new q.Deferred(),N,R=M.resolutionResult,t=M.inbound&&(M.inbound.signature||{}),v=h(R)||t.additionalParameters==="ignored"||k(M);if(!v){e(D,M);return D.promise();}var w=M.intentParamsPlusAllDefaults["sap-xapp-state"]&&M.intentParamsPlusAllDefaults["sap-xapp-state"][0];if(w){s(A,w).then(p).then(function(V){if(h(R)){var P=c.constructParameterDominatorMap(t.parameters);Object.keys(R.oNewAppStateMembers).forEach(function(x){var y=P[x].dominatedBy;if(g(V,y)){delete R.oNewAppStateMembers[x];}});}var I=t.additionalParameters==="ignored";if(!h(R)&&!k(M)&&!I){e(D,M);return;}N=A.createEmptyAppState(undefined,true);if(N){N.setData(V);d(N,M,D);}},function(){delete R.oNewAppStateMembers;e(D,M);return;});return D.promise();}if(h(R)){var E=A.createEmptyAppState(undefined,true);d(E,M,D);return D.promise();}e(D,M);return D.promise();}function d(N,M,D){var t=N.getData()||{},v,w={},x=M.inbound.signature,R=M.resolutionResult;if(t.selectionVariant){v=new S(JSON.stringify(t.selectionVariant));}else{v=new S();}if(h(R)){Object.keys(R.oNewAppStateMembers).forEach(function(y){v.massAddSelectOption(y,R.oNewAppStateMembers[y].Ranges);});}var I=x.additionalParameters==="ignored";v=r(v,w,x.parameters,I);if(v.getParameterNames().length!==0||v.getSelectOptionsPropertyNames().length!==0||w.deleted){t.selectionVariant=v.toJSONObject();}if(!w.changed&&!w.deleted&&!h(R)){e(D,M);return;}N.setData(t);N.save().done(function(){M.intentParamsPlusAllDefaults["sap-xapp-state"]=[N.getKey()];M.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[N.getKey()];e(D,M);});}function e(D,M){var N;l(M);o(M);N=n.compute(O.get("inbound.resolutionResult.applicationType",M),(M.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(M.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(a.getCurrentApplication()||{}).applicationType,C.last("/core/navigation/enableInPlaceForClassicUIs"));u.shallowMergeObject(M.resolutionResult,N);delete M.resolutionResult.oNewAppStateMembers;D.resolve(M);}function h(R){return R.oNewAppStateMembers&&!i(R.oNewAppStateMembers);}function f(L,P){return Array.isArray(L)&&L.some(function(M){return(P.indexOf(M)!==-1);});}function g(A,P){if(A&&A.selectionVariant){var t=new S(JSON.stringify(A.selectionVariant)),v=(t.getSelectOptionsPropertyNames()||[]),w=(t.getParameterNames()||[]);if(f(v,P)||f(w,P)){return true;}}return false;}function r(t,R,P,I){var v=new S(),w=(t.getParameterNames()||[]),x=(t.getSelectOptionsPropertyNames()||[]),y,z;w.forEach(function(A){y=t.getParameter(A);if(I&&!P[A]){R.deleted=true;return;}if(P[A]&&P[A].renameTo){if((v.getParameter(P[A].renameTo)===undefined)&&(v.getSelectOption(P[A].renameTo)===undefined)){v.addParameter(P[A].renameTo,y);R.changed=true;}else{q.sap.log.error("renaming of appstate creates duplicates "+A+"->"+P[A].renameTo);}}else if((v.getParameter(A)===undefined)&&(v.getSelectOption(A)===undefined)){v.addParameter(A,y);}});x.forEach(function(A){z=t.getSelectOption(A);if(I&&!P[A]){R.deleted=true;return;}if(P[A]&&P[A].renameTo){if((v.getSelectOption(P[A].renameTo)===undefined)&&(v.getParameter(P[A].renameTo)===undefined)){v.massAddSelectOption(P[A].renameTo,z);R.changed=true;}else{q.sap.log.error("renaming of appstate creates duplicates "+A+"->"+P[A].renameTo);}}else if((v.getSelectOption(A)===undefined)&&(v.getParameter(A)===undefined)){v.massAddSelectOption(A,z);}});w.forEach(function(A){t.removeParameter(A);});x.forEach(function(A){t.removeSelectOption(A);});v.getParameterNames().forEach(function(A){t.addParameter(A,v.getParameter(A));});v.getSelectOptionsPropertyNames().forEach(function(A){t.massAddSelectOption(A,v.getSelectOption(A));});return t;}function j(D){if(D===undefined||b(D)){return false;}return true;}function k(M){return M.inbound&&M.inbound.signature&&M.inbound.signature.parameters&&Object.keys(M.inbound.signature.parameters).some(function(K){return!!(M.inbound.signature.parameters[K].renameTo);});}function l(M){M.defaultedParamNames=M.defaultedParamNames.filter(function(N){if(M.intentParamsPlusAllDefaults[N]&&!Array.isArray(M.intentParamsPlusAllDefaults[N])){if(!(M.resolutionResult.oNewAppStateMembers&&M.resolutionResult.oNewAppStateMembers[N])){return false;}}return true;});}function o(M){var P=(O.get("inbound.signature.parameters",M)||{}),t={};M.defaultedParamNames.forEach(function(N){var v=(P[N]&&P[N].renameTo)||N;if(t[v]){q.sap.log.error("renaming of defaultedParamNames creates duplicates"+N+"->"+v);}else{t[v]=true;}});M.mappedDefaultedParamNames=Object.keys(t).sort();}function p(A){if(j(A)){return Promise.reject();}return Promise.resolve(A);}function s(A,t){return new Promise(function(R,v){A.getAppState(t).done(function(w){R(w.getData());}).fail(function(E){v(E);});});}return{mixAppStateIntoResolutionResultAndRename:m,_hasRenameTo:k};});sap.ui.predefine('sap/ushell/services/_CommonDataModel/PersonalizationProcessor',["sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/Log"],function(q,i,L){"use strict";function P(){}P.prototype._getItemIndex=function(I,s){var r;for(r=0;r<I.length;r++){if(I[r].id===s){break;}}r=(r>=I.length)?-1:r;return r;};P.prototype._applyRenameGroup=function(g,n,o){var G,b=false;if(!n){return false;}if(g&&o&&o.groups&&o.groups[g]){G=o.groups[g];if(G.identification&&G.identification.title){o.groups[g].identification.title=n;b=true;}}return b;};P.prototype._applyGroupVisibility=function(g,G,o){var b=false;if(G===undefined){return false;}if(g&&o&&o.groups&&o.groups[g]){o.groups[g].identification.isVisible=G;b=true;}return b;};P.prototype.mixinPersonalization=function(o,p){var d=new q.Deferred(),t=this;if(!p||i(p)){return d.resolve(o).promise();}if(p.groups){Object.keys(p.groups).forEach(function(g){var G=p.groups[g];if(o.groups[g]){if(G.identification){if(G.identification.title){t._applyRenameGroup(g,G.identification.title,o);}if(G.identification.hasOwnProperty("isVisible")&&G.identification.isVisible===false){t._applyGroupVisibility(g,false,o);}}}});}this._applyAddGroups(o,p);if(p.removedGroups&&Array.isArray(p.removedGroups)){p.removedGroups.forEach(function(g){t._applyRemoveGroup(o,g);});}this._applyMoveGroup(o,p);this._applyItemChanges(o,p);this._applyTileSettings(o,p);return d.resolve(o).promise();};P.prototype._applyAddGroups=function(o,p){var n=[];o.site=o.site||{};o.site.payload=o.site.payload||{};o.site.payload.groupsOrder=o.site.payload.groupsOrder||[];o.groups=o.groups||{};if(Array.isArray(p.groupOrder)){o.site.payload.groupsOrder.forEach(function(g){if(p.groupOrder.indexOf(g)===-1){if((p.removedGroups&&p.removedGroups.indexOf(g)===-1)||!p.removedGroups){n.push(g);}}});}if(Array.isArray(p.groupOrder)&&p.addedGroups&&Object.keys(p.addedGroups).length>0){Object.keys(p.addedGroups).forEach(function(g){o.groups[g]=p.addedGroups[g];o.groups[g].payload.isPreset=false;});o.site.payload.groupsOrder=p.groupOrder;}n.forEach(function(N){o.site.payload.groupsOrder.push(N);});};P.prototype._checkRenameGroup=function(g,p,o,a){if(g&&p&&o){if(o[g]){if(p[g].identification.title!==o[g].identification.title){a=a||{};a.groups=a.groups||{};a.groups[g]=a.groups[g]||{};a.groups[g].identification=a.groups[g].identification||{};a.groups[g].identification.title=p[g].identification.title;}}}return a;};P.prototype._checkTileSettings=function(p,o){if(!p.modifiedTiles){return;}o.modifiedTiles=p.modifiedTiles;};P.prototype._applyTileSettings=function(s,p){var g,m;if(!p.modifiedTiles){return;}g=Object.keys(s.groups).map(function(k){return this[k];},s.groups);m=Object.keys(p.modifiedTiles).map(function(k){return this[k];},p.modifiedTiles);g.some(function(G){["tiles","links"].forEach(function(t){if(G.payload[t]){G.payload[t].some(function(T){var a;m.some(function(u,I){if(u.id===T.id){if(u.title!==undefined){T.title=u.title;}if(u.subTitle!==undefined){T.subTitle=u.subTitle;}if(u.info!==undefined){T.info=u.info;}a=I;return true;}return false;});if(a!==undefined){m.splice(a,1);}return m.length===0;});}});return m.length===0;});s.modifiedTiles=p.modifiedTiles;};P.prototype._checkGroupVisibility=function(g,p,o,a){if(g&&p&&o){if(o[g]){if(p[g].identification.isVisible!==o[g].identification.isVisible&&typeof p[g].identification.isVisible==="boolean"){a=a||{};a.groups=a.groups||{};a.groups[g]=a.groups[g]||{};a.groups[g].identification=a.groups[g].identification||{};a.groups[g].identification.isVisible=p[g].identification.isVisible;}}}return a;};P.prototype._addGroupToPersonalizationDelta=function(p,o,g){var s=false,G,n;if(p&&p.site&&p.site.payload&&p.site.payload.groupsOrder&&p.groups&&g&&p.groups[g]&&o){G=p.site.payload.groupsOrder;n=p.groups[g];o.addedGroups=o.addedGroups||{};o.addedGroups[g]={};o.addedGroups[g].identification=q.extend({},n.identification);o.addedGroups[g].payload=q.extend({},n.payload);o.addedGroups[g].payload.tiles=[];o.addedGroups[g].payload.links=[];o.groupOrder=G;s=true;}return s;};P.prototype.extractPersonalization=function(p,o){var d=new q.Deferred(),a,b={},O,e,t=this;if(p&&p.groups&&o&&o.groups){a=p.groups;O=o.groups;e=this._getExtractHelperObject(o,p,b);Object.keys(O).forEach(function(g){t._checkRemoveGroup(p,b,g);t._extractFromOriginalSiteOneGroup(o,e,g,"tiles");t._extractFromOriginalSiteOneGroup(o,e,g,"links");});Object.keys(a).forEach(function(g){if(O[g]){t._checkRenameGroup(g,a,O,b);t._checkGroupVisibility(g,a,O,b);}else{t._addGroupToPersonalizationDelta(p,b,g);}t._extractFromPersonalizedSiteOneGroup(p,e,g,"tiles");t._extractFromPersonalizedSiteOneGroup(p,e,g,"links");});this._checkMoveGroup(p,o,b);this._checkTileSettings(p,b);this._cleanupRemovedGroups(o,b);if(e.oPersonalizationDelta.movedTiles&&i(e.oPersonalizationDelta.movedTiles)){delete(e.oPersonalizationDelta.movedTiles);}if(e.oPersonalizationDelta.movedLinks&&i(e.oPersonalizationDelta.movedLinks)){delete(e.oPersonalizationDelta.movedLinks);}}if(o._version){b._version=o._version;}return d.resolve(b).promise();};P.prototype._checkRemoveGroup=function(p,o,O){var s=false;if(p&&p.groups&&o&&O){if(!p.groups[O]){o.removedGroups=o.removedGroups||[];o.groupOrder=o.groupOrder||[];if(o.removedGroups.indexOf(O)===-1){o.removedGroups.push(O);}if(p.site&&p.site.payload&&p.site.payload.groupsOrder&&Array.isArray(p.site.payload.groupsOrder)){o.groupOrder=p.site.payload.groupsOrder.slice(0);}}s=true;}return s;};P.prototype._applyRemoveGroup=function(o,g){var O,G,a;if(o&&o.groups&&o.site&&o.site.payload&&o.site.payload.groupsOrder&&g){O=o.groups;G=o.site.payload.groupsOrder;a=G.indexOf(g);if(!(a===-1)){G.splice(a,1);delete(O[g]);return true;}}return false;};P.prototype._checkMoveGroup=function(p,o,a){var b,O,c=false,s=false;if(p.site&&p.site.payload&&Array.isArray(p.site.payload.groupsOrder)&&o.site&&o.site.payload&&Array.isArray(o.site.payload.groupsOrder)){b=p.site.payload.groupsOrder;O=o.site.payload.groupsOrder;if(b.length===O.length){c=(function(){var S=false,I;for(I=0;I<O.length;I++){if(O[I]!==b[I]){S=true;break;}}return S;})();if(c){a.groupOrder=b;s=true;}}}return s;};P.prototype._applyMoveGroup=function(o,p){var s=false;if(Array.isArray(p.groupOrder)){o.site=o.site||{};o.site.payload=o.site.payload||{};if(!Array.isArray(o.site.payload.groupsOrder)){o.site.payload.groupsOrder=[];}if(o.site.payload.groupsOrder.length===p.groupOrder.length){o.site.payload.groupsOrder=p.groupOrder;s=true;}}return s;};P.prototype._getHashedItemsFromSite=function(s){var r=null;if(s&&s.groups){if(Object.keys(s.groups).length>0){r={};Object.keys(s.groups).forEach(function(g){var G=s.groups[g],a;r[g]={};if(G.payload){["tiles","links"].forEach(function(t){r[g][t]={};if(Array.isArray(G.payload[t])){a=G.payload[t];a.forEach(function(I,b){var c;if(I&&I.id){c=I.id;r[g][t][c]={iIndex:b,sItemId:I};}});}});}});}}return r;};P.prototype._getExtractHelperObject=function(o,p,a){var r=null;r={};r.oHashedItemsOriginal=this._getHashedItemsFromSite(o)||{};r.oHashedItemsPersonalized=this._getHashedItemsFromSite(p);r.oPersonalizationDelta=a;return r;};P.prototype._extractFromOriginalSiteOneGroup=function(o,e,g,I){var s=false,O,m,M,p="movedTiles";I=I||"tiles";if(I!=="tiles"){p="movedLinks";}M=function(a,f){m[a]=m[a]?m[a]:{};m[a].fromGroup=f;m[a].toGroup=null;};if(e&&e.oHashedItemsPersonalized&&e.oPersonalizationDelta&&o&&o.groups&&o.groups[g]&&o.groups[g].payload&&Array.isArray(o.groups[g].payload[I])){O=o.groups[g].payload[I];e.oPersonalizationDelta[p]=e.oPersonalizationDelta[p]?e.oPersonalizationDelta[p]:{};m=e.oPersonalizationDelta[p];if(e.oHashedItemsPersonalized[g]){O.forEach(function(a){if(!e.oHashedItemsPersonalized[g][I][a.id]){M(a.id,g);}});s=true;}else{O.forEach(function(a){M(a.id,g);});s=true;}}return s;};P.prototype._handleItemChangeExtract=function(e,g,I){return false;};P.prototype._extractFromPersonalizedSiteOneGroup=function(p,e,g,I){var s=false,m,t,T=false,a,b=this,c="movedTiles";I=I||"tiles";if((I!=="tiles")&&(I!=="links")){return s;}if(I!=="tiles"){c="movedLinks";}if(e&&e.oPersonalizationDelta&&p&&p.groups&&p.groups[g]&&p.groups[g].payload&&Array.isArray(p.groups[g].payload[I])){a=p.groups[g].payload[I];e.oPersonalizationDelta[c]=e.oPersonalizationDelta[c]?e.oPersonalizationDelta[c]:{};m=e.oPersonalizationDelta[c];t=[];a.forEach(function(o,d){if(!o){return;}t.push(o.id);if(e.oHashedItemsOriginal[g]&&e.oHashedItemsOriginal[g][I][o.id]){if(m[o.id]){L.error("Extract personalization failed","The Tile ID "+o.id+" is not unique in the site","PersonalizationProcessor");delete(m[o.id]);}if(e.oHashedItemsOriginal[g][I][o.id].iIndex!==d){T=true;}b._handleItemChangeExtract(e,g,I);}else{T=true;if(m[o.id]){if(m[o.id].fromGroup&&(m[o.id].fromGroup!==g)){if(!m[o.id].toGroup){m[o.id].toGroup=g;b._handleItemChangeExtract(e,g,I);}}}else{m[o.id]={};m[o.id].fromGroup=null;m[o.id].toGroup=g;m[o.id].item=o;}}});if(T){e.oPersonalizationDelta.groups=e.oPersonalizationDelta.groups||{};e.oPersonalizationDelta.groups[g]=e.oPersonalizationDelta.groups[g]||{};e.oPersonalizationDelta.groups[g].payload=e.oPersonalizationDelta.groups[g].payload||{};if(I==="tiles"){e.oPersonalizationDelta.groups[g].payload.tileOrder=t;}else{e.oPersonalizationDelta.groups[g].payload.linkOrder=t;}}s=true;}return s;};P.prototype._cleanupRemovedGroups=function(o,p){var I,m;if(p.removedGroups&&p&&Array.isArray(p.removedGroups)&&(p.removedGroups.length>0)){p.removedGroups.forEach(function(g){if(o&&o.groups&&o.groups[g]&&o.groups[g].payload){[{sType:"tiles",sPersonalizationDeltaType:"movedTiles"},{sType:"links",sPersonalizationDeltaType:"movedLinks"}].forEach(function(t){if(Array.isArray(o.groups[g].payload[t.sType])){I=o.groups[g].payload[t.sType];I.forEach(function(a){if(p[t.sPersonalizationDeltaType]){m=p[t.sPersonalizationDeltaType][a.id];if(m&&m.fromGroup&&(m.fromGroup===g)&&!m.toGroup){delete(p[t.sPersonalizationDeltaType][a.id]);}}});}});}});}};P.prototype._setItemOrderOnSiteCollection=function(o,I){var s=true,S=o.length,a,b={},c,C,d,f;if(!Array.isArray(o)||!Array.isArray(o)||(o.length!==I.length)){return false;}a=o.splice(0,o.length);for(c=0;c<I.length;c++){d=I[c];C=a.shift();if(C&&d===C.id){o.push(C);}else if(b[d]){o.push(b[d]);delete(b[d]);if(C){b[C.id]=C;}}else if(C){b[C.id]=C;f=false;while(a.length>0){C=a.shift();if(d===C.id){o.push(C);f=true;break;}else{b[C.id]=C;}}if(!f){s=false;}}}if(o.length!==S){s=false;}return s;};P.prototype._setItemOrderOnSiteGroupForItemType=function(o,d,I){var s=true,t,a;if((I==="tiles")||(I==="links")){a=(I==="tiles")?"tileOrder":"linkOrder";}else{return false;}if(d.payload&&Array.isArray(d.payload[a])&&(d.payload[a].length>0)){if(o.payload&&Array.isArray(o.payload[I])&&(o.payload[I].length>0)){t=this._setItemOrderOnSiteCollection(o.payload[I],d.payload[a]);if(!t){s=false;}}else{s=false;}}return s;};P.prototype._setItemOrderOnSite=function(o,p){var s=true,t,a=this;if(o.groups&&p.groups){Object.keys(p.groups).forEach(function(g){if(p.groups[g]&&o.groups[g]){t=a._setItemOrderOnSiteGroupForItemType(o.groups[g],p.groups[g],"tiles");if(!t){s=false;}t=a._setItemOrderOnSiteGroupForItemType(o.groups[g],p.groups[g],"links");if(!t){s=false;}}});}return s;};P.prototype._applyMoveItemsWithoutOrder=function(o,p,I){var s=true,t,T,a="tileOrder",d,b,c,O=[],e=this;function f(C,g){var s=true;if(o.groups[g]&&o.groups[g].payload&&p.groups&&p.groups[g]&&p.groups[g].payload&&Array.isArray(p.groups[g].payload[a])&&(p.groups[g].payload[a].length>0)){if(!Array.isArray(o.groups[g].payload[I])){o.groups[g].payload[I]=[];}o.groups[g].payload[I].push(C);}else{s=false;}return s;}if((I==="tiles")||(I==="links")){T=(I==="tiles")?"movedTiles":"movedLinks";a=(I==="tiles")?"tileOrder":"linkOrder";}else{return false;}if(!o||!o.groups||!o.site||!o.site.payload||!Array.isArray(o.site.payload.groupsOrder)||!p){return false;}if(p[T]){Object.keys(p[T]).forEach(function(g){d=p[T][g];if(d.fromGroup){if(d.toGroup){if(d.fromGroup!==d.toGroup){if(o.groups[d.fromGroup]&&o.groups[d.fromGroup].payload&&Array.isArray(o.groups[d.fromGroup].payload[I])){O=o.groups[d.fromGroup].payload[I];b=e._getItemIndex(O,g);if(b>=0){c=O.splice(b,1);t=f(c[0],d.toGroup);if(!t){s=false;}}else{s=false;}}else{s=false;}}else{s=false;}}else if(o.groups[d.fromGroup]&&o.groups[d.fromGroup].payload&&Array.isArray(o.groups[d.fromGroup].payload[I])){O=o.groups[d.fromGroup].payload[I];b=e._getItemIndex(O,g);if(b>=0){O.splice(b,1);}else{s=false;}}else{s=false;}}else if(d.toGroup){if(d.item&&!i(d.item)){t=f(d.item,d.toGroup);if(!t){s=false;}}else{s=false;}}else{s=false;}});}return s;};P.prototype._applyItemChanges=function(o,p){var s=true,S;S=this._applyMoveItemsWithoutOrder(o,p,"tiles");if(!S){s=false;}S=this._applyMoveItemsWithoutOrder(o,p,"links");if(!S){s=false;}if(p.groups){S=this._setItemOrderOnSite(o,p);if(!S){s=false;}}return s;};return P;});sap.ui.predefine('sap/ushell/services/_CommonDataModel/SiteConverter',["sap/base/Log"],function(L){"use strict";var S=function(){};S.prototype.convertTo=function(v,c){if(c._version==="3.0.0"||(c.identification&&c.payload)){switch(v){case"3.0.0":return this._convertPageToSite(c);case"3.1.0":return this._convertSiteToPage(c);default:L.error("The received version for the site/page conversion is not supported");return{};}}else{L.error("The site converter did not receive a correct page/site object.");return{};}};S.prototype._convertPageToSite=function(p){var c={groups:{},_version:"3.0.0",site:{identification:p.identification,payload:{groupsOrder:p.payload.layout.sectionOrder}}};var s=p.payload.sections;for(var i=0;i<Object.keys(s).length;i++){var a=Object.keys(s)[i];var o=p.payload.sections[a];c.groups[a]={identification:{id:o.id,title:o.title},payload:{tiles:this._convertVizPayloadObjectToArray(o)}};if("visible"in o){c.groups[a].identification.isVisible=o.visible;}if("preset"in o){c.groups[a].payload.isPreset=o.preset;}if("locked"in o){c.groups[a].payload.locked=o.locked;}if("default"in o){c.groups[a].payload.isDefaultGroup=o.default;}}return c;};S.prototype._convertSiteToPage=function(s){var c={identification:s.site.identification,payload:{layout:{sectionOrder:s.site.payload.groupsOrder},sections:{}}};var g=s.groups;var G;var o;var v;for(var i=0;i<Object.keys(g).length;i++){G=Object.keys(g)[i];o=s.groups[G];v=this._createVizPayloadObject(o.payload.tiles);c.payload.sections[G]={id:o.identification.id,title:o.identification.title,layout:v.layout,viz:v.viz};var a=c.payload.sections[G];if("isVisible"in o.identification){a.visible=o.identification.isVisible;}if("isPreset"in o.payload){a.preset=o.payload.isPreset;}if("locked"in o.payload){a.locked=o.payload.locked;}if("isDefaultGroup"in o.payload){a.default=o.payload.isDefaultGroup;}}return c;};S.prototype._createVizPayloadObject=function(t){var v=[];var p={};var V=t.reduce(function(r,T){v.push(T.id);r[T.id]=T;return r;},{});p.layout={vizOrder:v};p.viz=V;return p;};S.prototype._convertVizPayloadObjectToArray=function(s){return s.layout.vizOrder.reduce(function(t,v){t.push(s.viz[v]);return t;},[]);};return S;});sap.ui.predefine('sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig',["sap/ushell/Config","sap/ushell/System","sap/ushell/services/_ContentExtensionAdapterFactory/FeaturedGroupConfig"],function(C,S,F){"use strict";var a={};var c=[{contentProviderName:"featured",adapter:"sap.ushell.adapters.cdm.v3.StaticGroupsAdapter",configSwitch:"/core/home/featuredGroup/enable",system:{alias:"",platform:"cdm"},configHandler:function(){var r=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/model/currentState/showRecentActivity"),e=r&&C.last("/core/home/featuredGroup/frequentCard"),E=r&&C.last("/core/home/featuredGroup/recentCard");return F.getMockAdapterConfig(e,E);}}];a._getConfigAdapters=function(){c.forEach(function(o){o.system=new S(o.system);});return c;};return a;});sap.ui.require.preload({
/*!!
 * Hasher <http://github.com/millermedeiros/hasher>
 * @author Miller Medeiros
 * @version 1.2.0 (2013/11/11 03:18 PM)
 * Released under the MIT License
 */
"sap/ui/thirdparty/hasher.js":function(){;(function(){var f=function(s){var h=(function(w){var P=25,d=w.document,a=w.history,S=s.Signal,h,_,b,c,g,i,j=/#(.*)$/,k=/(\?.*)|(\#.*)/,l=/^\#/,m=(!+"\v1"),n=('onhashchange'in w)&&d.documentMode!==7,o=m&&!n,p=(location.protocol==='file:');function q(e){return String(e||'').replace(/\W/g,"\\$&");}function r(e){if(!e)return'';var D=new RegExp('^'+q(h.prependHash)+'|'+q(h.appendHash)+'$','g');return e.replace(D,'');}function t(){var D=j.exec(h.getURL());var E=(D&&D[1])||'';try{return h.raw?E:decodeURIComponent(E);}catch(e){return E;}}function u(){return(g)?g.contentWindow.frameHash:null;}function v(){g=d.createElement('iframe');g.src='about:blank';g.style.display='none';d.body.appendChild(g);}function x(){if(g&&_!==u()){var e=g.contentWindow.document;e.open();e.write('<html><head><title>'+d.title+'</title><script type="text/javascript">var frameHash="'+_+'";</script></head><body>&nbsp;</body></html>');e.close();}}function y(e,D){if(_!==e){var E=_;_=e;if(o){if(!D){x();}else{g.contentWindow.frameHash=e;}}return function(){h.changed.dispatch(r(e),r(E));};}}if(o){i=function(){var e=t(),D=u(),E;if(D!==_&&D!==e){h.setHash(r(D));}else if(e!==_){E=y(e);E&&E();}};}else{i=function(){var e=t(),D;if(e!==_){D=y(e);D&&D();}};}function z(e,D,E){if(e.addEventListener){e.addEventListener(D,E,false);}else if(e.attachEvent){e.attachEvent('on'+D,E);}}function A(e,D,E){if(e.removeEventListener){e.removeEventListener(D,E,false);}else if(e.detachEvent){e.detachEvent('on'+D,E);}}function B(e){e=Array.prototype.slice.call(arguments);var D=e.join(h.separator);D=D?h.prependHash+D.replace(l,'')+h.appendHash:D;return D;}function C(e){e=encodeURI(e);if(m&&p){e=e.replace(/\?/,'%3F');}return e;}h={VERSION:'1.2.0',raw:false,appendHash:'',prependHash:'/',separator:'/',changed:new S(),stopped:new S(),initialized:new S(),init:function(){if(c)return;_=t();if(n){z(w,'hashchange',i);}else{if(o){if(!g){v();}x();}b=setInterval(i,P);}c=true;h.initialized.dispatch(r(_));},stop:function(){if(!c)return;if(n){A(w,'hashchange',i);}else{clearInterval(b);b=null;}c=false;h.stopped.dispatch(r(_));},isActive:function(){return c;},getURL:function(){return w.location.href;},getBaseURL:function(){return h.getURL().replace(k,'');},setHash:function(e){var D;e=B.apply(null,arguments);if(e!==_){D=y(e);if(!h.raw){e=C(e);}w.location.hash='#'+e;D&&D();}},replaceHash:function(e){var D;e=B.apply(null,arguments);if(e!==_){D=y(e);if(!h.raw){e=C(e);}w.location.replace('#'+e);D&&D();}},getHash:function(){return r(_);},getHashAsArray:function(){return h.getHash().split(h.separator);},dispose:function(){h.stop();h.initialized.dispose();h.stopped.dispose();h.changed.dispose();g=h=w.hasher=null;},toString:function(){return'[hasher version="'+h.VERSION+'" hash="'+h.getHash()+'"]';}};h.initialized.memorize=true;return h;}(window));return h;};if(typeof define==='function'&&define.amd){define(['signals'],f);}else if(typeof exports==='object'){module.exports=f(require('signals'));}else{window['hasher']=f(window['signals']);}}());},
/** @license
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license
 * Author: Miller Medeiros
 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
 */
"sap/ui/thirdparty/signals.js":function(){(function(g){function S(b,l,i,c,p){this._listener=l;this._isOnce=i;this.context=c;this._signal=b;this._priority=p||0;}S.prototype={active:true,params:null,execute:function(p){var h,b;if(this.active&&!!this._listener){b=this.params?this.params.concat(p):p;h=this._listener.apply(this.context,b);if(this._isOnce){this.detach();}}return h;},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null;},isBound:function(){return(!!this._signal&&!!this._listener);},isOnce:function(){return this._isOnce;},getListener:function(){return this._listener;},getSignal:function(){return this._signal;},_destroy:function(){delete this._signal;delete this._listener;delete this.context;},toString:function(){return'[SignalBinding isOnce:'+this._isOnce+', isBound:'+this.isBound()+', active:'+this.active+']';}};function v(l,n){if(typeof l!=='function'){throw new Error('listener is a required param of {fn}() and should be a Function.'.replace('{fn}',n));}}function a(){this._bindings=[];this._prevParams=null;var b=this;this.dispatch=function(){a.prototype.dispatch.apply(b,arguments);};}a.prototype={VERSION:'1.0.0',memorize:false,_shouldPropagate:true,active:true,_registerListener:function(l,i,b,p){var c=this._indexOfListener(l,b),d;if(c!==-1){d=this._bindings[c];if(d.isOnce()!==i){throw new Error('You cannot add'+(i?'':'Once')+'() then add'+(!i?'':'Once')+'() the same listener without removing the relationship first.');}}else{d=new S(this,l,i,b,p);this._addBinding(d);}if(this.memorize&&this._prevParams){d.execute(this._prevParams);}return d;},_addBinding:function(b){var n=this._bindings.length;do{--n;}while(this._bindings[n]&&b._priority<=this._bindings[n]._priority);this._bindings.splice(n+1,0,b);},_indexOfListener:function(l,c){var n=this._bindings.length,b;while(n--){b=this._bindings[n];if(b._listener===l&&b.context===c){return n;}}return-1;},has:function(l,c){return this._indexOfListener(l,c)!==-1;},add:function(l,b,p){v(l,'add');return this._registerListener(l,false,b,p);},addOnce:function(l,b,p){v(l,'addOnce');return this._registerListener(l,true,b,p);},remove:function(l,c){v(l,'remove');var i=this._indexOfListener(l,c);if(i!==-1){this._bindings[i]._destroy();this._bindings.splice(i,1);}return l;},removeAll:function(){var n=this._bindings.length;while(n--){this._bindings[n]._destroy();}this._bindings.length=0;},getNumListeners:function(){return this._bindings.length;},halt:function(){this._shouldPropagate=false;},dispatch:function(p){if(!this.active){return;}var b=Array.prototype.slice.call(arguments),n=this._bindings.length,c;if(this.memorize){this._prevParams=b;}if(!n){return;}c=this._bindings.slice();this._shouldPropagate=true;do{n--;}while(c[n]&&this._shouldPropagate&&c[n].execute(b)!==false);},forget:function(){this._prevParams=null;},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams;},toString:function(){return'[Signal active:'+this.active+' numListeners:'+this.getNumListeners()+']';}};var s=a;s.Signal=a;if(typeof define==='function'&&define.amd){define(function(){return s;});}else{g['signals']=s;}}(this));},
/** @license
 * crossroads <http://millermedeiros.github.com/crossroads.js/>
 * Author: Miller Medeiros | MIT License
 * v0.12.0 (2013/01/21 13:47)
 */
"sap/ui/thirdparty/crossroads.js":function(){(function(){var f=function(s){var c,_,U;_=(/t(.+)?/).exec('t')[1]==='';function a(i,v){if(i.indexOf){return i.indexOf(v);}else{var n=i.length;while(n--){if(i[n]===v){return n;}}return-1;}}function b(l,m){var i=a(l,m);if(i!==-1){l.splice(i,1);}}function d(v,i){return'[object '+i+']'===Object.prototype.toString.call(v);}function e(v){return d(v,'RegExp');}function g(v){return d(v,'Array');}function h(v){return typeof v==='function';}function t(v){var r;if(v===null||v==='null'){r=null;}else if(v==='true'){r=true;}else if(v==='false'){r=false;}else if(v===U||v==='undefined'){r=U;}else if(v===''||isNaN(v)){r=v;}else{r=parseFloat(v);}return r;}function j(v){var n=v.length,r=[];while(n--){r[n]=t(v[n]);}return r;}function k(i,l){var q=(i||'').replace('?','').split('&'),n=q.length,o={},m,v;while(n--){m=q[n].split('=');v=l?t(m[1]):m[1];o[m[0]]=(typeof v==='string')?decodeURIComponent(v):v;}return o;}function C(){this.bypassed=new s.Signal();this.routed=new s.Signal();this._routes=[];this._prevRoutes=[];this._piped=[];this.resetState();}C.prototype={greedy:false,greedyEnabled:true,ignoreCase:true,ignoreState:false,shouldTypecast:false,normalizeFn:null,resetState:function(){this._prevRoutes.length=0;this._prevMatchedRequest=null;this._prevBypassedRequest=null;},create:function(){return new C();},addRoute:function(p,i,l){var r=new R(p,i,l,this);this._sortedInsert(r);return r;},removeRoute:function(r){b(this._routes,r);r._destroy();},removeAllRoutes:function(){var n=this.getNumRoutes();while(n--){this._routes[n]._destroy();}this._routes.length=0;},parse:function(r,l){r=r||'';l=l||[];if(!this.ignoreState&&(r===this._prevMatchedRequest||r===this._prevBypassedRequest)){return;}var m=this._getMatchedRoutes(r),i=0,n=m.length,o;if(n){this._prevMatchedRequest=r;this._notifyPrevRoutes(m,r);this._prevRoutes=m;while(i<n){o=m[i];o.route.matched.dispatch.apply(o.route.matched,l.concat(o.params));o.isFirst=!i;this.routed.dispatch.apply(this.routed,l.concat([r,o]));i+=1;}}else{this._prevBypassedRequest=r;this.bypassed.dispatch.apply(this.bypassed,l.concat([r]));}this._pipeParse(r,l);},_notifyPrevRoutes:function(m,r){var i=0,p;while(p=this._prevRoutes[i++]){if(p.route.switched&&this._didSwitch(p.route,m)){p.route.switched.dispatch(r);}}},_didSwitch:function(r,m){var l,i=0;while(l=m[i++]){if(l.route===r){return false;}}return true;},_pipeParse:function(r,l){var i=0,m;while(m=this._piped[i++]){m.parse(r,l);}},getNumRoutes:function(){return this._routes.length;},_sortedInsert:function(r){var i=this._routes,n=i.length;do{--n;}while(i[n]&&r._priority<=i[n]._priority);i.splice(n+1,0,r);},_getMatchedRoutes:function(r){var i=[],l=this._routes,n=l.length,m;while(m=l[--n]){if((!i.length||this.greedy||m.greedy)&&m.match(r)){i.push({route:m,params:m._getParamsArray(r)});}if(!this.greedyEnabled&&i.length){break;}}return i;},pipe:function(o){this._piped.push(o);},unpipe:function(o){b(this._piped,o);},toString:function(){return'[crossroads numRoutes:'+this.getNumRoutes()+']';}};c=new C();c.VERSION='0.12.0';c.NORM_AS_ARRAY=function(r,v){return[v.vals_];};c.NORM_AS_OBJECT=function(r,v){return[v];};function R(p,i,l,r){var m=e(p),n=r.patternLexer;this._router=r;this._pattern=p;this._paramsIds=m?null:n.getParamIds(p);this._optionalParamsIds=m?null:n.getOptionalParamsIds(p);this._matchRegexp=m?p:n.compilePattern(p,r.ignoreCase);this.matched=new s.Signal();this.switched=new s.Signal();if(i){this.matched.add(i);}this._priority=l||0;}R.prototype={greedy:false,rules:void(0),match:function(r){r=r||'';return this._matchRegexp.test(r)&&this._validateParams(r);},_validateParams:function(r){var i=this.rules,v=this._getParamsObject(r),l;for(l in i){if(l!=='normalize_'&&i.hasOwnProperty(l)&&!this._isValidParam(r,l,v)){return false;}}return true;},_isValidParam:function(r,p,v){var i=this.rules[p],l=v[p],m=false,n=(p.indexOf('?')===0);if(l==null&&this._optionalParamsIds&&a(this._optionalParamsIds,p)!==-1){m=true;}else if(e(i)){if(n){l=v[p+'_'];}m=i.test(l);}else if(g(i)){if(n){l=v[p+'_'];}m=this._isValidArrayRule(i,l);}else if(h(i)){m=i(l,r,v);}return m;},_isValidArrayRule:function(i,v){if(!this._router.ignoreCase){return a(i,v)!==-1;}if(typeof v==='string'){v=v.toLowerCase();}var n=i.length,l,m;while(n--){l=i[n];m=(typeof l==='string')?l.toLowerCase():l;if(m===v){return true;}}return false;},_getParamsObject:function(r){var i=this._router.shouldTypecast,v=this._router.patternLexer.getParamValues(r,this._matchRegexp,i),o={},n=v.length,p,l;while(n--){l=v[n];if(this._paramsIds){p=this._paramsIds[n];if(p.indexOf('?')===0&&l){o[p+'_']=l;l=k(l,i);v[n]=l;}if(_&&l===''&&a(this._optionalParamsIds,p)!==-1){l=void(0);v[n]=l;}o[p]=l;}o[n]=l;}o.request_=i?t(r):r;o.vals_=v;return o;},_getParamsArray:function(r){var n=this.rules?this.rules.normalize_:null,p;n=n||this._router.normalizeFn;if(n&&h(n)){p=n(r,this._getParamsObject(r));}else{p=this._getParamsObject(r).vals_;}return p;},interpolate:function(r){var i=this._router.patternLexer.interpolate(this._pattern,r);if(!this._validateParams(i)){throw new Error('Generated string doesn\'t validate against `Route.rules`.');}return i;},extrapolate:function(r){var i={};if(!r){return i;}var p=this._getParamsObject(r);this._paramsIds.forEach(function(l){if(p.hasOwnProperty(l)){i[l]=p[l];}});return i;},dispose:function(){this._router.removeRoute(this);},_destroy:function(){this.matched.dispose();this.switched.dispose();this.matched=this.switched=this._pattern=this._matchRegexp=null;},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+']';}};C.prototype.patternLexer=(function(){var E=/[\\.+*?\^$\[\](){}\/'#]/g,L=/^\/|\/$/g,i=/\/$/g,P=/(?:\{|:)([^}:]+)(?:\}|:)/g,r=function(z,A,B){var D=B.lastIndexOf("__CR_RS__"),F=B.indexOf("__CR_RQ__"),G=B.indexOf("__CR_OQ__"),H=B.indexOf("\\/",A),I=Math.min(G===-1?B.length:G,F===-1?B.length:F),J=A+z.length;if(J>=I||J<D||J<H){return T.OS.res_normal;}else{return T.OS.res_arsbq;}},T={'OS':{rgx:/([:})]|\w(?=\/))\/?(:|(?:\{\?))/g,save:'$1{{id}}$2',res:r,res_normal:'\\/?',res_arsbq:'(?:(?:\\/(?=(?:[^\\/?]+)?))|^\\/?|\\/?$)'},'RS':{rgx:/([:}])\/?(\{)/g,save:'$1{{id}}$2',res:'\\/'},'RQ':{rgx:/\{\?([^}]+)\}/g,res:'\\?([^#]+)'},'OQ':{rgx:/:\?([^:]+):/g,res:'(?:\\?([^#]*))?'},'OR':{rgx:/:([^:]+)\*:/g,res:'(.*)?'},'RR':{rgx:/\{([^}]+)\*\}/g,res:'(.+)'},'RP':{rgx:/\{([^}]+)\}/g,res:'([^\\/?]+)'},'OP':{rgx:/:([^:]+):/g,res:'([^\\/?]+)?(?:\\/(?!\\/))?'}},l=1,S=2,m=3,n=l;function p(){var z,A;for(z in T){if(T.hasOwnProperty(z)){A=T[z];A.id='__CR_'+z+'__';A.save=('save'in A)?A.save.replace('{{id}}',A.id):A.id;A.rRestore=new RegExp(A.id,'g');}}}p();function o(z,A){var B=[],D;z.lastIndex=0;while(D=z.exec(A)){B.push(D[1]);}return B;}function q(z){return o(P,z);}function u(z){return o(T.OP.rgx,z);}function v(z,A){z=z||'';if(z){if(n===l){z=z.replace(L,'');}else if(n===m){z=z.replace(i,'');}z=w(z,'rgx','save');z=z.replace(E,'\\$&');z=w(z,'rRestore','res');if(n===l){z='\\/?'+z;}}if(n!==S){z+='\\/?';}return new RegExp('^'+z+'$',A?'i':'');}function w(z,A,B){var D,F;for(F in T){if(T.hasOwnProperty(F)){D=T[F];z=z.replace(D[A],D[B]);}}return z;}function x(z,A,B){var D=A.exec(z);if(D){D.shift();if(B){D=j(D);}}return D;}function y(z,A){if(typeof z!=='string'){throw new Error('Route pattern should be a string.');}var B=function(D,F){var G,H;if(F.charAt(0)==='?'){H=A[F]||A[F.substring(1)];}else{H=A[F];}if(H!=null){if(typeof H==='object'){var I=[];for(var J in H){I.push(encodeURI(J+'='+H[J]));}G='?'+I.join('&');}else{G=String(H);}if(D.indexOf('*')===-1&&G.indexOf('/')!==-1){throw new Error('Invalid value "'+G+'" for segment "'+D+'".');}}else if(D.indexOf('{')!==-1){throw new Error('The segment '+D+' is required.');}else{G='';}return G;};if(!T.OS.trail){T.OS.trail=new RegExp('(?:'+T.OS.id+')+$');}return z.replace(T.OS.rgx,T.OS.save).replace(P,B).replace(T.OS.trail,'').replace(T.OS.rRestore,'/');}return{strict:function(){n=S;},loose:function(){n=l;},legacy:function(){n=m;},getParamIds:q,getOptionalParamsIds:u,getParamValues:x,compilePattern:v,interpolate:y};}());return c;};if(typeof define==='function'&&define.amd){define(['signals'],f);}else{window['crossroads']=f(window['signals']);}}());},
// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
"sap/ushell/EventHub.js":function(){(function(){"use strict";var d=(!window.sap||!sap.ui||!sap.ui.define)?function(v,c){return c();}:sap.ui.define;return d([],function(){var _={pendingEvents:{},subscribers:{},dispatchOperations:{},store:c()};function c(){return{nextKey:0,objectToKey:new WeakMap(),keyToObject:{}};}function l(M,D,C){if(jQuery&&jQuery.sap&&jQuery.sap.log&&jQuery.sap.log.error){jQuery.sap.log.error(M,D,"sap.ushell.EventHub");return;}if(window.console){var o=[M,D];if(C){o.push("error caused by:");o.push(C);}window.console.error.apply(window.console,o);}}function a(o){var M="An exception was raised while executing a registered callback on event '"+o.eventName+"'",D="Data passed to the event were: '"+o.eventData+"'";if(o.error.stack){D+=" Error details: "+o.error.stack;}l(M,D,o.fnCausedBy);}function s(o,C,D){var R;try{R=C(D);}catch(v){a({eventName:o,eventData:D,fnCausedBy:C,error:v});}return R;}function J(H){if(typeof arguments[2]==="function"){return y(H,arguments[2]);}return arguments[2];}function b(H){if(typeof arguments[2]==="string"&&arguments[2].indexOf("<function")===0){return z(H,arguments[2]);}return arguments[2];}function e(H,D,P){if(typeof D==="object"||typeof D==="function"){try{var S=[D,J.bind(null,H)];if(P){S.push(3);}return JSON.stringify.apply(JSON,S);}catch(o){l(""+o,o.stack,e);}}return D;}function f(H,D){try{return JSON.parse(D,b.bind(null,H));}catch(o){return D;}}function g(H,o,S){if(!H.subscribers[o]){H.subscribers[o]=[];}H.subscribers[o].push(S);}function u(H,o,v){H.subscribers[o]=(H.subscribers[o]||[]).map(function(S){return S.filter(function(L){return L.fn!==v;});}).filter(function(G){return G.length>0;});}function h(){var D,o=new Promise(function(R){D=R;}),v={dispatching:o,cancelled:false,cancel:function(){v.cancelled=true;},complete:function(){D();}};return v;}function i(H,o){if(!H.subscribers.hasOwnProperty(o)){return null;}var D=h(),S=H.subscribers[o],G=S.map(function(v){return j(H,o,v,D,0);});Promise.all(G).then(D.complete,D.complete);return D;}function j(H,o,S,D,v){var O=S.length,C=S.slice(v);return C.reduce(function(P,F){return P.then(function(G){if(D.cancelled){if(G){u(H,o,F.fn);}return G;}return n(H,o,F,S).then(function(I){if(I){D.cancelled=true;}return I;});});},Promise.resolve(false)).then(function(F){if(!F&&O<S.length){return j(H,o,S,D,O);}return F;});}function n(H,o,S,v){return new Promise(function(R){var D=f(H,H.pendingEvents[o]);setTimeout(function(){if(S.called&&v.offed){R(false);return;}S.called=true;var O=v.offed;s(o,S.fn,D);var C=v.offed;if(C){u(H,o,S.fn);}R(!O&&C);},0);});}function k(H,o,S){return function(){S.forEach(function(L){if(L.called){u(H,o,L.fn);}});S.offed=true;return{off:k(H,o,[])};};}function m(H,o,S){return function(C){var v={fn:C,called:false};S.push(v);if(H.pendingEvents.hasOwnProperty(o)){var D=H.dispatchOperations[o];if(!D){n(H,o,v,S);}else{D.dispatching.then(function(){if(!v.called){n(H,o,v,S);}});}}return{do:m(H,o,S),off:k(H,o,S)};};}function p(H,o){var S=[];g(H,o,S);return{do:m(H,o,S),off:k(H,o,S)};}function q(H,o){var D=p(H,o);D.off();return D;}function r(H,o,D){var S=e(H,D);if(H.pendingEvents.hasOwnProperty(o)&&H.pendingEvents[o]===S){return this;}H.pendingEvents[o]=S;var v=H.dispatchOperations[o];if(v){v.cancel();}var N=i(H,o);H.dispatchOperations[o]=N;return this;}function t(H,o){return f(H,H.pendingEvents[o]);}function w(){var o=Array.prototype.slice.call(arguments);o.shift();var C=0,O=new Array(o.length).join(",").split(",").map(function(){return 1;}),v=[],D={do:function(F){o.forEach(function(G,I){G.do(function(I,V){v[I]=V;C+=O[I];O[I]=0;if(C===o.length){F.apply(null,v);}}.bind(null,I));});return{off:D.off};},off:function(){var F=o.reduce(function(F,G){return G.off();},function(){});return{off:F};}};return D;}function x(H,o){var D=H.dispatchOperations[o];return D?D.dispatching:Promise.resolve();}function y(H,o){if(H.store.objectToKey.has(o)){return H.store.objectToKey.get(o);}H.store.nextKey++;var K="<"+typeof o+">#"+H.store.nextKey;H.store.keyToObject[K]=o;H.store.objectToKey.set(o,K);return K;}function z(H,K){return H.store.keyToObject[K];}function A(H){var o={};o.emit=r.bind(o,H);o.on=p.bind(null,H);o.once=q.bind(null,H);o.last=t.bind(null,H);o.join=w.bind(null,H);o.wait=x.bind(null,H);o._reset=function(H){H.pendingEvents={};H.subscribers={};H.dispatchOperations={};H.store=c();}.bind(null,H);return o;}function B(C){var D={pendingEvents:{},subscribers:{},dispatchOperations:{},store:c()},F=A(D),G=f(D,e(D,C));function H(o){var v=o.charAt(0);if(v.match(/[a-zA-Z0-9]/)){throw new Error("Invalid path separator '"+v+"'. Please ensure path starts with a non alphanumeric character");}var X=o.split(v);X.shift();return X;}function I(v,o){var X=v,Y="";if(arguments.length===2){X=o;Y=v;}return Y+"/"+X.join("/");}function K(v){return Object.prototype.toString.apply(v)==="[object Array]";}function L(v){return Object(v)!==v;}function M(v){return(K(v)?v.length:Object.keys(v).length)===0;}function N(v,X,Y,Z){var $="",a1=v,b1=[];Y.reduce(function(c1,d1,e1){$=I($,[d1]);a1=a1[d1];if(e1===Y.length-1){if(!L(Z)&&!L(a1)&&Object.keys(a1).length>0){var f1,g1=Object.keys(a1).reduce(function(o,d1){o[d1]=true;return o;},{}),h1=Object.keys(Z).some(function(d1){f1=d1;var o=g1.hasOwnProperty(d1);delete g1[d1];var m1=!L(a1[d1])&&Object.keys(a1[d1]).length>0;return!o||m1;}),i1=(Object.keys(g1).length>0),j1=(h1||i1);if(j1){var k1=h1?"One or more values are not defined in the channel contract or are defined as a non-empty object/array, for example, check '"+f1+"'.":"Some keys are missing in the event data: "+Object.keys(g1).join(", ")+".";throw new Error("Cannot write value '"+e(D,Z,true)+"' to path '"+$+"'. "+k1+" All childrens in the value must appear in the channel contract and must have a simple value or should be defined as an empty complex value");}var l1=Object.keys(Z).map(function(o){return{serializedPath:I($,[o]),value:Z[o]};});Array.prototype.push.apply(b1,l1);}c1[d1]=Z;}else if(!c1.hasOwnProperty(d1)){c1[d1]=K(a1)?[]:{};}b1.push({serializedPath:$,value:c1[d1]});return c1[d1];},X);return b1;}function O(o,v){var X="",Y=v.reduce(function(Z,$){X+="/"+$;if(K(Z)&&!$.match(/^[0-9]+$/)){throw new Error("Invalid array index '"+$+"' provided in path '"+X+"'");}if(!Z.hasOwnProperty($)){throw new Error("The item '"+$+"' from path "+X+" cannot be accessed in the object: "+e(D,Z));}return Z[$];},o);return Y;}function P(o,v,X){return v.reduce(function(Y,Z,$){var a1=$===(v.length-1);if(Y.hasOwnProperty(Z)){return Y[Z];}return a1?X:{};},o);}function Q(o,v){v.pop();var X=o,Y=[];return v.reduce(function(Z,$){X=X[$];Y.push($);Z.push({serializedPath:I(Y),value:X});return Z;},[]);}function R(o){return o.map(function(v){var X=v.serializedPath;if(!D.subscribers.hasOwnProperty(X)||D.subscribers[X].length===0){return null;}return{path:X,value:v.value};}).filter(function(v){return!!v;});}function S(o,v){var X=H(o);O(C,X);var Y=N(C,G,X,v);Y.forEach(function(Z){F.emit(Z.serializedPath,Z.value);});}function T(o){var v=H(o),X=O(C,v);return P(G,v,X);}function U(o){var v=H(o),X=I(v),Y=F.last(X),Z=D.pendingEvents.hasOwnProperty(X);if(Z){return F.on(X);}Y=O(C,v);if(typeof Y!=="undefined"&&(L(Y)||!M(f(F,e(F,Y))))){F.emit(X,Y);}return F.on(X);}function V(o){var v=U(o);v.off();return v;}function W(o){var v=H(o),X=Q(G,v),Y=R(X).map(function(Z){return F.wait(Z.path,Z.value);});return Promise.all(Y.concat(F.wait(o)));}return{emit:S,on:U,once:V,last:T,wait:W,join:w.bind(null,F)};}var E=A(_);E.createChannel=B.bind(null);return E;},false);})();}},"sap/ushell/core-lib-preload");
